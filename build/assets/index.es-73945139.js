import{c as Kv,r as Vv,a as ur,g as kv,e as Ir,_ as Gv}from"./index-a2d97f24.js";import{s as su,a as au,d as ou,b as cu,i as Rf,c as Wv,e as Yv,f as od,g as uu,p as Jv,J as Pn,h as hu,j as fu,k as xn,l as gn,m as cd,n as lu,H as Zn}from"./http-42c96367.js";var du={},Ha={},je={},ud={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});function t(y,I){var N=y>>>16&65535,P=y&65535,U=I>>>16&65535,K=I&65535;return P*K+(N*K+P*U<<16>>>0)|0}i.mul=Math.imul||t;function r(y,I){return y+I|0}i.add=r;function s(y,I){return y-I|0}i.sub=s;function o(y,I){return y<<I|y>>>32-I}i.rotl=o;function d(y,I){return y<<32-I|y>>>I}i.rotr=d;function O(y){return typeof y=="number"&&isFinite(y)&&Math.floor(y)===y}i.isInteger=Number.isInteger||O,i.MAX_SAFE_INTEGER=9007199254740991,i.isSafeInteger=function(y){return i.isInteger(y)&&y>=-i.MAX_SAFE_INTEGER&&y<=i.MAX_SAFE_INTEGER}})(ud);Object.defineProperty(je,"__esModule",{value:!0});var hd=ud;function Xv(i,t){return t===void 0&&(t=0),(i[t+0]<<8|i[t+1])<<16>>16}je.readInt16BE=Xv;function Qv(i,t){return t===void 0&&(t=0),(i[t+0]<<8|i[t+1])>>>0}je.readUint16BE=Qv;function Zv(i,t){return t===void 0&&(t=0),(i[t+1]<<8|i[t])<<16>>16}je.readInt16LE=Zv;function em(i,t){return t===void 0&&(t=0),(i[t+1]<<8|i[t])>>>0}je.readUint16LE=em;function fd(i,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=i>>>8,t[r+1]=i>>>0,t}je.writeUint16BE=fd;je.writeInt16BE=fd;function ld(i,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=i>>>0,t[r+1]=i>>>8,t}je.writeUint16LE=ld;je.writeInt16LE=ld;function Hc(i,t){return t===void 0&&(t=0),i[t]<<24|i[t+1]<<16|i[t+2]<<8|i[t+3]}je.readInt32BE=Hc;function qc(i,t){return t===void 0&&(t=0),(i[t]<<24|i[t+1]<<16|i[t+2]<<8|i[t+3])>>>0}je.readUint32BE=qc;function zc(i,t){return t===void 0&&(t=0),i[t+3]<<24|i[t+2]<<16|i[t+1]<<8|i[t]}je.readInt32LE=zc;function Bc(i,t){return t===void 0&&(t=0),(i[t+3]<<24|i[t+2]<<16|i[t+1]<<8|i[t])>>>0}je.readUint32LE=Bc;function Na(i,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=i>>>24,t[r+1]=i>>>16,t[r+2]=i>>>8,t[r+3]=i>>>0,t}je.writeUint32BE=Na;je.writeInt32BE=Na;function Ra(i,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=i>>>0,t[r+1]=i>>>8,t[r+2]=i>>>16,t[r+3]=i>>>24,t}je.writeUint32LE=Ra;je.writeInt32LE=Ra;function tm(i,t){t===void 0&&(t=0);var r=Hc(i,t),s=Hc(i,t+4);return r*4294967296+s-(s>>31)*4294967296}je.readInt64BE=tm;function rm(i,t){t===void 0&&(t=0);var r=qc(i,t),s=qc(i,t+4);return r*4294967296+s}je.readUint64BE=rm;function nm(i,t){t===void 0&&(t=0);var r=zc(i,t),s=zc(i,t+4);return s*4294967296+r-(r>>31)*4294967296}je.readInt64LE=nm;function im(i,t){t===void 0&&(t=0);var r=Bc(i,t),s=Bc(i,t+4);return s*4294967296+r}je.readUint64LE=im;function dd(i,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),Na(i/4294967296>>>0,t,r),Na(i>>>0,t,r+4),t}je.writeUint64BE=dd;je.writeInt64BE=dd;function pd(i,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),Ra(i>>>0,t,r),Ra(i/4294967296>>>0,t,r+4),t}je.writeUint64LE=pd;je.writeInt64LE=pd;function sm(i,t,r){if(r===void 0&&(r=0),i%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(i/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,o=1,d=i/8+r-1;d>=r;d--)s+=t[d]*o,o*=256;return s}je.readUintBE=sm;function am(i,t,r){if(r===void 0&&(r=0),i%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(i/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,o=1,d=r;d<r+i/8;d++)s+=t[d]*o,o*=256;return s}je.readUintLE=am;function om(i,t,r,s){if(r===void 0&&(r=new Uint8Array(i/8)),s===void 0&&(s=0),i%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!hd.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var o=1,d=i/8+s-1;d>=s;d--)r[d]=t/o&255,o*=256;return r}je.writeUintBE=om;function cm(i,t,r,s){if(r===void 0&&(r=new Uint8Array(i/8)),s===void 0&&(s=0),i%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!hd.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var o=1,d=s;d<s+i/8;d++)r[d]=t/o&255,o*=256;return r}je.writeUintLE=cm;function um(i,t){t===void 0&&(t=0);var r=new DataView(i.buffer,i.byteOffset,i.byteLength);return r.getFloat32(t)}je.readFloat32BE=um;function hm(i,t){t===void 0&&(t=0);var r=new DataView(i.buffer,i.byteOffset,i.byteLength);return r.getFloat32(t,!0)}je.readFloat32LE=hm;function fm(i,t){t===void 0&&(t=0);var r=new DataView(i.buffer,i.byteOffset,i.byteLength);return r.getFloat64(t)}je.readFloat64BE=fm;function lm(i,t){t===void 0&&(t=0);var r=new DataView(i.buffer,i.byteOffset,i.byteLength);return r.getFloat64(t,!0)}je.readFloat64LE=lm;function dm(i,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat32(r,i),t}je.writeFloat32BE=dm;function pm(i,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat32(r,i,!0),t}je.writeFloat32LE=pm;function gm(i,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat64(r,i),t}je.writeFloat64BE=gm;function _m(i,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat64(r,i,!0),t}je.writeFloat64LE=_m;var xr={};Object.defineProperty(xr,"__esModule",{value:!0});function ym(i){for(var t=0;t<i.length;t++)i[t]=0;return i}xr.wipe=ym;Object.defineProperty(Ha,"__esModule",{value:!0});var er=je,Kc=xr,vm=20;function mm(i,t,r){for(var s=1634760805,o=857760878,d=2036477234,O=1797285236,y=r[3]<<24|r[2]<<16|r[1]<<8|r[0],I=r[7]<<24|r[6]<<16|r[5]<<8|r[4],N=r[11]<<24|r[10]<<16|r[9]<<8|r[8],P=r[15]<<24|r[14]<<16|r[13]<<8|r[12],U=r[19]<<24|r[18]<<16|r[17]<<8|r[16],K=r[23]<<24|r[22]<<16|r[21]<<8|r[20],M=r[27]<<24|r[26]<<16|r[25]<<8|r[24],L=r[31]<<24|r[30]<<16|r[29]<<8|r[28],W=t[3]<<24|t[2]<<16|t[1]<<8|t[0],q=t[7]<<24|t[6]<<16|t[5]<<8|t[4],re=t[11]<<24|t[10]<<16|t[9]<<8|t[8],p=t[15]<<24|t[14]<<16|t[13]<<8|t[12],S=s,b=o,D=d,g=O,c=y,l=I,Y=N,h=P,_=U,w=K,C=M,E=L,v=W,$=q,z=re,Z=p,R=0;R<vm;R+=2)S=S+c|0,v^=S,v=v>>>32-16|v<<16,_=_+v|0,c^=_,c=c>>>32-12|c<<12,b=b+l|0,$^=b,$=$>>>32-16|$<<16,w=w+$|0,l^=w,l=l>>>32-12|l<<12,D=D+Y|0,z^=D,z=z>>>32-16|z<<16,C=C+z|0,Y^=C,Y=Y>>>32-12|Y<<12,g=g+h|0,Z^=g,Z=Z>>>32-16|Z<<16,E=E+Z|0,h^=E,h=h>>>32-12|h<<12,D=D+Y|0,z^=D,z=z>>>32-8|z<<8,C=C+z|0,Y^=C,Y=Y>>>32-7|Y<<7,g=g+h|0,Z^=g,Z=Z>>>32-8|Z<<8,E=E+Z|0,h^=E,h=h>>>32-7|h<<7,b=b+l|0,$^=b,$=$>>>32-8|$<<8,w=w+$|0,l^=w,l=l>>>32-7|l<<7,S=S+c|0,v^=S,v=v>>>32-8|v<<8,_=_+v|0,c^=_,c=c>>>32-7|c<<7,S=S+l|0,Z^=S,Z=Z>>>32-16|Z<<16,C=C+Z|0,l^=C,l=l>>>32-12|l<<12,b=b+Y|0,v^=b,v=v>>>32-16|v<<16,E=E+v|0,Y^=E,Y=Y>>>32-12|Y<<12,D=D+h|0,$^=D,$=$>>>32-16|$<<16,_=_+$|0,h^=_,h=h>>>32-12|h<<12,g=g+c|0,z^=g,z=z>>>32-16|z<<16,w=w+z|0,c^=w,c=c>>>32-12|c<<12,D=D+h|0,$^=D,$=$>>>32-8|$<<8,_=_+$|0,h^=_,h=h>>>32-7|h<<7,g=g+c|0,z^=g,z=z>>>32-8|z<<8,w=w+z|0,c^=w,c=c>>>32-7|c<<7,b=b+Y|0,v^=b,v=v>>>32-8|v<<8,E=E+v|0,Y^=E,Y=Y>>>32-7|Y<<7,S=S+l|0,Z^=S,Z=Z>>>32-8|Z<<8,C=C+Z|0,l^=C,l=l>>>32-7|l<<7;er.writeUint32LE(S+s|0,i,0),er.writeUint32LE(b+o|0,i,4),er.writeUint32LE(D+d|0,i,8),er.writeUint32LE(g+O|0,i,12),er.writeUint32LE(c+y|0,i,16),er.writeUint32LE(l+I|0,i,20),er.writeUint32LE(Y+N|0,i,24),er.writeUint32LE(h+P|0,i,28),er.writeUint32LE(_+U|0,i,32),er.writeUint32LE(w+K|0,i,36),er.writeUint32LE(C+M|0,i,40),er.writeUint32LE(E+L|0,i,44),er.writeUint32LE(v+W|0,i,48),er.writeUint32LE($+q|0,i,52),er.writeUint32LE(z+re|0,i,56),er.writeUint32LE(Z+p|0,i,60)}function gd(i,t,r,s,o){if(o===void 0&&(o=0),i.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<r.length)throw new Error("ChaCha: destination is shorter than source");var d,O;if(o===0){if(t.length!==8&&t.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");d=new Uint8Array(16),O=d.length-t.length,d.set(t,O)}else{if(t.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");d=t,O=o}for(var y=new Uint8Array(64),I=0;I<r.length;I+=64){mm(y,d,i);for(var N=I;N<I+64&&N<r.length;N++)s[N]=r[N]^y[N-I];wm(d,0,O)}return Kc.wipe(y),o===0&&Kc.wipe(d),s}Ha.streamXOR=gd;function bm(i,t,r,s){return s===void 0&&(s=0),Kc.wipe(r),gd(i,t,r,r,s)}Ha.stream=bm;function wm(i,t,r){for(var s=1;r--;)s=s+(i[t]&255)|0,i[t]=s&255,s>>>=8,t++;if(s>0)throw new Error("ChaCha: counter overflow")}var _d={},Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});function Em(i,t,r){return~(i-1)&t|i-1&r}Tn.select=Em;function Dm(i,t){return(i|0)-(t|0)-1>>>31&1}Tn.lessOrEqual=Dm;function yd(i,t){if(i.length!==t.length)return 0;for(var r=0,s=0;s<i.length;s++)r|=i[s]^t[s];return 1&r-1>>>8}Tn.compare=yd;function Sm(i,t){return i.length===0||t.length===0?!1:yd(i,t)!==0}Tn.equal=Sm;(function(i){Object.defineProperty(i,"__esModule",{value:!0});var t=Tn,r=xr;i.DIGEST_LENGTH=16;var s=function(){function O(y){this.digestLength=i.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var I=y[0]|y[1]<<8;this._r[0]=I&8191;var N=y[2]|y[3]<<8;this._r[1]=(I>>>13|N<<3)&8191;var P=y[4]|y[5]<<8;this._r[2]=(N>>>10|P<<6)&7939;var U=y[6]|y[7]<<8;this._r[3]=(P>>>7|U<<9)&8191;var K=y[8]|y[9]<<8;this._r[4]=(U>>>4|K<<12)&255,this._r[5]=K>>>1&8190;var M=y[10]|y[11]<<8;this._r[6]=(K>>>14|M<<2)&8191;var L=y[12]|y[13]<<8;this._r[7]=(M>>>11|L<<5)&8065;var W=y[14]|y[15]<<8;this._r[8]=(L>>>8|W<<8)&8191,this._r[9]=W>>>5&127,this._pad[0]=y[16]|y[17]<<8,this._pad[1]=y[18]|y[19]<<8,this._pad[2]=y[20]|y[21]<<8,this._pad[3]=y[22]|y[23]<<8,this._pad[4]=y[24]|y[25]<<8,this._pad[5]=y[26]|y[27]<<8,this._pad[6]=y[28]|y[29]<<8,this._pad[7]=y[30]|y[31]<<8}return O.prototype._blocks=function(y,I,N){for(var P=this._fin?0:2048,U=this._h[0],K=this._h[1],M=this._h[2],L=this._h[3],W=this._h[4],q=this._h[5],re=this._h[6],p=this._h[7],S=this._h[8],b=this._h[9],D=this._r[0],g=this._r[1],c=this._r[2],l=this._r[3],Y=this._r[4],h=this._r[5],_=this._r[6],w=this._r[7],C=this._r[8],E=this._r[9];N>=16;){var v=y[I+0]|y[I+1]<<8;U+=v&8191;var $=y[I+2]|y[I+3]<<8;K+=(v>>>13|$<<3)&8191;var z=y[I+4]|y[I+5]<<8;M+=($>>>10|z<<6)&8191;var Z=y[I+6]|y[I+7]<<8;L+=(z>>>7|Z<<9)&8191;var R=y[I+8]|y[I+9]<<8;W+=(Z>>>4|R<<12)&8191,q+=R>>>1&8191;var J=y[I+10]|y[I+11]<<8;re+=(R>>>14|J<<2)&8191;var te=y[I+12]|y[I+13]<<8;p+=(J>>>11|te<<5)&8191;var ae=y[I+14]|y[I+15]<<8;S+=(te>>>8|ae<<8)&8191,b+=ae>>>5|P;var ie=0,ye=ie;ye+=U*D,ye+=K*(5*E),ye+=M*(5*C),ye+=L*(5*w),ye+=W*(5*_),ie=ye>>>13,ye&=8191,ye+=q*(5*h),ye+=re*(5*Y),ye+=p*(5*l),ye+=S*(5*c),ye+=b*(5*g),ie+=ye>>>13,ye&=8191;var fe=ie;fe+=U*g,fe+=K*D,fe+=M*(5*E),fe+=L*(5*C),fe+=W*(5*w),ie=fe>>>13,fe&=8191,fe+=q*(5*_),fe+=re*(5*h),fe+=p*(5*Y),fe+=S*(5*l),fe+=b*(5*c),ie+=fe>>>13,fe&=8191;var me=ie;me+=U*c,me+=K*g,me+=M*D,me+=L*(5*E),me+=W*(5*C),ie=me>>>13,me&=8191,me+=q*(5*w),me+=re*(5*_),me+=p*(5*h),me+=S*(5*Y),me+=b*(5*l),ie+=me>>>13,me&=8191;var Q=ie;Q+=U*l,Q+=K*c,Q+=M*g,Q+=L*D,Q+=W*(5*E),ie=Q>>>13,Q&=8191,Q+=q*(5*C),Q+=re*(5*w),Q+=p*(5*_),Q+=S*(5*h),Q+=b*(5*Y),ie+=Q>>>13,Q&=8191;var X=ie;X+=U*Y,X+=K*l,X+=M*c,X+=L*g,X+=W*D,ie=X>>>13,X&=8191,X+=q*(5*E),X+=re*(5*C),X+=p*(5*w),X+=S*(5*_),X+=b*(5*h),ie+=X>>>13,X&=8191;var B=ie;B+=U*h,B+=K*Y,B+=M*l,B+=L*c,B+=W*g,ie=B>>>13,B&=8191,B+=q*D,B+=re*(5*E),B+=p*(5*C),B+=S*(5*w),B+=b*(5*_),ie+=B>>>13,B&=8191;var f=ie;f+=U*_,f+=K*h,f+=M*Y,f+=L*l,f+=W*c,ie=f>>>13,f&=8191,f+=q*g,f+=re*D,f+=p*(5*E),f+=S*(5*C),f+=b*(5*w),ie+=f>>>13,f&=8191;var j=ie;j+=U*w,j+=K*_,j+=M*h,j+=L*Y,j+=W*l,ie=j>>>13,j&=8191,j+=q*c,j+=re*g,j+=p*D,j+=S*(5*E),j+=b*(5*C),ie+=j>>>13,j&=8191;var he=ie;he+=U*C,he+=K*w,he+=M*_,he+=L*h,he+=W*Y,ie=he>>>13,he&=8191,he+=q*l,he+=re*c,he+=p*g,he+=S*D,he+=b*(5*E),ie+=he>>>13,he&=8191;var pe=ie;pe+=U*E,pe+=K*C,pe+=M*w,pe+=L*_,pe+=W*h,ie=pe>>>13,pe&=8191,pe+=q*Y,pe+=re*l,pe+=p*c,pe+=S*g,pe+=b*D,ie+=pe>>>13,pe&=8191,ie=(ie<<2)+ie|0,ie=ie+ye|0,ye=ie&8191,ie=ie>>>13,fe+=ie,U=ye,K=fe,M=me,L=Q,W=X,q=B,re=f,p=j,S=he,b=pe,I+=16,N-=16}this._h[0]=U,this._h[1]=K,this._h[2]=M,this._h[3]=L,this._h[4]=W,this._h[5]=q,this._h[6]=re,this._h[7]=p,this._h[8]=S,this._h[9]=b},O.prototype.finish=function(y,I){I===void 0&&(I=0);var N=new Uint16Array(10),P,U,K,M;if(this._leftover){for(M=this._leftover,this._buffer[M++]=1;M<16;M++)this._buffer[M]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(P=this._h[1]>>>13,this._h[1]&=8191,M=2;M<10;M++)this._h[M]+=P,P=this._h[M]>>>13,this._h[M]&=8191;for(this._h[0]+=P*5,P=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=P,P=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=P,N[0]=this._h[0]+5,P=N[0]>>>13,N[0]&=8191,M=1;M<10;M++)N[M]=this._h[M]+P,P=N[M]>>>13,N[M]&=8191;for(N[9]-=1<<13,U=(P^1)-1,M=0;M<10;M++)N[M]&=U;for(U=~U,M=0;M<10;M++)this._h[M]=this._h[M]&U|N[M];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,K=this._h[0]+this._pad[0],this._h[0]=K&65535,M=1;M<8;M++)K=(this._h[M]+this._pad[M]|0)+(K>>>16)|0,this._h[M]=K&65535;return y[I+0]=this._h[0]>>>0,y[I+1]=this._h[0]>>>8,y[I+2]=this._h[1]>>>0,y[I+3]=this._h[1]>>>8,y[I+4]=this._h[2]>>>0,y[I+5]=this._h[2]>>>8,y[I+6]=this._h[3]>>>0,y[I+7]=this._h[3]>>>8,y[I+8]=this._h[4]>>>0,y[I+9]=this._h[4]>>>8,y[I+10]=this._h[5]>>>0,y[I+11]=this._h[5]>>>8,y[I+12]=this._h[6]>>>0,y[I+13]=this._h[6]>>>8,y[I+14]=this._h[7]>>>0,y[I+15]=this._h[7]>>>8,this._finished=!0,this},O.prototype.update=function(y){var I=0,N=y.length,P;if(this._leftover){P=16-this._leftover,P>N&&(P=N);for(var U=0;U<P;U++)this._buffer[this._leftover+U]=y[I+U];if(N-=P,I+=P,this._leftover+=P,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(N>=16&&(P=N-N%16,this._blocks(y,I,P),I+=P,N-=P),N){for(var U=0;U<N;U++)this._buffer[this._leftover+U]=y[I+U];this._leftover+=N}return this},O.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var y=new Uint8Array(16);return this.finish(y),y},O.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},O}();i.Poly1305=s;function o(O,y){var I=new s(O);I.update(y);var N=I.digest();return I.clean(),N}i.oneTimeAuth=o;function d(O,y){return O.length!==i.DIGEST_LENGTH||y.length!==i.DIGEST_LENGTH?!1:t.equal(O,y)}i.equal=d})(_d);(function(i){Object.defineProperty(i,"__esModule",{value:!0});var t=Ha,r=_d,s=xr,o=je,d=Tn;i.KEY_LENGTH=32,i.NONCE_LENGTH=12,i.TAG_LENGTH=16;var O=new Uint8Array(16),y=function(){function I(N){if(this.nonceLength=i.NONCE_LENGTH,this.tagLength=i.TAG_LENGTH,N.length!==i.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(N)}return I.prototype.seal=function(N,P,U,K){if(N.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var M=new Uint8Array(16);M.set(N,M.length-N.length);var L=new Uint8Array(32);t.stream(this._key,M,L,4);var W=P.length+this.tagLength,q;if(K){if(K.length!==W)throw new Error("ChaCha20Poly1305: incorrect destination length");q=K}else q=new Uint8Array(W);return t.streamXOR(this._key,M,P,q,4),this._authenticate(q.subarray(q.length-this.tagLength,q.length),L,q.subarray(0,q.length-this.tagLength),U),s.wipe(M),q},I.prototype.open=function(N,P,U,K){if(N.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(P.length<this.tagLength)return null;var M=new Uint8Array(16);M.set(N,M.length-N.length);var L=new Uint8Array(32);t.stream(this._key,M,L,4);var W=new Uint8Array(this.tagLength);if(this._authenticate(W,L,P.subarray(0,P.length-this.tagLength),U),!d.equal(W,P.subarray(P.length-this.tagLength,P.length)))return null;var q=P.length-this.tagLength,re;if(K){if(K.length!==q)throw new Error("ChaCha20Poly1305: incorrect destination length");re=K}else re=new Uint8Array(q);return t.streamXOR(this._key,M,P.subarray(0,P.length-this.tagLength),re,4),s.wipe(M),re},I.prototype.clean=function(){return s.wipe(this._key),this},I.prototype._authenticate=function(N,P,U,K){var M=new r.Poly1305(P);K&&(M.update(K),K.length%16>0&&M.update(O.subarray(K.length%16))),M.update(U),U.length%16>0&&M.update(O.subarray(U.length%16));var L=new Uint8Array(8);K&&o.writeUint64LE(K.length,L),M.update(L),o.writeUint64LE(U.length,L),M.update(L);for(var W=M.digest(),q=0;q<W.length;q++)N[q]=W[q];M.clean(),s.wipe(W),s.wipe(L)},I}();i.ChaCha20Poly1305=y})(du);var vd={},gs={},pu={};Object.defineProperty(pu,"__esModule",{value:!0});function Om(i){return typeof i.saveState<"u"&&typeof i.restoreState<"u"&&typeof i.cleanSavedState<"u"}pu.isSerializableHash=Om;Object.defineProperty(gs,"__esModule",{value:!0});var Zr=pu,Im=Tn,xm=xr,md=function(){function i(t,r){this._finished=!1,this._inner=new t,this._outer=new t,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var s=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(s).clean():s.set(r);for(var o=0;o<s.length;o++)s[o]^=54;this._inner.update(s);for(var o=0;o<s.length;o++)s[o]^=106;this._outer.update(s),Zr.isSerializableHash(this._inner)&&Zr.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),xm.wipe(s)}return i.prototype.reset=function(){if(!Zr.isSerializableHash(this._inner)||!Zr.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},i.prototype.clean=function(){Zr.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Zr.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},i.prototype.update=function(t){return this._inner.update(t),this},i.prototype.finish=function(t){return this._finished?(this._outer.finish(t),this):(this._inner.finish(t),this._outer.update(t.subarray(0,this.digestLength)).finish(t),this._finished=!0,this)},i.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},i.prototype.saveState=function(){if(!Zr.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},i.prototype.restoreState=function(t){if(!Zr.isSerializableHash(this._inner)||!Zr.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(t),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},i.prototype.cleanSavedState=function(t){if(!Zr.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(t)},i}();gs.HMAC=md;function Am(i,t,r){var s=new md(i,t);s.update(r);var o=s.digest();return s.clean(),o}gs.hmac=Am;gs.equal=Im.equal;Object.defineProperty(vd,"__esModule",{value:!0});var Uf=gs,Ff=xr,Cm=function(){function i(t,r,s,o){s===void 0&&(s=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=t,this._info=o;var d=Uf.hmac(this._hash,s,r);this._hmac=new Uf.HMAC(t,d),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return i.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(t===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),t>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},i.prototype.expand=function(t){for(var r=new Uint8Array(t),s=0;s<r.length;s++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[s]=this._buffer[this._bufpos++];return r},i.prototype.clean=function(){this._hmac.clean(),Ff.wipe(this._buffer),Ff.wipe(this._counter),this._bufpos=0},i}(),Pm=vd.HKDF=Cm,Ti={},qa={},za={};Object.defineProperty(za,"__esModule",{value:!0});za.BrowserRandomSource=void 0;const jf=65536;class Tm{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const t=typeof self<"u"?self.crypto||self.msCrypto:null;t&&t.getRandomValues!==void 0&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(t);for(let s=0;s<r.length;s+=jf)this._crypto.getRandomValues(r.subarray(s,s+Math.min(r.length-s,jf)));return r}}za.BrowserRandomSource=Tm;var Ba={};Object.defineProperty(Ba,"__esModule",{value:!0});Ba.NodeRandomSource=void 0;const Nm=xr;class Rm{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Kv<"u"){const t=Vv;t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(t);if(r.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");const s=new Uint8Array(t);for(let o=0;o<s.length;o++)s[o]=r[o];return(0,Nm.wipe)(r),s}}Ba.NodeRandomSource=Rm;Object.defineProperty(qa,"__esModule",{value:!0});qa.SystemRandomSource=void 0;const Um=za,Fm=Ba;class jm{constructor(){if(this.isAvailable=!1,this.name="",this._source=new Um.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Fm.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)}}qa.SystemRandomSource=jm;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.randomStringForEntropy=i.randomString=i.randomUint32=i.randomBytes=i.defaultRandomSource=void 0;const t=qa,r=je,s=xr;i.defaultRandomSource=new t.SystemRandomSource;function o(N,P=i.defaultRandomSource){return P.randomBytes(N)}i.randomBytes=o;function d(N=i.defaultRandomSource){const P=o(4,N),U=(0,r.readUint32LE)(P);return(0,s.wipe)(P),U}i.randomUint32=d;const O="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function y(N,P=O,U=i.defaultRandomSource){if(P.length<2)throw new Error("randomString charset is too short");if(P.length>256)throw new Error("randomString charset is too long");let K="";const M=P.length,L=256-256%M;for(;N>0;){const W=o(Math.ceil(N*256/L),U);for(let q=0;q<W.length&&N>0;q++){const re=W[q];re<L&&(K+=P.charAt(re%M),N--)}(0,s.wipe)(W)}return K}i.randomString=y;function I(N,P=O,U=i.defaultRandomSource){const K=Math.ceil(N/(Math.log(P.length)/Math.LN2));return y(K,P,U)}i.randomStringForEntropy=I})(Ti);var Ka={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var t=je,r=xr;i.DIGEST_LENGTH=32,i.BLOCK_SIZE=64;var s=function(){function y(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return y.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},y.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},y.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},y.prototype.update=function(I,N){if(N===void 0&&(N=I.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var P=0;if(this._bytesHashed+=N,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&N>0;)this._buffer[this._bufferLength++]=I[P++],N--;this._bufferLength===this.blockSize&&(d(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(N>=this.blockSize&&(P=d(this._temp,this._state,I,P,N),N%=this.blockSize);N>0;)this._buffer[this._bufferLength++]=I[P++],N--;return this},y.prototype.finish=function(I){if(!this._finished){var N=this._bytesHashed,P=this._bufferLength,U=N/536870912|0,K=N<<3,M=N%64<56?64:128;this._buffer[P]=128;for(var L=P+1;L<M-8;L++)this._buffer[L]=0;t.writeUint32BE(U,this._buffer,M-8),t.writeUint32BE(K,this._buffer,M-4),d(this._temp,this._state,this._buffer,0,M),this._finished=!0}for(var L=0;L<this.digestLength/4;L++)t.writeUint32BE(this._state[L],I,L*4);return this},y.prototype.digest=function(){var I=new Uint8Array(this.digestLength);return this.finish(I),I},y.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},y.prototype.restoreState=function(I){return this._state.set(I.state),this._bufferLength=I.bufferLength,I.buffer&&this._buffer.set(I.buffer),this._bytesHashed=I.bytesHashed,this._finished=!1,this},y.prototype.cleanSavedState=function(I){r.wipe(I.state),I.buffer&&r.wipe(I.buffer),I.bufferLength=0,I.bytesHashed=0},y}();i.SHA256=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function d(y,I,N,P,U){for(;U>=64;){for(var K=I[0],M=I[1],L=I[2],W=I[3],q=I[4],re=I[5],p=I[6],S=I[7],b=0;b<16;b++){var D=P+b*4;y[b]=t.readUint32BE(N,D)}for(var b=16;b<64;b++){var g=y[b-2],c=(g>>>17|g<<32-17)^(g>>>19|g<<32-19)^g>>>10;g=y[b-15];var l=(g>>>7|g<<32-7)^(g>>>18|g<<32-18)^g>>>3;y[b]=(c+y[b-7]|0)+(l+y[b-16]|0)}for(var b=0;b<64;b++){var c=(((q>>>6|q<<26)^(q>>>11|q<<21)^(q>>>25|q<<7))+(q&re^~q&p)|0)+(S+(o[b]+y[b]|0)|0)|0,l=((K>>>2|K<<32-2)^(K>>>13|K<<32-13)^(K>>>22|K<<32-22))+(K&M^K&L^M&L)|0;S=p,p=re,re=q,q=W+c|0,W=L,L=M,M=K,K=c+l|0}I[0]+=K,I[1]+=M,I[2]+=L,I[3]+=W,I[4]+=q,I[5]+=re,I[6]+=p,I[7]+=S,P+=64,U-=64}return P}function O(y){var I=new s;I.update(y);var N=I.digest();return I.clean(),N}i.hash=O})(Ka);var gu={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.sharedKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.scalarMultBase=i.scalarMult=i.SHARED_KEY_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=void 0;const t=Ti,r=xr;i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=32,i.SHARED_KEY_LENGTH=32;function s(b){const D=new Float64Array(16);if(b)for(let g=0;g<b.length;g++)D[g]=b[g];return D}const o=new Uint8Array(32);o[0]=9;const d=s([56129,1]);function O(b){let D=1;for(let g=0;g<16;g++){let c=b[g]+D+65535;D=Math.floor(c/65536),b[g]=c-D*65536}b[0]+=D-1+37*(D-1)}function y(b,D,g){const c=~(g-1);for(let l=0;l<16;l++){const Y=c&(b[l]^D[l]);b[l]^=Y,D[l]^=Y}}function I(b,D){const g=s(),c=s();for(let l=0;l<16;l++)c[l]=D[l];O(c),O(c),O(c);for(let l=0;l<2;l++){g[0]=c[0]-65517;for(let h=1;h<15;h++)g[h]=c[h]-65535-(g[h-1]>>16&1),g[h-1]&=65535;g[15]=c[15]-32767-(g[14]>>16&1);const Y=g[15]>>16&1;g[14]&=65535,y(c,g,1-Y)}for(let l=0;l<16;l++)b[2*l]=c[l]&255,b[2*l+1]=c[l]>>8}function N(b,D){for(let g=0;g<16;g++)b[g]=D[2*g]+(D[2*g+1]<<8);b[15]&=32767}function P(b,D,g){for(let c=0;c<16;c++)b[c]=D[c]+g[c]}function U(b,D,g){for(let c=0;c<16;c++)b[c]=D[c]-g[c]}function K(b,D,g){let c,l,Y=0,h=0,_=0,w=0,C=0,E=0,v=0,$=0,z=0,Z=0,R=0,J=0,te=0,ae=0,ie=0,ye=0,fe=0,me=0,Q=0,X=0,B=0,f=0,j=0,he=0,pe=0,Oe=0,ze=0,Ve=0,$e=0,_t=0,yt=0,Me=g[0],Ie=g[1],Re=g[2],Ue=g[3],He=g[4],Ae=g[5],Fe=g[6],Se=g[7],Ce=g[8],Be=g[9],xe=g[10],ke=g[11],We=g[12],et=g[13],tt=g[14],Je=g[15];c=D[0],Y+=c*Me,h+=c*Ie,_+=c*Re,w+=c*Ue,C+=c*He,E+=c*Ae,v+=c*Fe,$+=c*Se,z+=c*Ce,Z+=c*Be,R+=c*xe,J+=c*ke,te+=c*We,ae+=c*et,ie+=c*tt,ye+=c*Je,c=D[1],h+=c*Me,_+=c*Ie,w+=c*Re,C+=c*Ue,E+=c*He,v+=c*Ae,$+=c*Fe,z+=c*Se,Z+=c*Ce,R+=c*Be,J+=c*xe,te+=c*ke,ae+=c*We,ie+=c*et,ye+=c*tt,fe+=c*Je,c=D[2],_+=c*Me,w+=c*Ie,C+=c*Re,E+=c*Ue,v+=c*He,$+=c*Ae,z+=c*Fe,Z+=c*Se,R+=c*Ce,J+=c*Be,te+=c*xe,ae+=c*ke,ie+=c*We,ye+=c*et,fe+=c*tt,me+=c*Je,c=D[3],w+=c*Me,C+=c*Ie,E+=c*Re,v+=c*Ue,$+=c*He,z+=c*Ae,Z+=c*Fe,R+=c*Se,J+=c*Ce,te+=c*Be,ae+=c*xe,ie+=c*ke,ye+=c*We,fe+=c*et,me+=c*tt,Q+=c*Je,c=D[4],C+=c*Me,E+=c*Ie,v+=c*Re,$+=c*Ue,z+=c*He,Z+=c*Ae,R+=c*Fe,J+=c*Se,te+=c*Ce,ae+=c*Be,ie+=c*xe,ye+=c*ke,fe+=c*We,me+=c*et,Q+=c*tt,X+=c*Je,c=D[5],E+=c*Me,v+=c*Ie,$+=c*Re,z+=c*Ue,Z+=c*He,R+=c*Ae,J+=c*Fe,te+=c*Se,ae+=c*Ce,ie+=c*Be,ye+=c*xe,fe+=c*ke,me+=c*We,Q+=c*et,X+=c*tt,B+=c*Je,c=D[6],v+=c*Me,$+=c*Ie,z+=c*Re,Z+=c*Ue,R+=c*He,J+=c*Ae,te+=c*Fe,ae+=c*Se,ie+=c*Ce,ye+=c*Be,fe+=c*xe,me+=c*ke,Q+=c*We,X+=c*et,B+=c*tt,f+=c*Je,c=D[7],$+=c*Me,z+=c*Ie,Z+=c*Re,R+=c*Ue,J+=c*He,te+=c*Ae,ae+=c*Fe,ie+=c*Se,ye+=c*Ce,fe+=c*Be,me+=c*xe,Q+=c*ke,X+=c*We,B+=c*et,f+=c*tt,j+=c*Je,c=D[8],z+=c*Me,Z+=c*Ie,R+=c*Re,J+=c*Ue,te+=c*He,ae+=c*Ae,ie+=c*Fe,ye+=c*Se,fe+=c*Ce,me+=c*Be,Q+=c*xe,X+=c*ke,B+=c*We,f+=c*et,j+=c*tt,he+=c*Je,c=D[9],Z+=c*Me,R+=c*Ie,J+=c*Re,te+=c*Ue,ae+=c*He,ie+=c*Ae,ye+=c*Fe,fe+=c*Se,me+=c*Ce,Q+=c*Be,X+=c*xe,B+=c*ke,f+=c*We,j+=c*et,he+=c*tt,pe+=c*Je,c=D[10],R+=c*Me,J+=c*Ie,te+=c*Re,ae+=c*Ue,ie+=c*He,ye+=c*Ae,fe+=c*Fe,me+=c*Se,Q+=c*Ce,X+=c*Be,B+=c*xe,f+=c*ke,j+=c*We,he+=c*et,pe+=c*tt,Oe+=c*Je,c=D[11],J+=c*Me,te+=c*Ie,ae+=c*Re,ie+=c*Ue,ye+=c*He,fe+=c*Ae,me+=c*Fe,Q+=c*Se,X+=c*Ce,B+=c*Be,f+=c*xe,j+=c*ke,he+=c*We,pe+=c*et,Oe+=c*tt,ze+=c*Je,c=D[12],te+=c*Me,ae+=c*Ie,ie+=c*Re,ye+=c*Ue,fe+=c*He,me+=c*Ae,Q+=c*Fe,X+=c*Se,B+=c*Ce,f+=c*Be,j+=c*xe,he+=c*ke,pe+=c*We,Oe+=c*et,ze+=c*tt,Ve+=c*Je,c=D[13],ae+=c*Me,ie+=c*Ie,ye+=c*Re,fe+=c*Ue,me+=c*He,Q+=c*Ae,X+=c*Fe,B+=c*Se,f+=c*Ce,j+=c*Be,he+=c*xe,pe+=c*ke,Oe+=c*We,ze+=c*et,Ve+=c*tt,$e+=c*Je,c=D[14],ie+=c*Me,ye+=c*Ie,fe+=c*Re,me+=c*Ue,Q+=c*He,X+=c*Ae,B+=c*Fe,f+=c*Se,j+=c*Ce,he+=c*Be,pe+=c*xe,Oe+=c*ke,ze+=c*We,Ve+=c*et,$e+=c*tt,_t+=c*Je,c=D[15],ye+=c*Me,fe+=c*Ie,me+=c*Re,Q+=c*Ue,X+=c*He,B+=c*Ae,f+=c*Fe,j+=c*Se,he+=c*Ce,pe+=c*Be,Oe+=c*xe,ze+=c*ke,Ve+=c*We,$e+=c*et,_t+=c*tt,yt+=c*Je,Y+=38*fe,h+=38*me,_+=38*Q,w+=38*X,C+=38*B,E+=38*f,v+=38*j,$+=38*he,z+=38*pe,Z+=38*Oe,R+=38*ze,J+=38*Ve,te+=38*$e,ae+=38*_t,ie+=38*yt,l=1,c=Y+l+65535,l=Math.floor(c/65536),Y=c-l*65536,c=h+l+65535,l=Math.floor(c/65536),h=c-l*65536,c=_+l+65535,l=Math.floor(c/65536),_=c-l*65536,c=w+l+65535,l=Math.floor(c/65536),w=c-l*65536,c=C+l+65535,l=Math.floor(c/65536),C=c-l*65536,c=E+l+65535,l=Math.floor(c/65536),E=c-l*65536,c=v+l+65535,l=Math.floor(c/65536),v=c-l*65536,c=$+l+65535,l=Math.floor(c/65536),$=c-l*65536,c=z+l+65535,l=Math.floor(c/65536),z=c-l*65536,c=Z+l+65535,l=Math.floor(c/65536),Z=c-l*65536,c=R+l+65535,l=Math.floor(c/65536),R=c-l*65536,c=J+l+65535,l=Math.floor(c/65536),J=c-l*65536,c=te+l+65535,l=Math.floor(c/65536),te=c-l*65536,c=ae+l+65535,l=Math.floor(c/65536),ae=c-l*65536,c=ie+l+65535,l=Math.floor(c/65536),ie=c-l*65536,c=ye+l+65535,l=Math.floor(c/65536),ye=c-l*65536,Y+=l-1+37*(l-1),l=1,c=Y+l+65535,l=Math.floor(c/65536),Y=c-l*65536,c=h+l+65535,l=Math.floor(c/65536),h=c-l*65536,c=_+l+65535,l=Math.floor(c/65536),_=c-l*65536,c=w+l+65535,l=Math.floor(c/65536),w=c-l*65536,c=C+l+65535,l=Math.floor(c/65536),C=c-l*65536,c=E+l+65535,l=Math.floor(c/65536),E=c-l*65536,c=v+l+65535,l=Math.floor(c/65536),v=c-l*65536,c=$+l+65535,l=Math.floor(c/65536),$=c-l*65536,c=z+l+65535,l=Math.floor(c/65536),z=c-l*65536,c=Z+l+65535,l=Math.floor(c/65536),Z=c-l*65536,c=R+l+65535,l=Math.floor(c/65536),R=c-l*65536,c=J+l+65535,l=Math.floor(c/65536),J=c-l*65536,c=te+l+65535,l=Math.floor(c/65536),te=c-l*65536,c=ae+l+65535,l=Math.floor(c/65536),ae=c-l*65536,c=ie+l+65535,l=Math.floor(c/65536),ie=c-l*65536,c=ye+l+65535,l=Math.floor(c/65536),ye=c-l*65536,Y+=l-1+37*(l-1),b[0]=Y,b[1]=h,b[2]=_,b[3]=w,b[4]=C,b[5]=E,b[6]=v,b[7]=$,b[8]=z,b[9]=Z,b[10]=R,b[11]=J,b[12]=te,b[13]=ae,b[14]=ie,b[15]=ye}function M(b,D){K(b,D,D)}function L(b,D){const g=s();for(let c=0;c<16;c++)g[c]=D[c];for(let c=253;c>=0;c--)M(g,g),c!==2&&c!==4&&K(g,g,D);for(let c=0;c<16;c++)b[c]=g[c]}function W(b,D){const g=new Uint8Array(32),c=new Float64Array(80),l=s(),Y=s(),h=s(),_=s(),w=s(),C=s();for(let z=0;z<31;z++)g[z]=b[z];g[31]=b[31]&127|64,g[0]&=248,N(c,D);for(let z=0;z<16;z++)Y[z]=c[z];l[0]=_[0]=1;for(let z=254;z>=0;--z){const Z=g[z>>>3]>>>(z&7)&1;y(l,Y,Z),y(h,_,Z),P(w,l,h),U(l,l,h),P(h,Y,_),U(Y,Y,_),M(_,w),M(C,l),K(l,h,l),K(h,Y,w),P(w,l,h),U(l,l,h),M(Y,l),U(h,_,C),K(l,h,d),P(l,l,_),K(h,h,l),K(l,_,C),K(_,Y,c),M(Y,w),y(l,Y,Z),y(h,_,Z)}for(let z=0;z<16;z++)c[z+16]=l[z],c[z+32]=h[z],c[z+48]=Y[z],c[z+64]=_[z];const E=c.subarray(32),v=c.subarray(16);L(E,E),K(v,v,E);const $=new Uint8Array(32);return I($,v),$}i.scalarMult=W;function q(b){return W(b,o)}i.scalarMultBase=q;function re(b){if(b.length!==i.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${i.SECRET_KEY_LENGTH} bytes`);const D=new Uint8Array(b);return{publicKey:q(D),secretKey:D}}i.generateKeyPairFromSeed=re;function p(b){const D=(0,t.randomBytes)(32,b),g=re(D);return(0,r.wipe)(D),g}i.generateKeyPair=p;function S(b,D,g=!1){if(b.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(D.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const c=W(b,D);if(g){let l=0;for(let Y=0;Y<c.length;Y++)l|=c[Y];if(l===0)throw new Error("X25519: invalid shared key")}return c}i.sharedKey=S})(gu);function _u(i){return globalThis.Buffer!=null?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function bd(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?_u(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function Vc(i,t){t||(t=i.reduce((o,d)=>o+d.length,0));const r=bd(t);let s=0;for(const o of i)r.set(o,s),s+=o.length;return _u(r)}function $m(i,t){if(i.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var o=0;o<i.length;o++){var d=i.charAt(o),O=d.charCodeAt(0);if(r[O]!==255)throw new TypeError(d+" is ambiguous");r[O]=o}var y=i.length,I=i.charAt(0),N=Math.log(y)/Math.log(256),P=Math.log(256)/Math.log(y);function U(L){if(L instanceof Uint8Array||(ArrayBuffer.isView(L)?L=new Uint8Array(L.buffer,L.byteOffset,L.byteLength):Array.isArray(L)&&(L=Uint8Array.from(L))),!(L instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(L.length===0)return"";for(var W=0,q=0,re=0,p=L.length;re!==p&&L[re]===0;)re++,W++;for(var S=(p-re)*P+1>>>0,b=new Uint8Array(S);re!==p;){for(var D=L[re],g=0,c=S-1;(D!==0||g<q)&&c!==-1;c--,g++)D+=256*b[c]>>>0,b[c]=D%y>>>0,D=D/y>>>0;if(D!==0)throw new Error("Non-zero carry");q=g,re++}for(var l=S-q;l!==S&&b[l]===0;)l++;for(var Y=I.repeat(W);l<S;++l)Y+=i.charAt(b[l]);return Y}function K(L){if(typeof L!="string")throw new TypeError("Expected String");if(L.length===0)return new Uint8Array;var W=0;if(L[W]!==" "){for(var q=0,re=0;L[W]===I;)q++,W++;for(var p=(L.length-W)*N+1>>>0,S=new Uint8Array(p);L[W];){var b=r[L.charCodeAt(W)];if(b===255)return;for(var D=0,g=p-1;(b!==0||D<re)&&g!==-1;g--,D++)b+=y*S[g]>>>0,S[g]=b%256>>>0,b=b/256>>>0;if(b!==0)throw new Error("Non-zero carry");re=D,W++}if(L[W]!==" "){for(var c=p-re;c!==p&&S[c]===0;)c++;for(var l=new Uint8Array(q+(p-c)),Y=q;c!==p;)l[Y++]=S[c++];return l}}}function M(L){var W=K(L);if(W)return W;throw new Error(`Non-${t} character`)}return{encode:U,decodeUnsafe:K,decode:M}}var Lm=$m,Mm=Lm;const Hm=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},qm=i=>new TextEncoder().encode(i),zm=i=>new TextDecoder().decode(i);class Bm{constructor(t,r,s){this.name=t,this.prefix=r,this.baseEncode=s}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Km{constructor(t,r,s){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return wd(this,t)}}class Vm{constructor(t){this.decoders=t}or(t){return wd(this,t)}decode(t){const r=t[0],s=this.decoders[r];if(s)return s.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const wd=(i,t)=>new Vm({...i.decoders||{[i.prefix]:i},...t.decoders||{[t.prefix]:t}});class km{constructor(t,r,s,o){this.name=t,this.prefix=r,this.baseEncode=s,this.baseDecode=o,this.encoder=new Bm(t,r,s),this.decoder=new Km(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Va=({name:i,prefix:t,encode:r,decode:s})=>new km(i,t,r,s),_s=({prefix:i,name:t,alphabet:r})=>{const{encode:s,decode:o}=Mm(r,t);return Va({prefix:i,name:t,encode:s,decode:d=>Hm(o(d))})},Gm=(i,t,r,s)=>{const o={};for(let P=0;P<t.length;++P)o[t[P]]=P;let d=i.length;for(;i[d-1]==="=";)--d;const O=new Uint8Array(d*r/8|0);let y=0,I=0,N=0;for(let P=0;P<d;++P){const U=o[i[P]];if(U===void 0)throw new SyntaxError(`Non-${s} character`);I=I<<r|U,y+=r,y>=8&&(y-=8,O[N++]=255&I>>y)}if(y>=r||255&I<<8-y)throw new SyntaxError("Unexpected end of data");return O},Wm=(i,t,r)=>{const s=t[t.length-1]==="=",o=(1<<r)-1;let d="",O=0,y=0;for(let I=0;I<i.length;++I)for(y=y<<8|i[I],O+=8;O>r;)O-=r,d+=t[o&y>>O];if(O&&(d+=t[o&y<<r-O]),s)for(;d.length*r&7;)d+="=";return d},Jt=({name:i,prefix:t,bitsPerChar:r,alphabet:s})=>Va({prefix:t,name:i,encode(o){return Wm(o,s,r)},decode(o){return Gm(o,s,r,i)}}),Ym=Va({prefix:"\0",name:"identity",encode:i=>zm(i),decode:i=>qm(i)}),Jm=Object.freeze(Object.defineProperty({__proto__:null,identity:Ym},Symbol.toStringTag,{value:"Module"})),Xm=Jt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Qm=Object.freeze(Object.defineProperty({__proto__:null,base2:Xm},Symbol.toStringTag,{value:"Module"})),Zm=Jt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),eb=Object.freeze(Object.defineProperty({__proto__:null,base8:Zm},Symbol.toStringTag,{value:"Module"})),tb=_s({prefix:"9",name:"base10",alphabet:"0123456789"}),rb=Object.freeze(Object.defineProperty({__proto__:null,base10:tb},Symbol.toStringTag,{value:"Module"})),nb=Jt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ib=Jt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),sb=Object.freeze(Object.defineProperty({__proto__:null,base16:nb,base16upper:ib},Symbol.toStringTag,{value:"Module"})),ab=Jt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ob=Jt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),cb=Jt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ub=Jt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),hb=Jt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),fb=Jt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),lb=Jt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),db=Jt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),pb=Jt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),gb=Object.freeze(Object.defineProperty({__proto__:null,base32:ab,base32hex:hb,base32hexpad:lb,base32hexpadupper:db,base32hexupper:fb,base32pad:cb,base32padupper:ub,base32upper:ob,base32z:pb},Symbol.toStringTag,{value:"Module"})),_b=_s({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),yb=_s({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),vb=Object.freeze(Object.defineProperty({__proto__:null,base36:_b,base36upper:yb},Symbol.toStringTag,{value:"Module"})),mb=_s({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),bb=_s({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),wb=Object.freeze(Object.defineProperty({__proto__:null,base58btc:mb,base58flickr:bb},Symbol.toStringTag,{value:"Module"})),Eb=Jt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Db=Jt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Sb=Jt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Ob=Jt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Ib=Object.freeze(Object.defineProperty({__proto__:null,base64:Eb,base64pad:Db,base64url:Sb,base64urlpad:Ob},Symbol.toStringTag,{value:"Module"})),Ed=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),xb=Ed.reduce((i,t,r)=>(i[r]=t,i),[]),Ab=Ed.reduce((i,t,r)=>(i[t.codePointAt(0)]=r,i),[]);function Cb(i){return i.reduce((t,r)=>(t+=xb[r],t),"")}function Pb(i){const t=[];for(const r of i){const s=Ab[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(s)}return new Uint8Array(t)}const Tb=Va({prefix:"🚀",name:"base256emoji",encode:Cb,decode:Pb}),Nb=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Tb},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const $f={...Jm,...Qm,...eb,...rb,...sb,...gb,...vb,...wb,...Ib,...Nb};function Dd(i,t,r,s){return{name:i,prefix:t,encoder:{name:i,prefix:t,encode:r},decoder:{decode:s}}}const Lf=Dd("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),bc=Dd("ascii","a",i=>{let t="a";for(let r=0;r<i.length;r++)t+=String.fromCharCode(i[r]);return t},i=>{i=i.substring(1);const t=bd(i.length);for(let r=0;r<i.length;r++)t[r]=i.charCodeAt(r);return t}),Sd={utf8:Lf,"utf-8":Lf,hex:$f.base16,latin1:bc,ascii:bc,binary:bc,...$f};function mr(i,t="utf8"){const r=Sd[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?_u(globalThis.Buffer.from(i,"utf-8")):r.decoder.decode(`${r.prefix}${i}`)}function fr(i,t="utf8"){const r=Sd[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(i.buffer,i.byteOffset,i.byteLength).toString("utf8"):r.encoder.encode(i).substring(1)}var De={},Ci={},Rb={get exports(){return Ci},set exports(i){Ci=i}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(i){var t,r,s,o,d,O,y,I,N,P,U,K,M,L,W,q,re,p,S,b,D,g,c;(function(l){var Y=typeof ur=="object"?ur:typeof self=="object"?self:typeof this=="object"?this:{};l(h(Y,h(i.exports)));function h(_,w){return _!==Y&&(typeof Object.create=="function"?Object.defineProperty(_,"__esModule",{value:!0}):_.__esModule=!0),function(C,E){return _[C]=w?w(C,E):E}}})(function(l){var Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,_){h.__proto__=_}||function(h,_){for(var w in _)_.hasOwnProperty(w)&&(h[w]=_[w])};t=function(h,_){Y(h,_);function w(){this.constructor=h}h.prototype=_===null?Object.create(_):(w.prototype=_.prototype,new w)},r=Object.assign||function(h){for(var _,w=1,C=arguments.length;w<C;w++){_=arguments[w];for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(h[E]=_[E])}return h},s=function(h,_){var w={};for(var C in h)Object.prototype.hasOwnProperty.call(h,C)&&_.indexOf(C)<0&&(w[C]=h[C]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var E=0,C=Object.getOwnPropertySymbols(h);E<C.length;E++)_.indexOf(C[E])<0&&Object.prototype.propertyIsEnumerable.call(h,C[E])&&(w[C[E]]=h[C[E]]);return w},o=function(h,_,w,C){var E=arguments.length,v=E<3?_:C===null?C=Object.getOwnPropertyDescriptor(_,w):C,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(h,_,w,C);else for(var z=h.length-1;z>=0;z--)($=h[z])&&(v=(E<3?$(v):E>3?$(_,w,v):$(_,w))||v);return E>3&&v&&Object.defineProperty(_,w,v),v},d=function(h,_){return function(w,C){_(w,C,h)}},O=function(h,_){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(h,_)},y=function(h,_,w,C){function E(v){return v instanceof w?v:new w(function($){$(v)})}return new(w||(w=Promise))(function(v,$){function z(J){try{R(C.next(J))}catch(te){$(te)}}function Z(J){try{R(C.throw(J))}catch(te){$(te)}}function R(J){J.done?v(J.value):E(J.value).then(z,Z)}R((C=C.apply(h,_||[])).next())})},I=function(h,_){var w={label:0,sent:function(){if(v[0]&1)throw v[1];return v[1]},trys:[],ops:[]},C,E,v,$;return $={next:z(0),throw:z(1),return:z(2)},typeof Symbol=="function"&&($[Symbol.iterator]=function(){return this}),$;function z(R){return function(J){return Z([R,J])}}function Z(R){if(C)throw new TypeError("Generator is already executing.");for(;w;)try{if(C=1,E&&(v=R[0]&2?E.return:R[0]?E.throw||((v=E.return)&&v.call(E),0):E.next)&&!(v=v.call(E,R[1])).done)return v;switch(E=0,v&&(R=[R[0]&2,v.value]),R[0]){case 0:case 1:v=R;break;case 4:return w.label++,{value:R[1],done:!1};case 5:w.label++,E=R[1],R=[0];continue;case 7:R=w.ops.pop(),w.trys.pop();continue;default:if(v=w.trys,!(v=v.length>0&&v[v.length-1])&&(R[0]===6||R[0]===2)){w=0;continue}if(R[0]===3&&(!v||R[1]>v[0]&&R[1]<v[3])){w.label=R[1];break}if(R[0]===6&&w.label<v[1]){w.label=v[1],v=R;break}if(v&&w.label<v[2]){w.label=v[2],w.ops.push(R);break}v[2]&&w.ops.pop(),w.trys.pop();continue}R=_.call(h,w)}catch(J){R=[6,J],E=0}finally{C=v=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}},c=function(h,_,w,C){C===void 0&&(C=w),h[C]=_[w]},N=function(h,_){for(var w in h)w!=="default"&&!_.hasOwnProperty(w)&&(_[w]=h[w])},P=function(h){var _=typeof Symbol=="function"&&Symbol.iterator,w=_&&h[_],C=0;if(w)return w.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&C>=h.length&&(h=void 0),{value:h&&h[C++],done:!h}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")},U=function(h,_){var w=typeof Symbol=="function"&&h[Symbol.iterator];if(!w)return h;var C=w.call(h),E,v=[],$;try{for(;(_===void 0||_-- >0)&&!(E=C.next()).done;)v.push(E.value)}catch(z){$={error:z}}finally{try{E&&!E.done&&(w=C.return)&&w.call(C)}finally{if($)throw $.error}}return v},K=function(){for(var h=[],_=0;_<arguments.length;_++)h=h.concat(U(arguments[_]));return h},M=function(){for(var h=0,_=0,w=arguments.length;_<w;_++)h+=arguments[_].length;for(var C=Array(h),E=0,_=0;_<w;_++)for(var v=arguments[_],$=0,z=v.length;$<z;$++,E++)C[E]=v[$];return C},L=function(h){return this instanceof L?(this.v=h,this):new L(h)},W=function(h,_,w){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C=w.apply(h,_||[]),E,v=[];return E={},$("next"),$("throw"),$("return"),E[Symbol.asyncIterator]=function(){return this},E;function $(ae){C[ae]&&(E[ae]=function(ie){return new Promise(function(ye,fe){v.push([ae,ie,ye,fe])>1||z(ae,ie)})})}function z(ae,ie){try{Z(C[ae](ie))}catch(ye){te(v[0][3],ye)}}function Z(ae){ae.value instanceof L?Promise.resolve(ae.value.v).then(R,J):te(v[0][2],ae)}function R(ae){z("next",ae)}function J(ae){z("throw",ae)}function te(ae,ie){ae(ie),v.shift(),v.length&&z(v[0][0],v[0][1])}},q=function(h){var _,w;return _={},C("next"),C("throw",function(E){throw E}),C("return"),_[Symbol.iterator]=function(){return this},_;function C(E,v){_[E]=h[E]?function($){return(w=!w)?{value:L(h[E]($)),done:E==="return"}:v?v($):$}:v}},re=function(h){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _=h[Symbol.asyncIterator],w;return _?_.call(h):(h=typeof P=="function"?P(h):h[Symbol.iterator](),w={},C("next"),C("throw"),C("return"),w[Symbol.asyncIterator]=function(){return this},w);function C(v){w[v]=h[v]&&function($){return new Promise(function(z,Z){$=h[v]($),E(z,Z,$.done,$.value)})}}function E(v,$,z,Z){Promise.resolve(Z).then(function(R){v({value:R,done:z})},$)}},p=function(h,_){return Object.defineProperty?Object.defineProperty(h,"raw",{value:_}):h.raw=_,h},S=function(h){if(h&&h.__esModule)return h;var _={};if(h!=null)for(var w in h)Object.hasOwnProperty.call(h,w)&&(_[w]=h[w]);return _.default=h,_},b=function(h){return h&&h.__esModule?h:{default:h}},D=function(h,_){if(!_.has(h))throw new TypeError("attempted to get private field on non-instance");return _.get(h)},g=function(h,_,w){if(!_.has(h))throw new TypeError("attempted to set private field on non-instance");return _.set(h,w),w},l("__extends",t),l("__assign",r),l("__rest",s),l("__decorate",o),l("__param",d),l("__metadata",O),l("__awaiter",y),l("__generator",I),l("__exportStar",N),l("__createBinding",c),l("__values",P),l("__read",U),l("__spread",K),l("__spreadArrays",M),l("__await",L),l("__asyncGenerator",W),l("__asyncDelegator",q),l("__asyncValues",re),l("__makeTemplateObject",p),l("__importStar",S),l("__importDefault",b),l("__classPrivateFieldGet",D),l("__classPrivateFieldSet",g)})})(Rb);var wc={},ts={},Mf;function Ub(){if(Mf)return ts;Mf=1,Object.defineProperty(ts,"__esModule",{value:!0}),ts.delay=void 0;function i(t){return new Promise(r=>{setTimeout(()=>{r(!0)},t)})}return ts.delay=i,ts}var Gn={},Ec={},Wn={},Hf;function Fb(){return Hf||(Hf=1,Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.ONE_THOUSAND=Wn.ONE_HUNDRED=void 0,Wn.ONE_HUNDRED=100,Wn.ONE_THOUSAND=1e3),Wn}var Dc={},qf;function jb(){return qf||(qf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ONE_YEAR=i.FOUR_WEEKS=i.THREE_WEEKS=i.TWO_WEEKS=i.ONE_WEEK=i.THIRTY_DAYS=i.SEVEN_DAYS=i.FIVE_DAYS=i.THREE_DAYS=i.ONE_DAY=i.TWENTY_FOUR_HOURS=i.TWELVE_HOURS=i.SIX_HOURS=i.THREE_HOURS=i.ONE_HOUR=i.SIXTY_MINUTES=i.THIRTY_MINUTES=i.TEN_MINUTES=i.FIVE_MINUTES=i.ONE_MINUTE=i.SIXTY_SECONDS=i.THIRTY_SECONDS=i.TEN_SECONDS=i.FIVE_SECONDS=i.ONE_SECOND=void 0,i.ONE_SECOND=1,i.FIVE_SECONDS=5,i.TEN_SECONDS=10,i.THIRTY_SECONDS=30,i.SIXTY_SECONDS=60,i.ONE_MINUTE=i.SIXTY_SECONDS,i.FIVE_MINUTES=i.ONE_MINUTE*5,i.TEN_MINUTES=i.ONE_MINUTE*10,i.THIRTY_MINUTES=i.ONE_MINUTE*30,i.SIXTY_MINUTES=i.ONE_MINUTE*60,i.ONE_HOUR=i.SIXTY_MINUTES,i.THREE_HOURS=i.ONE_HOUR*3,i.SIX_HOURS=i.ONE_HOUR*6,i.TWELVE_HOURS=i.ONE_HOUR*12,i.TWENTY_FOUR_HOURS=i.ONE_HOUR*24,i.ONE_DAY=i.TWENTY_FOUR_HOURS,i.THREE_DAYS=i.ONE_DAY*3,i.FIVE_DAYS=i.ONE_DAY*5,i.SEVEN_DAYS=i.ONE_DAY*7,i.THIRTY_DAYS=i.ONE_DAY*30,i.ONE_WEEK=i.SEVEN_DAYS,i.TWO_WEEKS=i.ONE_WEEK*2,i.THREE_WEEKS=i.ONE_WEEK*3,i.FOUR_WEEKS=i.ONE_WEEK*4,i.ONE_YEAR=i.ONE_DAY*365}(Dc)),Dc}var zf;function Od(){return zf||(zf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const t=Ci;t.__exportStar(Fb(),i),t.__exportStar(jb(),i)}(Ec)),Ec}var Bf;function $b(){if(Bf)return Gn;Bf=1,Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.fromMiliseconds=Gn.toMiliseconds=void 0;const i=Od();function t(s){return s*i.ONE_THOUSAND}Gn.toMiliseconds=t;function r(s){return Math.floor(s/i.ONE_THOUSAND)}return Gn.fromMiliseconds=r,Gn}var Kf;function Lb(){return Kf||(Kf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const t=Ci;t.__exportStar(Ub(),i),t.__exportStar($b(),i)}(wc)),wc}var Ii={},Vf;function Mb(){if(Vf)return Ii;Vf=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.Watch=void 0;class i{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const s=this.get(r);if(typeof s.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const o=Date.now()-s.started;this.timestamps.set(r,{started:s.started,elapsed:o})}get(r){const s=this.timestamps.get(r);if(typeof s>"u")throw new Error(`No timestamp found for label: ${r}`);return s}elapsed(r){const s=this.get(r);return s.elapsed||Date.now()-s.started}}return Ii.Watch=i,Ii.default=i,Ii}var Sc={},rs={},kf;function Hb(){if(kf)return rs;kf=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.IWatch=void 0;class i{}return rs.IWatch=i,rs}var Gf;function qb(){return Gf||(Gf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),Ci.__exportStar(Hb(),i)}(Sc)),Sc}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const t=Ci;t.__exportStar(Lb(),i),t.__exportStar(Mb(),i),t.__exportStar(qb(),i),t.__exportStar(Od(),i)})(De);var ft={};Object.defineProperty(ft,"__esModule",{value:!0});ft.getLocalStorage=ft.getLocalStorageOrThrow=ft.getCrypto=ft.getCryptoOrThrow=ft.getLocation=ft.getLocationOrThrow=ft.getNavigator=ft.getNavigatorOrThrow=ft.getDocument=ft.getDocumentOrThrow=ft.getFromWindowOrThrow=ft.getFromWindow=void 0;function ei(i){let t;return typeof window<"u"&&typeof window[i]<"u"&&(t=window[i]),t}ft.getFromWindow=ei;function Ni(i){const t=ei(i);if(!t)throw new Error(`${i} is not defined in Window`);return t}ft.getFromWindowOrThrow=Ni;function zb(){return Ni("document")}ft.getDocumentOrThrow=zb;function Bb(){return ei("document")}ft.getDocument=Bb;function Kb(){return Ni("navigator")}ft.getNavigatorOrThrow=Kb;function Vb(){return ei("navigator")}ft.getNavigator=Vb;function kb(){return Ni("location")}ft.getLocationOrThrow=kb;function Gb(){return ei("location")}ft.getLocation=Gb;function Wb(){return Ni("crypto")}ft.getCryptoOrThrow=Wb;function Yb(){return ei("crypto")}ft.getCrypto=Yb;function Jb(){return Ni("localStorage")}ft.getLocalStorageOrThrow=Jb;function Xb(){return ei("localStorage")}ft.getLocalStorage=Xb;var yu={};Object.defineProperty(yu,"__esModule",{value:!0});yu.getWindowMetadata=void 0;const Wf=ft;function Qb(){let i,t;try{i=Wf.getDocumentOrThrow(),t=Wf.getLocationOrThrow()}catch{return null}function r(){const U=i.getElementsByTagName("link"),K=[];for(let M=0;M<U.length;M++){const L=U[M],W=L.getAttribute("rel");if(W&&W.toLowerCase().indexOf("icon")>-1){const q=L.getAttribute("href");if(q)if(q.toLowerCase().indexOf("https:")===-1&&q.toLowerCase().indexOf("http:")===-1&&q.indexOf("//")!==0){let re=t.protocol+"//"+t.host;if(q.indexOf("/")===0)re+=q;else{const p=t.pathname.split("/");p.pop();const S=p.join("/");re+=S+"/"+q}K.push(re)}else if(q.indexOf("//")===0){const re=t.protocol+q;K.push(re)}else K.push(q)}}return K}function s(...U){const K=i.getElementsByTagName("meta");for(let M=0;M<K.length;M++){const L=K[M],W=["itemprop","property","name"].map(q=>L.getAttribute(q)).filter(q=>q?U.includes(q):!1);if(W.length&&W){const q=L.getAttribute("content");if(q)return q}}return""}function o(){let U=s("name","og:site_name","og:title","twitter:title");return U||(U=i.title),U}function d(){return s("description","og:description","twitter:description","keywords")}const O=o(),y=d(),I=t.origin,N=r();return{description:y,url:I,icons:N,name:O}}yu.getWindowMetadata=Qb;var Zb={},vu=function(i,t){for(var r={},s=Object.keys(i),o=Array.isArray(t),d=0;d<s.length;d++){var O=s[d],y=i[O];(o?t.indexOf(O)!==-1:t(O,y,i))&&(r[O]=y)}return r};(function(i){const t=au,r=ou,s=su,o=vu,d=p=>p==null,O=Symbol("encodeFragmentIdentifier");function y(p){switch(p.arrayFormat){case"index":return S=>(b,D)=>{const g=b.length;return D===void 0||p.skipNull&&D===null||p.skipEmptyString&&D===""?b:D===null?[...b,[P(S,p),"[",g,"]"].join("")]:[...b,[P(S,p),"[",P(g,p),"]=",P(D,p)].join("")]};case"bracket":return S=>(b,D)=>D===void 0||p.skipNull&&D===null||p.skipEmptyString&&D===""?b:D===null?[...b,[P(S,p),"[]"].join("")]:[...b,[P(S,p),"[]=",P(D,p)].join("")];case"colon-list-separator":return S=>(b,D)=>D===void 0||p.skipNull&&D===null||p.skipEmptyString&&D===""?b:D===null?[...b,[P(S,p),":list="].join("")]:[...b,[P(S,p),":list=",P(D,p)].join("")];case"comma":case"separator":case"bracket-separator":{const S=p.arrayFormat==="bracket-separator"?"[]=":"=";return b=>(D,g)=>g===void 0||p.skipNull&&g===null||p.skipEmptyString&&g===""?D:(g=g===null?"":g,D.length===0?[[P(b,p),S,P(g,p)].join("")]:[[D,P(g,p)].join(p.arrayFormatSeparator)])}default:return S=>(b,D)=>D===void 0||p.skipNull&&D===null||p.skipEmptyString&&D===""?b:D===null?[...b,P(S,p)]:[...b,[P(S,p),"=",P(D,p)].join("")]}}function I(p){let S;switch(p.arrayFormat){case"index":return(b,D,g)=>{if(S=/\[(\d*)\]$/.exec(b),b=b.replace(/\[\d*\]$/,""),!S){g[b]=D;return}g[b]===void 0&&(g[b]={}),g[b][S[1]]=D};case"bracket":return(b,D,g)=>{if(S=/(\[\])$/.exec(b),b=b.replace(/\[\]$/,""),!S){g[b]=D;return}if(g[b]===void 0){g[b]=[D];return}g[b]=[].concat(g[b],D)};case"colon-list-separator":return(b,D,g)=>{if(S=/(:list)$/.exec(b),b=b.replace(/:list$/,""),!S){g[b]=D;return}if(g[b]===void 0){g[b]=[D];return}g[b]=[].concat(g[b],D)};case"comma":case"separator":return(b,D,g)=>{const c=typeof D=="string"&&D.includes(p.arrayFormatSeparator),l=typeof D=="string"&&!c&&U(D,p).includes(p.arrayFormatSeparator);D=l?U(D,p):D;const Y=c||l?D.split(p.arrayFormatSeparator).map(h=>U(h,p)):D===null?D:U(D,p);g[b]=Y};case"bracket-separator":return(b,D,g)=>{const c=/(\[\])$/.test(b);if(b=b.replace(/\[\]$/,""),!c){g[b]=D&&U(D,p);return}const l=D===null?[]:D.split(p.arrayFormatSeparator).map(Y=>U(Y,p));if(g[b]===void 0){g[b]=l;return}g[b]=[].concat(g[b],l)};default:return(b,D,g)=>{if(g[b]===void 0){g[b]=D;return}g[b]=[].concat(g[b],D)}}}function N(p){if(typeof p!="string"||p.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function P(p,S){return S.encode?S.strict?t(p):encodeURIComponent(p):p}function U(p,S){return S.decode?r(p):p}function K(p){return Array.isArray(p)?p.sort():typeof p=="object"?K(Object.keys(p)).sort((S,b)=>Number(S)-Number(b)).map(S=>p[S]):p}function M(p){const S=p.indexOf("#");return S!==-1&&(p=p.slice(0,S)),p}function L(p){let S="";const b=p.indexOf("#");return b!==-1&&(S=p.slice(b)),S}function W(p){p=M(p);const S=p.indexOf("?");return S===-1?"":p.slice(S+1)}function q(p,S){return S.parseNumbers&&!Number.isNaN(Number(p))&&typeof p=="string"&&p.trim()!==""?p=Number(p):S.parseBooleans&&p!==null&&(p.toLowerCase()==="true"||p.toLowerCase()==="false")&&(p=p.toLowerCase()==="true"),p}function re(p,S){S=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},S),N(S.arrayFormatSeparator);const b=I(S),D=Object.create(null);if(typeof p!="string"||(p=p.trim().replace(/^[?#&]/,""),!p))return D;for(const g of p.split("&")){if(g==="")continue;let[c,l]=s(S.decode?g.replace(/\+/g," "):g,"=");l=l===void 0?null:["comma","separator","bracket-separator"].includes(S.arrayFormat)?l:U(l,S),b(U(c,S),l,D)}for(const g of Object.keys(D)){const c=D[g];if(typeof c=="object"&&c!==null)for(const l of Object.keys(c))c[l]=q(c[l],S);else D[g]=q(c,S)}return S.sort===!1?D:(S.sort===!0?Object.keys(D).sort():Object.keys(D).sort(S.sort)).reduce((g,c)=>{const l=D[c];return Boolean(l)&&typeof l=="object"&&!Array.isArray(l)?g[c]=K(l):g[c]=l,g},Object.create(null))}i.extract=W,i.parse=re,i.stringify=(p,S)=>{if(!p)return"";S=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},S),N(S.arrayFormatSeparator);const b=l=>S.skipNull&&d(p[l])||S.skipEmptyString&&p[l]==="",D=y(S),g={};for(const l of Object.keys(p))b(l)||(g[l]=p[l]);const c=Object.keys(g);return S.sort!==!1&&c.sort(S.sort),c.map(l=>{const Y=p[l];return Y===void 0?"":Y===null?P(l,S):Array.isArray(Y)?Y.length===0&&S.arrayFormat==="bracket-separator"?P(l,S)+"[]":Y.reduce(D(l),[]).join("&"):P(l,S)+"="+P(Y,S)}).filter(l=>l.length>0).join("&")},i.parseUrl=(p,S)=>{S=Object.assign({decode:!0},S);const[b,D]=s(p,"#");return Object.assign({url:b.split("?")[0]||"",query:re(W(p),S)},S&&S.parseFragmentIdentifier&&D?{fragmentIdentifier:U(D,S)}:{})},i.stringifyUrl=(p,S)=>{S=Object.assign({encode:!0,strict:!0,[O]:!0},S);const b=M(p.url).split("?")[0]||"",D=i.extract(p.url),g=i.parse(D,{sort:!1}),c=Object.assign(g,p.query);let l=i.stringify(c,S);l&&(l=`?${l}`);let Y=L(p.url);return p.fragmentIdentifier&&(Y=`#${S[O]?P(p.fragmentIdentifier,S):p.fragmentIdentifier}`),`${b}${l}${Y}`},i.pick=(p,S,b)=>{b=Object.assign({parseFragmentIdentifier:!0,[O]:!1},b);const{url:D,query:g,fragmentIdentifier:c}=i.parseUrl(p,b);return i.stringifyUrl({url:D,query:o(g,S),fragmentIdentifier:c},b)},i.exclude=(p,S,b)=>{const D=Array.isArray(S)?g=>!S.includes(g):(g,c)=>!S(g,c);return i.pick(p,D,b)}})(Zb);const ew={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function tw(i,t=[]){const r=[];return Object.keys(i).forEach(s=>{if(t.length&&!t.includes(s))return;const o=i[s];r.push(...o.accounts)}),r}const rw={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function nw(i,t){const{message:r,code:s}=rw[i];return{message:t?`${r} ${t}`:r,code:s}}function kc(i,t){return Array.isArray(i)?typeof t<"u"&&i.length?i.every(t):!0:!1}var ka={},Ua={},iw={get exports(){return Ua},set exports(i){Ua=i}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(i){var t,r,s,o,d,O,y,I,N,P,U,K,M,L,W,q,re,p,S,b,D,g,c;(function(l){var Y=typeof ur=="object"?ur:typeof self=="object"?self:typeof this=="object"?this:{};l(h(Y,h(i.exports)));function h(_,w){return _!==Y&&(typeof Object.create=="function"?Object.defineProperty(_,"__esModule",{value:!0}):_.__esModule=!0),function(C,E){return _[C]=w?w(C,E):E}}})(function(l){var Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,_){h.__proto__=_}||function(h,_){for(var w in _)_.hasOwnProperty(w)&&(h[w]=_[w])};t=function(h,_){Y(h,_);function w(){this.constructor=h}h.prototype=_===null?Object.create(_):(w.prototype=_.prototype,new w)},r=Object.assign||function(h){for(var _,w=1,C=arguments.length;w<C;w++){_=arguments[w];for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(h[E]=_[E])}return h},s=function(h,_){var w={};for(var C in h)Object.prototype.hasOwnProperty.call(h,C)&&_.indexOf(C)<0&&(w[C]=h[C]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var E=0,C=Object.getOwnPropertySymbols(h);E<C.length;E++)_.indexOf(C[E])<0&&Object.prototype.propertyIsEnumerable.call(h,C[E])&&(w[C[E]]=h[C[E]]);return w},o=function(h,_,w,C){var E=arguments.length,v=E<3?_:C===null?C=Object.getOwnPropertyDescriptor(_,w):C,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(h,_,w,C);else for(var z=h.length-1;z>=0;z--)($=h[z])&&(v=(E<3?$(v):E>3?$(_,w,v):$(_,w))||v);return E>3&&v&&Object.defineProperty(_,w,v),v},d=function(h,_){return function(w,C){_(w,C,h)}},O=function(h,_){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(h,_)},y=function(h,_,w,C){function E(v){return v instanceof w?v:new w(function($){$(v)})}return new(w||(w=Promise))(function(v,$){function z(J){try{R(C.next(J))}catch(te){$(te)}}function Z(J){try{R(C.throw(J))}catch(te){$(te)}}function R(J){J.done?v(J.value):E(J.value).then(z,Z)}R((C=C.apply(h,_||[])).next())})},I=function(h,_){var w={label:0,sent:function(){if(v[0]&1)throw v[1];return v[1]},trys:[],ops:[]},C,E,v,$;return $={next:z(0),throw:z(1),return:z(2)},typeof Symbol=="function"&&($[Symbol.iterator]=function(){return this}),$;function z(R){return function(J){return Z([R,J])}}function Z(R){if(C)throw new TypeError("Generator is already executing.");for(;w;)try{if(C=1,E&&(v=R[0]&2?E.return:R[0]?E.throw||((v=E.return)&&v.call(E),0):E.next)&&!(v=v.call(E,R[1])).done)return v;switch(E=0,v&&(R=[R[0]&2,v.value]),R[0]){case 0:case 1:v=R;break;case 4:return w.label++,{value:R[1],done:!1};case 5:w.label++,E=R[1],R=[0];continue;case 7:R=w.ops.pop(),w.trys.pop();continue;default:if(v=w.trys,!(v=v.length>0&&v[v.length-1])&&(R[0]===6||R[0]===2)){w=0;continue}if(R[0]===3&&(!v||R[1]>v[0]&&R[1]<v[3])){w.label=R[1];break}if(R[0]===6&&w.label<v[1]){w.label=v[1],v=R;break}if(v&&w.label<v[2]){w.label=v[2],w.ops.push(R);break}v[2]&&w.ops.pop(),w.trys.pop();continue}R=_.call(h,w)}catch(J){R=[6,J],E=0}finally{C=v=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}},c=function(h,_,w,C){C===void 0&&(C=w),h[C]=_[w]},N=function(h,_){for(var w in h)w!=="default"&&!_.hasOwnProperty(w)&&(_[w]=h[w])},P=function(h){var _=typeof Symbol=="function"&&Symbol.iterator,w=_&&h[_],C=0;if(w)return w.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&C>=h.length&&(h=void 0),{value:h&&h[C++],done:!h}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")},U=function(h,_){var w=typeof Symbol=="function"&&h[Symbol.iterator];if(!w)return h;var C=w.call(h),E,v=[],$;try{for(;(_===void 0||_-- >0)&&!(E=C.next()).done;)v.push(E.value)}catch(z){$={error:z}}finally{try{E&&!E.done&&(w=C.return)&&w.call(C)}finally{if($)throw $.error}}return v},K=function(){for(var h=[],_=0;_<arguments.length;_++)h=h.concat(U(arguments[_]));return h},M=function(){for(var h=0,_=0,w=arguments.length;_<w;_++)h+=arguments[_].length;for(var C=Array(h),E=0,_=0;_<w;_++)for(var v=arguments[_],$=0,z=v.length;$<z;$++,E++)C[E]=v[$];return C},L=function(h){return this instanceof L?(this.v=h,this):new L(h)},W=function(h,_,w){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C=w.apply(h,_||[]),E,v=[];return E={},$("next"),$("throw"),$("return"),E[Symbol.asyncIterator]=function(){return this},E;function $(ae){C[ae]&&(E[ae]=function(ie){return new Promise(function(ye,fe){v.push([ae,ie,ye,fe])>1||z(ae,ie)})})}function z(ae,ie){try{Z(C[ae](ie))}catch(ye){te(v[0][3],ye)}}function Z(ae){ae.value instanceof L?Promise.resolve(ae.value.v).then(R,J):te(v[0][2],ae)}function R(ae){z("next",ae)}function J(ae){z("throw",ae)}function te(ae,ie){ae(ie),v.shift(),v.length&&z(v[0][0],v[0][1])}},q=function(h){var _,w;return _={},C("next"),C("throw",function(E){throw E}),C("return"),_[Symbol.iterator]=function(){return this},_;function C(E,v){_[E]=h[E]?function($){return(w=!w)?{value:L(h[E]($)),done:E==="return"}:v?v($):$}:v}},re=function(h){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _=h[Symbol.asyncIterator],w;return _?_.call(h):(h=typeof P=="function"?P(h):h[Symbol.iterator](),w={},C("next"),C("throw"),C("return"),w[Symbol.asyncIterator]=function(){return this},w);function C(v){w[v]=h[v]&&function($){return new Promise(function(z,Z){$=h[v]($),E(z,Z,$.done,$.value)})}}function E(v,$,z,Z){Promise.resolve(Z).then(function(R){v({value:R,done:z})},$)}},p=function(h,_){return Object.defineProperty?Object.defineProperty(h,"raw",{value:_}):h.raw=_,h},S=function(h){if(h&&h.__esModule)return h;var _={};if(h!=null)for(var w in h)Object.hasOwnProperty.call(h,w)&&(_[w]=h[w]);return _.default=h,_},b=function(h){return h&&h.__esModule?h:{default:h}},D=function(h,_){if(!_.has(h))throw new TypeError("attempted to get private field on non-instance");return _.get(h)},g=function(h,_,w){if(!_.has(h))throw new TypeError("attempted to set private field on non-instance");return _.set(h,w),w},l("__extends",t),l("__assign",r),l("__rest",s),l("__decorate",o),l("__param",d),l("__metadata",O),l("__awaiter",y),l("__generator",I),l("__exportStar",N),l("__createBinding",c),l("__values",P),l("__read",U),l("__spread",K),l("__spreadArrays",M),l("__await",L),l("__asyncGenerator",W),l("__asyncDelegator",q),l("__asyncValues",re),l("__makeTemplateObject",p),l("__importStar",S),l("__importDefault",b),l("__classPrivateFieldGet",D),l("__classPrivateFieldSet",g)})})(iw);var ys={};Object.defineProperty(ys,"__esModule",{value:!0});function sw(i){if(typeof i!="string")throw new Error(`Cannot safe json parse value of type ${typeof i}`);try{return JSON.parse(i)}catch{return i}}ys.safeJsonParse=sw;function aw(i){return typeof i=="string"?i:JSON.stringify(i,(t,r)=>typeof r>"u"?null:r)}ys.safeJsonStringify=aw;var Fa={},Oc={get exports(){return Fa},set exports(i){Fa=i}},Yf;function ow(){return Yf||(Yf=1,function(){let i;function t(){}i=t,i.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},i.prototype.setItem=function(r,s){this[r]=String(s)},i.prototype.removeItem=function(r){delete this[r]},i.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(s){r[s]=void 0,delete r[s]})},i.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},i.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof ur<"u"&&ur.localStorage?Oc.exports=ur.localStorage:typeof window<"u"&&window.localStorage?Oc.exports=window.localStorage:Oc.exports=new t}()),Fa}var Ic={},ns={},Jf;function cw(){if(Jf)return ns;Jf=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.IKeyValueStorage=void 0;class i{}return ns.IKeyValueStorage=i,ns}var is={},Xf;function uw(){if(Xf)return is;Xf=1,Object.defineProperty(is,"__esModule",{value:!0}),is.parseEntry=void 0;const i=ys;function t(r){var s;return[r[0],i.safeJsonParse((s=r[1])!==null&&s!==void 0?s:"")]}return is.parseEntry=t,is}var Qf;function hw(){return Qf||(Qf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const t=Ua;t.__exportStar(cw(),i),t.__exportStar(uw(),i)}(Ic)),Ic}Object.defineProperty(ka,"__esModule",{value:!0});ka.KeyValueStorage=void 0;const xi=Ua,Zf=ys,fw=xi.__importDefault(ow()),lw=hw();class Id{constructor(){this.localStorage=fw.default}getKeys(){return xi.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return xi.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(lw.parseEntry)})}getItem(t){return xi.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(t);if(r!==null)return Zf.safeJsonParse(r)})}setItem(t,r){return xi.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(t,Zf.safeJsonStringify(r))})}removeItem(t){return xi.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(t)})}}ka.KeyValueStorage=Id;var dw=ka.default=Id,vs={},Pi={},pw={get exports(){return Pi},set exports(i){Pi=i}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(i){var t,r,s,o,d,O,y,I,N,P,U,K,M,L,W,q,re,p,S,b,D,g,c;(function(l){var Y=typeof ur=="object"?ur:typeof self=="object"?self:typeof this=="object"?this:{};l(h(Y,h(i.exports)));function h(_,w){return _!==Y&&(typeof Object.create=="function"?Object.defineProperty(_,"__esModule",{value:!0}):_.__esModule=!0),function(C,E){return _[C]=w?w(C,E):E}}})(function(l){var Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,_){h.__proto__=_}||function(h,_){for(var w in _)_.hasOwnProperty(w)&&(h[w]=_[w])};t=function(h,_){Y(h,_);function w(){this.constructor=h}h.prototype=_===null?Object.create(_):(w.prototype=_.prototype,new w)},r=Object.assign||function(h){for(var _,w=1,C=arguments.length;w<C;w++){_=arguments[w];for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(h[E]=_[E])}return h},s=function(h,_){var w={};for(var C in h)Object.prototype.hasOwnProperty.call(h,C)&&_.indexOf(C)<0&&(w[C]=h[C]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var E=0,C=Object.getOwnPropertySymbols(h);E<C.length;E++)_.indexOf(C[E])<0&&Object.prototype.propertyIsEnumerable.call(h,C[E])&&(w[C[E]]=h[C[E]]);return w},o=function(h,_,w,C){var E=arguments.length,v=E<3?_:C===null?C=Object.getOwnPropertyDescriptor(_,w):C,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(h,_,w,C);else for(var z=h.length-1;z>=0;z--)($=h[z])&&(v=(E<3?$(v):E>3?$(_,w,v):$(_,w))||v);return E>3&&v&&Object.defineProperty(_,w,v),v},d=function(h,_){return function(w,C){_(w,C,h)}},O=function(h,_){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(h,_)},y=function(h,_,w,C){function E(v){return v instanceof w?v:new w(function($){$(v)})}return new(w||(w=Promise))(function(v,$){function z(J){try{R(C.next(J))}catch(te){$(te)}}function Z(J){try{R(C.throw(J))}catch(te){$(te)}}function R(J){J.done?v(J.value):E(J.value).then(z,Z)}R((C=C.apply(h,_||[])).next())})},I=function(h,_){var w={label:0,sent:function(){if(v[0]&1)throw v[1];return v[1]},trys:[],ops:[]},C,E,v,$;return $={next:z(0),throw:z(1),return:z(2)},typeof Symbol=="function"&&($[Symbol.iterator]=function(){return this}),$;function z(R){return function(J){return Z([R,J])}}function Z(R){if(C)throw new TypeError("Generator is already executing.");for(;w;)try{if(C=1,E&&(v=R[0]&2?E.return:R[0]?E.throw||((v=E.return)&&v.call(E),0):E.next)&&!(v=v.call(E,R[1])).done)return v;switch(E=0,v&&(R=[R[0]&2,v.value]),R[0]){case 0:case 1:v=R;break;case 4:return w.label++,{value:R[1],done:!1};case 5:w.label++,E=R[1],R=[0];continue;case 7:R=w.ops.pop(),w.trys.pop();continue;default:if(v=w.trys,!(v=v.length>0&&v[v.length-1])&&(R[0]===6||R[0]===2)){w=0;continue}if(R[0]===3&&(!v||R[1]>v[0]&&R[1]<v[3])){w.label=R[1];break}if(R[0]===6&&w.label<v[1]){w.label=v[1],v=R;break}if(v&&w.label<v[2]){w.label=v[2],w.ops.push(R);break}v[2]&&w.ops.pop(),w.trys.pop();continue}R=_.call(h,w)}catch(J){R=[6,J],E=0}finally{C=v=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}},c=function(h,_,w,C){C===void 0&&(C=w),h[C]=_[w]},N=function(h,_){for(var w in h)w!=="default"&&!_.hasOwnProperty(w)&&(_[w]=h[w])},P=function(h){var _=typeof Symbol=="function"&&Symbol.iterator,w=_&&h[_],C=0;if(w)return w.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&C>=h.length&&(h=void 0),{value:h&&h[C++],done:!h}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")},U=function(h,_){var w=typeof Symbol=="function"&&h[Symbol.iterator];if(!w)return h;var C=w.call(h),E,v=[],$;try{for(;(_===void 0||_-- >0)&&!(E=C.next()).done;)v.push(E.value)}catch(z){$={error:z}}finally{try{E&&!E.done&&(w=C.return)&&w.call(C)}finally{if($)throw $.error}}return v},K=function(){for(var h=[],_=0;_<arguments.length;_++)h=h.concat(U(arguments[_]));return h},M=function(){for(var h=0,_=0,w=arguments.length;_<w;_++)h+=arguments[_].length;for(var C=Array(h),E=0,_=0;_<w;_++)for(var v=arguments[_],$=0,z=v.length;$<z;$++,E++)C[E]=v[$];return C},L=function(h){return this instanceof L?(this.v=h,this):new L(h)},W=function(h,_,w){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C=w.apply(h,_||[]),E,v=[];return E={},$("next"),$("throw"),$("return"),E[Symbol.asyncIterator]=function(){return this},E;function $(ae){C[ae]&&(E[ae]=function(ie){return new Promise(function(ye,fe){v.push([ae,ie,ye,fe])>1||z(ae,ie)})})}function z(ae,ie){try{Z(C[ae](ie))}catch(ye){te(v[0][3],ye)}}function Z(ae){ae.value instanceof L?Promise.resolve(ae.value.v).then(R,J):te(v[0][2],ae)}function R(ae){z("next",ae)}function J(ae){z("throw",ae)}function te(ae,ie){ae(ie),v.shift(),v.length&&z(v[0][0],v[0][1])}},q=function(h){var _,w;return _={},C("next"),C("throw",function(E){throw E}),C("return"),_[Symbol.iterator]=function(){return this},_;function C(E,v){_[E]=h[E]?function($){return(w=!w)?{value:L(h[E]($)),done:E==="return"}:v?v($):$}:v}},re=function(h){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _=h[Symbol.asyncIterator],w;return _?_.call(h):(h=typeof P=="function"?P(h):h[Symbol.iterator](),w={},C("next"),C("throw"),C("return"),w[Symbol.asyncIterator]=function(){return this},w);function C(v){w[v]=h[v]&&function($){return new Promise(function(z,Z){$=h[v]($),E(z,Z,$.done,$.value)})}}function E(v,$,z,Z){Promise.resolve(Z).then(function(R){v({value:R,done:z})},$)}},p=function(h,_){return Object.defineProperty?Object.defineProperty(h,"raw",{value:_}):h.raw=_,h},S=function(h){if(h&&h.__esModule)return h;var _={};if(h!=null)for(var w in h)Object.hasOwnProperty.call(h,w)&&(_[w]=h[w]);return _.default=h,_},b=function(h){return h&&h.__esModule?h:{default:h}},D=function(h,_){if(!_.has(h))throw new TypeError("attempted to get private field on non-instance");return _.get(h)},g=function(h,_,w){if(!_.has(h))throw new TypeError("attempted to set private field on non-instance");return _.set(h,w),w},l("__extends",t),l("__assign",r),l("__rest",s),l("__decorate",o),l("__param",d),l("__metadata",O),l("__awaiter",y),l("__generator",I),l("__exportStar",N),l("__createBinding",c),l("__values",P),l("__read",U),l("__spread",K),l("__spreadArrays",M),l("__await",L),l("__asyncGenerator",W),l("__asyncDelegator",q),l("__asyncValues",re),l("__makeTemplateObject",p),l("__importStar",S),l("__importDefault",b),l("__classPrivateFieldGet",D),l("__classPrivateFieldSet",g)})})(pw);var ss={},xc={},as={};class ti{}const gw=Object.freeze(Object.defineProperty({__proto__:null,IEvents:ti},Symbol.toStringTag,{value:"Module"})),_w=kv(gw);var el;function yw(){if(el)return as;el=1,Object.defineProperty(as,"__esModule",{value:!0}),as.IHeartBeat=void 0;const i=_w;class t extends i.IEvents{constructor(s){super()}}return as.IHeartBeat=t,as}var tl;function xd(){return tl||(tl=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),Pi.__exportStar(yw(),i)}(xc)),xc}var Ac={},Yn={},rl;function vw(){if(rl)return Yn;rl=1,Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.HEARTBEAT_EVENTS=Yn.HEARTBEAT_INTERVAL=void 0;const i=De;return Yn.HEARTBEAT_INTERVAL=i.FIVE_SECONDS,Yn.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Yn}var nl;function Ad(){return nl||(nl=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),Pi.__exportStar(vw(),i)}(Ac)),Ac}var il;function mw(){if(il)return ss;il=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.HeartBeat=void 0;const i=Pi,t=Ir,r=De,s=xd(),o=Ad();class d extends s.IHeartBeat{constructor(y){super(y),this.events=new t.EventEmitter,this.interval=o.HEARTBEAT_INTERVAL,this.interval=y?.interval||o.HEARTBEAT_INTERVAL}static init(y){return i.__awaiter(this,void 0,void 0,function*(){const I=new d(y);return yield I.init(),I})}init(){return i.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(y,I){this.events.on(y,I)}once(y,I){this.events.once(y,I)}off(y,I){this.events.off(y,I)}removeListener(y,I){this.events.removeListener(y,I)}initialize(){return i.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(o.HEARTBEAT_EVENTS.pulse)}}return ss.HeartBeat=d,ss}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const t=Pi;t.__exportStar(mw(),i),t.__exportStar(xd(),i),t.__exportStar(Ad(),i)})(vs);var Ze={},Gc={},bw={get exports(){return Gc},set exports(i){Gc=i}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(i){var t,r,s,o,d,O,y,I,N,P,U,K,M,L,W,q,re,p,S,b,D,g,c;(function(l){var Y=typeof ur=="object"?ur:typeof self=="object"?self:typeof this=="object"?this:{};l(h(Y,h(i.exports)));function h(_,w){return _!==Y&&(typeof Object.create=="function"?Object.defineProperty(_,"__esModule",{value:!0}):_.__esModule=!0),function(C,E){return _[C]=w?w(C,E):E}}})(function(l){var Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,_){h.__proto__=_}||function(h,_){for(var w in _)_.hasOwnProperty(w)&&(h[w]=_[w])};t=function(h,_){Y(h,_);function w(){this.constructor=h}h.prototype=_===null?Object.create(_):(w.prototype=_.prototype,new w)},r=Object.assign||function(h){for(var _,w=1,C=arguments.length;w<C;w++){_=arguments[w];for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(h[E]=_[E])}return h},s=function(h,_){var w={};for(var C in h)Object.prototype.hasOwnProperty.call(h,C)&&_.indexOf(C)<0&&(w[C]=h[C]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var E=0,C=Object.getOwnPropertySymbols(h);E<C.length;E++)_.indexOf(C[E])<0&&Object.prototype.propertyIsEnumerable.call(h,C[E])&&(w[C[E]]=h[C[E]]);return w},o=function(h,_,w,C){var E=arguments.length,v=E<3?_:C===null?C=Object.getOwnPropertyDescriptor(_,w):C,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(h,_,w,C);else for(var z=h.length-1;z>=0;z--)($=h[z])&&(v=(E<3?$(v):E>3?$(_,w,v):$(_,w))||v);return E>3&&v&&Object.defineProperty(_,w,v),v},d=function(h,_){return function(w,C){_(w,C,h)}},O=function(h,_){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(h,_)},y=function(h,_,w,C){function E(v){return v instanceof w?v:new w(function($){$(v)})}return new(w||(w=Promise))(function(v,$){function z(J){try{R(C.next(J))}catch(te){$(te)}}function Z(J){try{R(C.throw(J))}catch(te){$(te)}}function R(J){J.done?v(J.value):E(J.value).then(z,Z)}R((C=C.apply(h,_||[])).next())})},I=function(h,_){var w={label:0,sent:function(){if(v[0]&1)throw v[1];return v[1]},trys:[],ops:[]},C,E,v,$;return $={next:z(0),throw:z(1),return:z(2)},typeof Symbol=="function"&&($[Symbol.iterator]=function(){return this}),$;function z(R){return function(J){return Z([R,J])}}function Z(R){if(C)throw new TypeError("Generator is already executing.");for(;w;)try{if(C=1,E&&(v=R[0]&2?E.return:R[0]?E.throw||((v=E.return)&&v.call(E),0):E.next)&&!(v=v.call(E,R[1])).done)return v;switch(E=0,v&&(R=[R[0]&2,v.value]),R[0]){case 0:case 1:v=R;break;case 4:return w.label++,{value:R[1],done:!1};case 5:w.label++,E=R[1],R=[0];continue;case 7:R=w.ops.pop(),w.trys.pop();continue;default:if(v=w.trys,!(v=v.length>0&&v[v.length-1])&&(R[0]===6||R[0]===2)){w=0;continue}if(R[0]===3&&(!v||R[1]>v[0]&&R[1]<v[3])){w.label=R[1];break}if(R[0]===6&&w.label<v[1]){w.label=v[1],v=R;break}if(v&&w.label<v[2]){w.label=v[2],w.ops.push(R);break}v[2]&&w.ops.pop(),w.trys.pop();continue}R=_.call(h,w)}catch(J){R=[6,J],E=0}finally{C=v=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}},c=function(h,_,w,C){C===void 0&&(C=w),h[C]=_[w]},N=function(h,_){for(var w in h)w!=="default"&&!_.hasOwnProperty(w)&&(_[w]=h[w])},P=function(h){var _=typeof Symbol=="function"&&Symbol.iterator,w=_&&h[_],C=0;if(w)return w.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&C>=h.length&&(h=void 0),{value:h&&h[C++],done:!h}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")},U=function(h,_){var w=typeof Symbol=="function"&&h[Symbol.iterator];if(!w)return h;var C=w.call(h),E,v=[],$;try{for(;(_===void 0||_-- >0)&&!(E=C.next()).done;)v.push(E.value)}catch(z){$={error:z}}finally{try{E&&!E.done&&(w=C.return)&&w.call(C)}finally{if($)throw $.error}}return v},K=function(){for(var h=[],_=0;_<arguments.length;_++)h=h.concat(U(arguments[_]));return h},M=function(){for(var h=0,_=0,w=arguments.length;_<w;_++)h+=arguments[_].length;for(var C=Array(h),E=0,_=0;_<w;_++)for(var v=arguments[_],$=0,z=v.length;$<z;$++,E++)C[E]=v[$];return C},L=function(h){return this instanceof L?(this.v=h,this):new L(h)},W=function(h,_,w){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C=w.apply(h,_||[]),E,v=[];return E={},$("next"),$("throw"),$("return"),E[Symbol.asyncIterator]=function(){return this},E;function $(ae){C[ae]&&(E[ae]=function(ie){return new Promise(function(ye,fe){v.push([ae,ie,ye,fe])>1||z(ae,ie)})})}function z(ae,ie){try{Z(C[ae](ie))}catch(ye){te(v[0][3],ye)}}function Z(ae){ae.value instanceof L?Promise.resolve(ae.value.v).then(R,J):te(v[0][2],ae)}function R(ae){z("next",ae)}function J(ae){z("throw",ae)}function te(ae,ie){ae(ie),v.shift(),v.length&&z(v[0][0],v[0][1])}},q=function(h){var _,w;return _={},C("next"),C("throw",function(E){throw E}),C("return"),_[Symbol.iterator]=function(){return this},_;function C(E,v){_[E]=h[E]?function($){return(w=!w)?{value:L(h[E]($)),done:E==="return"}:v?v($):$}:v}},re=function(h){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _=h[Symbol.asyncIterator],w;return _?_.call(h):(h=typeof P=="function"?P(h):h[Symbol.iterator](),w={},C("next"),C("throw"),C("return"),w[Symbol.asyncIterator]=function(){return this},w);function C(v){w[v]=h[v]&&function($){return new Promise(function(z,Z){$=h[v]($),E(z,Z,$.done,$.value)})}}function E(v,$,z,Z){Promise.resolve(Z).then(function(R){v({value:R,done:z})},$)}},p=function(h,_){return Object.defineProperty?Object.defineProperty(h,"raw",{value:_}):h.raw=_,h},S=function(h){if(h&&h.__esModule)return h;var _={};if(h!=null)for(var w in h)Object.hasOwnProperty.call(h,w)&&(_[w]=h[w]);return _.default=h,_},b=function(h){return h&&h.__esModule?h:{default:h}},D=function(h,_){if(!_.has(h))throw new TypeError("attempted to get private field on non-instance");return _.get(h)},g=function(h,_,w){if(!_.has(h))throw new TypeError("attempted to set private field on non-instance");return _.set(h,w),w},l("__extends",t),l("__assign",r),l("__rest",s),l("__decorate",o),l("__param",d),l("__metadata",O),l("__awaiter",y),l("__generator",I),l("__exportStar",N),l("__createBinding",c),l("__values",P),l("__read",U),l("__spread",K),l("__spreadArrays",M),l("__await",L),l("__asyncGenerator",W),l("__asyncDelegator",q),l("__asyncValues",re),l("__makeTemplateObject",p),l("__importStar",S),l("__importDefault",b),l("__classPrivateFieldGet",D),l("__classPrivateFieldSet",g)})})(bw);var Cc,sl;function ww(){if(sl)return Cc;sl=1;function i(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}Cc=t;function t(r,s,o){var d=o&&o.stringify||i,O=1;if(typeof r=="object"&&r!==null){var y=s.length+O;if(y===1)return r;var I=new Array(y);I[0]=d(r);for(var N=1;N<y;N++)I[N]=d(s[N]);return I.join(" ")}if(typeof r!="string")return r;var P=s.length;if(P===0)return r;for(var U="",K=1-O,M=-1,L=r&&r.length||0,W=0;W<L;){if(r.charCodeAt(W)===37&&W+1<L){switch(M=M>-1?M:0,r.charCodeAt(W+1)){case 100:case 102:if(K>=P||s[K]==null)break;M<W&&(U+=r.slice(M,W)),U+=Number(s[K]),M=W+2,W++;break;case 105:if(K>=P||s[K]==null)break;M<W&&(U+=r.slice(M,W)),U+=Math.floor(Number(s[K])),M=W+2,W++;break;case 79:case 111:case 106:if(K>=P||s[K]===void 0)break;M<W&&(U+=r.slice(M,W));var q=typeof s[K];if(q==="string"){U+="'"+s[K]+"'",M=W+2,W++;break}if(q==="function"){U+=s[K].name||"<anonymous>",M=W+2,W++;break}U+=d(s[K]),M=W+2,W++;break;case 115:if(K>=P)break;M<W&&(U+=r.slice(M,W)),U+=String(s[K]),M=W+2,W++;break;case 37:M<W&&(U+=r.slice(M,W)),U+="%",M=W+2,W++,K--;break}++K}++W}return M===-1?r:(M<L&&(U+=r.slice(M)),U)}return Cc}var Pc,al;function Ew(){if(al)return Pc;al=1;const i=ww();Pc=o;const t=D().console||{},r={mapHttpRequest:L,mapHttpResponse:L,wrapRequestSerializer:W,wrapResponseSerializer:W,wrapErrorSerializer:W,req:L,res:L,err:K};function s(g,c){return Array.isArray(g)?g.filter(function(Y){return Y!=="!stdSerializers.err"}):g===!0?Object.keys(c):!1}function o(g){g=g||{},g.browser=g.browser||{};const c=g.browser.transmit;if(c&&typeof c.send!="function")throw Error("pino: transmit option must have a send function");const l=g.browser.write||t;g.browser.write&&(g.browser.asObject=!0);const Y=g.serializers||{},h=s(g.browser.serialize,Y);let _=g.browser.serialize;Array.isArray(g.browser.serialize)&&g.browser.serialize.indexOf("!stdSerializers.err")>-1&&(_=!1);const w=["error","fatal","warn","info","debug","trace"];typeof l=="function"&&(l.error=l.fatal=l.warn=l.info=l.debug=l.trace=l),g.enabled===!1&&(g.level="silent");const C=g.level||"info",E=Object.create(l);E.log||(E.log=q),Object.defineProperty(E,"levelVal",{get:$}),Object.defineProperty(E,"level",{get:z,set:Z});const v={transmit:c,serialize:h,asObject:g.browser.asObject,levels:w,timestamp:M(g)};E.levels=o.levels,E.level=C,E.setMaxListeners=E.getMaxListeners=E.emit=E.addListener=E.on=E.prependListener=E.once=E.prependOnceListener=E.removeListener=E.removeAllListeners=E.listeners=E.listenerCount=E.eventNames=E.write=E.flush=q,E.serializers=Y,E._serialize=h,E._stdErrSerialize=_,E.child=R,c&&(E._logEvent=U());function $(){return this.level==="silent"?1/0:this.levels.values[this.level]}function z(){return this._level}function Z(J){if(J!=="silent"&&!this.levels.values[J])throw Error("unknown level "+J);this._level=J,d(v,E,"error","log"),d(v,E,"fatal","error"),d(v,E,"warn","error"),d(v,E,"info","log"),d(v,E,"debug","log"),d(v,E,"trace","log")}function R(J,te){if(!J)throw new Error("missing bindings for child Pino");te=te||{},h&&J.serializers&&(te.serializers=J.serializers);const ae=te.serializers;if(h&&ae){var ie=Object.assign({},Y,ae),ye=g.browser.serialize===!0?Object.keys(ie):h;delete J.serializers,I([J],ye,ie,this._stdErrSerialize)}function fe(me){this._childLevel=(me._childLevel|0)+1,this.error=N(me,J,"error"),this.fatal=N(me,J,"fatal"),this.warn=N(me,J,"warn"),this.info=N(me,J,"info"),this.debug=N(me,J,"debug"),this.trace=N(me,J,"trace"),ie&&(this.serializers=ie,this._serialize=ye),c&&(this._logEvent=U([].concat(me._logEvent.bindings,J)))}return fe.prototype=this,new fe(this)}return E}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=r,o.stdTimeFunctions=Object.assign({},{nullTime:re,epochTime:p,unixTime:S,isoTime:b});function d(g,c,l,Y){const h=Object.getPrototypeOf(c);c[l]=c.levelVal>c.levels.values[l]?q:h[l]?h[l]:t[l]||t[Y]||q,O(g,c,l)}function O(g,c,l){!g.transmit&&c[l]===q||(c[l]=function(Y){return function(){const _=g.timestamp(),w=new Array(arguments.length),C=Object.getPrototypeOf&&Object.getPrototypeOf(this)===t?t:this;for(var E=0;E<w.length;E++)w[E]=arguments[E];if(g.serialize&&!g.asObject&&I(w,this._serialize,this.serializers,this._stdErrSerialize),g.asObject?Y.call(C,y(this,l,w,_)):Y.apply(C,w),g.transmit){const v=g.transmit.level||c.level,$=o.levels.values[v],z=o.levels.values[l];if(z<$)return;P(this,{ts:_,methodLevel:l,methodValue:z,transmitLevel:v,transmitValue:o.levels.values[g.transmit.level||c.level],send:g.transmit.send,val:c.levelVal},w)}}}(c[l]))}function y(g,c,l,Y){g._serialize&&I(l,g._serialize,g.serializers,g._stdErrSerialize);const h=l.slice();let _=h[0];const w={};Y&&(w.time=Y),w.level=o.levels.values[c];let C=(g._childLevel|0)+1;if(C<1&&(C=1),_!==null&&typeof _=="object"){for(;C--&&typeof h[0]=="object";)Object.assign(w,h.shift());_=h.length?i(h.shift(),h):void 0}else typeof _=="string"&&(_=i(h.shift(),h));return _!==void 0&&(w.msg=_),w}function I(g,c,l,Y){for(const h in g)if(Y&&g[h]instanceof Error)g[h]=o.stdSerializers.err(g[h]);else if(typeof g[h]=="object"&&!Array.isArray(g[h]))for(const _ in g[h])c&&c.indexOf(_)>-1&&_ in l&&(g[h][_]=l[_](g[h][_]))}function N(g,c,l){return function(){const Y=new Array(1+arguments.length);Y[0]=c;for(var h=1;h<Y.length;h++)Y[h]=arguments[h-1];return g[l].apply(this,Y)}}function P(g,c,l){const Y=c.send,h=c.ts,_=c.methodLevel,w=c.methodValue,C=c.val,E=g._logEvent.bindings;I(l,g._serialize||Object.keys(g.serializers),g.serializers,g._stdErrSerialize===void 0?!0:g._stdErrSerialize),g._logEvent.ts=h,g._logEvent.messages=l.filter(function(v){return E.indexOf(v)===-1}),g._logEvent.level.label=_,g._logEvent.level.value=w,Y(_,g._logEvent,C),g._logEvent=U(E)}function U(g){return{ts:0,messages:[],bindings:g||[],level:{label:"",value:0}}}function K(g){const c={type:g.constructor.name,msg:g.message,stack:g.stack};for(const l in g)c[l]===void 0&&(c[l]=g[l]);return c}function M(g){return typeof g.timestamp=="function"?g.timestamp:g.timestamp===!1?re:p}function L(){return{}}function W(g){return g}function q(){}function re(){return!1}function p(){return Date.now()}function S(){return Math.round(Date.now()/1e3)}function b(){return new Date(Date.now()).toISOString()}function D(){function g(c){return typeof c<"u"&&c}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return g(self)||g(window)||g(this)||{}}}return Pc}var Jn={},ol;function Cd(){return ol||(ol=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.PINO_CUSTOM_CONTEXT_KEY=Jn.PINO_LOGGER_DEFAULTS=void 0,Jn.PINO_LOGGER_DEFAULTS={level:"info"},Jn.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Jn}var or={},cl;function Dw(){if(cl)return or;cl=1,Object.defineProperty(or,"__esModule",{value:!0}),or.generateChildLogger=or.formatChildLoggerContext=or.getLoggerContext=or.setBrowserLoggerContext=or.getBrowserLoggerContext=or.getDefaultLoggerOptions=void 0;const i=Cd();function t(y){return Object.assign(Object.assign({},y),{level:y?.level||i.PINO_LOGGER_DEFAULTS.level})}or.getDefaultLoggerOptions=t;function r(y,I=i.PINO_CUSTOM_CONTEXT_KEY){return y[I]||""}or.getBrowserLoggerContext=r;function s(y,I,N=i.PINO_CUSTOM_CONTEXT_KEY){return y[N]=I,y}or.setBrowserLoggerContext=s;function o(y,I=i.PINO_CUSTOM_CONTEXT_KEY){let N="";return typeof y.bindings>"u"?N=r(y,I):N=y.bindings().context||"",N}or.getLoggerContext=o;function d(y,I,N=i.PINO_CUSTOM_CONTEXT_KEY){const P=o(y,N);return P.trim()?`${P}/${I}`:I}or.formatChildLoggerContext=d;function O(y,I,N=i.PINO_CUSTOM_CONTEXT_KEY){const P=d(y,I,N),U=y.child({context:P});return s(U,P,N)}return or.generateChildLogger=O,or}(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.pino=void 0;const t=Gc,r=t.__importDefault(Ew());Object.defineProperty(i,"pino",{enumerable:!0,get:function(){return r.default}}),t.__exportStar(Cd(),i),t.__exportStar(Dw(),i)})(Ze);class Sw extends ti{constructor(t){super(),this.opts=t,this.protocol="wc",this.version=2}}class Ow extends ti{constructor(t,r){super(),this.core=t,this.logger=r,this.records=new Map}}class Iw{constructor(t,r){this.logger=t,this.core=r}}let xw=class extends ti{constructor(t,r){super(),this.relayer=t,this.logger=r}};class Aw extends ti{constructor(t){super()}}let Cw=class{constructor(t,r,s,o){this.core=t,this.logger=r,this.name=s}};class Pw extends ti{constructor(t,r){super(),this.relayer=t,this.logger=r}}class Tw extends ti{constructor(t,r){super(),this.core=t,this.logger=r}}let Nw=class{constructor(t,r){this.projectId=t,this.logger=r}},Rw=class{constructor(t){this.opts=t,this.protocol="wc",this.version=2}},Uw=class{constructor(t){this.client=t}};var mu={},Pd={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var t=je,r=xr;i.DIGEST_LENGTH=64,i.BLOCK_SIZE=128;var s=function(){function y(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return y.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},y.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},y.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},y.prototype.update=function(I,N){if(N===void 0&&(N=I.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var P=0;if(this._bytesHashed+=N,this._bufferLength>0){for(;this._bufferLength<i.BLOCK_SIZE&&N>0;)this._buffer[this._bufferLength++]=I[P++],N--;this._bufferLength===this.blockSize&&(d(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(N>=this.blockSize&&(P=d(this._tempHi,this._tempLo,this._stateHi,this._stateLo,I,P,N),N%=this.blockSize);N>0;)this._buffer[this._bufferLength++]=I[P++],N--;return this},y.prototype.finish=function(I){if(!this._finished){var N=this._bytesHashed,P=this._bufferLength,U=N/536870912|0,K=N<<3,M=N%128<112?128:256;this._buffer[P]=128;for(var L=P+1;L<M-8;L++)this._buffer[L]=0;t.writeUint32BE(U,this._buffer,M-8),t.writeUint32BE(K,this._buffer,M-4),d(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,M),this._finished=!0}for(var L=0;L<this.digestLength/8;L++)t.writeUint32BE(this._stateHi[L],I,L*8),t.writeUint32BE(this._stateLo[L],I,L*8+4);return this},y.prototype.digest=function(){var I=new Uint8Array(this.digestLength);return this.finish(I),I},y.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},y.prototype.restoreState=function(I){return this._stateHi.set(I.stateHi),this._stateLo.set(I.stateLo),this._bufferLength=I.bufferLength,I.buffer&&this._buffer.set(I.buffer),this._bytesHashed=I.bytesHashed,this._finished=!1,this},y.prototype.cleanSavedState=function(I){r.wipe(I.stateHi),r.wipe(I.stateLo),I.buffer&&r.wipe(I.buffer),I.bufferLength=0,I.bytesHashed=0},y}();i.SHA512=s;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function d(y,I,N,P,U,K,M){for(var L=N[0],W=N[1],q=N[2],re=N[3],p=N[4],S=N[5],b=N[6],D=N[7],g=P[0],c=P[1],l=P[2],Y=P[3],h=P[4],_=P[5],w=P[6],C=P[7],E,v,$,z,Z,R,J,te;M>=128;){for(var ae=0;ae<16;ae++){var ie=8*ae+K;y[ae]=t.readUint32BE(U,ie),I[ae]=t.readUint32BE(U,ie+4)}for(var ae=0;ae<80;ae++){var ye=L,fe=W,me=q,Q=re,X=p,B=S,f=b,j=D,he=g,pe=c,Oe=l,ze=Y,Ve=h,$e=_,_t=w,yt=C;if(E=D,v=C,Z=v&65535,R=v>>>16,J=E&65535,te=E>>>16,E=(p>>>14|h<<32-14)^(p>>>18|h<<32-18)^(h>>>41-32|p<<32-(41-32)),v=(h>>>14|p<<32-14)^(h>>>18|p<<32-18)^(p>>>41-32|h<<32-(41-32)),Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,E=p&S^~p&b,v=h&_^~h&w,Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,E=o[ae*2],v=o[ae*2+1],Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,E=y[ae%16],v=I[ae%16],Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,R+=Z>>>16,J+=R>>>16,te+=J>>>16,$=J&65535|te<<16,z=Z&65535|R<<16,E=$,v=z,Z=v&65535,R=v>>>16,J=E&65535,te=E>>>16,E=(L>>>28|g<<32-28)^(g>>>34-32|L<<32-(34-32))^(g>>>39-32|L<<32-(39-32)),v=(g>>>28|L<<32-28)^(L>>>34-32|g<<32-(34-32))^(L>>>39-32|g<<32-(39-32)),Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,E=L&W^L&q^W&q,v=g&c^g&l^c&l,Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,R+=Z>>>16,J+=R>>>16,te+=J>>>16,j=J&65535|te<<16,yt=Z&65535|R<<16,E=Q,v=ze,Z=v&65535,R=v>>>16,J=E&65535,te=E>>>16,E=$,v=z,Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,R+=Z>>>16,J+=R>>>16,te+=J>>>16,Q=J&65535|te<<16,ze=Z&65535|R<<16,W=ye,q=fe,re=me,p=Q,S=X,b=B,D=f,L=j,c=he,l=pe,Y=Oe,h=ze,_=Ve,w=$e,C=_t,g=yt,ae%16===15)for(var ie=0;ie<16;ie++)E=y[ie],v=I[ie],Z=v&65535,R=v>>>16,J=E&65535,te=E>>>16,E=y[(ie+9)%16],v=I[(ie+9)%16],Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,$=y[(ie+1)%16],z=I[(ie+1)%16],E=($>>>1|z<<32-1)^($>>>8|z<<32-8)^$>>>7,v=(z>>>1|$<<32-1)^(z>>>8|$<<32-8)^(z>>>7|$<<32-7),Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,$=y[(ie+14)%16],z=I[(ie+14)%16],E=($>>>19|z<<32-19)^(z>>>61-32|$<<32-(61-32))^$>>>6,v=(z>>>19|$<<32-19)^($>>>61-32|z<<32-(61-32))^(z>>>6|$<<32-6),Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,R+=Z>>>16,J+=R>>>16,te+=J>>>16,y[ie]=J&65535|te<<16,I[ie]=Z&65535|R<<16}E=L,v=g,Z=v&65535,R=v>>>16,J=E&65535,te=E>>>16,E=N[0],v=P[0],Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,R+=Z>>>16,J+=R>>>16,te+=J>>>16,N[0]=L=J&65535|te<<16,P[0]=g=Z&65535|R<<16,E=W,v=c,Z=v&65535,R=v>>>16,J=E&65535,te=E>>>16,E=N[1],v=P[1],Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,R+=Z>>>16,J+=R>>>16,te+=J>>>16,N[1]=W=J&65535|te<<16,P[1]=c=Z&65535|R<<16,E=q,v=l,Z=v&65535,R=v>>>16,J=E&65535,te=E>>>16,E=N[2],v=P[2],Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,R+=Z>>>16,J+=R>>>16,te+=J>>>16,N[2]=q=J&65535|te<<16,P[2]=l=Z&65535|R<<16,E=re,v=Y,Z=v&65535,R=v>>>16,J=E&65535,te=E>>>16,E=N[3],v=P[3],Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,R+=Z>>>16,J+=R>>>16,te+=J>>>16,N[3]=re=J&65535|te<<16,P[3]=Y=Z&65535|R<<16,E=p,v=h,Z=v&65535,R=v>>>16,J=E&65535,te=E>>>16,E=N[4],v=P[4],Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,R+=Z>>>16,J+=R>>>16,te+=J>>>16,N[4]=p=J&65535|te<<16,P[4]=h=Z&65535|R<<16,E=S,v=_,Z=v&65535,R=v>>>16,J=E&65535,te=E>>>16,E=N[5],v=P[5],Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,R+=Z>>>16,J+=R>>>16,te+=J>>>16,N[5]=S=J&65535|te<<16,P[5]=_=Z&65535|R<<16,E=b,v=w,Z=v&65535,R=v>>>16,J=E&65535,te=E>>>16,E=N[6],v=P[6],Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,R+=Z>>>16,J+=R>>>16,te+=J>>>16,N[6]=b=J&65535|te<<16,P[6]=w=Z&65535|R<<16,E=D,v=C,Z=v&65535,R=v>>>16,J=E&65535,te=E>>>16,E=N[7],v=P[7],Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,R+=Z>>>16,J+=R>>>16,te+=J>>>16,N[7]=D=J&65535|te<<16,P[7]=C=Z&65535|R<<16,K+=128,M-=128}return K}function O(y){var I=new s;I.update(y);var N=I.digest();return I.clean(),N}i.hash=O})(Pd);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.convertSecretKeyToX25519=i.convertPublicKeyToX25519=i.verify=i.sign=i.extractPublicKeyFromSecretKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.SEED_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=i.SIGNATURE_LENGTH=void 0;const t=Ti,r=Pd,s=xr;i.SIGNATURE_LENGTH=64,i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=64,i.SEED_LENGTH=32;function o(Q){const X=new Float64Array(16);if(Q)for(let B=0;B<Q.length;B++)X[B]=Q[B];return X}const d=new Uint8Array(32);d[0]=9;const O=o(),y=o([1]),I=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),N=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),P=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),U=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),K=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function M(Q,X){for(let B=0;B<16;B++)Q[B]=X[B]|0}function L(Q){let X=1;for(let B=0;B<16;B++){let f=Q[B]+X+65535;X=Math.floor(f/65536),Q[B]=f-X*65536}Q[0]+=X-1+37*(X-1)}function W(Q,X,B){const f=~(B-1);for(let j=0;j<16;j++){const he=f&(Q[j]^X[j]);Q[j]^=he,X[j]^=he}}function q(Q,X){const B=o(),f=o();for(let j=0;j<16;j++)f[j]=X[j];L(f),L(f),L(f);for(let j=0;j<2;j++){B[0]=f[0]-65517;for(let pe=1;pe<15;pe++)B[pe]=f[pe]-65535-(B[pe-1]>>16&1),B[pe-1]&=65535;B[15]=f[15]-32767-(B[14]>>16&1);const he=B[15]>>16&1;B[14]&=65535,W(f,B,1-he)}for(let j=0;j<16;j++)Q[2*j]=f[j]&255,Q[2*j+1]=f[j]>>8}function re(Q,X){let B=0;for(let f=0;f<32;f++)B|=Q[f]^X[f];return(1&B-1>>>8)-1}function p(Q,X){const B=new Uint8Array(32),f=new Uint8Array(32);return q(B,Q),q(f,X),re(B,f)}function S(Q){const X=new Uint8Array(32);return q(X,Q),X[0]&1}function b(Q,X){for(let B=0;B<16;B++)Q[B]=X[2*B]+(X[2*B+1]<<8);Q[15]&=32767}function D(Q,X,B){for(let f=0;f<16;f++)Q[f]=X[f]+B[f]}function g(Q,X,B){for(let f=0;f<16;f++)Q[f]=X[f]-B[f]}function c(Q,X,B){let f,j,he=0,pe=0,Oe=0,ze=0,Ve=0,$e=0,_t=0,yt=0,Me=0,Ie=0,Re=0,Ue=0,He=0,Ae=0,Fe=0,Se=0,Ce=0,Be=0,xe=0,ke=0,We=0,et=0,tt=0,Je=0,tr=0,lr=0,Gr=0,rr=0,rn=0,_n=0,Rn=0,Dt=B[0],vt=B[1],St=B[2],Ot=B[3],wt=B[4],mt=B[5],Ut=B[6],Ft=B[7],It=B[8],jt=B[9],xt=B[10],Pt=B[11],At=B[12],ht=B[13],$t=B[14],Lt=B[15];f=X[0],he+=f*Dt,pe+=f*vt,Oe+=f*St,ze+=f*Ot,Ve+=f*wt,$e+=f*mt,_t+=f*Ut,yt+=f*Ft,Me+=f*It,Ie+=f*jt,Re+=f*xt,Ue+=f*Pt,He+=f*At,Ae+=f*ht,Fe+=f*$t,Se+=f*Lt,f=X[1],pe+=f*Dt,Oe+=f*vt,ze+=f*St,Ve+=f*Ot,$e+=f*wt,_t+=f*mt,yt+=f*Ut,Me+=f*Ft,Ie+=f*It,Re+=f*jt,Ue+=f*xt,He+=f*Pt,Ae+=f*At,Fe+=f*ht,Se+=f*$t,Ce+=f*Lt,f=X[2],Oe+=f*Dt,ze+=f*vt,Ve+=f*St,$e+=f*Ot,_t+=f*wt,yt+=f*mt,Me+=f*Ut,Ie+=f*Ft,Re+=f*It,Ue+=f*jt,He+=f*xt,Ae+=f*Pt,Fe+=f*At,Se+=f*ht,Ce+=f*$t,Be+=f*Lt,f=X[3],ze+=f*Dt,Ve+=f*vt,$e+=f*St,_t+=f*Ot,yt+=f*wt,Me+=f*mt,Ie+=f*Ut,Re+=f*Ft,Ue+=f*It,He+=f*jt,Ae+=f*xt,Fe+=f*Pt,Se+=f*At,Ce+=f*ht,Be+=f*$t,xe+=f*Lt,f=X[4],Ve+=f*Dt,$e+=f*vt,_t+=f*St,yt+=f*Ot,Me+=f*wt,Ie+=f*mt,Re+=f*Ut,Ue+=f*Ft,He+=f*It,Ae+=f*jt,Fe+=f*xt,Se+=f*Pt,Ce+=f*At,Be+=f*ht,xe+=f*$t,ke+=f*Lt,f=X[5],$e+=f*Dt,_t+=f*vt,yt+=f*St,Me+=f*Ot,Ie+=f*wt,Re+=f*mt,Ue+=f*Ut,He+=f*Ft,Ae+=f*It,Fe+=f*jt,Se+=f*xt,Ce+=f*Pt,Be+=f*At,xe+=f*ht,ke+=f*$t,We+=f*Lt,f=X[6],_t+=f*Dt,yt+=f*vt,Me+=f*St,Ie+=f*Ot,Re+=f*wt,Ue+=f*mt,He+=f*Ut,Ae+=f*Ft,Fe+=f*It,Se+=f*jt,Ce+=f*xt,Be+=f*Pt,xe+=f*At,ke+=f*ht,We+=f*$t,et+=f*Lt,f=X[7],yt+=f*Dt,Me+=f*vt,Ie+=f*St,Re+=f*Ot,Ue+=f*wt,He+=f*mt,Ae+=f*Ut,Fe+=f*Ft,Se+=f*It,Ce+=f*jt,Be+=f*xt,xe+=f*Pt,ke+=f*At,We+=f*ht,et+=f*$t,tt+=f*Lt,f=X[8],Me+=f*Dt,Ie+=f*vt,Re+=f*St,Ue+=f*Ot,He+=f*wt,Ae+=f*mt,Fe+=f*Ut,Se+=f*Ft,Ce+=f*It,Be+=f*jt,xe+=f*xt,ke+=f*Pt,We+=f*At,et+=f*ht,tt+=f*$t,Je+=f*Lt,f=X[9],Ie+=f*Dt,Re+=f*vt,Ue+=f*St,He+=f*Ot,Ae+=f*wt,Fe+=f*mt,Se+=f*Ut,Ce+=f*Ft,Be+=f*It,xe+=f*jt,ke+=f*xt,We+=f*Pt,et+=f*At,tt+=f*ht,Je+=f*$t,tr+=f*Lt,f=X[10],Re+=f*Dt,Ue+=f*vt,He+=f*St,Ae+=f*Ot,Fe+=f*wt,Se+=f*mt,Ce+=f*Ut,Be+=f*Ft,xe+=f*It,ke+=f*jt,We+=f*xt,et+=f*Pt,tt+=f*At,Je+=f*ht,tr+=f*$t,lr+=f*Lt,f=X[11],Ue+=f*Dt,He+=f*vt,Ae+=f*St,Fe+=f*Ot,Se+=f*wt,Ce+=f*mt,Be+=f*Ut,xe+=f*Ft,ke+=f*It,We+=f*jt,et+=f*xt,tt+=f*Pt,Je+=f*At,tr+=f*ht,lr+=f*$t,Gr+=f*Lt,f=X[12],He+=f*Dt,Ae+=f*vt,Fe+=f*St,Se+=f*Ot,Ce+=f*wt,Be+=f*mt,xe+=f*Ut,ke+=f*Ft,We+=f*It,et+=f*jt,tt+=f*xt,Je+=f*Pt,tr+=f*At,lr+=f*ht,Gr+=f*$t,rr+=f*Lt,f=X[13],Ae+=f*Dt,Fe+=f*vt,Se+=f*St,Ce+=f*Ot,Be+=f*wt,xe+=f*mt,ke+=f*Ut,We+=f*Ft,et+=f*It,tt+=f*jt,Je+=f*xt,tr+=f*Pt,lr+=f*At,Gr+=f*ht,rr+=f*$t,rn+=f*Lt,f=X[14],Fe+=f*Dt,Se+=f*vt,Ce+=f*St,Be+=f*Ot,xe+=f*wt,ke+=f*mt,We+=f*Ut,et+=f*Ft,tt+=f*It,Je+=f*jt,tr+=f*xt,lr+=f*Pt,Gr+=f*At,rr+=f*ht,rn+=f*$t,_n+=f*Lt,f=X[15],Se+=f*Dt,Ce+=f*vt,Be+=f*St,xe+=f*Ot,ke+=f*wt,We+=f*mt,et+=f*Ut,tt+=f*Ft,Je+=f*It,tr+=f*jt,lr+=f*xt,Gr+=f*Pt,rr+=f*At,rn+=f*ht,_n+=f*$t,Rn+=f*Lt,he+=38*Ce,pe+=38*Be,Oe+=38*xe,ze+=38*ke,Ve+=38*We,$e+=38*et,_t+=38*tt,yt+=38*Je,Me+=38*tr,Ie+=38*lr,Re+=38*Gr,Ue+=38*rr,He+=38*rn,Ae+=38*_n,Fe+=38*Rn,j=1,f=he+j+65535,j=Math.floor(f/65536),he=f-j*65536,f=pe+j+65535,j=Math.floor(f/65536),pe=f-j*65536,f=Oe+j+65535,j=Math.floor(f/65536),Oe=f-j*65536,f=ze+j+65535,j=Math.floor(f/65536),ze=f-j*65536,f=Ve+j+65535,j=Math.floor(f/65536),Ve=f-j*65536,f=$e+j+65535,j=Math.floor(f/65536),$e=f-j*65536,f=_t+j+65535,j=Math.floor(f/65536),_t=f-j*65536,f=yt+j+65535,j=Math.floor(f/65536),yt=f-j*65536,f=Me+j+65535,j=Math.floor(f/65536),Me=f-j*65536,f=Ie+j+65535,j=Math.floor(f/65536),Ie=f-j*65536,f=Re+j+65535,j=Math.floor(f/65536),Re=f-j*65536,f=Ue+j+65535,j=Math.floor(f/65536),Ue=f-j*65536,f=He+j+65535,j=Math.floor(f/65536),He=f-j*65536,f=Ae+j+65535,j=Math.floor(f/65536),Ae=f-j*65536,f=Fe+j+65535,j=Math.floor(f/65536),Fe=f-j*65536,f=Se+j+65535,j=Math.floor(f/65536),Se=f-j*65536,he+=j-1+37*(j-1),j=1,f=he+j+65535,j=Math.floor(f/65536),he=f-j*65536,f=pe+j+65535,j=Math.floor(f/65536),pe=f-j*65536,f=Oe+j+65535,j=Math.floor(f/65536),Oe=f-j*65536,f=ze+j+65535,j=Math.floor(f/65536),ze=f-j*65536,f=Ve+j+65535,j=Math.floor(f/65536),Ve=f-j*65536,f=$e+j+65535,j=Math.floor(f/65536),$e=f-j*65536,f=_t+j+65535,j=Math.floor(f/65536),_t=f-j*65536,f=yt+j+65535,j=Math.floor(f/65536),yt=f-j*65536,f=Me+j+65535,j=Math.floor(f/65536),Me=f-j*65536,f=Ie+j+65535,j=Math.floor(f/65536),Ie=f-j*65536,f=Re+j+65535,j=Math.floor(f/65536),Re=f-j*65536,f=Ue+j+65535,j=Math.floor(f/65536),Ue=f-j*65536,f=He+j+65535,j=Math.floor(f/65536),He=f-j*65536,f=Ae+j+65535,j=Math.floor(f/65536),Ae=f-j*65536,f=Fe+j+65535,j=Math.floor(f/65536),Fe=f-j*65536,f=Se+j+65535,j=Math.floor(f/65536),Se=f-j*65536,he+=j-1+37*(j-1),Q[0]=he,Q[1]=pe,Q[2]=Oe,Q[3]=ze,Q[4]=Ve,Q[5]=$e,Q[6]=_t,Q[7]=yt,Q[8]=Me,Q[9]=Ie,Q[10]=Re,Q[11]=Ue,Q[12]=He,Q[13]=Ae,Q[14]=Fe,Q[15]=Se}function l(Q,X){c(Q,X,X)}function Y(Q,X){const B=o();let f;for(f=0;f<16;f++)B[f]=X[f];for(f=253;f>=0;f--)l(B,B),f!==2&&f!==4&&c(B,B,X);for(f=0;f<16;f++)Q[f]=B[f]}function h(Q,X){const B=o();let f;for(f=0;f<16;f++)B[f]=X[f];for(f=250;f>=0;f--)l(B,B),f!==1&&c(B,B,X);for(f=0;f<16;f++)Q[f]=B[f]}function _(Q,X){const B=o(),f=o(),j=o(),he=o(),pe=o(),Oe=o(),ze=o(),Ve=o(),$e=o();g(B,Q[1],Q[0]),g($e,X[1],X[0]),c(B,B,$e),D(f,Q[0],Q[1]),D($e,X[0],X[1]),c(f,f,$e),c(j,Q[3],X[3]),c(j,j,N),c(he,Q[2],X[2]),D(he,he,he),g(pe,f,B),g(Oe,he,j),D(ze,he,j),D(Ve,f,B),c(Q[0],pe,Oe),c(Q[1],Ve,ze),c(Q[2],ze,Oe),c(Q[3],pe,Ve)}function w(Q,X,B){for(let f=0;f<4;f++)W(Q[f],X[f],B)}function C(Q,X){const B=o(),f=o(),j=o();Y(j,X[2]),c(B,X[0],j),c(f,X[1],j),q(Q,f),Q[31]^=S(B)<<7}function E(Q,X,B){M(Q[0],O),M(Q[1],y),M(Q[2],y),M(Q[3],O);for(let f=255;f>=0;--f){const j=B[f/8|0]>>(f&7)&1;w(Q,X,j),_(X,Q),_(Q,Q),w(Q,X,j)}}function v(Q,X){const B=[o(),o(),o(),o()];M(B[0],P),M(B[1],U),M(B[2],y),c(B[3],P,U),E(Q,B,X)}function $(Q){if(Q.length!==i.SEED_LENGTH)throw new Error(`ed25519: seed must be ${i.SEED_LENGTH} bytes`);const X=(0,r.hash)(Q);X[0]&=248,X[31]&=127,X[31]|=64;const B=new Uint8Array(32),f=[o(),o(),o(),o()];v(f,X),C(B,f);const j=new Uint8Array(64);return j.set(Q),j.set(B,32),{publicKey:B,secretKey:j}}i.generateKeyPairFromSeed=$;function z(Q){const X=(0,t.randomBytes)(32,Q),B=$(X);return(0,s.wipe)(X),B}i.generateKeyPair=z;function Z(Q){if(Q.length!==i.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${i.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(Q.subarray(32))}i.extractPublicKeyFromSecretKey=Z;const R=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function J(Q,X){let B,f,j,he;for(f=63;f>=32;--f){for(B=0,j=f-32,he=f-12;j<he;++j)X[j]+=B-16*X[f]*R[j-(f-32)],B=Math.floor((X[j]+128)/256),X[j]-=B*256;X[j]+=B,X[f]=0}for(B=0,j=0;j<32;j++)X[j]+=B-(X[31]>>4)*R[j],B=X[j]>>8,X[j]&=255;for(j=0;j<32;j++)X[j]-=B*R[j];for(f=0;f<32;f++)X[f+1]+=X[f]>>8,Q[f]=X[f]&255}function te(Q){const X=new Float64Array(64);for(let B=0;B<64;B++)X[B]=Q[B];for(let B=0;B<64;B++)Q[B]=0;J(Q,X)}function ae(Q,X){const B=new Float64Array(64),f=[o(),o(),o(),o()],j=(0,r.hash)(Q.subarray(0,32));j[0]&=248,j[31]&=127,j[31]|=64;const he=new Uint8Array(64);he.set(j.subarray(32),32);const pe=new r.SHA512;pe.update(he.subarray(32)),pe.update(X);const Oe=pe.digest();pe.clean(),te(Oe),v(f,Oe),C(he,f),pe.reset(),pe.update(he.subarray(0,32)),pe.update(Q.subarray(32)),pe.update(X);const ze=pe.digest();te(ze);for(let Ve=0;Ve<32;Ve++)B[Ve]=Oe[Ve];for(let Ve=0;Ve<32;Ve++)for(let $e=0;$e<32;$e++)B[Ve+$e]+=ze[Ve]*j[$e];return J(he.subarray(32),B),he}i.sign=ae;function ie(Q,X){const B=o(),f=o(),j=o(),he=o(),pe=o(),Oe=o(),ze=o();return M(Q[2],y),b(Q[1],X),l(j,Q[1]),c(he,j,I),g(j,j,Q[2]),D(he,Q[2],he),l(pe,he),l(Oe,pe),c(ze,Oe,pe),c(B,ze,j),c(B,B,he),h(B,B),c(B,B,j),c(B,B,he),c(B,B,he),c(Q[0],B,he),l(f,Q[0]),c(f,f,he),p(f,j)&&c(Q[0],Q[0],K),l(f,Q[0]),c(f,f,he),p(f,j)?-1:(S(Q[0])===X[31]>>7&&g(Q[0],O,Q[0]),c(Q[3],Q[0],Q[1]),0)}function ye(Q,X,B){const f=new Uint8Array(32),j=[o(),o(),o(),o()],he=[o(),o(),o(),o()];if(B.length!==i.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${i.SIGNATURE_LENGTH} bytes`);if(ie(he,Q))return!1;const pe=new r.SHA512;pe.update(B.subarray(0,32)),pe.update(Q),pe.update(X);const Oe=pe.digest();return te(Oe),E(j,he,Oe),v(he,B.subarray(32)),_(j,he),C(f,j),!re(B,f)}i.verify=ye;function fe(Q){let X=[o(),o(),o(),o()];if(ie(X,Q))throw new Error("Ed25519: invalid public key");let B=o(),f=o(),j=X[1];D(B,y,j),g(f,y,j),Y(f,f),c(B,B,f);let he=new Uint8Array(32);return q(he,B),he}i.convertPublicKeyToX25519=fe;function me(Q){const X=(0,r.hash)(Q.subarray(0,32));X[0]&=248,X[31]&=127,X[31]|=64;const B=new Uint8Array(X.subarray(0,32));return(0,s.wipe)(X),B}i.convertSecretKeyToX25519=me})(mu);const Fw="EdDSA",jw="JWT",Td=".",Nd="base64url",$w="utf8",Lw="utf8",Mw=":",Hw="did",qw="key",ul="base58btc",zw="z",Bw="K36",Kw=32;function ja(i){return fr(mr(cu(i),$w),Nd)}function Rd(i){const t=mr(Bw,ul),r=zw+fr(Vc([t,i]),ul);return[Hw,qw,r].join(Mw)}function Vw(i){return fr(i,Nd)}function kw(i){return mr([ja(i.header),ja(i.payload)].join(Td),Lw)}function Gw(i){return[ja(i.header),ja(i.payload),Vw(i.signature)].join(Td)}function hl(i=Ti.randomBytes(Kw)){return mu.generateKeyPairFromSeed(i)}async function Ww(i,t,r,s,o=De.fromMiliseconds(Date.now())){const d={alg:Fw,typ:jw},O=Rd(s.publicKey),y=o+r,I={iss:O,sub:i,aud:t,iat:o,exp:y},N=kw({header:d,payload:I}),P=mu.sign(s.secretKey,N);return Gw({header:d,payload:I,signature:P})}var fl=globalThis&&globalThis.__spreadArray||function(i,t,r){if(r||arguments.length===2)for(var s=0,o=t.length,d;s<o;s++)(d||!(s in t))&&(d||(d=Array.prototype.slice.call(t,0,s)),d[s]=t[s]);return i.concat(d||Array.prototype.slice.call(t))},Yw=function(){function i(t,r,s){this.name=t,this.version=r,this.os=s,this.type="browser"}return i}(),Jw=function(){function i(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return i}(),Xw=function(){function i(t,r,s,o){this.name=t,this.version=r,this.os=s,this.bot=o,this.type="bot-device"}return i}(),Qw=function(){function i(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return i}(),Zw=function(){function i(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return i}(),eE=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,tE=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,ll=3,rE=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",eE]],dl=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function nE(i){return i?pl(i):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Zw:typeof navigator<"u"?pl(navigator.userAgent):aE()}function iE(i){return i!==""&&rE.reduce(function(t,r){var s=r[0],o=r[1];if(t)return t;var d=o.exec(i);return!!d&&[s,d]},!1)}function pl(i){var t=iE(i);if(!t)return null;var r=t[0],s=t[1];if(r==="searchbot")return new Qw;var o=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);o?o.length<ll&&(o=fl(fl([],o,!0),oE(ll-o.length),!0)):o=[];var d=o.join("."),O=sE(i),y=tE.exec(i);return y&&y[1]?new Xw(r,d,O,y[1]):new Yw(r,d,O)}function sE(i){for(var t=0,r=dl.length;t<r;t++){var s=dl[t],o=s[0],d=s[1],O=d.exec(i);if(O)return o}return null}function aE(){var i=typeof process<"u"&&process.version;return i?new Jw(process.version.slice(1)):null}function oE(i){for(var t=[],r=0;r<i;r++)t.push("0");return t}var lt={};Object.defineProperty(lt,"__esModule",{value:!0});lt.getLocalStorage=lt.getLocalStorageOrThrow=lt.getCrypto=lt.getCryptoOrThrow=Fd=lt.getLocation=lt.getLocationOrThrow=bu=lt.getNavigator=lt.getNavigatorOrThrow=Ud=lt.getDocument=lt.getDocumentOrThrow=lt.getFromWindowOrThrow=lt.getFromWindow=void 0;function ri(i){let t;return typeof window<"u"&&typeof window[i]<"u"&&(t=window[i]),t}lt.getFromWindow=ri;function Ri(i){const t=ri(i);if(!t)throw new Error(`${i} is not defined in Window`);return t}lt.getFromWindowOrThrow=Ri;function cE(){return Ri("document")}lt.getDocumentOrThrow=cE;function uE(){return ri("document")}var Ud=lt.getDocument=uE;function hE(){return Ri("navigator")}lt.getNavigatorOrThrow=hE;function fE(){return ri("navigator")}var bu=lt.getNavigator=fE;function lE(){return Ri("location")}lt.getLocationOrThrow=lE;function dE(){return ri("location")}var Fd=lt.getLocation=dE;function pE(){return Ri("crypto")}lt.getCryptoOrThrow=pE;function gE(){return ri("crypto")}lt.getCrypto=gE;function _E(){return Ri("localStorage")}lt.getLocalStorageOrThrow=_E;function yE(){return ri("localStorage")}lt.getLocalStorage=yE;var wu={};Object.defineProperty(wu,"__esModule",{value:!0});var jd=wu.getWindowMetadata=void 0;const gl=lt;function vE(){let i,t;try{i=gl.getDocumentOrThrow(),t=gl.getLocationOrThrow()}catch{return null}function r(){const U=i.getElementsByTagName("link"),K=[];for(let M=0;M<U.length;M++){const L=U[M],W=L.getAttribute("rel");if(W&&W.toLowerCase().indexOf("icon")>-1){const q=L.getAttribute("href");if(q)if(q.toLowerCase().indexOf("https:")===-1&&q.toLowerCase().indexOf("http:")===-1&&q.indexOf("//")!==0){let re=t.protocol+"//"+t.host;if(q.indexOf("/")===0)re+=q;else{const p=t.pathname.split("/");p.pop();const S=p.join("/");re+=S+"/"+q}K.push(re)}else if(q.indexOf("//")===0){const re=t.protocol+q;K.push(re)}else K.push(q)}}return K}function s(...U){const K=i.getElementsByTagName("meta");for(let M=0;M<K.length;M++){const L=K[M],W=["itemprop","property","name"].map(q=>L.getAttribute(q)).filter(q=>q?U.includes(q):!1);if(W.length&&W){const q=L.getAttribute("content");if(q)return q}}return""}function o(){let U=s("name","og:site_name","og:title","twitter:title");return U||(U=i.title),U}function d(){return s("description","og:description","twitter:description","keywords")}const O=o(),y=d(),I=t.origin,N=r();return{description:y,url:I,icons:N,name:O}}jd=wu.getWindowMetadata=vE;var ps={};(function(i){const t=au,r=ou,s=su,o=vu,d=p=>p==null,O=Symbol("encodeFragmentIdentifier");function y(p){switch(p.arrayFormat){case"index":return S=>(b,D)=>{const g=b.length;return D===void 0||p.skipNull&&D===null||p.skipEmptyString&&D===""?b:D===null?[...b,[P(S,p),"[",g,"]"].join("")]:[...b,[P(S,p),"[",P(g,p),"]=",P(D,p)].join("")]};case"bracket":return S=>(b,D)=>D===void 0||p.skipNull&&D===null||p.skipEmptyString&&D===""?b:D===null?[...b,[P(S,p),"[]"].join("")]:[...b,[P(S,p),"[]=",P(D,p)].join("")];case"colon-list-separator":return S=>(b,D)=>D===void 0||p.skipNull&&D===null||p.skipEmptyString&&D===""?b:D===null?[...b,[P(S,p),":list="].join("")]:[...b,[P(S,p),":list=",P(D,p)].join("")];case"comma":case"separator":case"bracket-separator":{const S=p.arrayFormat==="bracket-separator"?"[]=":"=";return b=>(D,g)=>g===void 0||p.skipNull&&g===null||p.skipEmptyString&&g===""?D:(g=g===null?"":g,D.length===0?[[P(b,p),S,P(g,p)].join("")]:[[D,P(g,p)].join(p.arrayFormatSeparator)])}default:return S=>(b,D)=>D===void 0||p.skipNull&&D===null||p.skipEmptyString&&D===""?b:D===null?[...b,P(S,p)]:[...b,[P(S,p),"=",P(D,p)].join("")]}}function I(p){let S;switch(p.arrayFormat){case"index":return(b,D,g)=>{if(S=/\[(\d*)\]$/.exec(b),b=b.replace(/\[\d*\]$/,""),!S){g[b]=D;return}g[b]===void 0&&(g[b]={}),g[b][S[1]]=D};case"bracket":return(b,D,g)=>{if(S=/(\[\])$/.exec(b),b=b.replace(/\[\]$/,""),!S){g[b]=D;return}if(g[b]===void 0){g[b]=[D];return}g[b]=[].concat(g[b],D)};case"colon-list-separator":return(b,D,g)=>{if(S=/(:list)$/.exec(b),b=b.replace(/:list$/,""),!S){g[b]=D;return}if(g[b]===void 0){g[b]=[D];return}g[b]=[].concat(g[b],D)};case"comma":case"separator":return(b,D,g)=>{const c=typeof D=="string"&&D.includes(p.arrayFormatSeparator),l=typeof D=="string"&&!c&&U(D,p).includes(p.arrayFormatSeparator);D=l?U(D,p):D;const Y=c||l?D.split(p.arrayFormatSeparator).map(h=>U(h,p)):D===null?D:U(D,p);g[b]=Y};case"bracket-separator":return(b,D,g)=>{const c=/(\[\])$/.test(b);if(b=b.replace(/\[\]$/,""),!c){g[b]=D&&U(D,p);return}const l=D===null?[]:D.split(p.arrayFormatSeparator).map(Y=>U(Y,p));if(g[b]===void 0){g[b]=l;return}g[b]=[].concat(g[b],l)};default:return(b,D,g)=>{if(g[b]===void 0){g[b]=D;return}g[b]=[].concat(g[b],D)}}}function N(p){if(typeof p!="string"||p.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function P(p,S){return S.encode?S.strict?t(p):encodeURIComponent(p):p}function U(p,S){return S.decode?r(p):p}function K(p){return Array.isArray(p)?p.sort():typeof p=="object"?K(Object.keys(p)).sort((S,b)=>Number(S)-Number(b)).map(S=>p[S]):p}function M(p){const S=p.indexOf("#");return S!==-1&&(p=p.slice(0,S)),p}function L(p){let S="";const b=p.indexOf("#");return b!==-1&&(S=p.slice(b)),S}function W(p){p=M(p);const S=p.indexOf("?");return S===-1?"":p.slice(S+1)}function q(p,S){return S.parseNumbers&&!Number.isNaN(Number(p))&&typeof p=="string"&&p.trim()!==""?p=Number(p):S.parseBooleans&&p!==null&&(p.toLowerCase()==="true"||p.toLowerCase()==="false")&&(p=p.toLowerCase()==="true"),p}function re(p,S){S=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},S),N(S.arrayFormatSeparator);const b=I(S),D=Object.create(null);if(typeof p!="string"||(p=p.trim().replace(/^[?#&]/,""),!p))return D;for(const g of p.split("&")){if(g==="")continue;let[c,l]=s(S.decode?g.replace(/\+/g," "):g,"=");l=l===void 0?null:["comma","separator","bracket-separator"].includes(S.arrayFormat)?l:U(l,S),b(U(c,S),l,D)}for(const g of Object.keys(D)){const c=D[g];if(typeof c=="object"&&c!==null)for(const l of Object.keys(c))c[l]=q(c[l],S);else D[g]=q(c,S)}return S.sort===!1?D:(S.sort===!0?Object.keys(D).sort():Object.keys(D).sort(S.sort)).reduce((g,c)=>{const l=D[c];return Boolean(l)&&typeof l=="object"&&!Array.isArray(l)?g[c]=K(l):g[c]=l,g},Object.create(null))}i.extract=W,i.parse=re,i.stringify=(p,S)=>{if(!p)return"";S=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},S),N(S.arrayFormatSeparator);const b=l=>S.skipNull&&d(p[l])||S.skipEmptyString&&p[l]==="",D=y(S),g={};for(const l of Object.keys(p))b(l)||(g[l]=p[l]);const c=Object.keys(g);return S.sort!==!1&&c.sort(S.sort),c.map(l=>{const Y=p[l];return Y===void 0?"":Y===null?P(l,S):Array.isArray(Y)?Y.length===0&&S.arrayFormat==="bracket-separator"?P(l,S)+"[]":Y.reduce(D(l),[]).join("&"):P(l,S)+"="+P(Y,S)}).filter(l=>l.length>0).join("&")},i.parseUrl=(p,S)=>{S=Object.assign({decode:!0},S);const[b,D]=s(p,"#");return Object.assign({url:b.split("?")[0]||"",query:re(W(p),S)},S&&S.parseFragmentIdentifier&&D?{fragmentIdentifier:U(D,S)}:{})},i.stringifyUrl=(p,S)=>{S=Object.assign({encode:!0,strict:!0,[O]:!0},S);const b=M(p.url).split("?")[0]||"",D=i.extract(p.url),g=i.parse(D,{sort:!1}),c=Object.assign(g,p.query);let l=i.stringify(c,S);l&&(l=`?${l}`);let Y=L(p.url);return p.fragmentIdentifier&&(Y=`#${S[O]?P(p.fragmentIdentifier,S):p.fragmentIdentifier}`),`${b}${l}${Y}`},i.pick=(p,S,b)=>{b=Object.assign({parseFragmentIdentifier:!0,[O]:!1},b);const{url:D,query:g,fragmentIdentifier:c}=i.parseUrl(p,b);return i.stringifyUrl({url:D,query:o(g,S),fragmentIdentifier:c},b)},i.exclude=(p,S,b)=>{const D=Array.isArray(S)?g=>!S.includes(g):(g,c)=>!S(g,c);return i.pick(p,D,b)}})(ps);function $d(i,t){return i.includes(":")?[i]:t.chains||[]}const Ld="base10",hr="base16",Wc="base64pad",Eu="utf8",Md=0,ni=1,mE=0,_l=1,Yc=12,Du=32;function bE(){const i=gu.generateKeyPair();return{privateKey:fr(i.secretKey,hr),publicKey:fr(i.publicKey,hr)}}function Jc(){const i=Ti.randomBytes(Du);return fr(i,hr)}function wE(i,t){const r=gu.sharedKey(mr(i,hr),mr(t,hr)),s=new Pm(Ka.SHA256,r).expand(Du);return fr(s,hr)}function EE(i){const t=Ka.hash(mr(i,hr));return fr(t,hr)}function Qn(i){const t=Ka.hash(mr(i,Eu));return fr(t,hr)}function DE(i){return mr(`${i}`,Ld)}function ms(i){return Number(fr(i,Ld))}function SE(i){const t=DE(typeof i.type<"u"?i.type:Md);if(ms(t)===ni&&typeof i.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof i.senderPublicKey<"u"?mr(i.senderPublicKey,hr):void 0,s=typeof i.iv<"u"?mr(i.iv,hr):Ti.randomBytes(Yc),o=new du.ChaCha20Poly1305(mr(i.symKey,hr)).seal(s,mr(i.message,Eu));return IE({type:t,sealed:o,iv:s,senderPublicKey:r})}function OE(i){const t=new du.ChaCha20Poly1305(mr(i.symKey,hr)),{sealed:r,iv:s}=$a(i.encoded),o=t.open(s,r);if(o===null)throw new Error("Failed to decrypt");return fr(o,Eu)}function IE(i){if(ms(i.type)===ni){if(typeof i.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return fr(Vc([i.type,i.senderPublicKey,i.iv,i.sealed]),Wc)}return fr(Vc([i.type,i.iv,i.sealed]),Wc)}function $a(i){const t=mr(i,Wc),r=t.slice(mE,_l),s=_l;if(ms(r)===ni){const y=s+Du,I=y+Yc,N=t.slice(s,y),P=t.slice(y,I),U=t.slice(I);return{type:r,sealed:U,iv:P,senderPublicKey:N}}const o=s+Yc,d=t.slice(s,o),O=t.slice(o);return{type:r,sealed:O,iv:d}}function xE(i,t){const r=$a(i);return Hd({type:ms(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?fr(r.senderPublicKey,hr):void 0,receiverPublicKey:t?.receiverPublicKey})}function Hd(i){const t=i?.type||Md;if(t===ni){if(typeof i?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof i?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:i?.senderPublicKey,receiverPublicKey:i?.receiverPublicKey}}function yl(i){return i.type===ni&&typeof i.senderPublicKey=="string"&&typeof i.receiverPublicKey=="string"}var AE=Object.defineProperty,vl=Object.getOwnPropertySymbols,CE=Object.prototype.hasOwnProperty,PE=Object.prototype.propertyIsEnumerable,ml=(i,t,r)=>t in i?AE(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,bl=(i,t)=>{for(var r in t||(t={}))CE.call(t,r)&&ml(i,r,t[r]);if(vl)for(var r of vl(t))PE.call(t,r)&&ml(i,r,t[r]);return i};const TE="ReactNative",ls={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},NE="js";function Su(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function RE(){return!Ud()&&!!bu()&&navigator.product===TE}function Ou(){return!Su()&&!!bu()}function UE(){return RE()?ls.reactNative:Su()?ls.node:Ou()?ls.browser:ls.unknown}function FE(i,t){let r=ps.parse(i);return r=bl(bl({},r),t),i=ps.stringify(r),i}function jE(){return jd()||{name:"",description:"",url:"",icons:[""]}}function $E(){const i=nE();if(i===null)return"unknown";const t=i.os?i.os.replace(" ","").toLowerCase():"unknown";return i.type==="browser"?[t,i.name,i.version].join("-"):[t,i.version].join("-")}function LE(){var i;const t=UE();return t===ls.browser?[t,((i=Fd())==null?void 0:i.host)||"unknown"].join(":"):t}function ME(i,t,r){const s=$E(),o=LE();return[[i,t].join("-"),[NE,r].join("-"),s,o].join("/")}function HE({protocol:i,version:t,relayUrl:r,sdkVersion:s,auth:o,projectId:d,useOnCloseEvent:O}){const y=r.split("?"),I=ME(i,t,s),N={auth:o,ua:I,projectId:d,useOnCloseEvent:O||void 0},P=FE(y[1]||"",N);return y[0]+"?"+P}function Xn(i,t){return i.filter(r=>t.includes(r)).length===i.length}function qd(i){return Object.fromEntries(i.entries())}function zd(i){return new Map(Object.entries(i))}function Ai(i=De.FIVE_MINUTES,t){const r=De.toMiliseconds(i||De.FIVE_MINUTES);let s,o,d;return{resolve:O=>{d&&s&&(clearTimeout(d),s(O))},reject:O=>{d&&o&&(clearTimeout(d),o(O))},done:()=>new Promise((O,y)=>{d=setTimeout(()=>{y(new Error(t))},r),s=O,o=y})}}function La(i,t,r){return new Promise(async(s,o)=>{const d=setTimeout(()=>o(new Error(r)),t);try{const O=await i;s(O)}catch(O){o(O)}clearTimeout(d)})}function Bd(i,t){if(typeof t=="string"&&t.startsWith(`${i}:`))return t;if(i.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(i.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${i}`)}function qE(i){return Bd("topic",i)}function zE(i){return Bd("id",i)}function Kd(i){const[t,r]=i.split(":"),s={id:void 0,topic:void 0};if(t==="topic"&&typeof r=="string")s.topic=r;else if(t==="id"&&Number.isInteger(Number(r)))s.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return s}function kr(i,t){return De.fromMiliseconds((t||Date.now())+De.toMiliseconds(i))}function An(i){return Date.now()>=De.toMiliseconds(i)}function qt(i,t){return`${i}${t?`:${t}`:""}`}const BE="irn";function Xc(i){return i?.relay||{protocol:BE}}function Ca(i){const t=ew[i];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${i}`);return t}var KE=Object.defineProperty,wl=Object.getOwnPropertySymbols,VE=Object.prototype.hasOwnProperty,kE=Object.prototype.propertyIsEnumerable,El=(i,t,r)=>t in i?KE(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,GE=(i,t)=>{for(var r in t||(t={}))VE.call(t,r)&&El(i,r,t[r]);if(wl)for(var r of wl(t))kE.call(t,r)&&El(i,r,t[r]);return i};function WE(i,t="-"){const r={},s="relay"+t;return Object.keys(i).forEach(o=>{if(o.startsWith(s)){const d=o.replace(s,""),O=i[o];r[d]=O}}),r}function YE(i){const t=i.indexOf(":"),r=i.indexOf("?")!==-1?i.indexOf("?"):void 0,s=i.substring(0,t),o=i.substring(t+1,r).split("@"),d=typeof r<"u"?i.substring(r):"",O=ps.parse(d);return{protocol:s,topic:o[0],version:parseInt(o[1],10),symKey:O.symKey,relay:WE(O)}}function JE(i,t="-"){const r="relay",s={};return Object.keys(i).forEach(o=>{const d=r+t+o;i[o]&&(s[d]=i[o])}),s}function XE(i){return`${i.protocol}:${i.topic}@${i.version}?`+ps.stringify(GE({symKey:i.symKey},JE(i.relay)))}function Ui(i){const t=[];return i.forEach(r=>{const[s,o]=r.split(":");t.push(`${s}:${o}`)}),t}function QE(i){const t=[];return Object.values(i).forEach(r=>{t.push(...Ui(r.accounts))}),t}function ZE(i,t){const r=[];return Object.values(i).forEach(s=>{Ui(s.accounts).includes(t)&&r.push(...s.methods)}),r}function e3(i,t){const r=[];return Object.values(i).forEach(s=>{Ui(s.accounts).includes(t)&&r.push(...s.events)}),r}function t3(i,t){const r=Pa(i,t);if(r)throw new Error(r.message);const s={};for(const[o,d]of Object.entries(i))s[o]={methods:d.methods,events:d.events,chains:d.accounts.map(O=>`${O.split(":")[0]}:${O.split(":")[1]}`)};return s}const r3={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},n3={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function de(i,t){const{message:r,code:s}=n3[i];return{message:t?`${r} ${t}`:r,code:s}}function Gt(i,t){const{message:r,code:s}=r3[i];return{message:t?`${r} ${t}`:r,code:s}}function bs(i,t){return Array.isArray(i)?typeof t<"u"&&i.length?i.every(t):!0:!1}function ds(i){return Object.getPrototypeOf(i)===Object.prototype&&Object.keys(i).length}function cr(i){return typeof i>"u"}function Wt(i,t){return t&&cr(i)?!0:typeof i=="string"&&Boolean(i.trim().length)}function Iu(i,t){return t&&cr(i)?!0:typeof i=="number"&&!isNaN(i)}function i3(i,t){const{requiredNamespaces:r}=t,s=Object.keys(i.namespaces),o=Object.keys(r);let d=!0;return Xn(o,s)?(s.forEach(O=>{const{accounts:y,methods:I,events:N}=i.namespaces[O],P=Ui(y),U=r[O];(!Xn($d(O,U),P)||!Xn(U.methods,I)||!Xn(U.events,N))&&(d=!1)}),d):!1}function xu(i){return Wt(i,!1)&&i.includes(":")?i.split(":").length===2:!1}function s3(i){if(Wt(i,!1)&&i.includes(":")){const t=i.split(":");if(t.length===3){const r=t[0]+":"+t[1];return!!t[2]&&xu(r)}}return!1}function a3(i){if(Wt(i,!1))try{return typeof new URL(i)<"u"}catch{return!1}return!1}function o3(i){var t;return(t=i?.proposer)==null?void 0:t.publicKey}function c3(i){return i?.topic}function u3(i,t){let r=null;return Wt(i?.publicKey,!1)||(r=de("MISSING_OR_INVALID",`${t} controller public key should be a string`)),r}function Dl(i){let t=!0;return bs(i)?i.length&&(t=i.every(r=>Wt(r,!1))):t=!1,t}function h3(i,t,r){let s=null;return bs(t)?t.forEach(o=>{s||(!xu(o)||!o.includes(i))&&(s=Gt("UNSUPPORTED_CHAINS",`${r}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):s=Gt("UNSUPPORTED_CHAINS",`${r}, chains ${t} should be an array of strings conforming to "namespace:chainId" format`),s}function f3(i,t){let r=null;return Object.entries(i).forEach(([s,o])=>{if(r)return;const d=h3(s,$d(s,o),`${t} requiredNamespace`);d&&(r=d)}),r}function l3(i,t){let r=null;return bs(i)?i.forEach(s=>{r||s3(s)||(r=Gt("UNSUPPORTED_ACCOUNTS",`${t}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):r=Gt("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function d3(i,t){let r=null;return Object.values(i).forEach(s=>{if(r)return;const o=l3(s?.accounts,`${t} namespace`);o&&(r=o)}),r}function p3(i,t){let r=null;return Dl(i?.methods)?Dl(i?.events)||(r=Gt("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=Gt("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}function Vd(i,t){let r=null;return Object.values(i).forEach(s=>{if(r)return;const o=p3(s,`${t}, namespace`);o&&(r=o)}),r}function g3(i,t,r){let s=null;if(i&&ds(i)){const o=Vd(i,t);o&&(s=o);const d=f3(i,t);d&&(s=d)}else s=de("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return s}function Pa(i,t){let r=null;if(i&&ds(i)){const s=Vd(i,t);s&&(r=s);const o=d3(i,t);o&&(r=o)}else r=de("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function kd(i){return Wt(i.protocol,!0)}function _3(i,t){let r=!1;return t&&!i?r=!0:i&&bs(i)&&i.length&&i.forEach(s=>{r=kd(s)}),r}function y3(i){return typeof i=="number"}function vr(i){return typeof i<"u"&&typeof i!==null}function v3(i){return!(!i||typeof i!="object"||!i.code||!Iu(i.code,!1)||!i.message||!Wt(i.message,!1))}function m3(i){return!(cr(i)||!Wt(i.method,!1))}function b3(i){return!(cr(i)||cr(i.result)&&cr(i.error)||!Iu(i.id,!1)||!Wt(i.jsonrpc,!1))}function w3(i){return!(cr(i)||!Wt(i.name,!1))}function Sl(i,t){return!(!xu(t)||!QE(i).includes(t))}function E3(i,t,r){return Wt(r,!1)?ZE(i,t).includes(r):!1}function D3(i,t,r){return Wt(r,!1)?e3(i,t).includes(r):!1}function Ol(i,t,r){let s=null;const o=S3(i),d=O3(t),O=Object.keys(o),y=Object.keys(d),I=Il(Object.keys(i)),N=Il(Object.keys(t)),P=I.filter(U=>!N.includes(U));return P.length&&(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${P.toString()}
      Received: ${Object.keys(t).toString()}`)),Xn(O,y)||(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${O.toString()}
      Approved: ${y.toString()}`)),Object.keys(t).forEach(U=>{if(!U.includes(":")||s)return;const K=Ui(t[U].accounts);K.includes(U)||(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${U}
        Required: ${U}
        Approved: ${K.toString()}`))}),O.forEach(U=>{s||(Xn(o[U].methods,d[U].methods)?Xn(o[U].events,d[U].events)||(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${U}`)):s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${U}`))}),s}function S3(i){const t={};return Object.keys(i).forEach(r=>{var s;r.includes(":")?t[r]=i[r]:(s=i[r].chains)==null||s.forEach(o=>{t[o]={methods:i[r].methods,events:i[r].events}})}),t}function Il(i){return[...new Set(i.map(t=>t.includes(":")?t.split(":")[0]:t))]}function O3(i){const t={};return Object.keys(i).forEach(r=>{r.includes(":")?t[r]=i[r]:Ui(i[r].accounts)?.forEach(o=>{t[o]={accounts:i[r].accounts.filter(d=>d.includes(`${o}:`)),methods:i[r].methods,events:i[r].events}})}),t}function I3(i,t){return Iu(i,!1)&&i<=t.max&&i>=t.min}const xl=10,x3=()=>typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:require("ws"),A3=()=>typeof window<"u",C3=x3();class P3{constructor(t){if(this.url=t,this.events=new Ir.EventEmitter,this.registering=!1,!Rf(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);this.url=t}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){return new Promise((t,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),t()},this.socket.close()})}async send(t,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(cu(t))}catch(s){this.onError(t.id,s)}}register(t=this.url){if(!Rf(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((s,o)=>{this.events.once("register_error",d=>{this.resetMaxListeners(),o(d)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=t,this.registering=!0,new Promise((r,s)=>{const o=Wv.isReactNative()?void 0:{rejectUnauthorized:!Yv(t)},d=new C3(t,[],o);A3()?d.onerror=O=>{const y=O;s(this.emitError(y.error))}:d.on("error",O=>{s(this.emitError(O))}),d.onopen=()=>{this.onOpen(d),r(d)}})}onOpen(t){t.onmessage=r=>this.onPayload(r),t.onclose=r=>this.onClose(r),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(typeof t.data>"u")return;const r=typeof t.data=="string"?od(t.data):t.data;this.events.emit("payload",r)}onError(t,r){const s=this.parseError(r),o=s.message||s.toString(),d=uu(t,o);this.events.emit("payload",d)}parseError(t,r=this.url){return Jv(t,r,"WS")}resetMaxListeners(){this.events.getMaxListeners()>xl&&this.events.setMaxListeners(xl)}emitError(t){const r=this.parseError(new Error(t?.message||`WebSocket connection failed for URL: ${this.url}`));return this.events.emit("register_error",r),r}}var Ma={},T3={get exports(){return Ma},set exports(i){Ma=i}};(function(i,t){var r=200,s="__lodash_hash_undefined__",o=1,d=2,O=9007199254740991,y="[object Arguments]",I="[object Array]",N="[object AsyncFunction]",P="[object Boolean]",U="[object Date]",K="[object Error]",M="[object Function]",L="[object GeneratorFunction]",W="[object Map]",q="[object Number]",re="[object Null]",p="[object Object]",S="[object Promise]",b="[object Proxy]",D="[object RegExp]",g="[object Set]",c="[object String]",l="[object Symbol]",Y="[object Undefined]",h="[object WeakMap]",_="[object ArrayBuffer]",w="[object DataView]",C="[object Float32Array]",E="[object Float64Array]",v="[object Int8Array]",$="[object Int16Array]",z="[object Int32Array]",Z="[object Uint8Array]",R="[object Uint8ClampedArray]",J="[object Uint16Array]",te="[object Uint32Array]",ae=/[\\^$.*+?()[\]{}|]/g,ie=/^\[object .+?Constructor\]$/,ye=/^(?:0|[1-9]\d*)$/,fe={};fe[C]=fe[E]=fe[v]=fe[$]=fe[z]=fe[Z]=fe[R]=fe[J]=fe[te]=!0,fe[y]=fe[I]=fe[_]=fe[P]=fe[w]=fe[U]=fe[K]=fe[M]=fe[W]=fe[q]=fe[p]=fe[D]=fe[g]=fe[c]=fe[h]=!1;var me=typeof ur=="object"&&ur&&ur.Object===Object&&ur,Q=typeof self=="object"&&self&&self.Object===Object&&self,X=me||Q||Function("return this")(),B=t&&!t.nodeType&&t,f=B&&!0&&i&&!i.nodeType&&i,j=f&&f.exports===B,he=j&&me.process,pe=function(){try{return he&&he.binding&&he.binding("util")}catch{}}(),Oe=pe&&pe.isTypedArray;function ze(T,V){for(var ce=-1,ge=T==null?0:T.length,ot=0,Te=[];++ce<ge;){var pt=T[ce];V(pt,ce,T)&&(Te[ot++]=pt)}return Te}function Ve(T,V){for(var ce=-1,ge=V.length,ot=T.length;++ce<ge;)T[ot+ce]=V[ce];return T}function $e(T,V){for(var ce=-1,ge=T==null?0:T.length;++ce<ge;)if(V(T[ce],ce,T))return!0;return!1}function _t(T,V){for(var ce=-1,ge=Array(T);++ce<T;)ge[ce]=V(ce);return ge}function yt(T){return function(V){return T(V)}}function Me(T,V){return T.has(V)}function Ie(T,V){return T?.[V]}function Re(T){var V=-1,ce=Array(T.size);return T.forEach(function(ge,ot){ce[++V]=[ot,ge]}),ce}function Ue(T,V){return function(ce){return T(V(ce))}}function He(T){var V=-1,ce=Array(T.size);return T.forEach(function(ge){ce[++V]=ge}),ce}var Ae=Array.prototype,Fe=Function.prototype,Se=Object.prototype,Ce=X["__core-js_shared__"],Be=Fe.toString,xe=Se.hasOwnProperty,ke=function(){var T=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||"");return T?"Symbol(src)_1."+T:""}(),We=Se.toString,et=RegExp("^"+Be.call(xe).replace(ae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=j?X.Buffer:void 0,Je=X.Symbol,tr=X.Uint8Array,lr=Se.propertyIsEnumerable,Gr=Ae.splice,rr=Je?Je.toStringTag:void 0,rn=Object.getOwnPropertySymbols,_n=tt?tt.isBuffer:void 0,Rn=Ue(Object.keys,Object),Dt=br(X,"DataView"),vt=br(X,"Map"),St=br(X,"Promise"),Ot=br(X,"Set"),wt=br(X,"WeakMap"),mt=br(Object,"create"),Ut=sn(Dt),Ft=sn(vt),It=sn(St),jt=sn(Ot),xt=sn(wt),Pt=Je?Je.prototype:void 0,At=Pt?Pt.valueOf:void 0;function ht(T){var V=-1,ce=T==null?0:T.length;for(this.clear();++V<ce;){var ge=T[V];this.set(ge[0],ge[1])}}function $t(){this.__data__=mt?mt(null):{},this.size=0}function Lt(T){var V=this.has(T)&&delete this.__data__[T];return this.size-=V?1:0,V}function Ya(T){var V=this.__data__;if(mt){var ce=V[T];return ce===s?void 0:ce}return xe.call(V,T)?V[T]:void 0}function Ja(T){var V=this.__data__;return mt?V[T]!==void 0:xe.call(V,T)}function Xa(T,V){var ce=this.__data__;return this.size+=this.has(T)?0:1,ce[T]=mt&&V===void 0?s:V,this}ht.prototype.clear=$t,ht.prototype.delete=Lt,ht.prototype.get=Ya,ht.prototype.has=Ja,ht.prototype.set=Xa;function Ar(T){var V=-1,ce=T==null?0:T.length;for(this.clear();++V<ce;){var ge=T[V];this.set(ge[0],ge[1])}}function Qa(){this.__data__=[],this.size=0}function Za(T){var V=this.__data__,ce=Un(V,T);if(ce<0)return!1;var ge=V.length-1;return ce==ge?V.pop():Gr.call(V,ce,1),--this.size,!0}function eo(T){var V=this.__data__,ce=Un(V,T);return ce<0?void 0:V[ce][1]}function to(T){return Un(this.__data__,T)>-1}function ro(T,V){var ce=this.__data__,ge=Un(ce,T);return ge<0?(++this.size,ce.push([T,V])):ce[ge][1]=V,this}Ar.prototype.clear=Qa,Ar.prototype.delete=Za,Ar.prototype.get=eo,Ar.prototype.has=to,Ar.prototype.set=ro;function nn(T){var V=-1,ce=T==null?0:T.length;for(this.clear();++V<ce;){var ge=T[V];this.set(ge[0],ge[1])}}function ai(){this.size=0,this.__data__={hash:new ht,map:new(vt||Ar),string:new ht}}function no(T){var V=yn(this,T).delete(T);return this.size-=V?1:0,V}function oi(T){return yn(this,T).get(T)}function io(T){return yn(this,T).has(T)}function so(T,V){var ce=yn(this,T),ge=ce.size;return ce.set(T,V),this.size+=ce.size==ge?0:1,this}nn.prototype.clear=ai,nn.prototype.delete=no,nn.prototype.get=oi,nn.prototype.has=io,nn.prototype.set=so;function ci(T){var V=-1,ce=T==null?0:T.length;for(this.__data__=new nn;++V<ce;)this.add(T[V])}function Es(T){return this.__data__.set(T,s),this}function Ds(T){return this.__data__.has(T)}ci.prototype.add=ci.prototype.push=Es,ci.prototype.has=Ds;function Hr(T){var V=this.__data__=new Ar(T);this.size=V.size}function ao(){this.__data__=new Ar,this.size=0}function oo(T){var V=this.__data__,ce=V.delete(T);return this.size=V.size,ce}function co(T){return this.__data__.get(T)}function uo(T){return this.__data__.has(T)}function Ss(T,V){var ce=this.__data__;if(ce instanceof Ar){var ge=ce.__data__;if(!vt||ge.length<r-1)return ge.push([T,V]),this.size=++ce.size,this;ce=this.__data__=new nn(ge)}return ce.set(T,V),this.size=ce.size,this}Hr.prototype.clear=ao,Hr.prototype.delete=oo,Hr.prototype.get=co,Hr.prototype.has=uo,Hr.prototype.set=Ss;function Os(T,V){var ce=fi(T),ge=!ce&&$s(T),ot=!ce&&!ge&&Li(T),Te=!ce&&!ge&&!ot&&Hs(T),pt=ce||ge||ot||Te,Mt=pt?_t(T.length,String):[],Xe=Mt.length;for(var ct in T)(V||xe.call(T,ct))&&!(pt&&(ct=="length"||ot&&(ct=="offset"||ct=="parent")||Te&&(ct=="buffer"||ct=="byteLength"||ct=="byteOffset")||Ns(ct,Xe)))&&Mt.push(ct);return Mt}function Un(T,V){for(var ce=T.length;ce--;)if(js(T[ce][0],V))return ce;return-1}function ji(T,V,ce){var ge=V(T);return fi(T)?ge:Ve(ge,ce(T))}function Fn(T){return T==null?T===void 0?Y:re:rr&&rr in Object(T)?Ps(T):lo(T)}function $i(T){return $n(T)&&Fn(T)==y}function jn(T,V,ce,ge,ot){return T===V?!0:T==null||V==null||!$n(T)&&!$n(V)?T!==T&&V!==V:Is(T,V,ce,ge,jn,ot)}function Is(T,V,ce,ge,ot,Te){var pt=fi(T),Mt=fi(V),Xe=pt?I:Wr(T),ct=Mt?I:Wr(V);Xe=Xe==y?p:Xe,ct=ct==y?p:ct;var Tt=Xe==p,dr=ct==p,Ht=Xe==ct;if(Ht&&Li(T)){if(!Li(V))return!1;pt=!0,Tt=!1}if(Ht&&!Tt)return Te||(Te=new Hr),pt||Hs(T)?ui(T,V,ce,ge,ot,Te):fo(T,V,Xe,ce,ge,ot,Te);if(!(ce&o)){var gt=Tt&&xe.call(T,"__wrapped__"),nr=dr&&xe.call(V,"__wrapped__");if(gt||nr){var qr=gt?T.value():T,Cr=nr?V.value():V;return Te||(Te=new Hr),ot(qr,Cr,ce,ge,Te)}}return Ht?(Te||(Te=new Hr),Cs(T,V,ce,ge,ot,Te)):!1}function ho(T){if(!Ms(T)||Us(T))return!1;var V=li(T)?et:ie;return V.test(sn(T))}function xs(T){return $n(T)&&Ls(T.length)&&!!fe[Fn(T)]}function As(T){if(!Fs(T))return Rn(T);var V=[];for(var ce in Object(T))xe.call(T,ce)&&ce!="constructor"&&V.push(ce);return V}function ui(T,V,ce,ge,ot,Te){var pt=ce&o,Mt=T.length,Xe=V.length;if(Mt!=Xe&&!(pt&&Xe>Mt))return!1;var ct=Te.get(T);if(ct&&Te.get(V))return ct==V;var Tt=-1,dr=!0,Ht=ce&d?new ci:void 0;for(Te.set(T,V),Te.set(V,T);++Tt<Mt;){var gt=T[Tt],nr=V[Tt];if(ge)var qr=pt?ge(nr,gt,Tt,V,T,Te):ge(gt,nr,Tt,T,V,Te);if(qr!==void 0){if(qr)continue;dr=!1;break}if(Ht){if(!$e(V,function(Cr,Yr){if(!Me(Ht,Yr)&&(gt===Cr||ot(gt,Cr,ce,ge,Te)))return Ht.push(Yr)})){dr=!1;break}}else if(!(gt===nr||ot(gt,nr,ce,ge,Te))){dr=!1;break}}return Te.delete(T),Te.delete(V),dr}function fo(T,V,ce,ge,ot,Te,pt){switch(ce){case w:if(T.byteLength!=V.byteLength||T.byteOffset!=V.byteOffset)return!1;T=T.buffer,V=V.buffer;case _:return!(T.byteLength!=V.byteLength||!Te(new tr(T),new tr(V)));case P:case U:case q:return js(+T,+V);case K:return T.name==V.name&&T.message==V.message;case D:case c:return T==V+"";case W:var Mt=Re;case g:var Xe=ge&o;if(Mt||(Mt=He),T.size!=V.size&&!Xe)return!1;var ct=pt.get(T);if(ct)return ct==V;ge|=d,pt.set(T,V);var Tt=ui(Mt(T),Mt(V),ge,ot,Te,pt);return pt.delete(T),Tt;case l:if(At)return At.call(T)==At.call(V)}return!1}function Cs(T,V,ce,ge,ot,Te){var pt=ce&o,Mt=hi(T),Xe=Mt.length,ct=hi(V),Tt=ct.length;if(Xe!=Tt&&!pt)return!1;for(var dr=Xe;dr--;){var Ht=Mt[dr];if(!(pt?Ht in V:xe.call(V,Ht)))return!1}var gt=Te.get(T);if(gt&&Te.get(V))return gt==V;var nr=!0;Te.set(T,V),Te.set(V,T);for(var qr=pt;++dr<Xe;){Ht=Mt[dr];var Cr=T[Ht],Yr=V[Ht];if(ge)var Mi=pt?ge(Yr,Cr,Ht,V,T,Te):ge(Cr,Yr,Ht,T,V,Te);if(!(Mi===void 0?Cr===Yr||ot(Cr,Yr,ce,ge,Te):Mi)){nr=!1;break}qr||(qr=Ht=="constructor")}if(nr&&!qr){var Ln=T.constructor,Kt=V.constructor;Ln!=Kt&&"constructor"in T&&"constructor"in V&&!(typeof Ln=="function"&&Ln instanceof Ln&&typeof Kt=="function"&&Kt instanceof Kt)&&(nr=!1)}return Te.delete(T),Te.delete(V),nr}function hi(T){return ji(T,_o,Ts)}function yn(T,V){var ce=T.__data__;return Rs(V)?ce[typeof V=="string"?"string":"hash"]:ce.map}function br(T,V){var ce=Ie(T,V);return ho(ce)?ce:void 0}function Ps(T){var V=xe.call(T,rr),ce=T[rr];try{T[rr]=void 0;var ge=!0}catch{}var ot=We.call(T);return ge&&(V?T[rr]=ce:delete T[rr]),ot}var Ts=rn?function(T){return T==null?[]:(T=Object(T),ze(rn(T),function(V){return lr.call(T,V)}))}:at,Wr=Fn;(Dt&&Wr(new Dt(new ArrayBuffer(1)))!=w||vt&&Wr(new vt)!=W||St&&Wr(St.resolve())!=S||Ot&&Wr(new Ot)!=g||wt&&Wr(new wt)!=h)&&(Wr=function(T){var V=Fn(T),ce=V==p?T.constructor:void 0,ge=ce?sn(ce):"";if(ge)switch(ge){case Ut:return w;case Ft:return W;case It:return S;case jt:return g;case xt:return h}return V});function Ns(T,V){return V=V??O,!!V&&(typeof T=="number"||ye.test(T))&&T>-1&&T%1==0&&T<V}function Rs(T){var V=typeof T;return V=="string"||V=="number"||V=="symbol"||V=="boolean"?T!=="__proto__":T===null}function Us(T){return!!ke&&ke in T}function Fs(T){var V=T&&T.constructor,ce=typeof V=="function"&&V.prototype||Se;return T===ce}function lo(T){return We.call(T)}function sn(T){if(T!=null){try{return Be.call(T)}catch{}try{return T+""}catch{}}return""}function js(T,V){return T===V||T!==T&&V!==V}var $s=$i(function(){return arguments}())?$i:function(T){return $n(T)&&xe.call(T,"callee")&&!lr.call(T,"callee")},fi=Array.isArray;function po(T){return T!=null&&Ls(T.length)&&!li(T)}var Li=_n||st;function go(T,V){return jn(T,V)}function li(T){if(!Ms(T))return!1;var V=Fn(T);return V==M||V==L||V==N||V==b}function Ls(T){return typeof T=="number"&&T>-1&&T%1==0&&T<=O}function Ms(T){var V=typeof T;return T!=null&&(V=="object"||V=="function")}function $n(T){return T!=null&&typeof T=="object"}var Hs=Oe?yt(Oe):xs;function _o(T){return po(T)?Os(T):As(T)}function at(){return[]}function st(){return!1}i.exports=go})(T3,Ma);function N3(i,t){if(i.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var o=0;o<i.length;o++){var d=i.charAt(o),O=d.charCodeAt(0);if(r[O]!==255)throw new TypeError(d+" is ambiguous");r[O]=o}var y=i.length,I=i.charAt(0),N=Math.log(y)/Math.log(256),P=Math.log(256)/Math.log(y);function U(L){if(L instanceof Uint8Array||(ArrayBuffer.isView(L)?L=new Uint8Array(L.buffer,L.byteOffset,L.byteLength):Array.isArray(L)&&(L=Uint8Array.from(L))),!(L instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(L.length===0)return"";for(var W=0,q=0,re=0,p=L.length;re!==p&&L[re]===0;)re++,W++;for(var S=(p-re)*P+1>>>0,b=new Uint8Array(S);re!==p;){for(var D=L[re],g=0,c=S-1;(D!==0||g<q)&&c!==-1;c--,g++)D+=256*b[c]>>>0,b[c]=D%y>>>0,D=D/y>>>0;if(D!==0)throw new Error("Non-zero carry");q=g,re++}for(var l=S-q;l!==S&&b[l]===0;)l++;for(var Y=I.repeat(W);l<S;++l)Y+=i.charAt(b[l]);return Y}function K(L){if(typeof L!="string")throw new TypeError("Expected String");if(L.length===0)return new Uint8Array;var W=0;if(L[W]!==" "){for(var q=0,re=0;L[W]===I;)q++,W++;for(var p=(L.length-W)*N+1>>>0,S=new Uint8Array(p);L[W];){var b=r[L.charCodeAt(W)];if(b===255)return;for(var D=0,g=p-1;(b!==0||D<re)&&g!==-1;g--,D++)b+=y*S[g]>>>0,S[g]=b%256>>>0,b=b/256>>>0;if(b!==0)throw new Error("Non-zero carry");re=D,W++}if(L[W]!==" "){for(var c=p-re;c!==p&&S[c]===0;)c++;for(var l=new Uint8Array(q+(p-c)),Y=q;c!==p;)l[Y++]=S[c++];return l}}}function M(L){var W=K(L);if(W)return W;throw new Error(`Non-${t} character`)}return{encode:U,decodeUnsafe:K,decode:M}}var R3=N3,U3=R3;const Gd=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},F3=i=>new TextEncoder().encode(i),j3=i=>new TextDecoder().decode(i);let $3=class{constructor(t,r,s){this.name=t,this.prefix=r,this.baseEncode=s}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}};class L3{constructor(t,r,s){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Wd(this,t)}}class M3{constructor(t){this.decoders=t}or(t){return Wd(this,t)}decode(t){const r=t[0],s=this.decoders[r];if(s)return s.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Wd=(i,t)=>new M3({...i.decoders||{[i.prefix]:i},...t.decoders||{[t.prefix]:t}});let H3=class{constructor(t,r,s,o){this.name=t,this.prefix=r,this.baseEncode=s,this.baseDecode=o,this.encoder=new $3(t,r,s),this.decoder=new L3(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};const Ga=({name:i,prefix:t,encode:r,decode:s})=>new H3(i,t,r,s),ws=({prefix:i,name:t,alphabet:r})=>{const{encode:s,decode:o}=U3(r,t);return Ga({prefix:i,name:t,encode:s,decode:d=>Gd(o(d))})},q3=(i,t,r,s)=>{const o={};for(let P=0;P<t.length;++P)o[t[P]]=P;let d=i.length;for(;i[d-1]==="=";)--d;const O=new Uint8Array(d*r/8|0);let y=0,I=0,N=0;for(let P=0;P<d;++P){const U=o[i[P]];if(U===void 0)throw new SyntaxError(`Non-${s} character`);I=I<<r|U,y+=r,y>=8&&(y-=8,O[N++]=255&I>>y)}if(y>=r||255&I<<8-y)throw new SyntaxError("Unexpected end of data");return O},z3=(i,t,r)=>{const s=t[t.length-1]==="=",o=(1<<r)-1;let d="",O=0,y=0;for(let I=0;I<i.length;++I)for(y=y<<8|i[I],O+=8;O>r;)O-=r,d+=t[o&y>>O];if(O&&(d+=t[o&y<<r-O]),s)for(;d.length*r&7;)d+="=";return d},Xt=({name:i,prefix:t,bitsPerChar:r,alphabet:s})=>Ga({prefix:t,name:i,encode(o){return z3(o,s,r)},decode(o){return q3(o,s,r,i)}}),B3=Ga({prefix:"\0",name:"identity",encode:i=>j3(i),decode:i=>F3(i)});var K3=Object.freeze({__proto__:null,identity:B3});const V3=Xt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var k3=Object.freeze({__proto__:null,base2:V3});const G3=Xt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var W3=Object.freeze({__proto__:null,base8:G3});const Y3=ws({prefix:"9",name:"base10",alphabet:"0123456789"});var J3=Object.freeze({__proto__:null,base10:Y3});const X3=Xt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Q3=Xt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Z3=Object.freeze({__proto__:null,base16:X3,base16upper:Q3});const e6=Xt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),t6=Xt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),r6=Xt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),n6=Xt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),i6=Xt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),s6=Xt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),a6=Xt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),o6=Xt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),c6=Xt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var u6=Object.freeze({__proto__:null,base32:e6,base32upper:t6,base32pad:r6,base32padupper:n6,base32hex:i6,base32hexupper:s6,base32hexpad:a6,base32hexpadupper:o6,base32z:c6});const h6=ws({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),f6=ws({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var l6=Object.freeze({__proto__:null,base36:h6,base36upper:f6});const d6=ws({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),p6=ws({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var g6=Object.freeze({__proto__:null,base58btc:d6,base58flickr:p6});const _6=Xt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),y6=Xt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),v6=Xt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),m6=Xt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var b6=Object.freeze({__proto__:null,base64:_6,base64pad:y6,base64url:v6,base64urlpad:m6});const Yd=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),w6=Yd.reduce((i,t,r)=>(i[r]=t,i),[]),E6=Yd.reduce((i,t,r)=>(i[t.codePointAt(0)]=r,i),[]);function D6(i){return i.reduce((t,r)=>(t+=w6[r],t),"")}function S6(i){const t=[];for(const r of i){const s=E6[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(s)}return new Uint8Array(t)}const O6=Ga({prefix:"🚀",name:"base256emoji",encode:D6,decode:S6});var I6=Object.freeze({__proto__:null,base256emoji:O6}),x6=Jd,Al=128,A6=127,C6=~A6,P6=Math.pow(2,31);function Jd(i,t,r){t=t||[],r=r||0;for(var s=r;i>=P6;)t[r++]=i&255|Al,i/=128;for(;i&C6;)t[r++]=i&255|Al,i>>>=7;return t[r]=i|0,Jd.bytes=r-s+1,t}var T6=Qc,N6=128,Cl=127;function Qc(i,s){var r=0,s=s||0,o=0,d=s,O,y=i.length;do{if(d>=y)throw Qc.bytes=0,new RangeError("Could not decode varint");O=i[d++],r+=o<28?(O&Cl)<<o:(O&Cl)*Math.pow(2,o),o+=7}while(O>=N6);return Qc.bytes=d-s,r}var R6=Math.pow(2,7),U6=Math.pow(2,14),F6=Math.pow(2,21),j6=Math.pow(2,28),$6=Math.pow(2,35),L6=Math.pow(2,42),M6=Math.pow(2,49),H6=Math.pow(2,56),q6=Math.pow(2,63),z6=function(i){return i<R6?1:i<U6?2:i<F6?3:i<j6?4:i<$6?5:i<L6?6:i<M6?7:i<H6?8:i<q6?9:10},B6={encode:x6,decode:T6,encodingLength:z6},Xd=B6;const Pl=(i,t,r=0)=>(Xd.encode(i,t,r),t),Tl=i=>Xd.encodingLength(i),Zc=(i,t)=>{const r=t.byteLength,s=Tl(i),o=s+Tl(r),d=new Uint8Array(o+r);return Pl(i,d,0),Pl(r,d,s),d.set(t,o),new K6(i,r,t,d)};class K6{constructor(t,r,s,o){this.code=t,this.size=r,this.digest=s,this.bytes=o}}const Qd=({name:i,code:t,encode:r})=>new V6(i,t,r);class V6{constructor(t,r,s){this.name=t,this.code=r,this.encode=s}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?Zc(this.code,r):r.then(s=>Zc(this.code,s))}else throw Error("Unknown type, must be binary type")}}const Zd=i=>async t=>new Uint8Array(await crypto.subtle.digest(i,t)),k6=Qd({name:"sha2-256",code:18,encode:Zd("SHA-256")}),G6=Qd({name:"sha2-512",code:19,encode:Zd("SHA-512")});var W6=Object.freeze({__proto__:null,sha256:k6,sha512:G6});const ep=0,Y6="identity",tp=Gd,J6=i=>Zc(ep,tp(i)),X6={code:ep,name:Y6,encode:tp,digest:J6};var Q6=Object.freeze({__proto__:null,identity:X6});new TextEncoder,new TextDecoder;const Nl={...K3,...k3,...W3,...J3,...Z3,...u6,...l6,...g6,...b6,...I6};({...W6,...Q6});function Z6(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(i):new Uint8Array(i)}function rp(i,t,r,s){return{name:i,prefix:t,encoder:{name:i,prefix:t,encode:r},decoder:{decode:s}}}const Rl=rp("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),Tc=rp("ascii","a",i=>{let t="a";for(let r=0;r<i.length;r++)t+=String.fromCharCode(i[r]);return t},i=>{i=i.substring(1);const t=Z6(i.length);for(let r=0;r<i.length;r++)t[r]=i.charCodeAt(r);return t}),eD={utf8:Rl,"utf-8":Rl,hex:Nl.base16,latin1:Tc,ascii:Tc,binary:Tc,...Nl};function tD(i,t="utf8"){const r=eD[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(i,"utf8"):r.decoder.decode(`${r.prefix}${i}`)}const np="wc",rD=2,Au="core",Cn=`${np}@${2}:${Au}:`,nD={name:Au,logger:"error"},iD={database:":memory:"},sD="crypto",Ul="client_ed25519_seed",aD=De.ONE_DAY,oD="keychain",cD="0.3",uD="messages",hD="0.3",fD=De.SIX_HOURS,lD="publisher",ip="irn",dD="error",sp="wss://relay.walletconnect.com",pD="relayer",kt={message:"relayer_message",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},gD="_subscription",os={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},_D=De.ONE_SECOND,yD="2.7.0",vD="0.3",tn={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},mD="subscription",bD="0.3",wD=De.FIVE_SECONDS*1e3,ED="pairing",DD="0.3",cs={wc_pairingDelete:{req:{ttl:De.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:De.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:De.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:De.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:De.ONE_DAY,prompt:!1,tag:0},res:{ttl:De.ONE_DAY,prompt:!1,tag:0}}},en={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},SD="history",OD="0.3",ID="expirer",Lr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},xD="0.3",Fl="verify-api",jl="https://verify.walletconnect.com";class AD{constructor(t,r){this.core=t,this.logger=r,this.keychain=new Map,this.name=oD,this.version=cD,this.initialized=!1,this.storagePrefix=Cn,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,o)=>{this.isInitialized(),this.keychain.set(s,o),await this.persist()},this.get=s=>{this.isInitialized();const o=this.keychain.get(s);if(typeof o>"u"){const{message:d}=de("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(d)}return o},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=t,this.logger=Ze.generateChildLogger(r,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,qd(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?zd(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}class CD{constructor(t,r,s){this.core=t,this.logger=r,this.name=sD,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=async()=>{this.isInitialized();const o=await this.getClientSeed(),d=hl(o);return Rd(d.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const o=bE();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=async o=>{this.isInitialized();const d=await this.getClientSeed(),O=hl(d),y=Jc();return await Ww(y,o,aD,O)},this.generateSharedKey=(o,d,O)=>{this.isInitialized();const y=this.getPrivateKey(o),I=wE(y,d);return this.setSymKey(I,O)},this.setSymKey=async(o,d)=>{this.isInitialized();const O=d||EE(o);return await this.keychain.set(O,o),O},this.deleteKeyPair=async o=>{this.isInitialized(),await this.keychain.del(o)},this.deleteSymKey=async o=>{this.isInitialized(),await this.keychain.del(o)},this.encode=async(o,d,O)=>{this.isInitialized();const y=Hd(O),I=cu(d);if(yl(y)){const K=y.senderPublicKey,M=y.receiverPublicKey;o=await this.generateSharedKey(K,M)}const N=this.getSymKey(o),{type:P,senderPublicKey:U}=y;return SE({type:P,symKey:N,message:I,senderPublicKey:U})},this.decode=async(o,d,O)=>{this.isInitialized();const y=xE(d,O);if(yl(y)){const P=y.receiverPublicKey,U=y.senderPublicKey;o=await this.generateSharedKey(P,U)}const I=this.getSymKey(o),N=OE({symKey:I,encoded:d});return od(N)},this.getPayloadType=o=>{const d=$a(o);return ms(d.type)},this.getPayloadSenderPublicKey=o=>{const d=$a(o);return d.senderPublicKey?fr(d.senderPublicKey,hr):void 0},this.core=t,this.logger=Ze.generateChildLogger(r,this.name),this.keychain=s||new AD(this.core,this.logger)}get context(){return Ze.getLoggerContext(this.logger)}async setPrivateKey(t,r){return await this.keychain.set(t,r),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(Ul)}catch{t=Jc(),await this.keychain.set(Ul,t)}return tD(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}class PD extends Iw{constructor(t,r){super(t,r),this.logger=t,this.core=r,this.messages=new Map,this.name=uD,this.version=hD,this.initialized=!1,this.storagePrefix=Cn,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,o)=>{this.isInitialized();const d=Qn(o);let O=this.messages.get(s);return typeof O>"u"&&(O={}),typeof O[d]<"u"||(O[d]=o,this.messages.set(s,O),await this.persist()),d},this.get=s=>{this.isInitialized();let o=this.messages.get(s);return typeof o>"u"&&(o={}),o},this.has=(s,o)=>{this.isInitialized();const d=this.get(s),O=Qn(o);return typeof d[O]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=Ze.generateChildLogger(t,this.name),this.core=r}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,qd(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?zd(t):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}class TD extends xw{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.events=new Ir.EventEmitter,this.name=lD,this.queue=new Map,this.publishTimeout=1e4,this.publish=async(s,o,d)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:d}});try{const O=d?.ttl||fD,y=Xc(d),I=d?.prompt||!1,N=d?.tag||0,P={topic:s,message:o,opts:{ttl:O,relay:y,prompt:I,tag:N}},U=Qn(o);this.queue.set(U,P);try{await await La(this.rpcPublish(s,o,O,y,I,N),this.publishTimeout),this.relayer.events.emit(kt.publish,P)}catch{this.logger.debug("Publishing Payload stalled"),this.relayer.events.emit(kt.connection_stalled);return}this.onPublish(U,P),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:d}})}catch(O){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(O),O}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.relayer=t,this.logger=Ze.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Ze.getLoggerContext(this.logger)}rpcPublish(t,r,s,o,d,O){var y,I,N,P;const U={method:Ca(o.protocol).publish,params:{topic:t,message:r,ttl:s,prompt:d,tag:O}};return cr((y=U.params)==null?void 0:y.prompt)&&((I=U.params)==null||delete I.prompt),cr((N=U.params)==null?void 0:N.tag)&&((P=U.params)==null||delete P.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:U}),this.relayer.request(U)}onPublish(t,r){this.queue.delete(t)}checkQueue(){this.queue.forEach(async t=>{const{topic:r,message:s,opts:o}=t;await this.publish(r,s,o)})}registerEventListeners(){this.relayer.core.heartbeat.on(vs.HEARTBEAT_EVENTS.pulse,()=>{this.checkQueue()})}}class ND{constructor(){this.map=new Map,this.set=(t,r)=>{const s=this.get(t);this.exists(t,r)||this.map.set(t,[...s,r])},this.get=t=>this.map.get(t)||[],this.exists=(t,r)=>this.get(t).includes(r),this.delete=(t,r)=>{if(typeof r>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const s=this.get(t);if(!this.exists(t,r))return;const o=s.filter(d=>d!==r);if(!o.length){this.map.delete(t);return}this.map.set(t,o)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var RD=Object.defineProperty,UD=Object.defineProperties,FD=Object.getOwnPropertyDescriptors,$l=Object.getOwnPropertySymbols,jD=Object.prototype.hasOwnProperty,$D=Object.prototype.propertyIsEnumerable,Ll=(i,t,r)=>t in i?RD(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,us=(i,t)=>{for(var r in t||(t={}))jD.call(t,r)&&Ll(i,r,t[r]);if($l)for(var r of $l(t))$D.call(t,r)&&Ll(i,r,t[r]);return i},Nc=(i,t)=>UD(i,FD(t));class LD extends Pw{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.subscriptions=new Map,this.topicMap=new ND,this.events=new Ir.EventEmitter,this.name=mD,this.version=bD,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Cn,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}});try{const d=Xc(o),O={topic:s,relay:d};this.pending.set(s,O);const y=await this.rpcSubscribe(s,d);return this.onSubscribe(y,O),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}}),y}catch(d){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(d),d}},this.unsubscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),typeof o?.id<"u"?await this.unsubscribeById(s,o.id,o):await this.unsubscribeByTopic(s,o)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((o,d)=>{const O=new De.Watch;O.start(this.pendingSubscriptionWatchLabel);const y=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(y),O.stop(this.pendingSubscriptionWatchLabel),o(!0)),O.elapsed(this.pendingSubscriptionWatchLabel)>=wD&&(clearInterval(y),O.stop(this.pendingSubscriptionWatchLabel),d(!1))},this.pollingInterval)}),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=t,this.logger=Ze.generateChildLogger(r,this.name),this.clientId=""}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(t,r){let s=!1;try{s=this.getSubscription(t).topic===r}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,r){const s=this.topicMap.get(t);await Promise.all(s.map(async o=>await this.unsubscribeById(t,o,r)))}async unsubscribeById(t,r,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:s}});try{const o=Xc(s);await this.rpcUnsubscribe(t,r,o);const d=Gt("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,r,d),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:s}})}catch(o){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(o),o}}async rpcSubscribe(t,r){const s={method:Ca(r.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await La(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(kt.connection_stalled)}return Qn(t+this.clientId)}async rpcBatchSubscribe(t){if(!t.length)return;const r=t[0].relay,s={method:Ca(r.protocol).batchSubscribe,params:{topics:t.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await La(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(kt.connection_stalled)}}rpcUnsubscribe(t,r,s){const o={method:Ca(s.protocol).unsubscribe,params:{topic:t,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o}),this.relayer.request(o)}onSubscribe(t,r){this.setSubscription(t,Nc(us({},r),{id:t})),this.pending.delete(r.topic)}onBatchSubscribe(t){t.length&&t.forEach(r=>{this.setSubscription(r.id,us({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(t,r,s){this.events.removeAllListeners(r),this.hasSubscription(r,t)&&this.deleteSubscription(r,s),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,r){this.subscriptions.has(t)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:r}),this.addSubscription(t,r))}addSubscription(t,r){this.subscriptions.set(t,us({},r)),this.topicMap.set(r.topic,t),this.events.emit(tn.created,r)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const r=this.subscriptions.get(t);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(s)}return r}deleteSubscription(t,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:r});const s=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(s.topic,t),this.events.emit(tn.deleted,Nc(us({},s),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(tn.sync)}async reset(){if(this.cached.length){const t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(tn.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){if(!t.length)return;const r=await this.rpcBatchSubscribe(t);bs(r)&&this.onBatchSubscribe(r.map((s,o)=>Nc(us({},t[o]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const t=[];this.pending.forEach(r=>{t.push(r)}),await this.batchSubscribe(t)}registerEventListeners(){this.relayer.core.heartbeat.on(vs.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(kt.connect,async()=>{await this.onConnect()}),this.relayer.on(kt.disconnect,()=>{this.onDisconnect()}),this.events.on(tn.created,async t=>{const r=tn.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()}),this.events.on(tn.deleted,async t=>{const r=tn.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(){this.restartInProgress&&await new Promise(t=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),t())},this.pollingInterval)})}}var MD=Object.defineProperty,Ml=Object.getOwnPropertySymbols,HD=Object.prototype.hasOwnProperty,qD=Object.prototype.propertyIsEnumerable,Hl=(i,t,r)=>t in i?MD(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,zD=(i,t)=>{for(var r in t||(t={}))HD.call(t,r)&&Hl(i,r,t[r]);if(Ml)for(var r of Ml(t))qD.call(t,r)&&Hl(i,r,t[r]);return i};class BD extends Aw{constructor(t){super(t),this.protocol="wc",this.version=2,this.events=new Ir.EventEmitter,this.name=pD,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.core=t.core,this.logger=typeof t.logger<"u"&&typeof t.logger!="string"?Ze.generateChildLogger(t.logger,this.name):Ze.pino(Ze.getDefaultLoggerOptions({level:t.logger||dD})),this.messages=new PD(this.logger,t.core),this.subscriber=new LD(this,this.logger),this.publisher=new TD(this,this.logger),this.relayUrl=t?.relayUrl||sp,this.projectId=t.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.transportOpen(),this.subscriber.init()]),this.registerEventListeners(),this.initialized=!0}get context(){return Ze.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(t,r,s){this.isInitialized(),await this.publisher.publish(t,r,s),await this.recordMessageEvent({topic:t,message:r,publishedAt:Date.now()})}async subscribe(t,r){this.isInitialized();let s="";return await Promise.all([new Promise(o=>{this.subscriber.once(tn.created,d=>{d.topic===t&&o()})}),new Promise(async o=>{s=await this.subscriber.subscribe(t,r),o()})]),s}async unsubscribe(t,r){this.isInitialized(),await this.subscriber.unsubscribe(t,r)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(kt.transport_closed))}async transportOpen(t){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=t||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(r=>{this.initialized||r(),this.subscriber.once(tn.resubscribed,()=>{r()})}),await Promise.race([new Promise(async(r,s)=>{await La(this.provider.connect(),5e3,"socket stalled").catch(o=>s(o)).then(()=>r()).finally(()=>this.removeListener(kt.transport_closed,this.rejectTransportOpen))}),new Promise(r=>this.once(kt.transport_closed,this.rejectTransportOpen))])])}catch(r){this.logger.error(r);const s=r;if(!this.isConnectionStalled(s.message))throw r;this.events.emit(kt.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(t){this.transportExplicitlyClosed||(this.relayUrl=t||this.relayUrl,await Promise.all([new Promise(r=>{this.provider.once(os.disconnect,()=>{r()})}),this.transportClose()]),await new Promise(r=>setTimeout(r,1e3)),await this.createProvider(),await this.transportOpen())}isConnectionStalled(t){return this.staleConnectionErrors.some(r=>t.includes(r))}rejectTransportOpen(){throw new Error("closeTransport called before connection was established")}async createProvider(){const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Pn(new P3(HE({sdkVersion:yD,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(t){const{topic:r,message:s}=t;await this.messages.set(r,s)}async shouldIgnoreMessageEvent(t){const{topic:r,message:s}=t;return await this.subscriber.isSubscribed(r)?this.messages.has(r,s):!0}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),hu(t)){if(!t.method.endsWith(gD))return;const r=t.params,{topic:s,message:o,publishedAt:d}=r.data,O={topic:s,message:o,publishedAt:d};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(zD({type:"event",event:r.id},O)),this.events.emit(r.id,O),await this.acknowledgePayload(t),await this.onMessageEvent(O)}}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(this.events.emit(kt.message,t),await this.recordMessageEvent(t))}async acknowledgePayload(t){const r=fu(t.id,!0);await this.provider.connection.send(r)}registerProviderListeners(){this.provider.on(os.payload,t=>this.onProviderPayload(t)),this.provider.on(os.connect,()=>{this.events.emit(kt.connect)}),this.provider.on(os.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(os.error,t=>{this.logger.error(t),this.events.emit(kt.error,t)})}registerEventListeners(){this.events.on(kt.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(kt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},De.toMiliseconds(_D))}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(t=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),t())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var KD=Object.defineProperty,ql=Object.getOwnPropertySymbols,VD=Object.prototype.hasOwnProperty,kD=Object.prototype.propertyIsEnumerable,zl=(i,t,r)=>t in i?KD(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Bl=(i,t)=>{for(var r in t||(t={}))VD.call(t,r)&&zl(i,r,t[r]);if(ql)for(var r of ql(t))kD.call(t,r)&&zl(i,r,t[r]);return i};class Wa extends Cw{constructor(t,r,s,o=Cn,d=void 0){super(t,r,s,o),this.core=t,this.logger=r,this.name=s,this.map=new Map,this.version=vD,this.cached=[],this.initialized=!1,this.storagePrefix=Cn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(O=>{this.getKey&&O!==null&&!cr(O)?this.map.set(this.getKey(O),O):o3(O)?this.map.set(O.id,O):c3(O)&&this.map.set(O.topic,O)}),this.cached=[],this.initialized=!0)},this.set=async(O,y)=>{this.isInitialized(),this.map.has(O)?await this.update(O,y):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:O,value:y}),this.map.set(O,y),await this.persist())},this.get=O=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:O}),this.getData(O)),this.getAll=O=>(this.isInitialized(),O?this.values.filter(y=>Object.keys(O).every(I=>Ma(y[I],O[I]))):this.values),this.update=async(O,y)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:O,update:y});const I=Bl(Bl({},this.getData(O)),y);this.map.set(O,I),await this.persist()},this.delete=async(O,y)=>{this.isInitialized(),this.map.has(O)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:O,reason:y}),this.map.delete(O),await this.persist())},this.logger=Ze.generateChildLogger(r,this.name),this.storagePrefix=o,this.getKey=d}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const r=this.map.get(t);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(s),new Error(s)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}class GD{constructor(t,r){this.core=t,this.logger=r,this.name=ED,this.version=DD,this.events=new Ir,this.initialized=!1,this.storagePrefix=Cn,this.ignoredPayloadTypes=[ni],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=Jc(),o=await this.core.crypto.setSymKey(s),d=kr(De.FIVE_MINUTES),O={protocol:ip},y={topic:o,expiry:d,relay:O,active:!1},I=XE({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:s,relay:O});return await this.pairings.set(o,y),await this.core.relayer.subscribe(o),this.core.expirer.set(o,d),{topic:o,uri:I}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:o,symKey:d,relay:O}=YE(s.uri);if(this.pairings.keys.includes(o))throw new Error(`Pairing already exists: ${o}`);if(this.core.crypto.hasKeys(o))throw new Error(`Keychain already exists: ${o}`);const y=kr(De.FIVE_MINUTES),I={topic:o,relay:O,expiry:y,active:!1};return await this.pairings.set(o,I),await this.core.crypto.setSymKey(d,o),await this.core.relayer.subscribe(o,{relay:O}),this.core.expirer.set(o,y),s.activatePairing&&await this.activate({topic:o}),I},this.activate=async({topic:s})=>{this.isInitialized();const o=kr(De.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:o}),this.core.expirer.set(s,o)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:o}=s;if(this.pairings.keys.includes(o)){const d=await this.sendRequest(o,"wc_pairingPing",{}),{done:O,resolve:y,reject:I}=Ai();this.events.once(qt("pairing_ping",d),({error:N})=>{N?I(N):y()}),await O()}},this.updateExpiry=async({topic:s,expiry:o})=>{this.isInitialized(),await this.pairings.update(s,{expiry:o})},this.updateMetadata=async({topic:s,metadata:o})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:o})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:o}=s;this.pairings.keys.includes(o)&&(await this.sendRequest(o,"wc_pairingDelete",Gt("USER_DISCONNECTED")),await this.deletePairing(o))},this.sendRequest=async(s,o,d)=>{const O=lu(o,d),y=await this.core.crypto.encode(s,O),I=cs[o].req;return this.core.history.set(s,O),await this.core.relayer.publish(s,y,I),O.id},this.sendResult=async(s,o,d)=>{const O=fu(s,d),y=await this.core.crypto.encode(o,O),I=await this.core.history.get(o,s),N=cs[I.request.method].res;await this.core.relayer.publish(o,y,N),await this.core.history.resolve(O)},this.sendError=async(s,o,d)=>{const O=uu(s,d),y=await this.core.crypto.encode(o,O),I=await this.core.history.get(o,s),N=cs[I.request.method]?cs[I.request.method].res:cs.unregistered_method.res;await this.core.relayer.publish(o,y,N),await this.core.history.resolve(O)},this.deletePairing=async(s,o)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,Gt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),o?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(o=>An(o.expiry));await Promise.all(s.map(o=>this.deletePairing(o.topic)))},this.onRelayEventRequest=s=>{const{topic:o,payload:d}=s,O=d.method;if(this.pairings.keys.includes(o))switch(O){case"wc_pairingPing":return this.onPairingPingRequest(o,d);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,d);default:return this.onUnknownRpcMethodRequest(o,d)}},this.onRelayEventResponse=async s=>{const{topic:o,payload:d}=s,O=(await this.core.history.get(o,d.id)).request.method;if(this.pairings.keys.includes(o))switch(O){case"wc_pairingPing":return this.onPairingPingResponse(o,d);default:return this.onUnknownRpcMethodResponse(O)}},this.onPairingPingRequest=async(s,o)=>{const{id:d}=o;try{this.isValidPing({topic:s}),await this.sendResult(d,s,!0),this.events.emit("pairing_ping",{id:d,topic:s})}catch(O){await this.sendError(d,s,O),this.logger.error(O)}},this.onPairingPingResponse=(s,o)=>{const{id:d}=o;setTimeout(()=>{xn(o)?this.events.emit(qt("pairing_ping",d),{}):gn(o)&&this.events.emit(qt("pairing_ping",d),{error:o.error})},500)},this.onPairingDeleteRequest=async(s,o)=>{const{id:d}=o;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit("pairing_delete",{id:d,topic:s})}catch(O){await this.sendError(d,s,O),this.logger.error(O)}},this.onUnknownRpcMethodRequest=async(s,o)=>{const{id:d,method:O}=o;try{if(this.registeredMethods.includes(O))return;const y=Gt("WC_METHOD_UNSUPPORTED",O);await this.sendError(d,s,y),this.logger.error(y)}catch(y){await this.sendError(d,s,y),this.logger.error(y)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(Gt("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{if(!vr(s)){const{message:o}=de("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(o)}if(!a3(s.uri)){const{message:o}=de("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(o)}},this.isValidPing=async s=>{if(!vr(s)){const{message:d}=de("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(d)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidDisconnect=async s=>{if(!vr(s)){const{message:d}=de("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(d)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidPairingTopic=async s=>{if(!Wt(s,!1)){const{message:o}=de("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(o)}if(!this.pairings.keys.includes(s)){const{message:o}=de("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(o)}if(An(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:o}=de("EXPIRED",`pairing topic: ${s}`);throw new Error(o)}},this.core=t,this.logger=Ze.generateChildLogger(r,this.name),this.pairings=new Wa(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Ze.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(kt.message,async t=>{const{topic:r,message:s}=t;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const o=await this.core.crypto.decode(r,s);hu(o)?(this.core.history.set(r,o),this.onRelayEventRequest({topic:r,payload:o})):cd(o)&&(await this.core.history.resolve(o),this.onRelayEventResponse({topic:r,payload:o}))})}registerExpirerEvents(){this.core.expirer.on(Lr.expired,async t=>{const{topic:r}=Kd(t.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}}class WD extends Ow{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.records=new Map,this.events=new Ir.EventEmitter,this.name=SD,this.version=OD,this.cached=[],this.initialized=!1,this.storagePrefix=Cn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,o,d)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:o,chainId:d}),this.records.has(o.id))return;const O={id:o.id,topic:s,request:{method:o.method,params:o.params||null},chainId:d};this.records.set(O.id,O),this.events.emit(en.created,O)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const o=await this.getRecord(s.id);typeof o.response>"u"&&(o.response=gn(s)?{error:s.error}:{result:s.result},this.records.set(o.id,o),this.events.emit(en.updated,o))},this.get=async(s,o)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:o}),await this.getRecord(o)),this.delete=(s,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(d=>{if(d.topic===s){if(typeof o<"u"&&d.id!==o)return;this.records.delete(d.id),this.events.emit(en.deleted,d)}})},this.exists=async(s,o)=>(this.isInitialized(),this.records.has(o)?(await this.getRecord(o)).topic===s:!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Ze.generateChildLogger(r,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const s={topic:r.topic,request:lu(r.request.method,r.request.params,r.id),chainId:r.chainId};return t.push(s)}),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const r=this.records.get(t);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(s)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(en.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(en.created,t=>{const r=en.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.events.on(en.updated,t=>{const r=en.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.events.on(en.deleted,t=>{const r=en.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}class YD extends Tw{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.expirations=new Map,this.events=new Ir.EventEmitter,this.name=ID,this.version=xD,this.cached=[],this.initialized=!1,this.storagePrefix=Cn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const o=this.formatTarget(s);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(s,o)=>{this.isInitialized();const d=this.formatTarget(s),O={target:d,expiry:o};this.expirations.set(d,O),this.checkExpiry(d,O),this.events.emit(Lr.created,{target:d,expiration:O})},this.get=s=>{this.isInitialized();const o=this.formatTarget(s);return this.getExpiration(o)},this.del=s=>{if(this.isInitialized(),this.has(s)){const o=this.formatTarget(s),d=this.getExpiration(o);this.expirations.delete(o),this.events.emit(Lr.deleted,{target:o,expiration:d})}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Ze.generateChildLogger(r,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return qE(t);if(typeof t=="number")return zE(t);const{message:r}=de("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(r)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Lr.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const r=this.expirations.get(t);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(s),new Error(s)}return r}checkExpiry(t,r){const{expiry:s}=r;De.toMiliseconds(s)-Date.now()<=0&&this.expire(t,r)}expire(t,r){this.expirations.delete(t),this.events.emit(Lr.expired,{target:t,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((t,r)=>this.checkExpiry(r,t))}registerEventListeners(){this.core.heartbeat.on(vs.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Lr.created,t=>{const r=Lr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(Lr.expired,t=>{const r=Lr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(Lr.deleted,t=>{const r=Lr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}let JD=class extends Nw{constructor(t,r){super(t,r),this.projectId=t,this.logger=r,this.name=Fl,this.initialized=!1,this.init=async s=>{!Ou()||!document||(this.verifyUrl=s?.verifyUrl||jl,await this.createIframe())},this.register=async s=>{var o;this.initialized||await this.init(),this.iframe&&((o=this.iframe.contentWindow)==null||o.postMessage(s.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${s.attestationId} ${this.verifyUrl}`))},this.resolve=async s=>{var o;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${s.attestationId}`);const d=this.startAbortTimer(De.FIVE_SECONDS),O=await fetch(`${this.verifyUrl}/attestation/${s.attestationId}`,{signal:this.abortController.signal});return clearTimeout(d),((o=await O.json())==null?void 0:o.origin)||""},this.createIframe=async()=>{try{const s=this.startAbortTimer(De.FIVE_SECONDS);await Promise.race([new Promise((o,d)=>{const O=document.createElement("iframe");O.setAttribute("id",Fl),O.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),O.style.display="none",O.addEventListener("load",()=>{this.initialized=!0,clearTimeout(s),o()}),O.addEventListener("error",y=>{d(y)}),document.body.append(O),this.iframe=O}),new Promise(o=>{this.abortController.signal.addEventListener("abort",()=>{o("iframe load timeout")})})])}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s)}},this.logger=Ze.generateChildLogger(r,this.name),this.verifyUrl=jl,this.abortController=new AbortController,this.isDevEnv=Su()&&{}.IS_VITEST}get context(){return Ze.getLoggerContext(this.logger)}startAbortTimer(t){return setTimeout(()=>this.abortController.abort(),kr(t))}};var XD=Object.defineProperty,Kl=Object.getOwnPropertySymbols,QD=Object.prototype.hasOwnProperty,ZD=Object.prototype.propertyIsEnumerable,Vl=(i,t,r)=>t in i?XD(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,kl=(i,t)=>{for(var r in t||(t={}))QD.call(t,r)&&Vl(i,r,t[r]);if(Kl)for(var r of Kl(t))ZD.call(t,r)&&Vl(i,r,t[r]);return i};let eS=class ap extends Sw{constructor(t){super(t),this.protocol=np,this.version=rD,this.name=Au,this.events=new Ir.EventEmitter,this.initialized=!1,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.projectId=t?.projectId,this.relayUrl=t?.relayUrl||sp;const r=typeof t?.logger<"u"&&typeof t?.logger!="string"?t.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:t?.logger||nD.logger}));this.logger=Ze.generateChildLogger(r,this.name),this.heartbeat=new vs.HeartBeat,this.crypto=new CD(this,this.logger,t?.keychain),this.history=new WD(this,this.logger),this.expirer=new YD(this,this.logger),this.storage=t!=null&&t.storage?t.storage:new dw(kl(kl({},iD),t?.storageOptions)),this.relayer=new BD({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new GD(this,this.logger),this.verify=new JD(this.projectId||"",this.logger)}static async init(t){const r=new ap(t);return await r.initialize(),r}get context(){return Ze.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}};const tS=eS,op="wc",cp=2,up="client",Cu=`${op}@${cp}:${up}:`,Rc={name:up,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},rS="proposal",hp="Proposal expired",nS="session",Ia=De.SEVEN_DAYS,iS="engine",hs={wc_sessionPropose:{req:{ttl:De.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:De.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:De.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:De.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:De.ONE_DAY,prompt:!1,tag:1104},res:{ttl:De.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:De.ONE_DAY,prompt:!1,tag:1106},res:{ttl:De.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:De.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:De.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:De.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:De.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:De.ONE_DAY,prompt:!1,tag:1112},res:{ttl:De.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:De.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:De.THIRTY_SECONDS,prompt:!1,tag:1115}}},Uc={min:De.FIVE_MINUTES,max:De.SEVEN_DAYS},sS="request",aS=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var oS=Object.defineProperty,cS=Object.defineProperties,uS=Object.getOwnPropertyDescriptors,Gl=Object.getOwnPropertySymbols,hS=Object.prototype.hasOwnProperty,fS=Object.prototype.propertyIsEnumerable,Wl=(i,t,r)=>t in i?oS(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,$r=(i,t)=>{for(var r in t||(t={}))hS.call(t,r)&&Wl(i,r,t[r]);if(Gl)for(var r of Gl(t))fS.call(t,r)&&Wl(i,r,t[r]);return i},Fc=(i,t)=>cS(i,uS(t));class lS extends Uw{constructor(t){super(t),this.name=iS,this.events=new Ir,this.initialized=!1,this.ignoredPayloadTypes=[ni],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(hs)}),this.initialized=!0)},this.connect=async r=>{this.isInitialized();const s=Fc($r({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:o,requiredNamespaces:d,optionalNamespaces:O,sessionProperties:y,relays:I}=s;let N=o,P,U=!1;if(N&&(U=this.client.core.pairing.pairings.get(N).active),!N||!U){const{topic:S,uri:b}=await this.client.core.pairing.create();N=S,P=b}const K=await this.client.core.crypto.generateKeyPair(),M=$r({requiredNamespaces:d,optionalNamespaces:O,relays:I??[{protocol:ip}],proposer:{publicKey:K,metadata:this.client.metadata}},y&&{sessionProperties:y}),{reject:L,resolve:W,done:q}=Ai(De.FIVE_MINUTES,hp);if(this.events.once(qt("session_connect"),async({error:S,session:b})=>{if(S)L(S);else if(b){b.self.publicKey=K;const D=Fc($r({},b),{requiredNamespaces:b.requiredNamespaces,optionalNamespaces:b.optionalNamespaces});await this.client.session.set(b.topic,D),await this.setExpiry(b.topic,b.expiry),N&&await this.client.core.pairing.updateMetadata({topic:N,metadata:b.peer.metadata}),W(D)}}),!N){const{message:S}=de("NO_MATCHING_KEY",`connect() pairing topic: ${N}`);throw new Error(S)}const re=await this.sendRequest(N,"wc_sessionPropose",M),p=kr(De.FIVE_MINUTES);return await this.setProposal(re,$r({id:re,expiry:p},M)),{uri:P,approval:q}},this.pair=async r=>(this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{this.isInitialized(),await this.isValidApprove(r);const{id:s,relayProtocol:o,namespaces:d,sessionProperties:O}=r,y=this.client.proposal.get(s);let{pairingTopic:I,proposer:N,requiredNamespaces:P,optionalNamespaces:U}=y;I=I||"",ds(P)||(P=t3(d,"approve()"));const K=await this.client.core.crypto.generateKeyPair(),M=N.publicKey,L=await this.client.core.crypto.generateSharedKey(K,M);I&&s&&(await this.client.core.pairing.updateMetadata({topic:I,metadata:N.metadata}),await this.sendResult(s,I,{relay:{protocol:o??"irn"},responderPublicKey:K}),await this.client.proposal.delete(s,Gt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:I}));const W=$r({relay:{protocol:o??"irn"},namespaces:d,requiredNamespaces:P,optionalNamespaces:U,pairingTopic:I,controller:{publicKey:K,metadata:this.client.metadata},expiry:kr(Ia)},O&&{sessionProperties:O});await this.client.core.relayer.subscribe(L),await this.sendRequest(L,"wc_sessionSettle",W);const q=Fc($r({},W),{topic:L,pairingTopic:I,acknowledged:!1,self:W.controller,peer:{publicKey:N.publicKey,metadata:N.metadata},controller:K});return await this.client.session.set(L,q),await this.setExpiry(L,kr(Ia)),{topic:L,acknowledged:()=>new Promise(re=>re(this.client.session.get(L)))}},this.reject=async r=>{this.isInitialized(),await this.isValidReject(r);const{id:s,reason:o}=r,{pairingTopic:d}=this.client.proposal.get(s);d&&(await this.sendError(s,d,o),await this.client.proposal.delete(s,Gt("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.isValidUpdate(r);const{topic:s,namespaces:o}=r,d=await this.sendRequest(s,"wc_sessionUpdate",{namespaces:o}),{done:O,resolve:y,reject:I}=Ai();return this.events.once(qt("session_update",d),({error:N})=>{N?I(N):y()}),await this.client.session.update(s,{namespaces:o}),{acknowledged:O}},this.extend=async r=>{this.isInitialized(),await this.isValidExtend(r);const{topic:s}=r,o=await this.sendRequest(s,"wc_sessionExtend",{}),{done:d,resolve:O,reject:y}=Ai();return this.events.once(qt("session_extend",o),({error:I})=>{I?y(I):O()}),await this.setExpiry(s,kr(Ia)),{acknowledged:d}},this.request=async r=>{this.isInitialized(),await this.isValidRequest(r);const{chainId:s,request:o,topic:d,expiry:O}=r,y=await this.sendRequest(d,"wc_sessionRequest",{request:o,chainId:s},O),{done:I,resolve:N,reject:P}=Ai(O);return this.events.once(qt("session_request",y),({error:U,result:K})=>{U?P(U):N(K)}),this.client.events.emit("session_request_sent",{topic:d,request:o,chainId:s,id:y}),await I()},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:s,response:o}=r,{id:d}=o;xn(o)?await this.sendResult(d,s,o.result):gn(o)&&await this.sendError(d,s,o.error),this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0})},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);const{topic:s}=r;if(this.client.session.keys.includes(s)){const o=await this.sendRequest(s,"wc_sessionPing",{}),{done:d,resolve:O,reject:y}=Ai();this.events.once(qt("session_ping",o),({error:I})=>{I?y(I):O()}),await d()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async r=>{this.isInitialized(),await this.isValidEmit(r);const{topic:s,event:o,chainId:d}=r;await this.sendRequest(s,"wc_sessionEvent",{event:o,chainId:d})},this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.client.session.keys.includes(s)?(await this.sendRequest(s,"wc_sessionDelete",Gt("USER_DISCONNECTED")),await this.deleteSession(s)):await this.client.core.pairing.disconnect({topic:s})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(s=>i3(s,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.deleteSession=async(r,s)=>{const{self:o}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await Promise.all([this.client.session.delete(r,Gt("USER_DISCONNECTED")),this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.deleteSymKey(r),s?Promise.resolve():this.client.core.expirer.del(r)])},this.deleteProposal=async(r,s)=>{await Promise.all([this.client.proposal.delete(r,Gt("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,s,o=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,s),o?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,s)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:s}),this.client.core.expirer.set(r,s)},this.setProposal=async(r,s)=>{await this.client.proposal.set(r,s),this.client.core.expirer.set(r,s.expiry)},this.setPendingSessionRequest=async r=>{const s=hs.wc_sessionRequest.req.ttl,{id:o,topic:d,params:O}=r;await this.client.pendingRequest.set(o,{id:o,topic:d,params:O}),s&&this.client.core.expirer.set(o,kr(s))},this.sendRequest=async(r,s,o,d)=>{const O=lu(s,o);if(Ou()&&aS.includes(s)){const N=Qn(JSON.stringify(O));await this.client.core.verify.register({attestationId:N})}const y=await this.client.core.crypto.encode(r,O),I=hs[s].req;return d&&(I.ttl=d),this.client.core.history.set(r,O),this.client.core.relayer.publish(r,y,I),O.id},this.sendResult=async(r,s,o)=>{const d=fu(r,o),O=await this.client.core.crypto.encode(s,d),y=await this.client.core.history.get(s,r),I=hs[y.request.method].res;this.client.core.relayer.publish(s,O,I),await this.client.core.history.resolve(d)},this.sendError=async(r,s,o)=>{const d=uu(r,o),O=await this.client.core.crypto.encode(s,d),y=await this.client.core.history.get(s,r),I=hs[y.request.method].res;this.client.core.relayer.publish(s,O,I),await this.client.core.history.resolve(d)},this.cleanup=async()=>{const r=[],s=[];this.client.session.getAll().forEach(o=>{An(o.expiry)&&r.push(o.topic)}),this.client.proposal.getAll().forEach(o=>{An(o.expiry)&&s.push(o.id)}),await Promise.all([...r.map(o=>this.deleteSession(o)),...s.map(o=>this.deleteProposal(o))])},this.onRelayEventRequest=r=>{const{topic:s,payload:o}=r,d=o.method;switch(d){case"wc_sessionPropose":return this.onSessionProposeRequest(s,o);case"wc_sessionSettle":return this.onSessionSettleRequest(s,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,o);case"wc_sessionExtend":return this.onSessionExtendRequest(s,o);case"wc_sessionPing":return this.onSessionPingRequest(s,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,o);case"wc_sessionRequest":return this.onSessionRequest(s,o);case"wc_sessionEvent":return this.onSessionEventRequest(s,o);default:return this.client.logger.info(`Unsupported request method ${d}`)}},this.onRelayEventResponse=async r=>{const{topic:s,payload:o}=r,d=(await this.client.core.history.get(s,o.id)).request.method;switch(d){case"wc_sessionPropose":return this.onSessionProposeResponse(s,o);case"wc_sessionSettle":return this.onSessionSettleResponse(s,o);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,o);case"wc_sessionExtend":return this.onSessionExtendResponse(s,o);case"wc_sessionPing":return this.onSessionPingResponse(s,o);case"wc_sessionRequest":return this.onSessionRequestResponse(s,o);default:return this.client.logger.info(`Unsupported response method ${d}`)}},this.onSessionProposeRequest=async(r,s)=>{const{params:o,id:d}=s;try{this.isValidConnect($r({},s.params));const O=kr(De.FIVE_MINUTES),y=$r({id:d,pairingTopic:r,expiry:O},o);await this.setProposal(d,y);const I=Qn(JSON.stringify(s)),N=await this.getVerifyContext(I,y.proposer.metadata);this.client.events.emit("session_proposal",{id:d,params:y,context:N})}catch(O){await this.sendError(d,r,O),this.client.logger.error(O)}},this.onSessionProposeResponse=async(r,s)=>{const{id:o}=s;if(xn(s)){const{result:d}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:d});const O=this.client.proposal.get(o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:O});const y=O.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:y});const I=d.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:I});const N=await this.client.core.crypto.generateSharedKey(y,I);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:N});const P=await this.client.core.relayer.subscribe(N);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:P}),await this.client.core.pairing.activate({topic:r})}else gn(s)&&(await this.client.proposal.delete(o,Gt("USER_DISCONNECTED")),this.events.emit(qt("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(r,s)=>{const{id:o,params:d}=s;try{this.isValidSessionSettleRequest(d);const{relay:O,controller:y,expiry:I,namespaces:N,requiredNamespaces:P,optionalNamespaces:U,sessionProperties:K,pairingTopic:M}=s.params,L=$r({topic:r,relay:O,expiry:I,namespaces:N,acknowledged:!0,pairingTopic:M,requiredNamespaces:P,optionalNamespaces:U,controller:y.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:y.publicKey,metadata:y.metadata}},K&&{sessionProperties:K});await this.sendResult(s.id,r,!0),this.events.emit(qt("session_connect"),{session:L})}catch(O){await this.sendError(o,r,O),this.client.logger.error(O)}},this.onSessionSettleResponse=async(r,s)=>{const{id:o}=s;xn(s)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(qt("session_approve",o),{})):gn(s)&&(await this.client.session.delete(r,Gt("USER_DISCONNECTED")),this.events.emit(qt("session_approve",o),{error:s.error}))},this.onSessionUpdateRequest=async(r,s)=>{const{params:o,id:d}=s;try{this.isValidUpdate($r({topic:r},o)),await this.client.session.update(r,{namespaces:o.namespaces}),await this.sendResult(d,r,!0),this.client.events.emit("session_update",{id:d,topic:r,params:o})}catch(O){await this.sendError(d,r,O),this.client.logger.error(O)}},this.onSessionUpdateResponse=(r,s)=>{const{id:o}=s;xn(s)?this.events.emit(qt("session_update",o),{}):gn(s)&&this.events.emit(qt("session_update",o),{error:s.error})},this.onSessionExtendRequest=async(r,s)=>{const{id:o}=s;try{this.isValidExtend({topic:r}),await this.setExpiry(r,kr(Ia)),await this.sendResult(o,r,!0),this.client.events.emit("session_extend",{id:o,topic:r})}catch(d){await this.sendError(o,r,d),this.client.logger.error(d)}},this.onSessionExtendResponse=(r,s)=>{const{id:o}=s;xn(s)?this.events.emit(qt("session_extend",o),{}):gn(s)&&this.events.emit(qt("session_extend",o),{error:s.error})},this.onSessionPingRequest=async(r,s)=>{const{id:o}=s;try{this.isValidPing({topic:r}),await this.sendResult(o,r,!0),this.client.events.emit("session_ping",{id:o,topic:r})}catch(d){await this.sendError(o,r,d),this.client.logger.error(d)}},this.onSessionPingResponse=(r,s)=>{const{id:o}=s;setTimeout(()=>{xn(s)?this.events.emit(qt("session_ping",o),{}):gn(s)&&this.events.emit(qt("session_ping",o),{error:s.error})},500)},this.onSessionDeleteRequest=async(r,s)=>{const{id:o}=s;try{this.isValidDisconnect({topic:r,reason:s.params}),await Promise.all([new Promise(d=>{this.client.core.relayer.once(kt.publish,async()=>{d(await this.deleteSession(r))})}),this.sendResult(o,r,!0)]),this.client.events.emit("session_delete",{id:o,topic:r})}catch(d){await this.sendError(o,r,d),this.client.logger.error(d)}},this.onSessionRequest=async(r,s)=>{const{id:o,params:d}=s;try{this.isValidRequest($r({topic:r},d)),await this.setPendingSessionRequest({id:o,topic:r,params:d});const O=Qn(JSON.stringify(s)),y=this.client.session.get(r),I=await this.getVerifyContext(O,y.peer.metadata);this.client.events.emit("session_request",{id:o,topic:r,params:d,context:I})}catch(O){await this.sendError(o,r,O),this.client.logger.error(O)}},this.onSessionRequestResponse=(r,s)=>{const{id:o}=s;xn(s)?this.events.emit(qt("session_request",o),{result:s.result}):gn(s)&&this.events.emit(qt("session_request",o),{error:s.error})},this.onSessionEventRequest=async(r,s)=>{const{id:o,params:d}=s;try{this.isValidEmit($r({topic:r},d)),this.client.events.emit("session_event",{id:o,topic:r,params:d})}catch(O){await this.sendError(o,r,O),this.client.logger.error(O)}},this.isValidConnect=async r=>{if(!vr(r)){const{message:I}=de("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(I)}const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:d,sessionProperties:O,relays:y}=r;if(cr(s)||await this.isValidPairingTopic(s),!_3(y,!0)){const{message:I}=de("MISSING_OR_INVALID",`connect() relays: ${y}`);throw new Error(I)}!cr(o)&&ds(o)!==0&&this.validateNamespaces(o,"requiredNamespaces"),!cr(d)&&ds(d)!==0&&this.validateNamespaces(d,"optionalNamespaces"),cr(O)||this.validateSessionProps(O,"sessionProperties")},this.validateNamespaces=(r,s)=>{const o=g3(r,"connect()",s);if(o)throw new Error(o.message)},this.isValidApprove=async r=>{if(!vr(r))throw new Error(de("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:s,namespaces:o,relayProtocol:d,sessionProperties:O}=r;await this.isValidProposalId(s);const y=this.client.proposal.get(s),I=Pa(o,"approve()");if(I)throw new Error(I.message);const N=Ol(y.requiredNamespaces,o,"approve()");if(N)throw new Error(N.message);if(!Wt(d,!0)){const{message:P}=de("MISSING_OR_INVALID",`approve() relayProtocol: ${d}`);throw new Error(P)}cr(O)||this.validateSessionProps(O,"sessionProperties")},this.isValidReject=async r=>{if(!vr(r)){const{message:d}=de("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(d)}const{id:s,reason:o}=r;if(await this.isValidProposalId(s),!v3(o)){const{message:d}=de("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(o)}`);throw new Error(d)}},this.isValidSessionSettleRequest=r=>{if(!vr(r)){const{message:N}=de("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(N)}const{relay:s,controller:o,namespaces:d,expiry:O}=r;if(!kd(s)){const{message:N}=de("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(N)}const y=u3(o,"onSessionSettleRequest()");if(y)throw new Error(y.message);const I=Pa(d,"onSessionSettleRequest()");if(I)throw new Error(I.message);if(An(O)){const{message:N}=de("EXPIRED","onSessionSettleRequest()");throw new Error(N)}},this.isValidUpdate=async r=>{if(!vr(r)){const{message:I}=de("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(I)}const{topic:s,namespaces:o}=r;await this.isValidSessionTopic(s);const d=this.client.session.get(s),O=Pa(o,"update()");if(O)throw new Error(O.message);const y=Ol(d.requiredNamespaces,o,"update()");if(y)throw new Error(y.message)},this.isValidExtend=async r=>{if(!vr(r)){const{message:o}=de("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(o)}const{topic:s}=r;await this.isValidSessionTopic(s)},this.isValidRequest=async r=>{if(!vr(r)){const{message:I}=de("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(I)}const{topic:s,request:o,chainId:d,expiry:O}=r;await this.isValidSessionTopic(s);const{namespaces:y}=this.client.session.get(s);if(!Sl(y,d)){const{message:I}=de("MISSING_OR_INVALID",`request() chainId: ${d}`);throw new Error(I)}if(!m3(o)){const{message:I}=de("MISSING_OR_INVALID",`request() ${JSON.stringify(o)}`);throw new Error(I)}if(!E3(y,d,o.method)){const{message:I}=de("MISSING_OR_INVALID",`request() method: ${o.method}`);throw new Error(I)}if(O&&!I3(O,Uc)){const{message:I}=de("MISSING_OR_INVALID",`request() expiry: ${O}. Expiry must be a number (in seconds) between ${Uc.min} and ${Uc.max}`);throw new Error(I)}},this.isValidRespond=async r=>{if(!vr(r)){const{message:d}=de("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(d)}const{topic:s,response:o}=r;if(await this.isValidSessionTopic(s),!b3(o)){const{message:d}=de("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(o)}`);throw new Error(d)}},this.isValidPing=async r=>{if(!vr(r)){const{message:o}=de("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(o)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async r=>{if(!vr(r)){const{message:y}=de("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(y)}const{topic:s,event:o,chainId:d}=r;await this.isValidSessionTopic(s);const{namespaces:O}=this.client.session.get(s);if(!Sl(O,d)){const{message:y}=de("MISSING_OR_INVALID",`emit() chainId: ${d}`);throw new Error(y)}if(!w3(o)){const{message:y}=de("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(y)}if(!D3(O,d,o.name)){const{message:y}=de("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(y)}},this.isValidDisconnect=async r=>{if(!vr(r)){const{message:o}=de("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(o)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(r,s)=>{const o={verified:{verifyUrl:s.verifyUrl||"",validation:"UNKNOWN",origin:s.url||""}};try{const d=await this.client.core.verify.resolve({attestationId:r,verifyUrl:s.verifyUrl});o.verified.origin=d,o.verified.validation=d===s.url?"VALID":"INVALID"}catch(d){this.client.logger.error(d)}return this.client.logger.info(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(r,s)=>{Object.values(r).forEach(o=>{if(!Wt(o,!1)){const{message:d}=de("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(d)}})}}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.client.core.relayer.on(kt.message,async t=>{const{topic:r,message:s}=t;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const o=await this.client.core.crypto.decode(r,s);hu(o)?(this.client.core.history.set(r,o),this.onRelayEventRequest({topic:r,payload:o})):cd(o)&&(await this.client.core.history.resolve(o),this.onRelayEventResponse({topic:r,payload:o}))})}registerExpirerEvents(){this.client.core.expirer.on(Lr.expired,async t=>{const{topic:r,id:s}=Kd(t.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,de("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}isValidPairingTopic(t){if(!Wt(t,!1)){const{message:r}=de("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:r}=de("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(r)}if(An(this.client.core.pairing.pairings.get(t).expiry)){const{message:r}=de("EXPIRED",`pairing topic: ${t}`);throw new Error(r)}}async isValidSessionTopic(t){if(!Wt(t,!1)){const{message:r}=de("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(r)}if(!this.client.session.keys.includes(t)){const{message:r}=de("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(r)}if(An(this.client.session.get(t).expiry)){await this.deleteSession(t);const{message:r}=de("EXPIRED",`session topic: ${t}`);throw new Error(r)}}async isValidSessionOrPairingTopic(t){if(this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(Wt(t,!1)){const{message:r}=de("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(r)}else{const{message:r}=de("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(r)}}async isValidProposalId(t){if(!y3(t)){const{message:r}=de("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(r)}if(!this.client.proposal.keys.includes(t)){const{message:r}=de("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(r)}if(An(this.client.proposal.get(t).expiry)){await this.deleteProposal(t);const{message:r}=de("EXPIRED",`proposal id: ${t}`);throw new Error(r)}}}class dS extends Wa{constructor(t,r){super(t,r,rS,Cu),this.core=t,this.logger=r}}class pS extends Wa{constructor(t,r){super(t,r,nS,Cu),this.core=t,this.logger=r}}class gS extends Wa{constructor(t,r){super(t,r,sS,Cu,s=>s.id),this.core=t,this.logger=r}}let _S=class fp extends Rw{constructor(t){super(t),this.protocol=op,this.version=cp,this.name=Rc.name,this.events=new Ir.EventEmitter,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(o){throw this.logger.error(o.message),o}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(o){throw this.logger.error(o.message),o}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(o){throw this.logger.error(o.message),o}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(o){throw this.logger.error(o.message),o}},this.update=async s=>{try{return await this.engine.update(s)}catch(o){throw this.logger.error(o.message),o}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(o){throw this.logger.error(o.message),o}},this.request=async s=>{try{return await this.engine.request(s)}catch(o){throw this.logger.error(o.message),o}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(o){throw this.logger.error(o.message),o}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(o){throw this.logger.error(o.message),o}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(o){throw this.logger.error(o.message),o}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(o){throw this.logger.error(o.message),o}},this.find=s=>{try{return this.engine.find(s)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=t?.name||Rc.name,this.metadata=t?.metadata||jE();const r=typeof t?.logger<"u"&&typeof t?.logger!="string"?t.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:t?.logger||Rc.logger}));this.core=t?.core||new tS(t),this.logger=Ze.generateChildLogger(r,this.name),this.session=new pS(this.core,this.logger),this.proposal=new dS(this.core,this.logger),this.pendingRequest=new gS(this.core,this.logger),this.engine=new lS(this)}static async init(t){const r=new fp(t);return await r.initialize(),r}get context(){return Ze.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}};var dt={};Object.defineProperty(dt,"__esModule",{value:!0});dt.getLocalStorage=dt.getLocalStorageOrThrow=dt.getCrypto=dt.getCryptoOrThrow=dt.getLocation=dt.getLocationOrThrow=dt.getNavigator=dt.getNavigatorOrThrow=dt.getDocument=dt.getDocumentOrThrow=dt.getFromWindowOrThrow=dt.getFromWindow=void 0;function ii(i){let t;return typeof window<"u"&&typeof window[i]<"u"&&(t=window[i]),t}dt.getFromWindow=ii;function Fi(i){const t=ii(i);if(!t)throw new Error(`${i} is not defined in Window`);return t}dt.getFromWindowOrThrow=Fi;function yS(){return Fi("document")}dt.getDocumentOrThrow=yS;function vS(){return ii("document")}dt.getDocument=vS;function mS(){return Fi("navigator")}dt.getNavigatorOrThrow=mS;function bS(){return ii("navigator")}dt.getNavigator=bS;function wS(){return Fi("location")}dt.getLocationOrThrow=wS;function ES(){return ii("location")}dt.getLocation=ES;function DS(){return Fi("crypto")}dt.getCryptoOrThrow=DS;function SS(){return ii("crypto")}dt.getCrypto=SS;function OS(){return Fi("localStorage")}dt.getLocalStorageOrThrow=OS;function IS(){return ii("localStorage")}dt.getLocalStorage=IS;var Pu={};Object.defineProperty(Pu,"__esModule",{value:!0});Pu.getWindowMetadata=void 0;const Yl=dt;function xS(){let i,t;try{i=Yl.getDocumentOrThrow(),t=Yl.getLocationOrThrow()}catch{return null}function r(){const U=i.getElementsByTagName("link"),K=[];for(let M=0;M<U.length;M++){const L=U[M],W=L.getAttribute("rel");if(W&&W.toLowerCase().indexOf("icon")>-1){const q=L.getAttribute("href");if(q)if(q.toLowerCase().indexOf("https:")===-1&&q.toLowerCase().indexOf("http:")===-1&&q.indexOf("//")!==0){let re=t.protocol+"//"+t.host;if(q.indexOf("/")===0)re+=q;else{const p=t.pathname.split("/");p.pop();const S=p.join("/");re+=S+"/"+q}K.push(re)}else if(q.indexOf("//")===0){const re=t.protocol+q;K.push(re)}else K.push(q)}}return K}function s(...U){const K=i.getElementsByTagName("meta");for(let M=0;M<K.length;M++){const L=K[M],W=["itemprop","property","name"].map(q=>L.getAttribute(q)).filter(q=>q?U.includes(q):!1);if(W.length&&W){const q=L.getAttribute("content");if(q)return q}}return""}function o(){let U=s("name","og:site_name","og:title","twitter:title");return U||(U=i.title),U}function d(){return s("description","og:description","twitter:description","keywords")}const O=o(),y=d(),I=t.origin,N=r();return{description:y,url:I,icons:N,name:O}}Pu.getWindowMetadata=xS;var AS={};(function(i){const t=au,r=ou,s=su,o=vu,d=p=>p==null,O=Symbol("encodeFragmentIdentifier");function y(p){switch(p.arrayFormat){case"index":return S=>(b,D)=>{const g=b.length;return D===void 0||p.skipNull&&D===null||p.skipEmptyString&&D===""?b:D===null?[...b,[P(S,p),"[",g,"]"].join("")]:[...b,[P(S,p),"[",P(g,p),"]=",P(D,p)].join("")]};case"bracket":return S=>(b,D)=>D===void 0||p.skipNull&&D===null||p.skipEmptyString&&D===""?b:D===null?[...b,[P(S,p),"[]"].join("")]:[...b,[P(S,p),"[]=",P(D,p)].join("")];case"colon-list-separator":return S=>(b,D)=>D===void 0||p.skipNull&&D===null||p.skipEmptyString&&D===""?b:D===null?[...b,[P(S,p),":list="].join("")]:[...b,[P(S,p),":list=",P(D,p)].join("")];case"comma":case"separator":case"bracket-separator":{const S=p.arrayFormat==="bracket-separator"?"[]=":"=";return b=>(D,g)=>g===void 0||p.skipNull&&g===null||p.skipEmptyString&&g===""?D:(g=g===null?"":g,D.length===0?[[P(b,p),S,P(g,p)].join("")]:[[D,P(g,p)].join(p.arrayFormatSeparator)])}default:return S=>(b,D)=>D===void 0||p.skipNull&&D===null||p.skipEmptyString&&D===""?b:D===null?[...b,P(S,p)]:[...b,[P(S,p),"=",P(D,p)].join("")]}}function I(p){let S;switch(p.arrayFormat){case"index":return(b,D,g)=>{if(S=/\[(\d*)\]$/.exec(b),b=b.replace(/\[\d*\]$/,""),!S){g[b]=D;return}g[b]===void 0&&(g[b]={}),g[b][S[1]]=D};case"bracket":return(b,D,g)=>{if(S=/(\[\])$/.exec(b),b=b.replace(/\[\]$/,""),!S){g[b]=D;return}if(g[b]===void 0){g[b]=[D];return}g[b]=[].concat(g[b],D)};case"colon-list-separator":return(b,D,g)=>{if(S=/(:list)$/.exec(b),b=b.replace(/:list$/,""),!S){g[b]=D;return}if(g[b]===void 0){g[b]=[D];return}g[b]=[].concat(g[b],D)};case"comma":case"separator":return(b,D,g)=>{const c=typeof D=="string"&&D.includes(p.arrayFormatSeparator),l=typeof D=="string"&&!c&&U(D,p).includes(p.arrayFormatSeparator);D=l?U(D,p):D;const Y=c||l?D.split(p.arrayFormatSeparator).map(h=>U(h,p)):D===null?D:U(D,p);g[b]=Y};case"bracket-separator":return(b,D,g)=>{const c=/(\[\])$/.test(b);if(b=b.replace(/\[\]$/,""),!c){g[b]=D&&U(D,p);return}const l=D===null?[]:D.split(p.arrayFormatSeparator).map(Y=>U(Y,p));if(g[b]===void 0){g[b]=l;return}g[b]=[].concat(g[b],l)};default:return(b,D,g)=>{if(g[b]===void 0){g[b]=D;return}g[b]=[].concat(g[b],D)}}}function N(p){if(typeof p!="string"||p.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function P(p,S){return S.encode?S.strict?t(p):encodeURIComponent(p):p}function U(p,S){return S.decode?r(p):p}function K(p){return Array.isArray(p)?p.sort():typeof p=="object"?K(Object.keys(p)).sort((S,b)=>Number(S)-Number(b)).map(S=>p[S]):p}function M(p){const S=p.indexOf("#");return S!==-1&&(p=p.slice(0,S)),p}function L(p){let S="";const b=p.indexOf("#");return b!==-1&&(S=p.slice(b)),S}function W(p){p=M(p);const S=p.indexOf("?");return S===-1?"":p.slice(S+1)}function q(p,S){return S.parseNumbers&&!Number.isNaN(Number(p))&&typeof p=="string"&&p.trim()!==""?p=Number(p):S.parseBooleans&&p!==null&&(p.toLowerCase()==="true"||p.toLowerCase()==="false")&&(p=p.toLowerCase()==="true"),p}function re(p,S){S=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},S),N(S.arrayFormatSeparator);const b=I(S),D=Object.create(null);if(typeof p!="string"||(p=p.trim().replace(/^[?#&]/,""),!p))return D;for(const g of p.split("&")){if(g==="")continue;let[c,l]=s(S.decode?g.replace(/\+/g," "):g,"=");l=l===void 0?null:["comma","separator","bracket-separator"].includes(S.arrayFormat)?l:U(l,S),b(U(c,S),l,D)}for(const g of Object.keys(D)){const c=D[g];if(typeof c=="object"&&c!==null)for(const l of Object.keys(c))c[l]=q(c[l],S);else D[g]=q(c,S)}return S.sort===!1?D:(S.sort===!0?Object.keys(D).sort():Object.keys(D).sort(S.sort)).reduce((g,c)=>{const l=D[c];return Boolean(l)&&typeof l=="object"&&!Array.isArray(l)?g[c]=K(l):g[c]=l,g},Object.create(null))}i.extract=W,i.parse=re,i.stringify=(p,S)=>{if(!p)return"";S=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},S),N(S.arrayFormatSeparator);const b=l=>S.skipNull&&d(p[l])||S.skipEmptyString&&p[l]==="",D=y(S),g={};for(const l of Object.keys(p))b(l)||(g[l]=p[l]);const c=Object.keys(g);return S.sort!==!1&&c.sort(S.sort),c.map(l=>{const Y=p[l];return Y===void 0?"":Y===null?P(l,S):Array.isArray(Y)?Y.length===0&&S.arrayFormat==="bracket-separator"?P(l,S)+"[]":Y.reduce(D(l),[]).join("&"):P(l,S)+"="+P(Y,S)}).filter(l=>l.length>0).join("&")},i.parseUrl=(p,S)=>{S=Object.assign({decode:!0},S);const[b,D]=s(p,"#");return Object.assign({url:b.split("?")[0]||"",query:re(W(p),S)},S&&S.parseFragmentIdentifier&&D?{fragmentIdentifier:U(D,S)}:{})},i.stringifyUrl=(p,S)=>{S=Object.assign({encode:!0,strict:!0,[O]:!0},S);const b=M(p.url).split("?")[0]||"",D=i.extract(p.url),g=i.parse(D,{sort:!1}),c=Object.assign(g,p.query);let l=i.stringify(c,S);l&&(l=`?${l}`);let Y=L(p.url);return p.fragmentIdentifier&&(Y=`#${S[O]?P(p.fragmentIdentifier,S):p.fragmentIdentifier}`),`${b}${l}${Y}`},i.pick=(p,S,b)=>{b=Object.assign({parseFragmentIdentifier:!0,[O]:!1},b);const{url:D,query:g,fragmentIdentifier:c}=i.parseUrl(p,b);return i.stringifyUrl({url:D,query:o(g,S),fragmentIdentifier:c},b)},i.exclude=(p,S,b)=>{const D=Array.isArray(S)?g=>!S.includes(g):(g,c)=>!S(g,c);return i.pick(p,D,b)}})(AS);function jc(i=[],t=[]){return[...new Set([...i,...t])]}function lp(i){return i.includes(":")}function Ta(i){return lp(i)?i.split(":")[0]:i}const CS={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function Jl(i,t){const{message:r,code:s}=CS[i];return{message:t?`${r} ${t}`:r,code:s}}function PS(i,t){return Array.isArray(i)?typeof t<"u"&&i.length?i.every(t):!0:!1}function TS(i){return Object.getPrototypeOf(i)===Object.prototype&&Object.keys(i).length}const Xl="error",NS="wss://relay.walletconnect.com",RS="wc",US="universal_provider",Ql=`${RS}@${2}:${US}:`,FS="https://rpc.walletconnect.com/v1",Nn={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var fs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},eu={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(i,t){(function(){var r,s="4.17.21",o=200,d="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",O="Expected a function",y="Invalid `variable` option passed into `_.template`",I="__lodash_hash_undefined__",N=500,P="__lodash_placeholder__",U=1,K=2,M=4,L=1,W=2,q=1,re=2,p=4,S=8,b=16,D=32,g=64,c=128,l=256,Y=512,h=30,_="...",w=800,C=16,E=1,v=2,$=3,z=1/0,Z=9007199254740991,R=17976931348623157e292,J=0/0,te=4294967295,ae=te-1,ie=te>>>1,ye=[["ary",c],["bind",q],["bindKey",re],["curry",S],["curryRight",b],["flip",Y],["partial",D],["partialRight",g],["rearg",l]],fe="[object Arguments]",me="[object Array]",Q="[object AsyncFunction]",X="[object Boolean]",B="[object Date]",f="[object DOMException]",j="[object Error]",he="[object Function]",pe="[object GeneratorFunction]",Oe="[object Map]",ze="[object Number]",Ve="[object Null]",$e="[object Object]",_t="[object Promise]",yt="[object Proxy]",Me="[object RegExp]",Ie="[object Set]",Re="[object String]",Ue="[object Symbol]",He="[object Undefined]",Ae="[object WeakMap]",Fe="[object WeakSet]",Se="[object ArrayBuffer]",Ce="[object DataView]",Be="[object Float32Array]",xe="[object Float64Array]",ke="[object Int8Array]",We="[object Int16Array]",et="[object Int32Array]",tt="[object Uint8Array]",Je="[object Uint8ClampedArray]",tr="[object Uint16Array]",lr="[object Uint32Array]",Gr=/\b__p \+= '';/g,rr=/\b(__p \+=) '' \+/g,rn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_n=/&(?:amp|lt|gt|quot|#39);/g,Rn=/[&<>"']/g,Dt=RegExp(_n.source),vt=RegExp(Rn.source),St=/<%-([\s\S]+?)%>/g,Ot=/<%([\s\S]+?)%>/g,wt=/<%=([\s\S]+?)%>/g,mt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ut=/^\w*$/,Ft=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,It=/[\\^$.*+?()[\]{}|]/g,jt=RegExp(It.source),xt=/^\s+/,Pt=/\s/,At=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ht=/\{\n\/\* \[wrapped with (.+)\] \*/,$t=/,? & /,Lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ya=/[()=,{}\[\]\/\s]/,Ja=/\\(\\)?/g,Xa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ar=/\w*$/,Qa=/^[-+]0x[0-9a-f]+$/i,Za=/^0b[01]+$/i,eo=/^\[object .+?Constructor\]$/,to=/^0o[0-7]+$/i,ro=/^(?:0|[1-9]\d*)$/,nn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ai=/($^)/,no=/['\n\r\u2028\u2029\\]/g,oi="\\ud800-\\udfff",io="\\u0300-\\u036f",so="\\ufe20-\\ufe2f",ci="\\u20d0-\\u20ff",Es=io+so+ci,Ds="\\u2700-\\u27bf",Hr="a-z\\xdf-\\xf6\\xf8-\\xff",ao="\\xac\\xb1\\xd7\\xf7",oo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",co="\\u2000-\\u206f",uo=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ss="A-Z\\xc0-\\xd6\\xd8-\\xde",Os="\\ufe0e\\ufe0f",Un=ao+oo+co+uo,ji="['’]",Fn="["+oi+"]",$i="["+Un+"]",jn="["+Es+"]",Is="\\d+",ho="["+Ds+"]",xs="["+Hr+"]",As="[^"+oi+Un+Is+Ds+Hr+Ss+"]",ui="\\ud83c[\\udffb-\\udfff]",fo="(?:"+jn+"|"+ui+")",Cs="[^"+oi+"]",hi="(?:\\ud83c[\\udde6-\\uddff]){2}",yn="[\\ud800-\\udbff][\\udc00-\\udfff]",br="["+Ss+"]",Ps="\\u200d",Ts="(?:"+xs+"|"+As+")",Wr="(?:"+br+"|"+As+")",Ns="(?:"+ji+"(?:d|ll|m|re|s|t|ve))?",Rs="(?:"+ji+"(?:D|LL|M|RE|S|T|VE))?",Us=fo+"?",Fs="["+Os+"]?",lo="(?:"+Ps+"(?:"+[Cs,hi,yn].join("|")+")"+Fs+Us+")*",sn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",js="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",$s=Fs+Us+lo,fi="(?:"+[ho,hi,yn].join("|")+")"+$s,po="(?:"+[Cs+jn+"?",jn,hi,yn,Fn].join("|")+")",Li=RegExp(ji,"g"),go=RegExp(jn,"g"),li=RegExp(ui+"(?="+ui+")|"+po+$s,"g"),Ls=RegExp([br+"?"+xs+"+"+Ns+"(?="+[$i,br,"$"].join("|")+")",Wr+"+"+Rs+"(?="+[$i,br+Ts,"$"].join("|")+")",br+"?"+Ts+"+"+Ns,br+"+"+Rs,js,sn,Is,fi].join("|"),"g"),Ms=RegExp("["+Ps+oi+Es+Os+"]"),$n=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Hs=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_o=-1,at={};at[Be]=at[xe]=at[ke]=at[We]=at[et]=at[tt]=at[Je]=at[tr]=at[lr]=!0,at[fe]=at[me]=at[Se]=at[X]=at[Ce]=at[B]=at[j]=at[he]=at[Oe]=at[ze]=at[$e]=at[Me]=at[Ie]=at[Re]=at[Ae]=!1;var st={};st[fe]=st[me]=st[Se]=st[Ce]=st[X]=st[B]=st[Be]=st[xe]=st[ke]=st[We]=st[et]=st[Oe]=st[ze]=st[$e]=st[Me]=st[Ie]=st[Re]=st[Ue]=st[tt]=st[Je]=st[tr]=st[lr]=!0,st[j]=st[he]=st[Ae]=!1;var T={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},V={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ce={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ge={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ot=parseFloat,Te=parseInt,pt=typeof fs=="object"&&fs&&fs.Object===Object&&fs,Mt=typeof self=="object"&&self&&self.Object===Object&&self,Xe=pt||Mt||Function("return this")(),ct=t&&!t.nodeType&&t,Tt=ct&&!0&&i&&!i.nodeType&&i,dr=Tt&&Tt.exports===ct,Ht=dr&&pt.process,gt=function(){try{var k=Tt&&Tt.require&&Tt.require("util").types;return k||Ht&&Ht.binding&&Ht.binding("util")}catch{}}(),nr=gt&&gt.isArrayBuffer,qr=gt&&gt.isDate,Cr=gt&&gt.isMap,Yr=gt&&gt.isRegExp,Mi=gt&&gt.isSet,Ln=gt&&gt.isTypedArray;function Kt(k,ne,ee){switch(ee.length){case 0:return k.call(ne);case 1:return k.call(ne,ee[0]);case 2:return k.call(ne,ee[0],ee[1]);case 3:return k.call(ne,ee[0],ee[1],ee[2])}return k.apply(ne,ee)}function dp(k,ne,ee,_e){for(var Pe=-1,rt=k==null?0:k.length;++Pe<rt;){var zt=k[Pe];ne(_e,zt,ee(zt),k)}return _e}function Pr(k,ne){for(var ee=-1,_e=k==null?0:k.length;++ee<_e&&ne(k[ee],ee,k)!==!1;);return k}function pp(k,ne){for(var ee=k==null?0:k.length;ee--&&ne(k[ee],ee,k)!==!1;);return k}function Ru(k,ne){for(var ee=-1,_e=k==null?0:k.length;++ee<_e;)if(!ne(k[ee],ee,k))return!1;return!0}function vn(k,ne){for(var ee=-1,_e=k==null?0:k.length,Pe=0,rt=[];++ee<_e;){var zt=k[ee];ne(zt,ee,k)&&(rt[Pe++]=zt)}return rt}function qs(k,ne){var ee=k==null?0:k.length;return!!ee&&di(k,ne,0)>-1}function yo(k,ne,ee){for(var _e=-1,Pe=k==null?0:k.length;++_e<Pe;)if(ee(ne,k[_e]))return!0;return!1}function bt(k,ne){for(var ee=-1,_e=k==null?0:k.length,Pe=Array(_e);++ee<_e;)Pe[ee]=ne(k[ee],ee,k);return Pe}function mn(k,ne){for(var ee=-1,_e=ne.length,Pe=k.length;++ee<_e;)k[Pe+ee]=ne[ee];return k}function vo(k,ne,ee,_e){var Pe=-1,rt=k==null?0:k.length;for(_e&&rt&&(ee=k[++Pe]);++Pe<rt;)ee=ne(ee,k[Pe],Pe,k);return ee}function gp(k,ne,ee,_e){var Pe=k==null?0:k.length;for(_e&&Pe&&(ee=k[--Pe]);Pe--;)ee=ne(ee,k[Pe],Pe,k);return ee}function mo(k,ne){for(var ee=-1,_e=k==null?0:k.length;++ee<_e;)if(ne(k[ee],ee,k))return!0;return!1}var _p=bo("length");function yp(k){return k.split("")}function vp(k){return k.match(Lt)||[]}function Uu(k,ne,ee){var _e;return ee(k,function(Pe,rt,zt){if(ne(Pe,rt,zt))return _e=rt,!1}),_e}function zs(k,ne,ee,_e){for(var Pe=k.length,rt=ee+(_e?1:-1);_e?rt--:++rt<Pe;)if(ne(k[rt],rt,k))return rt;return-1}function di(k,ne,ee){return ne===ne?Pp(k,ne,ee):zs(k,Fu,ee)}function mp(k,ne,ee,_e){for(var Pe=ee-1,rt=k.length;++Pe<rt;)if(_e(k[Pe],ne))return Pe;return-1}function Fu(k){return k!==k}function ju(k,ne){var ee=k==null?0:k.length;return ee?Eo(k,ne)/ee:J}function bo(k){return function(ne){return ne==null?r:ne[k]}}function wo(k){return function(ne){return k==null?r:k[ne]}}function $u(k,ne,ee,_e,Pe){return Pe(k,function(rt,zt,ut){ee=_e?(_e=!1,rt):ne(ee,rt,zt,ut)}),ee}function bp(k,ne){var ee=k.length;for(k.sort(ne);ee--;)k[ee]=k[ee].value;return k}function Eo(k,ne){for(var ee,_e=-1,Pe=k.length;++_e<Pe;){var rt=ne(k[_e]);rt!==r&&(ee=ee===r?rt:ee+rt)}return ee}function Do(k,ne){for(var ee=-1,_e=Array(k);++ee<k;)_e[ee]=ne(ee);return _e}function wp(k,ne){return bt(ne,function(ee){return[ee,k[ee]]})}function Lu(k){return k&&k.slice(0,zu(k)+1).replace(xt,"")}function wr(k){return function(ne){return k(ne)}}function So(k,ne){return bt(ne,function(ee){return k[ee]})}function Hi(k,ne){return k.has(ne)}function Mu(k,ne){for(var ee=-1,_e=k.length;++ee<_e&&di(ne,k[ee],0)>-1;);return ee}function Hu(k,ne){for(var ee=k.length;ee--&&di(ne,k[ee],0)>-1;);return ee}function Ep(k,ne){for(var ee=k.length,_e=0;ee--;)k[ee]===ne&&++_e;return _e}var Dp=wo(T),Sp=wo(V);function Op(k){return"\\"+ge[k]}function Ip(k,ne){return k==null?r:k[ne]}function pi(k){return Ms.test(k)}function xp(k){return $n.test(k)}function Ap(k){for(var ne,ee=[];!(ne=k.next()).done;)ee.push(ne.value);return ee}function Oo(k){var ne=-1,ee=Array(k.size);return k.forEach(function(_e,Pe){ee[++ne]=[Pe,_e]}),ee}function qu(k,ne){return function(ee){return k(ne(ee))}}function bn(k,ne){for(var ee=-1,_e=k.length,Pe=0,rt=[];++ee<_e;){var zt=k[ee];(zt===ne||zt===P)&&(k[ee]=P,rt[Pe++]=ee)}return rt}function Bs(k){var ne=-1,ee=Array(k.size);return k.forEach(function(_e){ee[++ne]=_e}),ee}function Cp(k){var ne=-1,ee=Array(k.size);return k.forEach(function(_e){ee[++ne]=[_e,_e]}),ee}function Pp(k,ne,ee){for(var _e=ee-1,Pe=k.length;++_e<Pe;)if(k[_e]===ne)return _e;return-1}function Tp(k,ne,ee){for(var _e=ee+1;_e--;)if(k[_e]===ne)return _e;return _e}function gi(k){return pi(k)?Rp(k):_p(k)}function zr(k){return pi(k)?Up(k):yp(k)}function zu(k){for(var ne=k.length;ne--&&Pt.test(k.charAt(ne)););return ne}var Np=wo(ce);function Rp(k){for(var ne=li.lastIndex=0;li.test(k);)++ne;return ne}function Up(k){return k.match(li)||[]}function Fp(k){return k.match(Ls)||[]}var jp=function k(ne){ne=ne==null?Xe:_i.defaults(Xe.Object(),ne,_i.pick(Xe,Hs));var ee=ne.Array,_e=ne.Date,Pe=ne.Error,rt=ne.Function,zt=ne.Math,ut=ne.Object,Io=ne.RegExp,$p=ne.String,Tr=ne.TypeError,Ks=ee.prototype,Lp=rt.prototype,yi=ut.prototype,Vs=ne["__core-js_shared__"],ks=Lp.toString,it=yi.hasOwnProperty,Mp=0,Bu=function(){var e=/[^.]+$/.exec(Vs&&Vs.keys&&Vs.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Gs=yi.toString,Hp=ks.call(ut),qp=Xe._,zp=Io("^"+ks.call(it).replace(It,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ws=dr?ne.Buffer:r,wn=ne.Symbol,Ys=ne.Uint8Array,Ku=Ws?Ws.allocUnsafe:r,Js=qu(ut.getPrototypeOf,ut),Vu=ut.create,ku=yi.propertyIsEnumerable,Xs=Ks.splice,Gu=wn?wn.isConcatSpreadable:r,qi=wn?wn.iterator:r,Mn=wn?wn.toStringTag:r,Qs=function(){try{var e=Kn(ut,"defineProperty");return e({},"",{}),e}catch{}}(),Bp=ne.clearTimeout!==Xe.clearTimeout&&ne.clearTimeout,Kp=_e&&_e.now!==Xe.Date.now&&_e.now,Vp=ne.setTimeout!==Xe.setTimeout&&ne.setTimeout,Zs=zt.ceil,ea=zt.floor,xo=ut.getOwnPropertySymbols,kp=Ws?Ws.isBuffer:r,Wu=ne.isFinite,Gp=Ks.join,Wp=qu(ut.keys,ut),Bt=zt.max,Qt=zt.min,Yp=_e.now,Jp=ne.parseInt,Yu=zt.random,Xp=Ks.reverse,Ao=Kn(ne,"DataView"),zi=Kn(ne,"Map"),Co=Kn(ne,"Promise"),vi=Kn(ne,"Set"),Bi=Kn(ne,"WeakMap"),Ki=Kn(ut,"create"),ta=Bi&&new Bi,mi={},Qp=Vn(Ao),Zp=Vn(zi),eg=Vn(Co),tg=Vn(vi),rg=Vn(Bi),ra=wn?wn.prototype:r,Vi=ra?ra.valueOf:r,Ju=ra?ra.toString:r;function x(e){if(Ct(e)&&!Ne(e)&&!(e instanceof Ye)){if(e instanceof Nr)return e;if(it.call(e,"__wrapped__"))return Xh(e)}return new Nr(e)}var bi=function(){function e(){}return function(n){if(!Et(n))return{};if(Vu)return Vu(n);e.prototype=n;var a=new e;return e.prototype=r,a}}();function na(){}function Nr(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=r}x.templateSettings={escape:St,evaluate:Ot,interpolate:wt,variable:"",imports:{_:x}},x.prototype=na.prototype,x.prototype.constructor=x,Nr.prototype=bi(na.prototype),Nr.prototype.constructor=Nr;function Ye(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=te,this.__views__=[]}function ng(){var e=new Ye(this.__wrapped__);return e.__actions__=pr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=pr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=pr(this.__views__),e}function ig(){if(this.__filtered__){var e=new Ye(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function sg(){var e=this.__wrapped__.value(),n=this.__dir__,a=Ne(e),u=n<0,m=a?e.length:0,A=y0(0,m,this.__views__),F=A.start,H=A.end,G=H-F,se=u?H:F-1,oe=this.__iteratees__,ue=oe.length,le=0,ve=Qt(G,this.__takeCount__);if(!a||!u&&m==G&&ve==G)return bh(e,this.__actions__);var we=[];e:for(;G--&&le<ve;){se+=n;for(var qe=-1,Ee=e[se];++qe<ue;){var Ge=oe[qe],Qe=Ge.iteratee,Sr=Ge.type,ar=Qe(Ee);if(Sr==v)Ee=ar;else if(!ar){if(Sr==E)continue e;break e}}we[le++]=Ee}return we}Ye.prototype=bi(na.prototype),Ye.prototype.constructor=Ye;function Hn(e){var n=-1,a=e==null?0:e.length;for(this.clear();++n<a;){var u=e[n];this.set(u[0],u[1])}}function ag(){this.__data__=Ki?Ki(null):{},this.size=0}function og(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}function cg(e){var n=this.__data__;if(Ki){var a=n[e];return a===I?r:a}return it.call(n,e)?n[e]:r}function ug(e){var n=this.__data__;return Ki?n[e]!==r:it.call(n,e)}function hg(e,n){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=Ki&&n===r?I:n,this}Hn.prototype.clear=ag,Hn.prototype.delete=og,Hn.prototype.get=cg,Hn.prototype.has=ug,Hn.prototype.set=hg;function an(e){var n=-1,a=e==null?0:e.length;for(this.clear();++n<a;){var u=e[n];this.set(u[0],u[1])}}function fg(){this.__data__=[],this.size=0}function lg(e){var n=this.__data__,a=ia(n,e);if(a<0)return!1;var u=n.length-1;return a==u?n.pop():Xs.call(n,a,1),--this.size,!0}function dg(e){var n=this.__data__,a=ia(n,e);return a<0?r:n[a][1]}function pg(e){return ia(this.__data__,e)>-1}function gg(e,n){var a=this.__data__,u=ia(a,e);return u<0?(++this.size,a.push([e,n])):a[u][1]=n,this}an.prototype.clear=fg,an.prototype.delete=lg,an.prototype.get=dg,an.prototype.has=pg,an.prototype.set=gg;function on(e){var n=-1,a=e==null?0:e.length;for(this.clear();++n<a;){var u=e[n];this.set(u[0],u[1])}}function _g(){this.size=0,this.__data__={hash:new Hn,map:new(zi||an),string:new Hn}}function yg(e){var n=_a(this,e).delete(e);return this.size-=n?1:0,n}function vg(e){return _a(this,e).get(e)}function mg(e){return _a(this,e).has(e)}function bg(e,n){var a=_a(this,e),u=a.size;return a.set(e,n),this.size+=a.size==u?0:1,this}on.prototype.clear=_g,on.prototype.delete=yg,on.prototype.get=vg,on.prototype.has=mg,on.prototype.set=bg;function qn(e){var n=-1,a=e==null?0:e.length;for(this.__data__=new on;++n<a;)this.add(e[n])}function wg(e){return this.__data__.set(e,I),this}function Eg(e){return this.__data__.has(e)}qn.prototype.add=qn.prototype.push=wg,qn.prototype.has=Eg;function Br(e){var n=this.__data__=new an(e);this.size=n.size}function Dg(){this.__data__=new an,this.size=0}function Sg(e){var n=this.__data__,a=n.delete(e);return this.size=n.size,a}function Og(e){return this.__data__.get(e)}function Ig(e){return this.__data__.has(e)}function xg(e,n){var a=this.__data__;if(a instanceof an){var u=a.__data__;if(!zi||u.length<o-1)return u.push([e,n]),this.size=++a.size,this;a=this.__data__=new on(u)}return a.set(e,n),this.size=a.size,this}Br.prototype.clear=Dg,Br.prototype.delete=Sg,Br.prototype.get=Og,Br.prototype.has=Ig,Br.prototype.set=xg;function Xu(e,n){var a=Ne(e),u=!a&&kn(e),m=!a&&!u&&In(e),A=!a&&!u&&!m&&Si(e),F=a||u||m||A,H=F?Do(e.length,$p):[],G=H.length;for(var se in e)(n||it.call(e,se))&&!(F&&(se=="length"||m&&(se=="offset"||se=="parent")||A&&(se=="buffer"||se=="byteLength"||se=="byteOffset")||fn(se,G)))&&H.push(se);return H}function Qu(e){var n=e.length;return n?e[Ho(0,n-1)]:r}function Ag(e,n){return ya(pr(e),zn(n,0,e.length))}function Cg(e){return ya(pr(e))}function Po(e,n,a){(a!==r&&!Kr(e[n],a)||a===r&&!(n in e))&&cn(e,n,a)}function ki(e,n,a){var u=e[n];(!(it.call(e,n)&&Kr(u,a))||a===r&&!(n in e))&&cn(e,n,a)}function ia(e,n){for(var a=e.length;a--;)if(Kr(e[a][0],n))return a;return-1}function Pg(e,n,a,u){return En(e,function(m,A,F){n(u,m,a(m),F)}),u}function Zu(e,n){return e&&Xr(n,Vt(n),e)}function Tg(e,n){return e&&Xr(n,_r(n),e)}function cn(e,n,a){n=="__proto__"&&Qs?Qs(e,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[n]=a}function To(e,n){for(var a=-1,u=n.length,m=ee(u),A=e==null;++a<u;)m[a]=A?r:fc(e,n[a]);return m}function zn(e,n,a){return e===e&&(a!==r&&(e=e<=a?e:a),n!==r&&(e=e>=n?e:n)),e}function Rr(e,n,a,u,m,A){var F,H=n&U,G=n&K,se=n&M;if(a&&(F=m?a(e,u,m,A):a(e)),F!==r)return F;if(!Et(e))return e;var oe=Ne(e);if(oe){if(F=m0(e),!H)return pr(e,F)}else{var ue=Zt(e),le=ue==he||ue==pe;if(In(e))return Dh(e,H);if(ue==$e||ue==fe||le&&!m){if(F=G||le?{}:zh(e),!H)return G?c0(e,Tg(F,e)):o0(e,Zu(F,e))}else{if(!st[ue])return m?e:{};F=b0(e,ue,H)}}A||(A=new Br);var ve=A.get(e);if(ve)return ve;A.set(e,F),vf(e)?e.forEach(function(Ee){F.add(Rr(Ee,n,a,Ee,e,A))}):_f(e)&&e.forEach(function(Ee,Ge){F.set(Ge,Rr(Ee,n,a,Ge,e,A))});var we=se?G?Xo:Jo:G?_r:Vt,qe=oe?r:we(e);return Pr(qe||e,function(Ee,Ge){qe&&(Ge=Ee,Ee=e[Ge]),ki(F,Ge,Rr(Ee,n,a,Ge,e,A))}),F}function Ng(e){var n=Vt(e);return function(a){return eh(a,e,n)}}function eh(e,n,a){var u=a.length;if(e==null)return!u;for(e=ut(e);u--;){var m=a[u],A=n[m],F=e[m];if(F===r&&!(m in e)||!A(F))return!1}return!0}function th(e,n,a){if(typeof e!="function")throw new Tr(O);return Zi(function(){e.apply(r,a)},n)}function Gi(e,n,a,u){var m=-1,A=qs,F=!0,H=e.length,G=[],se=n.length;if(!H)return G;a&&(n=bt(n,wr(a))),u?(A=yo,F=!1):n.length>=o&&(A=Hi,F=!1,n=new qn(n));e:for(;++m<H;){var oe=e[m],ue=a==null?oe:a(oe);if(oe=u||oe!==0?oe:0,F&&ue===ue){for(var le=se;le--;)if(n[le]===ue)continue e;G.push(oe)}else A(n,ue,u)||G.push(oe)}return G}var En=Ah(Jr),rh=Ah(Ro,!0);function Rg(e,n){var a=!0;return En(e,function(u,m,A){return a=!!n(u,m,A),a}),a}function sa(e,n,a){for(var u=-1,m=e.length;++u<m;){var A=e[u],F=n(A);if(F!=null&&(H===r?F===F&&!Dr(F):a(F,H)))var H=F,G=A}return G}function Ug(e,n,a,u){var m=e.length;for(a=Le(a),a<0&&(a=-a>m?0:m+a),u=u===r||u>m?m:Le(u),u<0&&(u+=m),u=a>u?0:bf(u);a<u;)e[a++]=n;return e}function nh(e,n){var a=[];return En(e,function(u,m,A){n(u,m,A)&&a.push(u)}),a}function Yt(e,n,a,u,m){var A=-1,F=e.length;for(a||(a=E0),m||(m=[]);++A<F;){var H=e[A];n>0&&a(H)?n>1?Yt(H,n-1,a,u,m):mn(m,H):u||(m[m.length]=H)}return m}var No=Ch(),ih=Ch(!0);function Jr(e,n){return e&&No(e,n,Vt)}function Ro(e,n){return e&&ih(e,n,Vt)}function aa(e,n){return vn(n,function(a){return ln(e[a])})}function Bn(e,n){n=Sn(n,e);for(var a=0,u=n.length;e!=null&&a<u;)e=e[Qr(n[a++])];return a&&a==u?e:r}function sh(e,n,a){var u=n(e);return Ne(e)?u:mn(u,a(e))}function ir(e){return e==null?e===r?He:Ve:Mn&&Mn in ut(e)?_0(e):C0(e)}function Uo(e,n){return e>n}function Fg(e,n){return e!=null&&it.call(e,n)}function jg(e,n){return e!=null&&n in ut(e)}function $g(e,n,a){return e>=Qt(n,a)&&e<Bt(n,a)}function Fo(e,n,a){for(var u=a?yo:qs,m=e[0].length,A=e.length,F=A,H=ee(A),G=1/0,se=[];F--;){var oe=e[F];F&&n&&(oe=bt(oe,wr(n))),G=Qt(oe.length,G),H[F]=!a&&(n||m>=120&&oe.length>=120)?new qn(F&&oe):r}oe=e[0];var ue=-1,le=H[0];e:for(;++ue<m&&se.length<G;){var ve=oe[ue],we=n?n(ve):ve;if(ve=a||ve!==0?ve:0,!(le?Hi(le,we):u(se,we,a))){for(F=A;--F;){var qe=H[F];if(!(qe?Hi(qe,we):u(e[F],we,a)))continue e}le&&le.push(we),se.push(ve)}}return se}function Lg(e,n,a,u){return Jr(e,function(m,A,F){n(u,a(m),A,F)}),u}function Wi(e,n,a){n=Sn(n,e),e=kh(e,n);var u=e==null?e:e[Qr(Fr(n))];return u==null?r:Kt(u,e,a)}function ah(e){return Ct(e)&&ir(e)==fe}function Mg(e){return Ct(e)&&ir(e)==Se}function Hg(e){return Ct(e)&&ir(e)==B}function Yi(e,n,a,u,m){return e===n?!0:e==null||n==null||!Ct(e)&&!Ct(n)?e!==e&&n!==n:qg(e,n,a,u,Yi,m)}function qg(e,n,a,u,m,A){var F=Ne(e),H=Ne(n),G=F?me:Zt(e),se=H?me:Zt(n);G=G==fe?$e:G,se=se==fe?$e:se;var oe=G==$e,ue=se==$e,le=G==se;if(le&&In(e)){if(!In(n))return!1;F=!0,oe=!1}if(le&&!oe)return A||(A=new Br),F||Si(e)?Mh(e,n,a,u,m,A):p0(e,n,G,a,u,m,A);if(!(a&L)){var ve=oe&&it.call(e,"__wrapped__"),we=ue&&it.call(n,"__wrapped__");if(ve||we){var qe=ve?e.value():e,Ee=we?n.value():n;return A||(A=new Br),m(qe,Ee,a,u,A)}}return le?(A||(A=new Br),g0(e,n,a,u,m,A)):!1}function zg(e){return Ct(e)&&Zt(e)==Oe}function jo(e,n,a,u){var m=a.length,A=m,F=!u;if(e==null)return!A;for(e=ut(e);m--;){var H=a[m];if(F&&H[2]?H[1]!==e[H[0]]:!(H[0]in e))return!1}for(;++m<A;){H=a[m];var G=H[0],se=e[G],oe=H[1];if(F&&H[2]){if(se===r&&!(G in e))return!1}else{var ue=new Br;if(u)var le=u(se,oe,G,e,n,ue);if(!(le===r?Yi(oe,se,L|W,u,ue):le))return!1}}return!0}function oh(e){if(!Et(e)||S0(e))return!1;var n=ln(e)?zp:eo;return n.test(Vn(e))}function Bg(e){return Ct(e)&&ir(e)==Me}function Kg(e){return Ct(e)&&Zt(e)==Ie}function Vg(e){return Ct(e)&&Da(e.length)&&!!at[ir(e)]}function ch(e){return typeof e=="function"?e:e==null?yr:typeof e=="object"?Ne(e)?fh(e[0],e[1]):hh(e):Tf(e)}function $o(e){if(!Qi(e))return Wp(e);var n=[];for(var a in ut(e))it.call(e,a)&&a!="constructor"&&n.push(a);return n}function kg(e){if(!Et(e))return A0(e);var n=Qi(e),a=[];for(var u in e)u=="constructor"&&(n||!it.call(e,u))||a.push(u);return a}function Lo(e,n){return e<n}function uh(e,n){var a=-1,u=gr(e)?ee(e.length):[];return En(e,function(m,A,F){u[++a]=n(m,A,F)}),u}function hh(e){var n=Zo(e);return n.length==1&&n[0][2]?Kh(n[0][0],n[0][1]):function(a){return a===e||jo(a,e,n)}}function fh(e,n){return tc(e)&&Bh(n)?Kh(Qr(e),n):function(a){var u=fc(a,e);return u===r&&u===n?lc(a,e):Yi(n,u,L|W)}}function oa(e,n,a,u,m){e!==n&&No(n,function(A,F){if(m||(m=new Br),Et(A))Gg(e,n,F,a,oa,u,m);else{var H=u?u(nc(e,F),A,F+"",e,n,m):r;H===r&&(H=A),Po(e,F,H)}},_r)}function Gg(e,n,a,u,m,A,F){var H=nc(e,a),G=nc(n,a),se=F.get(G);if(se){Po(e,a,se);return}var oe=A?A(H,G,a+"",e,n,F):r,ue=oe===r;if(ue){var le=Ne(G),ve=!le&&In(G),we=!le&&!ve&&Si(G);oe=G,le||ve||we?Ne(H)?oe=H:Nt(H)?oe=pr(H):ve?(ue=!1,oe=Dh(G,!0)):we?(ue=!1,oe=Sh(G,!0)):oe=[]:es(G)||kn(G)?(oe=H,kn(H)?oe=wf(H):(!Et(H)||ln(H))&&(oe=zh(G))):ue=!1}ue&&(F.set(G,oe),m(oe,G,u,A,F),F.delete(G)),Po(e,a,oe)}function lh(e,n){var a=e.length;if(a)return n+=n<0?a:0,fn(n,a)?e[n]:r}function dh(e,n,a){n.length?n=bt(n,function(A){return Ne(A)?function(F){return Bn(F,A.length===1?A[0]:A)}:A}):n=[yr];var u=-1;n=bt(n,wr(be()));var m=uh(e,function(A,F,H){var G=bt(n,function(se){return se(A)});return{criteria:G,index:++u,value:A}});return bp(m,function(A,F){return a0(A,F,a)})}function Wg(e,n){return ph(e,n,function(a,u){return lc(e,u)})}function ph(e,n,a){for(var u=-1,m=n.length,A={};++u<m;){var F=n[u],H=Bn(e,F);a(H,F)&&Ji(A,Sn(F,e),H)}return A}function Yg(e){return function(n){return Bn(n,e)}}function Mo(e,n,a,u){var m=u?mp:di,A=-1,F=n.length,H=e;for(e===n&&(n=pr(n)),a&&(H=bt(e,wr(a)));++A<F;)for(var G=0,se=n[A],oe=a?a(se):se;(G=m(H,oe,G,u))>-1;)H!==e&&Xs.call(H,G,1),Xs.call(e,G,1);return e}function gh(e,n){for(var a=e?n.length:0,u=a-1;a--;){var m=n[a];if(a==u||m!==A){var A=m;fn(m)?Xs.call(e,m,1):Bo(e,m)}}return e}function Ho(e,n){return e+ea(Yu()*(n-e+1))}function Jg(e,n,a,u){for(var m=-1,A=Bt(Zs((n-e)/(a||1)),0),F=ee(A);A--;)F[u?A:++m]=e,e+=a;return F}function qo(e,n){var a="";if(!e||n<1||n>Z)return a;do n%2&&(a+=e),n=ea(n/2),n&&(e+=e);while(n);return a}function Ke(e,n){return ic(Vh(e,n,yr),e+"")}function Xg(e){return Qu(Oi(e))}function Qg(e,n){var a=Oi(e);return ya(a,zn(n,0,a.length))}function Ji(e,n,a,u){if(!Et(e))return e;n=Sn(n,e);for(var m=-1,A=n.length,F=A-1,H=e;H!=null&&++m<A;){var G=Qr(n[m]),se=a;if(G==="__proto__"||G==="constructor"||G==="prototype")return e;if(m!=F){var oe=H[G];se=u?u(oe,G,H):r,se===r&&(se=Et(oe)?oe:fn(n[m+1])?[]:{})}ki(H,G,se),H=H[G]}return e}var _h=ta?function(e,n){return ta.set(e,n),e}:yr,Zg=Qs?function(e,n){return Qs(e,"toString",{configurable:!0,enumerable:!1,value:pc(n),writable:!0})}:yr;function e0(e){return ya(Oi(e))}function Ur(e,n,a){var u=-1,m=e.length;n<0&&(n=-n>m?0:m+n),a=a>m?m:a,a<0&&(a+=m),m=n>a?0:a-n>>>0,n>>>=0;for(var A=ee(m);++u<m;)A[u]=e[u+n];return A}function t0(e,n){var a;return En(e,function(u,m,A){return a=n(u,m,A),!a}),!!a}function ca(e,n,a){var u=0,m=e==null?u:e.length;if(typeof n=="number"&&n===n&&m<=ie){for(;u<m;){var A=u+m>>>1,F=e[A];F!==null&&!Dr(F)&&(a?F<=n:F<n)?u=A+1:m=A}return m}return zo(e,n,yr,a)}function zo(e,n,a,u){var m=0,A=e==null?0:e.length;if(A===0)return 0;n=a(n);for(var F=n!==n,H=n===null,G=Dr(n),se=n===r;m<A;){var oe=ea((m+A)/2),ue=a(e[oe]),le=ue!==r,ve=ue===null,we=ue===ue,qe=Dr(ue);if(F)var Ee=u||we;else se?Ee=we&&(u||le):H?Ee=we&&le&&(u||!ve):G?Ee=we&&le&&!ve&&(u||!qe):ve||qe?Ee=!1:Ee=u?ue<=n:ue<n;Ee?m=oe+1:A=oe}return Qt(A,ae)}function yh(e,n){for(var a=-1,u=e.length,m=0,A=[];++a<u;){var F=e[a],H=n?n(F):F;if(!a||!Kr(H,G)){var G=H;A[m++]=F===0?0:F}}return A}function vh(e){return typeof e=="number"?e:Dr(e)?J:+e}function Er(e){if(typeof e=="string")return e;if(Ne(e))return bt(e,Er)+"";if(Dr(e))return Ju?Ju.call(e):"";var n=e+"";return n=="0"&&1/e==-z?"-0":n}function Dn(e,n,a){var u=-1,m=qs,A=e.length,F=!0,H=[],G=H;if(a)F=!1,m=yo;else if(A>=o){var se=n?null:l0(e);if(se)return Bs(se);F=!1,m=Hi,G=new qn}else G=n?[]:H;e:for(;++u<A;){var oe=e[u],ue=n?n(oe):oe;if(oe=a||oe!==0?oe:0,F&&ue===ue){for(var le=G.length;le--;)if(G[le]===ue)continue e;n&&G.push(ue),H.push(oe)}else m(G,ue,a)||(G!==H&&G.push(ue),H.push(oe))}return H}function Bo(e,n){return n=Sn(n,e),e=kh(e,n),e==null||delete e[Qr(Fr(n))]}function mh(e,n,a,u){return Ji(e,n,a(Bn(e,n)),u)}function ua(e,n,a,u){for(var m=e.length,A=u?m:-1;(u?A--:++A<m)&&n(e[A],A,e););return a?Ur(e,u?0:A,u?A+1:m):Ur(e,u?A+1:0,u?m:A)}function bh(e,n){var a=e;return a instanceof Ye&&(a=a.value()),vo(n,function(u,m){return m.func.apply(m.thisArg,mn([u],m.args))},a)}function Ko(e,n,a){var u=e.length;if(u<2)return u?Dn(e[0]):[];for(var m=-1,A=ee(u);++m<u;)for(var F=e[m],H=-1;++H<u;)H!=m&&(A[m]=Gi(A[m]||F,e[H],n,a));return Dn(Yt(A,1),n,a)}function wh(e,n,a){for(var u=-1,m=e.length,A=n.length,F={};++u<m;){var H=u<A?n[u]:r;a(F,e[u],H)}return F}function Vo(e){return Nt(e)?e:[]}function ko(e){return typeof e=="function"?e:yr}function Sn(e,n){return Ne(e)?e:tc(e,n)?[e]:Jh(nt(e))}var r0=Ke;function On(e,n,a){var u=e.length;return a=a===r?u:a,!n&&a>=u?e:Ur(e,n,a)}var Eh=Bp||function(e){return Xe.clearTimeout(e)};function Dh(e,n){if(n)return e.slice();var a=e.length,u=Ku?Ku(a):new e.constructor(a);return e.copy(u),u}function Go(e){var n=new e.constructor(e.byteLength);return new Ys(n).set(new Ys(e)),n}function n0(e,n){var a=n?Go(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}function i0(e){var n=new e.constructor(e.source,Ar.exec(e));return n.lastIndex=e.lastIndex,n}function s0(e){return Vi?ut(Vi.call(e)):{}}function Sh(e,n){var a=n?Go(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}function Oh(e,n){if(e!==n){var a=e!==r,u=e===null,m=e===e,A=Dr(e),F=n!==r,H=n===null,G=n===n,se=Dr(n);if(!H&&!se&&!A&&e>n||A&&F&&G&&!H&&!se||u&&F&&G||!a&&G||!m)return 1;if(!u&&!A&&!se&&e<n||se&&a&&m&&!u&&!A||H&&a&&m||!F&&m||!G)return-1}return 0}function a0(e,n,a){for(var u=-1,m=e.criteria,A=n.criteria,F=m.length,H=a.length;++u<F;){var G=Oh(m[u],A[u]);if(G){if(u>=H)return G;var se=a[u];return G*(se=="desc"?-1:1)}}return e.index-n.index}function Ih(e,n,a,u){for(var m=-1,A=e.length,F=a.length,H=-1,G=n.length,se=Bt(A-F,0),oe=ee(G+se),ue=!u;++H<G;)oe[H]=n[H];for(;++m<F;)(ue||m<A)&&(oe[a[m]]=e[m]);for(;se--;)oe[H++]=e[m++];return oe}function xh(e,n,a,u){for(var m=-1,A=e.length,F=-1,H=a.length,G=-1,se=n.length,oe=Bt(A-H,0),ue=ee(oe+se),le=!u;++m<oe;)ue[m]=e[m];for(var ve=m;++G<se;)ue[ve+G]=n[G];for(;++F<H;)(le||m<A)&&(ue[ve+a[F]]=e[m++]);return ue}function pr(e,n){var a=-1,u=e.length;for(n||(n=ee(u));++a<u;)n[a]=e[a];return n}function Xr(e,n,a,u){var m=!a;a||(a={});for(var A=-1,F=n.length;++A<F;){var H=n[A],G=u?u(a[H],e[H],H,a,e):r;G===r&&(G=e[H]),m?cn(a,H,G):ki(a,H,G)}return a}function o0(e,n){return Xr(e,ec(e),n)}function c0(e,n){return Xr(e,Hh(e),n)}function ha(e,n){return function(a,u){var m=Ne(a)?dp:Pg,A=n?n():{};return m(a,e,be(u,2),A)}}function wi(e){return Ke(function(n,a){var u=-1,m=a.length,A=m>1?a[m-1]:r,F=m>2?a[2]:r;for(A=e.length>3&&typeof A=="function"?(m--,A):r,F&&sr(a[0],a[1],F)&&(A=m<3?r:A,m=1),n=ut(n);++u<m;){var H=a[u];H&&e(n,H,u,A)}return n})}function Ah(e,n){return function(a,u){if(a==null)return a;if(!gr(a))return e(a,u);for(var m=a.length,A=n?m:-1,F=ut(a);(n?A--:++A<m)&&u(F[A],A,F)!==!1;);return a}}function Ch(e){return function(n,a,u){for(var m=-1,A=ut(n),F=u(n),H=F.length;H--;){var G=F[e?H:++m];if(a(A[G],G,A)===!1)break}return n}}function u0(e,n,a){var u=n&q,m=Xi(e);function A(){var F=this&&this!==Xe&&this instanceof A?m:e;return F.apply(u?a:this,arguments)}return A}function Ph(e){return function(n){n=nt(n);var a=pi(n)?zr(n):r,u=a?a[0]:n.charAt(0),m=a?On(a,1).join(""):n.slice(1);return u[e]()+m}}function Ei(e){return function(n){return vo(Cf(Af(n).replace(Li,"")),e,"")}}function Xi(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var a=bi(e.prototype),u=e.apply(a,n);return Et(u)?u:a}}function h0(e,n,a){var u=Xi(e);function m(){for(var A=arguments.length,F=ee(A),H=A,G=Di(m);H--;)F[H]=arguments[H];var se=A<3&&F[0]!==G&&F[A-1]!==G?[]:bn(F,G);if(A-=se.length,A<a)return Fh(e,n,fa,m.placeholder,r,F,se,r,r,a-A);var oe=this&&this!==Xe&&this instanceof m?u:e;return Kt(oe,this,F)}return m}function Th(e){return function(n,a,u){var m=ut(n);if(!gr(n)){var A=be(a,3);n=Vt(n),a=function(H){return A(m[H],H,m)}}var F=e(n,a,u);return F>-1?m[A?n[F]:F]:r}}function Nh(e){return hn(function(n){var a=n.length,u=a,m=Nr.prototype.thru;for(e&&n.reverse();u--;){var A=n[u];if(typeof A!="function")throw new Tr(O);if(m&&!F&&ga(A)=="wrapper")var F=new Nr([],!0)}for(u=F?u:a;++u<a;){A=n[u];var H=ga(A),G=H=="wrapper"?Qo(A):r;G&&rc(G[0])&&G[1]==(c|S|D|l)&&!G[4].length&&G[9]==1?F=F[ga(G[0])].apply(F,G[3]):F=A.length==1&&rc(A)?F[H]():F.thru(A)}return function(){var se=arguments,oe=se[0];if(F&&se.length==1&&Ne(oe))return F.plant(oe).value();for(var ue=0,le=a?n[ue].apply(this,se):oe;++ue<a;)le=n[ue].call(this,le);return le}})}function fa(e,n,a,u,m,A,F,H,G,se){var oe=n&c,ue=n&q,le=n&re,ve=n&(S|b),we=n&Y,qe=le?r:Xi(e);function Ee(){for(var Ge=arguments.length,Qe=ee(Ge),Sr=Ge;Sr--;)Qe[Sr]=arguments[Sr];if(ve)var ar=Di(Ee),Or=Ep(Qe,ar);if(u&&(Qe=Ih(Qe,u,m,ve)),A&&(Qe=xh(Qe,A,F,ve)),Ge-=Or,ve&&Ge<se){var Rt=bn(Qe,ar);return Fh(e,n,fa,Ee.placeholder,a,Qe,Rt,H,G,se-Ge)}var Vr=ue?a:this,pn=le?Vr[e]:e;return Ge=Qe.length,H?Qe=P0(Qe,H):we&&Ge>1&&Qe.reverse(),oe&&G<Ge&&(Qe.length=G),this&&this!==Xe&&this instanceof Ee&&(pn=qe||Xi(pn)),pn.apply(Vr,Qe)}return Ee}function Rh(e,n){return function(a,u){return Lg(a,e,n(u),{})}}function la(e,n){return function(a,u){var m;if(a===r&&u===r)return n;if(a!==r&&(m=a),u!==r){if(m===r)return u;typeof a=="string"||typeof u=="string"?(a=Er(a),u=Er(u)):(a=vh(a),u=vh(u)),m=e(a,u)}return m}}function Wo(e){return hn(function(n){return n=bt(n,wr(be())),Ke(function(a){var u=this;return e(n,function(m){return Kt(m,u,a)})})})}function da(e,n){n=n===r?" ":Er(n);var a=n.length;if(a<2)return a?qo(n,e):n;var u=qo(n,Zs(e/gi(n)));return pi(n)?On(zr(u),0,e).join(""):u.slice(0,e)}function f0(e,n,a,u){var m=n&q,A=Xi(e);function F(){for(var H=-1,G=arguments.length,se=-1,oe=u.length,ue=ee(oe+G),le=this&&this!==Xe&&this instanceof F?A:e;++se<oe;)ue[se]=u[se];for(;G--;)ue[se++]=arguments[++H];return Kt(le,m?a:this,ue)}return F}function Uh(e){return function(n,a,u){return u&&typeof u!="number"&&sr(n,a,u)&&(a=u=r),n=dn(n),a===r?(a=n,n=0):a=dn(a),u=u===r?n<a?1:-1:dn(u),Jg(n,a,u,e)}}function pa(e){return function(n,a){return typeof n=="string"&&typeof a=="string"||(n=jr(n),a=jr(a)),e(n,a)}}function Fh(e,n,a,u,m,A,F,H,G,se){var oe=n&S,ue=oe?F:r,le=oe?r:F,ve=oe?A:r,we=oe?r:A;n|=oe?D:g,n&=~(oe?g:D),n&p||(n&=~(q|re));var qe=[e,n,m,ve,ue,we,le,H,G,se],Ee=a.apply(r,qe);return rc(e)&&Gh(Ee,qe),Ee.placeholder=u,Wh(Ee,e,n)}function Yo(e){var n=zt[e];return function(a,u){if(a=jr(a),u=u==null?0:Qt(Le(u),292),u&&Wu(a)){var m=(nt(a)+"e").split("e"),A=n(m[0]+"e"+(+m[1]+u));return m=(nt(A)+"e").split("e"),+(m[0]+"e"+(+m[1]-u))}return n(a)}}var l0=vi&&1/Bs(new vi([,-0]))[1]==z?function(e){return new vi(e)}:yc;function jh(e){return function(n){var a=Zt(n);return a==Oe?Oo(n):a==Ie?Cp(n):wp(n,e(n))}}function un(e,n,a,u,m,A,F,H){var G=n&re;if(!G&&typeof e!="function")throw new Tr(O);var se=u?u.length:0;if(se||(n&=~(D|g),u=m=r),F=F===r?F:Bt(Le(F),0),H=H===r?H:Le(H),se-=m?m.length:0,n&g){var oe=u,ue=m;u=m=r}var le=G?r:Qo(e),ve=[e,n,a,u,m,oe,ue,A,F,H];if(le&&x0(ve,le),e=ve[0],n=ve[1],a=ve[2],u=ve[3],m=ve[4],H=ve[9]=ve[9]===r?G?0:e.length:Bt(ve[9]-se,0),!H&&n&(S|b)&&(n&=~(S|b)),!n||n==q)var we=u0(e,n,a);else n==S||n==b?we=h0(e,n,H):(n==D||n==(q|D))&&!m.length?we=f0(e,n,a,u):we=fa.apply(r,ve);var qe=le?_h:Gh;return Wh(qe(we,ve),e,n)}function $h(e,n,a,u){return e===r||Kr(e,yi[a])&&!it.call(u,a)?n:e}function Lh(e,n,a,u,m,A){return Et(e)&&Et(n)&&(A.set(n,e),oa(e,n,r,Lh,A),A.delete(n)),e}function d0(e){return es(e)?r:e}function Mh(e,n,a,u,m,A){var F=a&L,H=e.length,G=n.length;if(H!=G&&!(F&&G>H))return!1;var se=A.get(e),oe=A.get(n);if(se&&oe)return se==n&&oe==e;var ue=-1,le=!0,ve=a&W?new qn:r;for(A.set(e,n),A.set(n,e);++ue<H;){var we=e[ue],qe=n[ue];if(u)var Ee=F?u(qe,we,ue,n,e,A):u(we,qe,ue,e,n,A);if(Ee!==r){if(Ee)continue;le=!1;break}if(ve){if(!mo(n,function(Ge,Qe){if(!Hi(ve,Qe)&&(we===Ge||m(we,Ge,a,u,A)))return ve.push(Qe)})){le=!1;break}}else if(!(we===qe||m(we,qe,a,u,A))){le=!1;break}}return A.delete(e),A.delete(n),le}function p0(e,n,a,u,m,A,F){switch(a){case Ce:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case Se:return!(e.byteLength!=n.byteLength||!A(new Ys(e),new Ys(n)));case X:case B:case ze:return Kr(+e,+n);case j:return e.name==n.name&&e.message==n.message;case Me:case Re:return e==n+"";case Oe:var H=Oo;case Ie:var G=u&L;if(H||(H=Bs),e.size!=n.size&&!G)return!1;var se=F.get(e);if(se)return se==n;u|=W,F.set(e,n);var oe=Mh(H(e),H(n),u,m,A,F);return F.delete(e),oe;case Ue:if(Vi)return Vi.call(e)==Vi.call(n)}return!1}function g0(e,n,a,u,m,A){var F=a&L,H=Jo(e),G=H.length,se=Jo(n),oe=se.length;if(G!=oe&&!F)return!1;for(var ue=G;ue--;){var le=H[ue];if(!(F?le in n:it.call(n,le)))return!1}var ve=A.get(e),we=A.get(n);if(ve&&we)return ve==n&&we==e;var qe=!0;A.set(e,n),A.set(n,e);for(var Ee=F;++ue<G;){le=H[ue];var Ge=e[le],Qe=n[le];if(u)var Sr=F?u(Qe,Ge,le,n,e,A):u(Ge,Qe,le,e,n,A);if(!(Sr===r?Ge===Qe||m(Ge,Qe,a,u,A):Sr)){qe=!1;break}Ee||(Ee=le=="constructor")}if(qe&&!Ee){var ar=e.constructor,Or=n.constructor;ar!=Or&&"constructor"in e&&"constructor"in n&&!(typeof ar=="function"&&ar instanceof ar&&typeof Or=="function"&&Or instanceof Or)&&(qe=!1)}return A.delete(e),A.delete(n),qe}function hn(e){return ic(Vh(e,r,ef),e+"")}function Jo(e){return sh(e,Vt,ec)}function Xo(e){return sh(e,_r,Hh)}var Qo=ta?function(e){return ta.get(e)}:yc;function ga(e){for(var n=e.name+"",a=mi[n],u=it.call(mi,n)?a.length:0;u--;){var m=a[u],A=m.func;if(A==null||A==e)return m.name}return n}function Di(e){var n=it.call(x,"placeholder")?x:e;return n.placeholder}function be(){var e=x.iteratee||gc;return e=e===gc?ch:e,arguments.length?e(arguments[0],arguments[1]):e}function _a(e,n){var a=e.__data__;return D0(n)?a[typeof n=="string"?"string":"hash"]:a.map}function Zo(e){for(var n=Vt(e),a=n.length;a--;){var u=n[a],m=e[u];n[a]=[u,m,Bh(m)]}return n}function Kn(e,n){var a=Ip(e,n);return oh(a)?a:r}function _0(e){var n=it.call(e,Mn),a=e[Mn];try{e[Mn]=r;var u=!0}catch{}var m=Gs.call(e);return u&&(n?e[Mn]=a:delete e[Mn]),m}var ec=xo?function(e){return e==null?[]:(e=ut(e),vn(xo(e),function(n){return ku.call(e,n)}))}:vc,Hh=xo?function(e){for(var n=[];e;)mn(n,ec(e)),e=Js(e);return n}:vc,Zt=ir;(Ao&&Zt(new Ao(new ArrayBuffer(1)))!=Ce||zi&&Zt(new zi)!=Oe||Co&&Zt(Co.resolve())!=_t||vi&&Zt(new vi)!=Ie||Bi&&Zt(new Bi)!=Ae)&&(Zt=function(e){var n=ir(e),a=n==$e?e.constructor:r,u=a?Vn(a):"";if(u)switch(u){case Qp:return Ce;case Zp:return Oe;case eg:return _t;case tg:return Ie;case rg:return Ae}return n});function y0(e,n,a){for(var u=-1,m=a.length;++u<m;){var A=a[u],F=A.size;switch(A.type){case"drop":e+=F;break;case"dropRight":n-=F;break;case"take":n=Qt(n,e+F);break;case"takeRight":e=Bt(e,n-F);break}}return{start:e,end:n}}function v0(e){var n=e.match(ht);return n?n[1].split($t):[]}function qh(e,n,a){n=Sn(n,e);for(var u=-1,m=n.length,A=!1;++u<m;){var F=Qr(n[u]);if(!(A=e!=null&&a(e,F)))break;e=e[F]}return A||++u!=m?A:(m=e==null?0:e.length,!!m&&Da(m)&&fn(F,m)&&(Ne(e)||kn(e)))}function m0(e){var n=e.length,a=new e.constructor(n);return n&&typeof e[0]=="string"&&it.call(e,"index")&&(a.index=e.index,a.input=e.input),a}function zh(e){return typeof e.constructor=="function"&&!Qi(e)?bi(Js(e)):{}}function b0(e,n,a){var u=e.constructor;switch(n){case Se:return Go(e);case X:case B:return new u(+e);case Ce:return n0(e,a);case Be:case xe:case ke:case We:case et:case tt:case Je:case tr:case lr:return Sh(e,a);case Oe:return new u;case ze:case Re:return new u(e);case Me:return i0(e);case Ie:return new u;case Ue:return s0(e)}}function w0(e,n){var a=n.length;if(!a)return e;var u=a-1;return n[u]=(a>1?"& ":"")+n[u],n=n.join(a>2?", ":" "),e.replace(At,`{
/* [wrapped with `+n+`] */
`)}function E0(e){return Ne(e)||kn(e)||!!(Gu&&e&&e[Gu])}function fn(e,n){var a=typeof e;return n=n??Z,!!n&&(a=="number"||a!="symbol"&&ro.test(e))&&e>-1&&e%1==0&&e<n}function sr(e,n,a){if(!Et(a))return!1;var u=typeof n;return(u=="number"?gr(a)&&fn(n,a.length):u=="string"&&n in a)?Kr(a[n],e):!1}function tc(e,n){if(Ne(e))return!1;var a=typeof e;return a=="number"||a=="symbol"||a=="boolean"||e==null||Dr(e)?!0:Ut.test(e)||!mt.test(e)||n!=null&&e in ut(n)}function D0(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}function rc(e){var n=ga(e),a=x[n];if(typeof a!="function"||!(n in Ye.prototype))return!1;if(e===a)return!0;var u=Qo(a);return!!u&&e===u[0]}function S0(e){return!!Bu&&Bu in e}var O0=Vs?ln:mc;function Qi(e){var n=e&&e.constructor,a=typeof n=="function"&&n.prototype||yi;return e===a}function Bh(e){return e===e&&!Et(e)}function Kh(e,n){return function(a){return a==null?!1:a[e]===n&&(n!==r||e in ut(a))}}function I0(e){var n=wa(e,function(u){return a.size===N&&a.clear(),u}),a=n.cache;return n}function x0(e,n){var a=e[1],u=n[1],m=a|u,A=m<(q|re|c),F=u==c&&a==S||u==c&&a==l&&e[7].length<=n[8]||u==(c|l)&&n[7].length<=n[8]&&a==S;if(!(A||F))return e;u&q&&(e[2]=n[2],m|=a&q?0:p);var H=n[3];if(H){var G=e[3];e[3]=G?Ih(G,H,n[4]):H,e[4]=G?bn(e[3],P):n[4]}return H=n[5],H&&(G=e[5],e[5]=G?xh(G,H,n[6]):H,e[6]=G?bn(e[5],P):n[6]),H=n[7],H&&(e[7]=H),u&c&&(e[8]=e[8]==null?n[8]:Qt(e[8],n[8])),e[9]==null&&(e[9]=n[9]),e[0]=n[0],e[1]=m,e}function A0(e){var n=[];if(e!=null)for(var a in ut(e))n.push(a);return n}function C0(e){return Gs.call(e)}function Vh(e,n,a){return n=Bt(n===r?e.length-1:n,0),function(){for(var u=arguments,m=-1,A=Bt(u.length-n,0),F=ee(A);++m<A;)F[m]=u[n+m];m=-1;for(var H=ee(n+1);++m<n;)H[m]=u[m];return H[n]=a(F),Kt(e,this,H)}}function kh(e,n){return n.length<2?e:Bn(e,Ur(n,0,-1))}function P0(e,n){for(var a=e.length,u=Qt(n.length,a),m=pr(e);u--;){var A=n[u];e[u]=fn(A,a)?m[A]:r}return e}function nc(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}var Gh=Yh(_h),Zi=Vp||function(e,n){return Xe.setTimeout(e,n)},ic=Yh(Zg);function Wh(e,n,a){var u=n+"";return ic(e,w0(u,T0(v0(u),a)))}function Yh(e){var n=0,a=0;return function(){var u=Yp(),m=C-(u-a);if(a=u,m>0){if(++n>=w)return arguments[0]}else n=0;return e.apply(r,arguments)}}function ya(e,n){var a=-1,u=e.length,m=u-1;for(n=n===r?u:n;++a<n;){var A=Ho(a,m),F=e[A];e[A]=e[a],e[a]=F}return e.length=n,e}var Jh=I0(function(e){var n=[];return e.charCodeAt(0)===46&&n.push(""),e.replace(Ft,function(a,u,m,A){n.push(m?A.replace(Ja,"$1"):u||a)}),n});function Qr(e){if(typeof e=="string"||Dr(e))return e;var n=e+"";return n=="0"&&1/e==-z?"-0":n}function Vn(e){if(e!=null){try{return ks.call(e)}catch{}try{return e+""}catch{}}return""}function T0(e,n){return Pr(ye,function(a){var u="_."+a[0];n&a[1]&&!qs(e,u)&&e.push(u)}),e.sort()}function Xh(e){if(e instanceof Ye)return e.clone();var n=new Nr(e.__wrapped__,e.__chain__);return n.__actions__=pr(e.__actions__),n.__index__=e.__index__,n.__values__=e.__values__,n}function N0(e,n,a){(a?sr(e,n,a):n===r)?n=1:n=Bt(Le(n),0);var u=e==null?0:e.length;if(!u||n<1)return[];for(var m=0,A=0,F=ee(Zs(u/n));m<u;)F[A++]=Ur(e,m,m+=n);return F}function R0(e){for(var n=-1,a=e==null?0:e.length,u=0,m=[];++n<a;){var A=e[n];A&&(m[u++]=A)}return m}function U0(){var e=arguments.length;if(!e)return[];for(var n=ee(e-1),a=arguments[0],u=e;u--;)n[u-1]=arguments[u];return mn(Ne(a)?pr(a):[a],Yt(n,1))}var F0=Ke(function(e,n){return Nt(e)?Gi(e,Yt(n,1,Nt,!0)):[]}),j0=Ke(function(e,n){var a=Fr(n);return Nt(a)&&(a=r),Nt(e)?Gi(e,Yt(n,1,Nt,!0),be(a,2)):[]}),$0=Ke(function(e,n){var a=Fr(n);return Nt(a)&&(a=r),Nt(e)?Gi(e,Yt(n,1,Nt,!0),r,a):[]});function L0(e,n,a){var u=e==null?0:e.length;return u?(n=a||n===r?1:Le(n),Ur(e,n<0?0:n,u)):[]}function M0(e,n,a){var u=e==null?0:e.length;return u?(n=a||n===r?1:Le(n),n=u-n,Ur(e,0,n<0?0:n)):[]}function H0(e,n){return e&&e.length?ua(e,be(n,3),!0,!0):[]}function q0(e,n){return e&&e.length?ua(e,be(n,3),!0):[]}function z0(e,n,a,u){var m=e==null?0:e.length;return m?(a&&typeof a!="number"&&sr(e,n,a)&&(a=0,u=m),Ug(e,n,a,u)):[]}function Qh(e,n,a){var u=e==null?0:e.length;if(!u)return-1;var m=a==null?0:Le(a);return m<0&&(m=Bt(u+m,0)),zs(e,be(n,3),m)}function Zh(e,n,a){var u=e==null?0:e.length;if(!u)return-1;var m=u-1;return a!==r&&(m=Le(a),m=a<0?Bt(u+m,0):Qt(m,u-1)),zs(e,be(n,3),m,!0)}function ef(e){var n=e==null?0:e.length;return n?Yt(e,1):[]}function B0(e){var n=e==null?0:e.length;return n?Yt(e,z):[]}function K0(e,n){var a=e==null?0:e.length;return a?(n=n===r?1:Le(n),Yt(e,n)):[]}function V0(e){for(var n=-1,a=e==null?0:e.length,u={};++n<a;){var m=e[n];u[m[0]]=m[1]}return u}function tf(e){return e&&e.length?e[0]:r}function k0(e,n,a){var u=e==null?0:e.length;if(!u)return-1;var m=a==null?0:Le(a);return m<0&&(m=Bt(u+m,0)),di(e,n,m)}function G0(e){var n=e==null?0:e.length;return n?Ur(e,0,-1):[]}var W0=Ke(function(e){var n=bt(e,Vo);return n.length&&n[0]===e[0]?Fo(n):[]}),Y0=Ke(function(e){var n=Fr(e),a=bt(e,Vo);return n===Fr(a)?n=r:a.pop(),a.length&&a[0]===e[0]?Fo(a,be(n,2)):[]}),J0=Ke(function(e){var n=Fr(e),a=bt(e,Vo);return n=typeof n=="function"?n:r,n&&a.pop(),a.length&&a[0]===e[0]?Fo(a,r,n):[]});function X0(e,n){return e==null?"":Gp.call(e,n)}function Fr(e){var n=e==null?0:e.length;return n?e[n-1]:r}function Q0(e,n,a){var u=e==null?0:e.length;if(!u)return-1;var m=u;return a!==r&&(m=Le(a),m=m<0?Bt(u+m,0):Qt(m,u-1)),n===n?Tp(e,n,m):zs(e,Fu,m,!0)}function Z0(e,n){return e&&e.length?lh(e,Le(n)):r}var e1=Ke(rf);function rf(e,n){return e&&e.length&&n&&n.length?Mo(e,n):e}function t1(e,n,a){return e&&e.length&&n&&n.length?Mo(e,n,be(a,2)):e}function r1(e,n,a){return e&&e.length&&n&&n.length?Mo(e,n,r,a):e}var n1=hn(function(e,n){var a=e==null?0:e.length,u=To(e,n);return gh(e,bt(n,function(m){return fn(m,a)?+m:m}).sort(Oh)),u});function i1(e,n){var a=[];if(!(e&&e.length))return a;var u=-1,m=[],A=e.length;for(n=be(n,3);++u<A;){var F=e[u];n(F,u,e)&&(a.push(F),m.push(u))}return gh(e,m),a}function sc(e){return e==null?e:Xp.call(e)}function s1(e,n,a){var u=e==null?0:e.length;return u?(a&&typeof a!="number"&&sr(e,n,a)?(n=0,a=u):(n=n==null?0:Le(n),a=a===r?u:Le(a)),Ur(e,n,a)):[]}function a1(e,n){return ca(e,n)}function o1(e,n,a){return zo(e,n,be(a,2))}function c1(e,n){var a=e==null?0:e.length;if(a){var u=ca(e,n);if(u<a&&Kr(e[u],n))return u}return-1}function u1(e,n){return ca(e,n,!0)}function h1(e,n,a){return zo(e,n,be(a,2),!0)}function f1(e,n){var a=e==null?0:e.length;if(a){var u=ca(e,n,!0)-1;if(Kr(e[u],n))return u}return-1}function l1(e){return e&&e.length?yh(e):[]}function d1(e,n){return e&&e.length?yh(e,be(n,2)):[]}function p1(e){var n=e==null?0:e.length;return n?Ur(e,1,n):[]}function g1(e,n,a){return e&&e.length?(n=a||n===r?1:Le(n),Ur(e,0,n<0?0:n)):[]}function _1(e,n,a){var u=e==null?0:e.length;return u?(n=a||n===r?1:Le(n),n=u-n,Ur(e,n<0?0:n,u)):[]}function y1(e,n){return e&&e.length?ua(e,be(n,3),!1,!0):[]}function v1(e,n){return e&&e.length?ua(e,be(n,3)):[]}var m1=Ke(function(e){return Dn(Yt(e,1,Nt,!0))}),b1=Ke(function(e){var n=Fr(e);return Nt(n)&&(n=r),Dn(Yt(e,1,Nt,!0),be(n,2))}),w1=Ke(function(e){var n=Fr(e);return n=typeof n=="function"?n:r,Dn(Yt(e,1,Nt,!0),r,n)});function E1(e){return e&&e.length?Dn(e):[]}function D1(e,n){return e&&e.length?Dn(e,be(n,2)):[]}function S1(e,n){return n=typeof n=="function"?n:r,e&&e.length?Dn(e,r,n):[]}function ac(e){if(!(e&&e.length))return[];var n=0;return e=vn(e,function(a){if(Nt(a))return n=Bt(a.length,n),!0}),Do(n,function(a){return bt(e,bo(a))})}function nf(e,n){if(!(e&&e.length))return[];var a=ac(e);return n==null?a:bt(a,function(u){return Kt(n,r,u)})}var O1=Ke(function(e,n){return Nt(e)?Gi(e,n):[]}),I1=Ke(function(e){return Ko(vn(e,Nt))}),x1=Ke(function(e){var n=Fr(e);return Nt(n)&&(n=r),Ko(vn(e,Nt),be(n,2))}),A1=Ke(function(e){var n=Fr(e);return n=typeof n=="function"?n:r,Ko(vn(e,Nt),r,n)}),C1=Ke(ac);function P1(e,n){return wh(e||[],n||[],ki)}function T1(e,n){return wh(e||[],n||[],Ji)}var N1=Ke(function(e){var n=e.length,a=n>1?e[n-1]:r;return a=typeof a=="function"?(e.pop(),a):r,nf(e,a)});function sf(e){var n=x(e);return n.__chain__=!0,n}function R1(e,n){return n(e),e}function va(e,n){return n(e)}var U1=hn(function(e){var n=e.length,a=n?e[0]:0,u=this.__wrapped__,m=function(A){return To(A,e)};return n>1||this.__actions__.length||!(u instanceof Ye)||!fn(a)?this.thru(m):(u=u.slice(a,+a+(n?1:0)),u.__actions__.push({func:va,args:[m],thisArg:r}),new Nr(u,this.__chain__).thru(function(A){return n&&!A.length&&A.push(r),A}))});function F1(){return sf(this)}function j1(){return new Nr(this.value(),this.__chain__)}function $1(){this.__values__===r&&(this.__values__=mf(this.value()));var e=this.__index__>=this.__values__.length,n=e?r:this.__values__[this.__index__++];return{done:e,value:n}}function L1(){return this}function M1(e){for(var n,a=this;a instanceof na;){var u=Xh(a);u.__index__=0,u.__values__=r,n?m.__wrapped__=u:n=u;var m=u;a=a.__wrapped__}return m.__wrapped__=e,n}function H1(){var e=this.__wrapped__;if(e instanceof Ye){var n=e;return this.__actions__.length&&(n=new Ye(this)),n=n.reverse(),n.__actions__.push({func:va,args:[sc],thisArg:r}),new Nr(n,this.__chain__)}return this.thru(sc)}function q1(){return bh(this.__wrapped__,this.__actions__)}var z1=ha(function(e,n,a){it.call(e,a)?++e[a]:cn(e,a,1)});function B1(e,n,a){var u=Ne(e)?Ru:Rg;return a&&sr(e,n,a)&&(n=r),u(e,be(n,3))}function K1(e,n){var a=Ne(e)?vn:nh;return a(e,be(n,3))}var V1=Th(Qh),k1=Th(Zh);function G1(e,n){return Yt(ma(e,n),1)}function W1(e,n){return Yt(ma(e,n),z)}function Y1(e,n,a){return a=a===r?1:Le(a),Yt(ma(e,n),a)}function af(e,n){var a=Ne(e)?Pr:En;return a(e,be(n,3))}function of(e,n){var a=Ne(e)?pp:rh;return a(e,be(n,3))}var J1=ha(function(e,n,a){it.call(e,a)?e[a].push(n):cn(e,a,[n])});function X1(e,n,a,u){e=gr(e)?e:Oi(e),a=a&&!u?Le(a):0;var m=e.length;return a<0&&(a=Bt(m+a,0)),Sa(e)?a<=m&&e.indexOf(n,a)>-1:!!m&&di(e,n,a)>-1}var Q1=Ke(function(e,n,a){var u=-1,m=typeof n=="function",A=gr(e)?ee(e.length):[];return En(e,function(F){A[++u]=m?Kt(n,F,a):Wi(F,n,a)}),A}),Z1=ha(function(e,n,a){cn(e,a,n)});function ma(e,n){var a=Ne(e)?bt:uh;return a(e,be(n,3))}function e_(e,n,a,u){return e==null?[]:(Ne(n)||(n=n==null?[]:[n]),a=u?r:a,Ne(a)||(a=a==null?[]:[a]),dh(e,n,a))}var t_=ha(function(e,n,a){e[a?0:1].push(n)},function(){return[[],[]]});function r_(e,n,a){var u=Ne(e)?vo:$u,m=arguments.length<3;return u(e,be(n,4),a,m,En)}function n_(e,n,a){var u=Ne(e)?gp:$u,m=arguments.length<3;return u(e,be(n,4),a,m,rh)}function i_(e,n){var a=Ne(e)?vn:nh;return a(e,Ea(be(n,3)))}function s_(e){var n=Ne(e)?Qu:Xg;return n(e)}function a_(e,n,a){(a?sr(e,n,a):n===r)?n=1:n=Le(n);var u=Ne(e)?Ag:Qg;return u(e,n)}function o_(e){var n=Ne(e)?Cg:e0;return n(e)}function c_(e){if(e==null)return 0;if(gr(e))return Sa(e)?gi(e):e.length;var n=Zt(e);return n==Oe||n==Ie?e.size:$o(e).length}function u_(e,n,a){var u=Ne(e)?mo:t0;return a&&sr(e,n,a)&&(n=r),u(e,be(n,3))}var h_=Ke(function(e,n){if(e==null)return[];var a=n.length;return a>1&&sr(e,n[0],n[1])?n=[]:a>2&&sr(n[0],n[1],n[2])&&(n=[n[0]]),dh(e,Yt(n,1),[])}),ba=Kp||function(){return Xe.Date.now()};function f_(e,n){if(typeof n!="function")throw new Tr(O);return e=Le(e),function(){if(--e<1)return n.apply(this,arguments)}}function cf(e,n,a){return n=a?r:n,n=e&&n==null?e.length:n,un(e,c,r,r,r,r,n)}function uf(e,n){var a;if(typeof n!="function")throw new Tr(O);return e=Le(e),function(){return--e>0&&(a=n.apply(this,arguments)),e<=1&&(n=r),a}}var oc=Ke(function(e,n,a){var u=q;if(a.length){var m=bn(a,Di(oc));u|=D}return un(e,u,n,a,m)}),hf=Ke(function(e,n,a){var u=q|re;if(a.length){var m=bn(a,Di(hf));u|=D}return un(n,u,e,a,m)});function ff(e,n,a){n=a?r:n;var u=un(e,S,r,r,r,r,r,n);return u.placeholder=ff.placeholder,u}function lf(e,n,a){n=a?r:n;var u=un(e,b,r,r,r,r,r,n);return u.placeholder=lf.placeholder,u}function df(e,n,a){var u,m,A,F,H,G,se=0,oe=!1,ue=!1,le=!0;if(typeof e!="function")throw new Tr(O);n=jr(n)||0,Et(a)&&(oe=!!a.leading,ue="maxWait"in a,A=ue?Bt(jr(a.maxWait)||0,n):A,le="trailing"in a?!!a.trailing:le);function ve(Rt){var Vr=u,pn=m;return u=m=r,se=Rt,F=e.apply(pn,Vr),F}function we(Rt){return se=Rt,H=Zi(Ge,n),oe?ve(Rt):F}function qe(Rt){var Vr=Rt-G,pn=Rt-se,Nf=n-Vr;return ue?Qt(Nf,A-pn):Nf}function Ee(Rt){var Vr=Rt-G,pn=Rt-se;return G===r||Vr>=n||Vr<0||ue&&pn>=A}function Ge(){var Rt=ba();if(Ee(Rt))return Qe(Rt);H=Zi(Ge,qe(Rt))}function Qe(Rt){return H=r,le&&u?ve(Rt):(u=m=r,F)}function Sr(){H!==r&&Eh(H),se=0,u=G=m=H=r}function ar(){return H===r?F:Qe(ba())}function Or(){var Rt=ba(),Vr=Ee(Rt);if(u=arguments,m=this,G=Rt,Vr){if(H===r)return we(G);if(ue)return Eh(H),H=Zi(Ge,n),ve(G)}return H===r&&(H=Zi(Ge,n)),F}return Or.cancel=Sr,Or.flush=ar,Or}var l_=Ke(function(e,n){return th(e,1,n)}),d_=Ke(function(e,n,a){return th(e,jr(n)||0,a)});function p_(e){return un(e,Y)}function wa(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new Tr(O);var a=function(){var u=arguments,m=n?n.apply(this,u):u[0],A=a.cache;if(A.has(m))return A.get(m);var F=e.apply(this,u);return a.cache=A.set(m,F)||A,F};return a.cache=new(wa.Cache||on),a}wa.Cache=on;function Ea(e){if(typeof e!="function")throw new Tr(O);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}function g_(e){return uf(2,e)}var __=r0(function(e,n){n=n.length==1&&Ne(n[0])?bt(n[0],wr(be())):bt(Yt(n,1),wr(be()));var a=n.length;return Ke(function(u){for(var m=-1,A=Qt(u.length,a);++m<A;)u[m]=n[m].call(this,u[m]);return Kt(e,this,u)})}),cc=Ke(function(e,n){var a=bn(n,Di(cc));return un(e,D,r,n,a)}),pf=Ke(function(e,n){var a=bn(n,Di(pf));return un(e,g,r,n,a)}),y_=hn(function(e,n){return un(e,l,r,r,r,n)});function v_(e,n){if(typeof e!="function")throw new Tr(O);return n=n===r?n:Le(n),Ke(e,n)}function m_(e,n){if(typeof e!="function")throw new Tr(O);return n=n==null?0:Bt(Le(n),0),Ke(function(a){var u=a[n],m=On(a,0,n);return u&&mn(m,u),Kt(e,this,m)})}function b_(e,n,a){var u=!0,m=!0;if(typeof e!="function")throw new Tr(O);return Et(a)&&(u="leading"in a?!!a.leading:u,m="trailing"in a?!!a.trailing:m),df(e,n,{leading:u,maxWait:n,trailing:m})}function w_(e){return cf(e,1)}function E_(e,n){return cc(ko(n),e)}function D_(){if(!arguments.length)return[];var e=arguments[0];return Ne(e)?e:[e]}function S_(e){return Rr(e,M)}function O_(e,n){return n=typeof n=="function"?n:r,Rr(e,M,n)}function I_(e){return Rr(e,U|M)}function x_(e,n){return n=typeof n=="function"?n:r,Rr(e,U|M,n)}function A_(e,n){return n==null||eh(e,n,Vt(n))}function Kr(e,n){return e===n||e!==e&&n!==n}var C_=pa(Uo),P_=pa(function(e,n){return e>=n}),kn=ah(function(){return arguments}())?ah:function(e){return Ct(e)&&it.call(e,"callee")&&!ku.call(e,"callee")},Ne=ee.isArray,T_=nr?wr(nr):Mg;function gr(e){return e!=null&&Da(e.length)&&!ln(e)}function Nt(e){return Ct(e)&&gr(e)}function N_(e){return e===!0||e===!1||Ct(e)&&ir(e)==X}var In=kp||mc,R_=qr?wr(qr):Hg;function U_(e){return Ct(e)&&e.nodeType===1&&!es(e)}function F_(e){if(e==null)return!0;if(gr(e)&&(Ne(e)||typeof e=="string"||typeof e.splice=="function"||In(e)||Si(e)||kn(e)))return!e.length;var n=Zt(e);if(n==Oe||n==Ie)return!e.size;if(Qi(e))return!$o(e).length;for(var a in e)if(it.call(e,a))return!1;return!0}function j_(e,n){return Yi(e,n)}function $_(e,n,a){a=typeof a=="function"?a:r;var u=a?a(e,n):r;return u===r?Yi(e,n,r,a):!!u}function uc(e){if(!Ct(e))return!1;var n=ir(e);return n==j||n==f||typeof e.message=="string"&&typeof e.name=="string"&&!es(e)}function L_(e){return typeof e=="number"&&Wu(e)}function ln(e){if(!Et(e))return!1;var n=ir(e);return n==he||n==pe||n==Q||n==yt}function gf(e){return typeof e=="number"&&e==Le(e)}function Da(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Z}function Et(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}function Ct(e){return e!=null&&typeof e=="object"}var _f=Cr?wr(Cr):zg;function M_(e,n){return e===n||jo(e,n,Zo(n))}function H_(e,n,a){return a=typeof a=="function"?a:r,jo(e,n,Zo(n),a)}function q_(e){return yf(e)&&e!=+e}function z_(e){if(O0(e))throw new Pe(d);return oh(e)}function B_(e){return e===null}function K_(e){return e==null}function yf(e){return typeof e=="number"||Ct(e)&&ir(e)==ze}function es(e){if(!Ct(e)||ir(e)!=$e)return!1;var n=Js(e);if(n===null)return!0;var a=it.call(n,"constructor")&&n.constructor;return typeof a=="function"&&a instanceof a&&ks.call(a)==Hp}var hc=Yr?wr(Yr):Bg;function V_(e){return gf(e)&&e>=-Z&&e<=Z}var vf=Mi?wr(Mi):Kg;function Sa(e){return typeof e=="string"||!Ne(e)&&Ct(e)&&ir(e)==Re}function Dr(e){return typeof e=="symbol"||Ct(e)&&ir(e)==Ue}var Si=Ln?wr(Ln):Vg;function k_(e){return e===r}function G_(e){return Ct(e)&&Zt(e)==Ae}function W_(e){return Ct(e)&&ir(e)==Fe}var Y_=pa(Lo),J_=pa(function(e,n){return e<=n});function mf(e){if(!e)return[];if(gr(e))return Sa(e)?zr(e):pr(e);if(qi&&e[qi])return Ap(e[qi]());var n=Zt(e),a=n==Oe?Oo:n==Ie?Bs:Oi;return a(e)}function dn(e){if(!e)return e===0?e:0;if(e=jr(e),e===z||e===-z){var n=e<0?-1:1;return n*R}return e===e?e:0}function Le(e){var n=dn(e),a=n%1;return n===n?a?n-a:n:0}function bf(e){return e?zn(Le(e),0,te):0}function jr(e){if(typeof e=="number")return e;if(Dr(e))return J;if(Et(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=Et(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=Lu(e);var a=Za.test(e);return a||to.test(e)?Te(e.slice(2),a?2:8):Qa.test(e)?J:+e}function wf(e){return Xr(e,_r(e))}function X_(e){return e?zn(Le(e),-Z,Z):e===0?e:0}function nt(e){return e==null?"":Er(e)}var Q_=wi(function(e,n){if(Qi(n)||gr(n)){Xr(n,Vt(n),e);return}for(var a in n)it.call(n,a)&&ki(e,a,n[a])}),Ef=wi(function(e,n){Xr(n,_r(n),e)}),Oa=wi(function(e,n,a,u){Xr(n,_r(n),e,u)}),Z_=wi(function(e,n,a,u){Xr(n,Vt(n),e,u)}),ey=hn(To);function ty(e,n){var a=bi(e);return n==null?a:Zu(a,n)}var ry=Ke(function(e,n){e=ut(e);var a=-1,u=n.length,m=u>2?n[2]:r;for(m&&sr(n[0],n[1],m)&&(u=1);++a<u;)for(var A=n[a],F=_r(A),H=-1,G=F.length;++H<G;){var se=F[H],oe=e[se];(oe===r||Kr(oe,yi[se])&&!it.call(e,se))&&(e[se]=A[se])}return e}),ny=Ke(function(e){return e.push(r,Lh),Kt(Df,r,e)});function iy(e,n){return Uu(e,be(n,3),Jr)}function sy(e,n){return Uu(e,be(n,3),Ro)}function ay(e,n){return e==null?e:No(e,be(n,3),_r)}function oy(e,n){return e==null?e:ih(e,be(n,3),_r)}function cy(e,n){return e&&Jr(e,be(n,3))}function uy(e,n){return e&&Ro(e,be(n,3))}function hy(e){return e==null?[]:aa(e,Vt(e))}function fy(e){return e==null?[]:aa(e,_r(e))}function fc(e,n,a){var u=e==null?r:Bn(e,n);return u===r?a:u}function ly(e,n){return e!=null&&qh(e,n,Fg)}function lc(e,n){return e!=null&&qh(e,n,jg)}var dy=Rh(function(e,n,a){n!=null&&typeof n.toString!="function"&&(n=Gs.call(n)),e[n]=a},pc(yr)),py=Rh(function(e,n,a){n!=null&&typeof n.toString!="function"&&(n=Gs.call(n)),it.call(e,n)?e[n].push(a):e[n]=[a]},be),gy=Ke(Wi);function Vt(e){return gr(e)?Xu(e):$o(e)}function _r(e){return gr(e)?Xu(e,!0):kg(e)}function _y(e,n){var a={};return n=be(n,3),Jr(e,function(u,m,A){cn(a,n(u,m,A),u)}),a}function yy(e,n){var a={};return n=be(n,3),Jr(e,function(u,m,A){cn(a,m,n(u,m,A))}),a}var vy=wi(function(e,n,a){oa(e,n,a)}),Df=wi(function(e,n,a,u){oa(e,n,a,u)}),my=hn(function(e,n){var a={};if(e==null)return a;var u=!1;n=bt(n,function(A){return A=Sn(A,e),u||(u=A.length>1),A}),Xr(e,Xo(e),a),u&&(a=Rr(a,U|K|M,d0));for(var m=n.length;m--;)Bo(a,n[m]);return a});function by(e,n){return Sf(e,Ea(be(n)))}var wy=hn(function(e,n){return e==null?{}:Wg(e,n)});function Sf(e,n){if(e==null)return{};var a=bt(Xo(e),function(u){return[u]});return n=be(n),ph(e,a,function(u,m){return n(u,m[0])})}function Ey(e,n,a){n=Sn(n,e);var u=-1,m=n.length;for(m||(m=1,e=r);++u<m;){var A=e==null?r:e[Qr(n[u])];A===r&&(u=m,A=a),e=ln(A)?A.call(e):A}return e}function Dy(e,n,a){return e==null?e:Ji(e,n,a)}function Sy(e,n,a,u){return u=typeof u=="function"?u:r,e==null?e:Ji(e,n,a,u)}var Of=jh(Vt),If=jh(_r);function Oy(e,n,a){var u=Ne(e),m=u||In(e)||Si(e);if(n=be(n,4),a==null){var A=e&&e.constructor;m?a=u?new A:[]:Et(e)?a=ln(A)?bi(Js(e)):{}:a={}}return(m?Pr:Jr)(e,function(F,H,G){return n(a,F,H,G)}),a}function Iy(e,n){return e==null?!0:Bo(e,n)}function xy(e,n,a){return e==null?e:mh(e,n,ko(a))}function Ay(e,n,a,u){return u=typeof u=="function"?u:r,e==null?e:mh(e,n,ko(a),u)}function Oi(e){return e==null?[]:So(e,Vt(e))}function Cy(e){return e==null?[]:So(e,_r(e))}function Py(e,n,a){return a===r&&(a=n,n=r),a!==r&&(a=jr(a),a=a===a?a:0),n!==r&&(n=jr(n),n=n===n?n:0),zn(jr(e),n,a)}function Ty(e,n,a){return n=dn(n),a===r?(a=n,n=0):a=dn(a),e=jr(e),$g(e,n,a)}function Ny(e,n,a){if(a&&typeof a!="boolean"&&sr(e,n,a)&&(n=a=r),a===r&&(typeof n=="boolean"?(a=n,n=r):typeof e=="boolean"&&(a=e,e=r)),e===r&&n===r?(e=0,n=1):(e=dn(e),n===r?(n=e,e=0):n=dn(n)),e>n){var u=e;e=n,n=u}if(a||e%1||n%1){var m=Yu();return Qt(e+m*(n-e+ot("1e-"+((m+"").length-1))),n)}return Ho(e,n)}var Ry=Ei(function(e,n,a){return n=n.toLowerCase(),e+(a?xf(n):n)});function xf(e){return dc(nt(e).toLowerCase())}function Af(e){return e=nt(e),e&&e.replace(nn,Dp).replace(go,"")}function Uy(e,n,a){e=nt(e),n=Er(n);var u=e.length;a=a===r?u:zn(Le(a),0,u);var m=a;return a-=n.length,a>=0&&e.slice(a,m)==n}function Fy(e){return e=nt(e),e&&vt.test(e)?e.replace(Rn,Sp):e}function jy(e){return e=nt(e),e&&jt.test(e)?e.replace(It,"\\$&"):e}var $y=Ei(function(e,n,a){return e+(a?"-":"")+n.toLowerCase()}),Ly=Ei(function(e,n,a){return e+(a?" ":"")+n.toLowerCase()}),My=Ph("toLowerCase");function Hy(e,n,a){e=nt(e),n=Le(n);var u=n?gi(e):0;if(!n||u>=n)return e;var m=(n-u)/2;return da(ea(m),a)+e+da(Zs(m),a)}function qy(e,n,a){e=nt(e),n=Le(n);var u=n?gi(e):0;return n&&u<n?e+da(n-u,a):e}function zy(e,n,a){e=nt(e),n=Le(n);var u=n?gi(e):0;return n&&u<n?da(n-u,a)+e:e}function By(e,n,a){return a||n==null?n=0:n&&(n=+n),Jp(nt(e).replace(xt,""),n||0)}function Ky(e,n,a){return(a?sr(e,n,a):n===r)?n=1:n=Le(n),qo(nt(e),n)}function Vy(){var e=arguments,n=nt(e[0]);return e.length<3?n:n.replace(e[1],e[2])}var ky=Ei(function(e,n,a){return e+(a?"_":"")+n.toLowerCase()});function Gy(e,n,a){return a&&typeof a!="number"&&sr(e,n,a)&&(n=a=r),a=a===r?te:a>>>0,a?(e=nt(e),e&&(typeof n=="string"||n!=null&&!hc(n))&&(n=Er(n),!n&&pi(e))?On(zr(e),0,a):e.split(n,a)):[]}var Wy=Ei(function(e,n,a){return e+(a?" ":"")+dc(n)});function Yy(e,n,a){return e=nt(e),a=a==null?0:zn(Le(a),0,e.length),n=Er(n),e.slice(a,a+n.length)==n}function Jy(e,n,a){var u=x.templateSettings;a&&sr(e,n,a)&&(n=r),e=nt(e),n=Oa({},n,u,$h);var m=Oa({},n.imports,u.imports,$h),A=Vt(m),F=So(m,A),H,G,se=0,oe=n.interpolate||ai,ue="__p += '",le=Io((n.escape||ai).source+"|"+oe.source+"|"+(oe===wt?Xa:ai).source+"|"+(n.evaluate||ai).source+"|$","g"),ve="//# sourceURL="+(it.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++_o+"]")+`
`;e.replace(le,function(Ee,Ge,Qe,Sr,ar,Or){return Qe||(Qe=Sr),ue+=e.slice(se,Or).replace(no,Op),Ge&&(H=!0,ue+=`' +
__e(`+Ge+`) +
'`),ar&&(G=!0,ue+=`';
`+ar+`;
__p += '`),Qe&&(ue+=`' +
((__t = (`+Qe+`)) == null ? '' : __t) +
'`),se=Or+Ee.length,Ee}),ue+=`';
`;var we=it.call(n,"variable")&&n.variable;if(!we)ue=`with (obj) {
`+ue+`
}
`;else if(Ya.test(we))throw new Pe(y);ue=(G?ue.replace(Gr,""):ue).replace(rr,"$1").replace(rn,"$1;"),ue="function("+(we||"obj")+`) {
`+(we?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(H?", __e = _.escape":"")+(G?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ue+`return __p
}`;var qe=Pf(function(){return rt(A,ve+"return "+ue).apply(r,F)});if(qe.source=ue,uc(qe))throw qe;return qe}function Xy(e){return nt(e).toLowerCase()}function Qy(e){return nt(e).toUpperCase()}function Zy(e,n,a){if(e=nt(e),e&&(a||n===r))return Lu(e);if(!e||!(n=Er(n)))return e;var u=zr(e),m=zr(n),A=Mu(u,m),F=Hu(u,m)+1;return On(u,A,F).join("")}function ev(e,n,a){if(e=nt(e),e&&(a||n===r))return e.slice(0,zu(e)+1);if(!e||!(n=Er(n)))return e;var u=zr(e),m=Hu(u,zr(n))+1;return On(u,0,m).join("")}function tv(e,n,a){if(e=nt(e),e&&(a||n===r))return e.replace(xt,"");if(!e||!(n=Er(n)))return e;var u=zr(e),m=Mu(u,zr(n));return On(u,m).join("")}function rv(e,n){var a=h,u=_;if(Et(n)){var m="separator"in n?n.separator:m;a="length"in n?Le(n.length):a,u="omission"in n?Er(n.omission):u}e=nt(e);var A=e.length;if(pi(e)){var F=zr(e);A=F.length}if(a>=A)return e;var H=a-gi(u);if(H<1)return u;var G=F?On(F,0,H).join(""):e.slice(0,H);if(m===r)return G+u;if(F&&(H+=G.length-H),hc(m)){if(e.slice(H).search(m)){var se,oe=G;for(m.global||(m=Io(m.source,nt(Ar.exec(m))+"g")),m.lastIndex=0;se=m.exec(oe);)var ue=se.index;G=G.slice(0,ue===r?H:ue)}}else if(e.indexOf(Er(m),H)!=H){var le=G.lastIndexOf(m);le>-1&&(G=G.slice(0,le))}return G+u}function nv(e){return e=nt(e),e&&Dt.test(e)?e.replace(_n,Np):e}var iv=Ei(function(e,n,a){return e+(a?" ":"")+n.toUpperCase()}),dc=Ph("toUpperCase");function Cf(e,n,a){return e=nt(e),n=a?r:n,n===r?xp(e)?Fp(e):vp(e):e.match(n)||[]}var Pf=Ke(function(e,n){try{return Kt(e,r,n)}catch(a){return uc(a)?a:new Pe(a)}}),sv=hn(function(e,n){return Pr(n,function(a){a=Qr(a),cn(e,a,oc(e[a],e))}),e});function av(e){var n=e==null?0:e.length,a=be();return e=n?bt(e,function(u){if(typeof u[1]!="function")throw new Tr(O);return[a(u[0]),u[1]]}):[],Ke(function(u){for(var m=-1;++m<n;){var A=e[m];if(Kt(A[0],this,u))return Kt(A[1],this,u)}})}function ov(e){return Ng(Rr(e,U))}function pc(e){return function(){return e}}function cv(e,n){return e==null||e!==e?n:e}var uv=Nh(),hv=Nh(!0);function yr(e){return e}function gc(e){return ch(typeof e=="function"?e:Rr(e,U))}function fv(e){return hh(Rr(e,U))}function lv(e,n){return fh(e,Rr(n,U))}var dv=Ke(function(e,n){return function(a){return Wi(a,e,n)}}),pv=Ke(function(e,n){return function(a){return Wi(e,a,n)}});function _c(e,n,a){var u=Vt(n),m=aa(n,u);a==null&&!(Et(n)&&(m.length||!u.length))&&(a=n,n=e,e=this,m=aa(n,Vt(n)));var A=!(Et(a)&&"chain"in a)||!!a.chain,F=ln(e);return Pr(m,function(H){var G=n[H];e[H]=G,F&&(e.prototype[H]=function(){var se=this.__chain__;if(A||se){var oe=e(this.__wrapped__),ue=oe.__actions__=pr(this.__actions__);return ue.push({func:G,args:arguments,thisArg:e}),oe.__chain__=se,oe}return G.apply(e,mn([this.value()],arguments))})}),e}function gv(){return Xe._===this&&(Xe._=qp),this}function yc(){}function _v(e){return e=Le(e),Ke(function(n){return lh(n,e)})}var yv=Wo(bt),vv=Wo(Ru),mv=Wo(mo);function Tf(e){return tc(e)?bo(Qr(e)):Yg(e)}function bv(e){return function(n){return e==null?r:Bn(e,n)}}var wv=Uh(),Ev=Uh(!0);function vc(){return[]}function mc(){return!1}function Dv(){return{}}function Sv(){return""}function Ov(){return!0}function Iv(e,n){if(e=Le(e),e<1||e>Z)return[];var a=te,u=Qt(e,te);n=be(n),e-=te;for(var m=Do(u,n);++a<e;)n(a);return m}function xv(e){return Ne(e)?bt(e,Qr):Dr(e)?[e]:pr(Jh(nt(e)))}function Av(e){var n=++Mp;return nt(e)+n}var Cv=la(function(e,n){return e+n},0),Pv=Yo("ceil"),Tv=la(function(e,n){return e/n},1),Nv=Yo("floor");function Rv(e){return e&&e.length?sa(e,yr,Uo):r}function Uv(e,n){return e&&e.length?sa(e,be(n,2),Uo):r}function Fv(e){return ju(e,yr)}function jv(e,n){return ju(e,be(n,2))}function $v(e){return e&&e.length?sa(e,yr,Lo):r}function Lv(e,n){return e&&e.length?sa(e,be(n,2),Lo):r}var Mv=la(function(e,n){return e*n},1),Hv=Yo("round"),qv=la(function(e,n){return e-n},0);function zv(e){return e&&e.length?Eo(e,yr):0}function Bv(e,n){return e&&e.length?Eo(e,be(n,2)):0}return x.after=f_,x.ary=cf,x.assign=Q_,x.assignIn=Ef,x.assignInWith=Oa,x.assignWith=Z_,x.at=ey,x.before=uf,x.bind=oc,x.bindAll=sv,x.bindKey=hf,x.castArray=D_,x.chain=sf,x.chunk=N0,x.compact=R0,x.concat=U0,x.cond=av,x.conforms=ov,x.constant=pc,x.countBy=z1,x.create=ty,x.curry=ff,x.curryRight=lf,x.debounce=df,x.defaults=ry,x.defaultsDeep=ny,x.defer=l_,x.delay=d_,x.difference=F0,x.differenceBy=j0,x.differenceWith=$0,x.drop=L0,x.dropRight=M0,x.dropRightWhile=H0,x.dropWhile=q0,x.fill=z0,x.filter=K1,x.flatMap=G1,x.flatMapDeep=W1,x.flatMapDepth=Y1,x.flatten=ef,x.flattenDeep=B0,x.flattenDepth=K0,x.flip=p_,x.flow=uv,x.flowRight=hv,x.fromPairs=V0,x.functions=hy,x.functionsIn=fy,x.groupBy=J1,x.initial=G0,x.intersection=W0,x.intersectionBy=Y0,x.intersectionWith=J0,x.invert=dy,x.invertBy=py,x.invokeMap=Q1,x.iteratee=gc,x.keyBy=Z1,x.keys=Vt,x.keysIn=_r,x.map=ma,x.mapKeys=_y,x.mapValues=yy,x.matches=fv,x.matchesProperty=lv,x.memoize=wa,x.merge=vy,x.mergeWith=Df,x.method=dv,x.methodOf=pv,x.mixin=_c,x.negate=Ea,x.nthArg=_v,x.omit=my,x.omitBy=by,x.once=g_,x.orderBy=e_,x.over=yv,x.overArgs=__,x.overEvery=vv,x.overSome=mv,x.partial=cc,x.partialRight=pf,x.partition=t_,x.pick=wy,x.pickBy=Sf,x.property=Tf,x.propertyOf=bv,x.pull=e1,x.pullAll=rf,x.pullAllBy=t1,x.pullAllWith=r1,x.pullAt=n1,x.range=wv,x.rangeRight=Ev,x.rearg=y_,x.reject=i_,x.remove=i1,x.rest=v_,x.reverse=sc,x.sampleSize=a_,x.set=Dy,x.setWith=Sy,x.shuffle=o_,x.slice=s1,x.sortBy=h_,x.sortedUniq=l1,x.sortedUniqBy=d1,x.split=Gy,x.spread=m_,x.tail=p1,x.take=g1,x.takeRight=_1,x.takeRightWhile=y1,x.takeWhile=v1,x.tap=R1,x.throttle=b_,x.thru=va,x.toArray=mf,x.toPairs=Of,x.toPairsIn=If,x.toPath=xv,x.toPlainObject=wf,x.transform=Oy,x.unary=w_,x.union=m1,x.unionBy=b1,x.unionWith=w1,x.uniq=E1,x.uniqBy=D1,x.uniqWith=S1,x.unset=Iy,x.unzip=ac,x.unzipWith=nf,x.update=xy,x.updateWith=Ay,x.values=Oi,x.valuesIn=Cy,x.without=O1,x.words=Cf,x.wrap=E_,x.xor=I1,x.xorBy=x1,x.xorWith=A1,x.zip=C1,x.zipObject=P1,x.zipObjectDeep=T1,x.zipWith=N1,x.entries=Of,x.entriesIn=If,x.extend=Ef,x.extendWith=Oa,_c(x,x),x.add=Cv,x.attempt=Pf,x.camelCase=Ry,x.capitalize=xf,x.ceil=Pv,x.clamp=Py,x.clone=S_,x.cloneDeep=I_,x.cloneDeepWith=x_,x.cloneWith=O_,x.conformsTo=A_,x.deburr=Af,x.defaultTo=cv,x.divide=Tv,x.endsWith=Uy,x.eq=Kr,x.escape=Fy,x.escapeRegExp=jy,x.every=B1,x.find=V1,x.findIndex=Qh,x.findKey=iy,x.findLast=k1,x.findLastIndex=Zh,x.findLastKey=sy,x.floor=Nv,x.forEach=af,x.forEachRight=of,x.forIn=ay,x.forInRight=oy,x.forOwn=cy,x.forOwnRight=uy,x.get=fc,x.gt=C_,x.gte=P_,x.has=ly,x.hasIn=lc,x.head=tf,x.identity=yr,x.includes=X1,x.indexOf=k0,x.inRange=Ty,x.invoke=gy,x.isArguments=kn,x.isArray=Ne,x.isArrayBuffer=T_,x.isArrayLike=gr,x.isArrayLikeObject=Nt,x.isBoolean=N_,x.isBuffer=In,x.isDate=R_,x.isElement=U_,x.isEmpty=F_,x.isEqual=j_,x.isEqualWith=$_,x.isError=uc,x.isFinite=L_,x.isFunction=ln,x.isInteger=gf,x.isLength=Da,x.isMap=_f,x.isMatch=M_,x.isMatchWith=H_,x.isNaN=q_,x.isNative=z_,x.isNil=K_,x.isNull=B_,x.isNumber=yf,x.isObject=Et,x.isObjectLike=Ct,x.isPlainObject=es,x.isRegExp=hc,x.isSafeInteger=V_,x.isSet=vf,x.isString=Sa,x.isSymbol=Dr,x.isTypedArray=Si,x.isUndefined=k_,x.isWeakMap=G_,x.isWeakSet=W_,x.join=X0,x.kebabCase=$y,x.last=Fr,x.lastIndexOf=Q0,x.lowerCase=Ly,x.lowerFirst=My,x.lt=Y_,x.lte=J_,x.max=Rv,x.maxBy=Uv,x.mean=Fv,x.meanBy=jv,x.min=$v,x.minBy=Lv,x.stubArray=vc,x.stubFalse=mc,x.stubObject=Dv,x.stubString=Sv,x.stubTrue=Ov,x.multiply=Mv,x.nth=Z0,x.noConflict=gv,x.noop=yc,x.now=ba,x.pad=Hy,x.padEnd=qy,x.padStart=zy,x.parseInt=By,x.random=Ny,x.reduce=r_,x.reduceRight=n_,x.repeat=Ky,x.replace=Vy,x.result=Ey,x.round=Hv,x.runInContext=k,x.sample=s_,x.size=c_,x.snakeCase=ky,x.some=u_,x.sortedIndex=a1,x.sortedIndexBy=o1,x.sortedIndexOf=c1,x.sortedLastIndex=u1,x.sortedLastIndexBy=h1,x.sortedLastIndexOf=f1,x.startCase=Wy,x.startsWith=Yy,x.subtract=qv,x.sum=zv,x.sumBy=Bv,x.template=Jy,x.times=Iv,x.toFinite=dn,x.toInteger=Le,x.toLength=bf,x.toLower=Xy,x.toNumber=jr,x.toSafeInteger=X_,x.toString=nt,x.toUpper=Qy,x.trim=Zy,x.trimEnd=ev,x.trimStart=tv,x.truncate=rv,x.unescape=nv,x.uniqueId=Av,x.upperCase=iv,x.upperFirst=dc,x.each=af,x.eachRight=of,x.first=tf,_c(x,function(){var e={};return Jr(x,function(n,a){it.call(x.prototype,a)||(e[a]=n)}),e}(),{chain:!1}),x.VERSION=s,Pr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){x[e].placeholder=x}),Pr(["drop","take"],function(e,n){Ye.prototype[e]=function(a){a=a===r?1:Bt(Le(a),0);var u=this.__filtered__&&!n?new Ye(this):this.clone();return u.__filtered__?u.__takeCount__=Qt(a,u.__takeCount__):u.__views__.push({size:Qt(a,te),type:e+(u.__dir__<0?"Right":"")}),u},Ye.prototype[e+"Right"]=function(a){return this.reverse()[e](a).reverse()}}),Pr(["filter","map","takeWhile"],function(e,n){var a=n+1,u=a==E||a==$;Ye.prototype[e]=function(m){var A=this.clone();return A.__iteratees__.push({iteratee:be(m,3),type:a}),A.__filtered__=A.__filtered__||u,A}}),Pr(["head","last"],function(e,n){var a="take"+(n?"Right":"");Ye.prototype[e]=function(){return this[a](1).value()[0]}}),Pr(["initial","tail"],function(e,n){var a="drop"+(n?"":"Right");Ye.prototype[e]=function(){return this.__filtered__?new Ye(this):this[a](1)}}),Ye.prototype.compact=function(){return this.filter(yr)},Ye.prototype.find=function(e){return this.filter(e).head()},Ye.prototype.findLast=function(e){return this.reverse().find(e)},Ye.prototype.invokeMap=Ke(function(e,n){return typeof e=="function"?new Ye(this):this.map(function(a){return Wi(a,e,n)})}),Ye.prototype.reject=function(e){return this.filter(Ea(be(e)))},Ye.prototype.slice=function(e,n){e=Le(e);var a=this;return a.__filtered__&&(e>0||n<0)?new Ye(a):(e<0?a=a.takeRight(-e):e&&(a=a.drop(e)),n!==r&&(n=Le(n),a=n<0?a.dropRight(-n):a.take(n-e)),a)},Ye.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ye.prototype.toArray=function(){return this.take(te)},Jr(Ye.prototype,function(e,n){var a=/^(?:filter|find|map|reject)|While$/.test(n),u=/^(?:head|last)$/.test(n),m=x[u?"take"+(n=="last"?"Right":""):n],A=u||/^find/.test(n);m&&(x.prototype[n]=function(){var F=this.__wrapped__,H=u?[1]:arguments,G=F instanceof Ye,se=H[0],oe=G||Ne(F),ue=function(Ge){var Qe=m.apply(x,mn([Ge],H));return u&&le?Qe[0]:Qe};oe&&a&&typeof se=="function"&&se.length!=1&&(G=oe=!1);var le=this.__chain__,ve=!!this.__actions__.length,we=A&&!le,qe=G&&!ve;if(!A&&oe){F=qe?F:new Ye(this);var Ee=e.apply(F,H);return Ee.__actions__.push({func:va,args:[ue],thisArg:r}),new Nr(Ee,le)}return we&&qe?e.apply(this,H):(Ee=this.thru(ue),we?u?Ee.value()[0]:Ee.value():Ee)})}),Pr(["pop","push","shift","sort","splice","unshift"],function(e){var n=Ks[e],a=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",u=/^(?:pop|shift)$/.test(e);x.prototype[e]=function(){var m=arguments;if(u&&!this.__chain__){var A=this.value();return n.apply(Ne(A)?A:[],m)}return this[a](function(F){return n.apply(Ne(F)?F:[],m)})}}),Jr(Ye.prototype,function(e,n){var a=x[n];if(a){var u=a.name+"";it.call(mi,u)||(mi[u]=[]),mi[u].push({name:n,func:a})}}),mi[fa(r,re).name]=[{name:"wrapper",func:r}],Ye.prototype.clone=ng,Ye.prototype.reverse=ig,Ye.prototype.value=sg,x.prototype.at=U1,x.prototype.chain=F1,x.prototype.commit=j1,x.prototype.next=$1,x.prototype.plant=M1,x.prototype.reverse=H1,x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=q1,x.prototype.first=x.prototype.head,qi&&(x.prototype[qi]=L1),x},_i=jp();Tt?((Tt.exports=_i)._=_i,ct._=_i):Xe._=_i}).call(fs)})(eu,eu.exports);var jS=Object.defineProperty,$S=Object.defineProperties,LS=Object.getOwnPropertyDescriptors,Zl=Object.getOwnPropertySymbols,MS=Object.prototype.hasOwnProperty,HS=Object.prototype.propertyIsEnumerable,ed=(i,t,r)=>t in i?jS(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,xa=(i,t)=>{for(var r in t||(t={}))MS.call(t,r)&&ed(i,r,t[r]);if(Zl)for(var r of Zl(t))HS.call(t,r)&&ed(i,r,t[r]);return i},qS=(i,t)=>$S(i,LS(t));function Mr(i,t,r){let s;const o=tu(i);return t.rpcMap&&(s=t.rpcMap[o]),s||(s=`${FS}?chainId=eip155:${o}&projectId=${r}`),s}function tu(i){return i.includes("eip155")?Number(i.split(":")[1]):Number(i)}function zS(i,t){if(!t.includes(i))throw new Error(`Chain '${i}' not approved. Please use one of the following: ${t.toString()}`)}function BS(i){return i.map(t=>`${t.split(":")[0]}:${t.split(":")[1]}`)}function KS(i,t){const r=Object.keys(t.namespaces).filter(o=>o.includes(i));if(!r.length)return[];const s=[];return r.forEach(o=>{const d=t.namespaces[o].accounts;s.push(...d)}),s}function VS(i,t={}){const r=td(i),s=td(t);return eu.exports.merge(r,s)}function td(i){var t,r,s,o;const d={};if(!TS(i))return d;for(const[O,y]of Object.entries(i)){const I=lp(O)?[O]:y.chains,N=y.methods||[],P=y.events||[],U=y.rpcMap||{},K=Ta(O);d[K]=qS(xa(xa({},d[K]),y),{chains:jc(I,(t=d[K])==null?void 0:t.chains),methods:jc(N,(r=d[K])==null?void 0:r.methods),events:jc(P,(s=d[K])==null?void 0:s.events),rpcMap:xa(xa({},U),(o=d[K])==null?void 0:o.rpcMap)})}return d}const si=(i,t)=>{const r=s=>{s.request!==t.request||s.topic!==t.topic||(i.events.removeListener("session_request_sent",r),kS(t))};i.on("session_request_sent",r)};function kS(i){if(typeof window<"u")try{const t=window.localStorage.getItem("WALLETCONNECT_DEEPLINK_CHOICE");if(t){const r=JSON.parse(t),s=r?.href;if(typeof s=="string"){s.endsWith("/")&&s.slice(0,-1);const o=`${s}/wc?requestId=${i.id}&sessionTopic=${i.topic}`;window.open(o,"_self","noreferrer noopener")}}}catch(t){console.error(t)}}class GS{constructor(t){this.name="polkadot",this.namespace=t.namespace,this.events=t.events,this.client=t.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?(si(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(this.chainId=t,!this.httpProviders[t]){const s=r||Mr(`${this.name}:${t}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.events.emit(Nn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||Mr(t,this.namespace);return typeof s>"u"?void 0:new Pn(new Zn(s))}}class WS{constructor(t){this.name="eip155",this.namespace=t.namespace,this.client=t.client,this.events=t.events,this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(t){var r;switch(t.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return this.handleSwitchChain(t.request.params?(r=t.request.params[0])==null?void 0:r.chainId:"0x0"),null;case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(t.request.method)?(si(this.client,t),await this.client.request(t)):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,r){const s=tu(t);if(!this.httpProviders[s]){const o=r||Mr(`${this.name}:${s}`,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${s}`);this.setHttpProvider(s,o)}this.chainId=s,this.events.emit(Nn.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}createHttpProvider(t,r){const s=r||Mr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Pn(new Zn(s))}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;const o=tu(r);t[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const t=this.chainId,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}handleSwitchChain(t){const r=parseInt(t,16),s=`${this.name}:${r}`;zS(s,this.namespace.chains),this.setDefaultChain(`${r}`)}}class YS{constructor(t){this.name="solana",this.namespace=t.namespace,this.events=t.events,this.client=t.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?(si(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(!this.httpProviders[t]){const s=r||Mr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.chainId=t,this.events.emit(Nn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||Mr(t,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Pn(new Zn(s))}}class JS{constructor(t){this.name="cosmos",this.namespace=t.namespace,this.events=t.events,this.client=t.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?(si(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(this.chainId=t,!this.httpProviders[t]){const s=r||Mr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.events.emit(Nn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||Mr(t,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Pn(new Zn(s))}}class XS{constructor(t){this.name="cip34",this.namespace=t.namespace,this.events=t.events,this.client=t.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?(si(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(this.chainId=t,!this.httpProviders[t]){const s=r||this.getCardanoRPCUrl(t);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.events.emit(Nn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{const s=this.getCardanoRPCUrl(r);t[r]=this.createHttpProvider(r,s)}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}getCardanoRPCUrl(t){const r=this.namespace.rpcMap;if(r)return r[t]}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||this.getCardanoRPCUrl(t);return typeof s>"u"?void 0:new Pn(new Zn(s))}}class QS{constructor(t){this.name="elrond",this.namespace=t.namespace,this.events=t.events,this.client=t.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?(si(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(!this.httpProviders[t]){const s=r||Mr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.chainId=t,this.events.emit(Nn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||Mr(t,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Pn(new Zn(s))}}class ZS{constructor(t){this.name="multiversx",this.namespace=t.namespace,this.events=t.events,this.client=t.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?(si(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(!this.httpProviders[t]){const s=r||Mr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.chainId=t,this.events.emit(Nn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||Mr(t,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Pn(new Zn(s))}}var e2=Object.defineProperty,t2=Object.defineProperties,r2=Object.getOwnPropertyDescriptors,rd=Object.getOwnPropertySymbols,n2=Object.prototype.hasOwnProperty,i2=Object.prototype.propertyIsEnumerable,nd=(i,t,r)=>t in i?e2(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Aa=(i,t)=>{for(var r in t||(t={}))n2.call(t,r)&&nd(i,r,t[r]);if(rd)for(var r of rd(t))i2.call(t,r)&&nd(i,r,t[r]);return i},$c=(i,t)=>t2(i,r2(t));class Tu{constructor(t){this.events=new Ir,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.providerOpts=t,this.logger=typeof t?.logger<"u"&&typeof t?.logger!="string"?t.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:t?.logger||Xl}))}static async init(t){const r=new Tu(t);return await r.initialize(),r}async request(t,r){const[s,o]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Aa({},t),chainId:`${s}:${o}`,topic:this.session.topic})}sendAsync(t,r,s){this.request(t,s).then(o=>r(null,o)).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(t=this.session)==null?void 0:t.topic,reason:Jl("USER_DISCONNECTED")}),await this.cleanup()}async connect(t){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(t),await this.cleanupPendingPairings(),!t.skipPairing)return await this.pair(t.pairingTopic)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}removeListener(t,r){this.events.removeListener(t,r)}off(t,r){this.events.off(t,r)}get isWalletConnect(){return!0}async pair(t){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:o}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await o().then(d=>{this.session=d}).catch(d=>{if(d.message!==hp)throw d;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(t,r){try{const[s,o]=this.validateChain(t);this.getProvider(s).setDefaultChain(o,r)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(t={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(PS(r)){for(const s of r)t.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const t=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[t]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await _S.init({logger:this.providerOpts.logger||Xl,relayUrl:this.providerOpts.relayUrl||NS,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");[...new Set(Object.keys(this.session.namespaces).map(t=>Ta(t)))].forEach(t=>{if(!this.session)return;const r=KS(t,this.session),s=BS(r),o=VS(this.namespaces,this.optionalNamespaces),d=$c(Aa({},o[t]),{accounts:r,chains:s});switch(t){case"eip155":this.rpcProviders[t]=new WS({client:this.client,namespace:d,events:this.events});break;case"solana":this.rpcProviders[t]=new YS({client:this.client,namespace:d,events:this.events});break;case"cosmos":this.rpcProviders[t]=new JS({client:this.client,namespace:d,events:this.events});break;case"polkadot":this.rpcProviders[t]=new GS({client:this.client,namespace:d,events:this.events});break;case"cip34":this.rpcProviders[t]=new XS({client:this.client,namespace:d,events:this.events});break;case"elrond":this.rpcProviders[t]=new QS({client:this.client,namespace:d,events:this.events});break;case"multiversx":this.rpcProviders[t]=new ZS({client:this.client,namespace:d,events:this.events});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",t=>{this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{const{params:r}=t,{event:s}=r;s.name==="accountsChanged"?this.events.emit("accountsChanged",s.data):s.name==="chainChanged"?this.onChainChanged(r.chainId):this.events.emit(s.name,s.data),this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:r})=>{var s;const{namespaces:o}=r,d=(s=this.client)==null?void 0:s.session.get(t);this.session=$c(Aa({},d),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:r})}),this.client.on("session_delete",async t=>{await this.cleanup(),this.events.emit("session_delete",t),this.events.emit("disconnect",$c(Aa({},Jl("USER_DISCONNECTED")),{data:t.topic}))}),this.on(Nn.DEFAULT_CHAIN_CHANGED,t=>{this.onChainChanged(t,!0)})}getProvider(t){if(!this.rpcProviders[t])throw new Error(`Provider not found: ${t}`);return this.rpcProviders[t]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(t=>{var r;this.getProvider(t).updateNamespace((r=this.session)==null?void 0:r.namespaces[t])})}setNamespaces(t){const{namespaces:r,optionalNamespaces:s,sessionProperties:o}=t;if(!r||!Object.keys(r).length)throw new Error("Namespaces must be not empty");this.namespaces=r,this.optionalNamespaces=s,this.sessionProperties=o,this.persist("namespaces",r),this.persist("optionalNamespaces",s)}validateChain(t){const[r,s]=t?.split(":")||["",""];if(r&&!Object.keys(this.namespaces).map(O=>Ta(O)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&s)return[r,s];const o=Ta(Object.keys(this.namespaces)[0]),d=this.rpcProviders[o].getDefaultChain();return[o,d]}async requestAccounts(){const[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}onChainChanged(t,r=!1){var s;const[o,d]=this.validateChain(t);r||this.getProvider(o).setDefaultChain(d),((s=this.namespaces[o])!=null?s:this.namespaces[`${o}:${d}`]).defaultChain=d,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",d)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0})}persist(t,r){this.client.core.storage.setItem(`${Ql}/${t}`,r)}async getFromStore(t){return await this.client.core.storage.getItem(`${Ql}/${t}`)}}const s2=Tu,a2="wc",o2="ethereum_provider",c2=`${a2}@${2}:${o2}:`,u2="https://rpc.walletconnect.com/v1/",ru=["eth_sendTransaction","personal_sign"],I2=["eth_accounts","eth_requestAccounts","eth_call","eth_getBalance","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],nu=["chainChanged","accountsChanged"],x2=["message","disconnect","connect"];var h2=Object.defineProperty,f2=Object.defineProperties,l2=Object.getOwnPropertyDescriptors,id=Object.getOwnPropertySymbols,d2=Object.prototype.hasOwnProperty,p2=Object.prototype.propertyIsEnumerable,sd=(i,t,r)=>t in i?h2(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Lc=(i,t)=>{for(var r in t||(t={}))d2.call(t,r)&&sd(i,r,t[r]);if(id)for(var r of id(t))p2.call(t,r)&&sd(i,r,t[r]);return i},ad=(i,t)=>f2(i,l2(t));function iu(i){return Number(i[0].split(":")[1])}function Mc(i){return`0x${i.toString(16)}`}function g2(i){const{chains:t,optionalChains:r,methods:s,optionalMethods:o,events:d,optionalEvents:O,rpcMap:y}=i;if(!kc(t))throw new Error("Invalid chains");const I=t,N=s||ru,P=d||nu,U={[iu(I)]:y[iu(I)]},K={chains:I,methods:N,events:P,rpcMap:U},M=d?.filter(re=>!nu.includes(re)),L=s?.filter(re=>!ru.includes(re));if(!r&&!O&&!o&&!(M!=null&&M.length)&&!(L!=null&&L.length))return{required:K};const W=M?.length&&L?.length||!r,q={chains:[...new Set(W?I.concat(r||[]):r)],methods:[...new Set(N.concat(o||[]))],events:[...new Set(P.concat(O||[]))],rpcMap:y};return{required:K,optional:q}}class Nu{constructor(){this.events=new Ir.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=c2,this.on=(t,r)=>(this.events.on(t,r),this),this.once=(t,r)=>(this.events.once(t,r),this),this.removeListener=(t,r)=>(this.events.removeListener(t,r),this),this.off=(t,r)=>(this.events.off(t,r),this),this.parseAccount=t=>this.isCompatibleChainId(t)?this.parseAccountId(t).address:t,this.signer={},this.rpc={}}static async init(t){const r=new Nu;return await r.initialize(t),r}async request(t){return await this.signer.request(t,this.formatChainId(this.chainId))}sendAsync(t,r){this.signer.sendAsync(t,r,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(t);const{required:r,optional:s}=g2(this.rpc);try{const o=await new Promise(async(O,y)=>{var I;this.rpc.showQrModal&&((I=this.modal)==null||I.subscribeModal(N=>{!N.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),y(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(ad(Lc({namespaces:{[this.namespace]:r}},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:t?.pairingTopic})).then(N=>{O(N)}).catch(N=>{y(new Error(N.message))})});if(!o)return;this.setChainIds(this.rpc.chains);const d=tw(o.namespaces,[this.namespace]);this.setAccounts(d),this.events.emit("connect",{chainId:Mc(this.chainId)})}catch(o){throw this.signer.logger.error(o),o}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",t=>{const{params:r}=t,{event:s}=r;s.name==="accountsChanged"?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):s.name==="chainChanged"?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",t)}),this.signer.on("chainChanged",t=>{const r=parseInt(t);this.chainId=r,this.events.emit("chainChanged",Mc(this.chainId)),this.persist()}),this.signer.on("session_update",t=>{this.events.emit("session_update",t)}),this.signer.on("session_delete",t=>{this.reset(),this.events.emit("session_delete",t),this.events.emit("disconnect",ad(Lc({},nw("USER_DISCONNECTED")),{data:t.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",t=>{var r,s;this.rpc.showQrModal&&((r=this.modal)==null||r.closeModal(),(s=this.modal)==null||s.openModal({uri:t})),this.events.emit("display_uri",t)})}setHttpProvider(t){this.request({method:"wallet_switchEthereumChain",params:[{chainId:t.toString(16)}]})}isCompatibleChainId(t){return typeof t=="string"?t.startsWith(`${this.namespace}:`):!1}formatChainId(t){return`${this.namespace}:${t}`}parseChainId(t){return Number(t.split(":")[1])}setChainIds(t){const r=t.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",Mc(this.chainId)),this.persist())}setChainId(t){if(this.isCompatibleChainId(t)){const r=this.parseChainId(t);this.chainId=r,this.setHttpProvider(r)}}parseAccountId(t){const[r,s,o]=t.split(":");return{chainId:`${r}:${s}`,address:o}}setAccounts(t){this.accounts=t.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(t){var r,s;return{chains:((r=t.chains)==null?void 0:r.map(o=>this.formatChainId(o)))||[`${this.namespace}:1`],optionalChains:t.optionalChains?t.optionalChains.map(o=>this.formatChainId(o)):void 0,methods:t?.methods||ru,events:t?.events||nu,optionalMethods:t?.optionalMethods||[],optionalEvents:t?.optionalEvents||[],rpcMap:t?.rpcMap||this.buildRpcMap(t.chains.concat(t.optionalChains||[]),t.projectId),showQrModal:Boolean(t?.showQrModal),qrModalOptions:(s=t?.qrModalOptions)!=null?s:void 0,projectId:t.projectId,metadata:t.metadata}}buildRpcMap(t,r){const s={};return t.forEach(o=>{s[o]=this.getRpcUrl(o,r)}),s}async initialize(t){if(this.rpc=this.getRpcConfig(t),this.chainId=iu(this.rpc.chains),this.signer=await s2.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal)try{const{Web3Modal:r}=await Gv(()=>import("./ethereum-provider-b25bb000.js"),[]);this.modal=new r(Lc({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch{throw new Error("To use QR modal, please install @web3modal/standalone package")}}loadConnectOpts(t){if(!t)return;const{chains:r,optionalChains:s,rpcMap:o}=t;r&&kc(r)&&(this.rpc.chains=r.map(d=>this.formatChainId(d)),r.forEach(d=>{this.rpc.rpcMap[d]=o?.[d]||this.getRpcUrl(d)})),s&&kc(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s?.map(d=>this.formatChainId(d)),s.forEach(d=>{this.rpc.rpcMap[d]=o?.[d]||this.getRpcUrl(d)}))}getRpcUrl(t,r){var s;return((s=this.rpc.rpcMap)==null?void 0:s[t])||`${u2}?chainId=eip155:${t}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const t=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`);this.setChainIds(t?[this.formatChainId(t)]:this.session.namespaces[this.namespace].accounts),this.setAccounts(this.session.namespaces[this.namespace].accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(t){return typeof t=="string"||t instanceof String?[this.parseAccount(t)]:t.map(r=>this.parseAccount(r))}}const A2=Nu;export{A2 as EthereumProvider,x2 as OPTIONAL_EVENTS,I2 as OPTIONAL_METHODS,nu as REQUIRED_EVENTS,ru as REQUIRED_METHODS,Nu as default};
