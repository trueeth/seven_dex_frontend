import{l as Uv,r as jv,c as cr,g as Lv,e as $r}from"./index-34346f55.js";import{c as Xc,s as Vl,a as kl,d as Gl,i as wh,e as $v,g as Mv,b as Wl,f as Zc,h as zv,J as An,j as Qc,k as eu,l as In,m as pn,n as Yl,o as tu,H as Zn}from"./http-7f1c8b0d.js";var ru={},$a={},je={},Jl={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});function t(y,E){var N=y>>>16&65535,T=y&65535,j=E>>>16&65535,G=E&65535;return T*G+(N*G+T*j<<16>>>0)|0}i.mul=Math.imul||t;function r(y,E){return y+E|0}i.add=r;function s(y,E){return y-E|0}i.sub=s;function o(y,E){return y<<E|y>>>32-E}i.rotl=o;function l(y,E){return y<<32-E|y>>>E}i.rotr=l;function w(y){return typeof y=="number"&&isFinite(y)&&Math.floor(y)===y}i.isInteger=Number.isInteger||w,i.MAX_SAFE_INTEGER=9007199254740991,i.isSafeInteger=function(y){return i.isInteger(y)&&y>=-i.MAX_SAFE_INTEGER&&y<=i.MAX_SAFE_INTEGER}})(Jl);Object.defineProperty(je,"__esModule",{value:!0});var Xl=Jl;function qv(i,t){return t===void 0&&(t=0),(i[t+0]<<8|i[t+1])<<16>>16}je.readInt16BE=qv;function Bv(i,t){return t===void 0&&(t=0),(i[t+0]<<8|i[t+1])>>>0}je.readUint16BE=Bv;function Hv(i,t){return t===void 0&&(t=0),(i[t+1]<<8|i[t])<<16>>16}je.readInt16LE=Hv;function Kv(i,t){return t===void 0&&(t=0),(i[t+1]<<8|i[t])>>>0}je.readUint16LE=Kv;function Zl(i,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=i>>>8,t[r+1]=i>>>0,t}je.writeUint16BE=Zl;je.writeInt16BE=Zl;function Ql(i,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=i>>>0,t[r+1]=i>>>8,t}je.writeUint16LE=Ql;je.writeInt16LE=Ql;function jc(i,t){return t===void 0&&(t=0),i[t]<<24|i[t+1]<<16|i[t+2]<<8|i[t+3]}je.readInt32BE=jc;function Lc(i,t){return t===void 0&&(t=0),(i[t]<<24|i[t+1]<<16|i[t+2]<<8|i[t+3])>>>0}je.readUint32BE=Lc;function $c(i,t){return t===void 0&&(t=0),i[t+3]<<24|i[t+2]<<16|i[t+1]<<8|i[t]}je.readInt32LE=$c;function Mc(i,t){return t===void 0&&(t=0),(i[t+3]<<24|i[t+2]<<16|i[t+1]<<8|i[t])>>>0}je.readUint32LE=Mc;function Ca(i,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=i>>>24,t[r+1]=i>>>16,t[r+2]=i>>>8,t[r+3]=i>>>0,t}je.writeUint32BE=Ca;je.writeInt32BE=Ca;function Ta(i,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=i>>>0,t[r+1]=i>>>8,t[r+2]=i>>>16,t[r+3]=i>>>24,t}je.writeUint32LE=Ta;je.writeInt32LE=Ta;function Vv(i,t){t===void 0&&(t=0);var r=jc(i,t),s=jc(i,t+4);return r*4294967296+s-(s>>31)*4294967296}je.readInt64BE=Vv;function kv(i,t){t===void 0&&(t=0);var r=Lc(i,t),s=Lc(i,t+4);return r*4294967296+s}je.readUint64BE=kv;function Gv(i,t){t===void 0&&(t=0);var r=$c(i,t),s=$c(i,t+4);return s*4294967296+r-(r>>31)*4294967296}je.readInt64LE=Gv;function Wv(i,t){t===void 0&&(t=0);var r=Mc(i,t),s=Mc(i,t+4);return s*4294967296+r}je.readUint64LE=Wv;function ed(i,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),Ca(i/4294967296>>>0,t,r),Ca(i>>>0,t,r+4),t}je.writeUint64BE=ed;je.writeInt64BE=ed;function td(i,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),Ta(i>>>0,t,r),Ta(i/4294967296>>>0,t,r+4),t}je.writeUint64LE=td;je.writeInt64LE=td;function Yv(i,t,r){if(r===void 0&&(r=0),i%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(i/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,o=1,l=i/8+r-1;l>=r;l--)s+=t[l]*o,o*=256;return s}je.readUintBE=Yv;function Jv(i,t,r){if(r===void 0&&(r=0),i%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(i/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,o=1,l=r;l<r+i/8;l++)s+=t[l]*o,o*=256;return s}je.readUintLE=Jv;function Xv(i,t,r,s){if(r===void 0&&(r=new Uint8Array(i/8)),s===void 0&&(s=0),i%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Xl.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var o=1,l=i/8+s-1;l>=s;l--)r[l]=t/o&255,o*=256;return r}je.writeUintBE=Xv;function Zv(i,t,r,s){if(r===void 0&&(r=new Uint8Array(i/8)),s===void 0&&(s=0),i%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Xl.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var o=1,l=s;l<s+i/8;l++)r[l]=t/o&255,o*=256;return r}je.writeUintLE=Zv;function Qv(i,t){t===void 0&&(t=0);var r=new DataView(i.buffer,i.byteOffset,i.byteLength);return r.getFloat32(t)}je.readFloat32BE=Qv;function eb(i,t){t===void 0&&(t=0);var r=new DataView(i.buffer,i.byteOffset,i.byteLength);return r.getFloat32(t,!0)}je.readFloat32LE=eb;function tb(i,t){t===void 0&&(t=0);var r=new DataView(i.buffer,i.byteOffset,i.byteLength);return r.getFloat64(t)}je.readFloat64BE=tb;function rb(i,t){t===void 0&&(t=0);var r=new DataView(i.buffer,i.byteOffset,i.byteLength);return r.getFloat64(t,!0)}je.readFloat64LE=rb;function nb(i,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat32(r,i),t}je.writeFloat32BE=nb;function ib(i,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat32(r,i,!0),t}je.writeFloat32LE=ib;function sb(i,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat64(r,i),t}je.writeFloat64BE=sb;function ab(i,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat64(r,i,!0),t}je.writeFloat64LE=ab;var Or={};Object.defineProperty(Or,"__esModule",{value:!0});function ob(i){for(var t=0;t<i.length;t++)i[t]=0;return i}Or.wipe=ob;Object.defineProperty($a,"__esModule",{value:!0});var Qt=je,zc=Or,cb=20;function ub(i,t,r){for(var s=1634760805,o=857760878,l=2036477234,w=1797285236,y=r[3]<<24|r[2]<<16|r[1]<<8|r[0],E=r[7]<<24|r[6]<<16|r[5]<<8|r[4],N=r[11]<<24|r[10]<<16|r[9]<<8|r[8],T=r[15]<<24|r[14]<<16|r[13]<<8|r[12],j=r[19]<<24|r[18]<<16|r[17]<<8|r[16],G=r[23]<<24|r[22]<<16|r[21]<<8|r[20],z=r[27]<<24|r[26]<<16|r[25]<<8|r[24],M=r[31]<<24|r[30]<<16|r[29]<<8|r[28],J=t[3]<<24|t[2]<<16|t[1]<<8|t[0],W=t[7]<<24|t[6]<<16|t[5]<<8|t[4],oe=t[11]<<24|t[10]<<16|t[9]<<8|t[8],O=t[15]<<24|t[14]<<16|t[13]<<8|t[12],A=s,S=o,x=l,m=w,c=y,d=E,Z=N,h=T,p=j,v=G,P=z,b=M,g=J,L=W,q=oe,Q=O,R=0;R<cb;R+=2)A=A+c|0,g^=A,g=g>>>32-16|g<<16,p=p+g|0,c^=p,c=c>>>32-12|c<<12,S=S+d|0,L^=S,L=L>>>32-16|L<<16,v=v+L|0,d^=v,d=d>>>32-12|d<<12,x=x+Z|0,q^=x,q=q>>>32-16|q<<16,P=P+q|0,Z^=P,Z=Z>>>32-12|Z<<12,m=m+h|0,Q^=m,Q=Q>>>32-16|Q<<16,b=b+Q|0,h^=b,h=h>>>32-12|h<<12,x=x+Z|0,q^=x,q=q>>>32-8|q<<8,P=P+q|0,Z^=P,Z=Z>>>32-7|Z<<7,m=m+h|0,Q^=m,Q=Q>>>32-8|Q<<8,b=b+Q|0,h^=b,h=h>>>32-7|h<<7,S=S+d|0,L^=S,L=L>>>32-8|L<<8,v=v+L|0,d^=v,d=d>>>32-7|d<<7,A=A+c|0,g^=A,g=g>>>32-8|g<<8,p=p+g|0,c^=p,c=c>>>32-7|c<<7,A=A+d|0,Q^=A,Q=Q>>>32-16|Q<<16,P=P+Q|0,d^=P,d=d>>>32-12|d<<12,S=S+Z|0,g^=S,g=g>>>32-16|g<<16,b=b+g|0,Z^=b,Z=Z>>>32-12|Z<<12,x=x+h|0,L^=x,L=L>>>32-16|L<<16,p=p+L|0,h^=p,h=h>>>32-12|h<<12,m=m+c|0,q^=m,q=q>>>32-16|q<<16,v=v+q|0,c^=v,c=c>>>32-12|c<<12,x=x+h|0,L^=x,L=L>>>32-8|L<<8,p=p+L|0,h^=p,h=h>>>32-7|h<<7,m=m+c|0,q^=m,q=q>>>32-8|q<<8,v=v+q|0,c^=v,c=c>>>32-7|c<<7,S=S+Z|0,g^=S,g=g>>>32-8|g<<8,b=b+g|0,Z^=b,Z=Z>>>32-7|Z<<7,A=A+d|0,Q^=A,Q=Q>>>32-8|Q<<8,P=P+Q|0,d^=P,d=d>>>32-7|d<<7;Qt.writeUint32LE(A+s|0,i,0),Qt.writeUint32LE(S+o|0,i,4),Qt.writeUint32LE(x+l|0,i,8),Qt.writeUint32LE(m+w|0,i,12),Qt.writeUint32LE(c+y|0,i,16),Qt.writeUint32LE(d+E|0,i,20),Qt.writeUint32LE(Z+N|0,i,24),Qt.writeUint32LE(h+T|0,i,28),Qt.writeUint32LE(p+j|0,i,32),Qt.writeUint32LE(v+G|0,i,36),Qt.writeUint32LE(P+z|0,i,40),Qt.writeUint32LE(b+M|0,i,44),Qt.writeUint32LE(g+J|0,i,48),Qt.writeUint32LE(L+W|0,i,52),Qt.writeUint32LE(q+oe|0,i,56),Qt.writeUint32LE(Q+O|0,i,60)}function rd(i,t,r,s,o){if(o===void 0&&(o=0),i.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<r.length)throw new Error("ChaCha: destination is shorter than source");var l,w;if(o===0){if(t.length!==8&&t.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");l=new Uint8Array(16),w=l.length-t.length,l.set(t,w)}else{if(t.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");l=t,w=o}for(var y=new Uint8Array(64),E=0;E<r.length;E+=64){ub(y,l,i);for(var N=E;N<E+64&&N<r.length;N++)s[N]=r[N]^y[N-E];hb(l,0,w)}return zc.wipe(y),o===0&&zc.wipe(l),s}$a.streamXOR=rd;function fb(i,t,r,s){return s===void 0&&(s=0),zc.wipe(r),rd(i,t,r,r,s)}$a.stream=fb;function hb(i,t,r){for(var s=1;r--;)s=s+(i[t]&255)|0,i[t]=s&255,s>>>=8,t++;if(s>0)throw new Error("ChaCha: counter overflow")}var nd={},Cn={};Object.defineProperty(Cn,"__esModule",{value:!0});function lb(i,t,r){return~(i-1)&t|i-1&r}Cn.select=lb;function db(i,t){return(i|0)-(t|0)-1>>>31&1}Cn.lessOrEqual=db;function id(i,t){if(i.length!==t.length)return 0;for(var r=0,s=0;s<i.length;s++)r|=i[s]^t[s];return 1&r-1>>>8}Cn.compare=id;function pb(i,t){return i.length===0||t.length===0?!1:id(i,t)!==0}Cn.equal=pb;(function(i){Object.defineProperty(i,"__esModule",{value:!0});var t=Cn,r=Or;i.DIGEST_LENGTH=16;var s=function(){function w(y){this.digestLength=i.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var E=y[0]|y[1]<<8;this._r[0]=E&8191;var N=y[2]|y[3]<<8;this._r[1]=(E>>>13|N<<3)&8191;var T=y[4]|y[5]<<8;this._r[2]=(N>>>10|T<<6)&7939;var j=y[6]|y[7]<<8;this._r[3]=(T>>>7|j<<9)&8191;var G=y[8]|y[9]<<8;this._r[4]=(j>>>4|G<<12)&255,this._r[5]=G>>>1&8190;var z=y[10]|y[11]<<8;this._r[6]=(G>>>14|z<<2)&8191;var M=y[12]|y[13]<<8;this._r[7]=(z>>>11|M<<5)&8065;var J=y[14]|y[15]<<8;this._r[8]=(M>>>8|J<<8)&8191,this._r[9]=J>>>5&127,this._pad[0]=y[16]|y[17]<<8,this._pad[1]=y[18]|y[19]<<8,this._pad[2]=y[20]|y[21]<<8,this._pad[3]=y[22]|y[23]<<8,this._pad[4]=y[24]|y[25]<<8,this._pad[5]=y[26]|y[27]<<8,this._pad[6]=y[28]|y[29]<<8,this._pad[7]=y[30]|y[31]<<8}return w.prototype._blocks=function(y,E,N){for(var T=this._fin?0:2048,j=this._h[0],G=this._h[1],z=this._h[2],M=this._h[3],J=this._h[4],W=this._h[5],oe=this._h[6],O=this._h[7],A=this._h[8],S=this._h[9],x=this._r[0],m=this._r[1],c=this._r[2],d=this._r[3],Z=this._r[4],h=this._r[5],p=this._r[6],v=this._r[7],P=this._r[8],b=this._r[9];N>=16;){var g=y[E+0]|y[E+1]<<8;j+=g&8191;var L=y[E+2]|y[E+3]<<8;G+=(g>>>13|L<<3)&8191;var q=y[E+4]|y[E+5]<<8;z+=(L>>>10|q<<6)&8191;var Q=y[E+6]|y[E+7]<<8;M+=(q>>>7|Q<<9)&8191;var R=y[E+8]|y[E+9]<<8;J+=(Q>>>4|R<<12)&8191,W+=R>>>1&8191;var k=y[E+10]|y[E+11]<<8;oe+=(R>>>14|k<<2)&8191;var te=y[E+12]|y[E+13]<<8;O+=(k>>>11|te<<5)&8191;var se=y[E+14]|y[E+15]<<8;A+=(te>>>8|se<<8)&8191,S+=se>>>5|T;var ne=0,_e=ne;_e+=j*x,_e+=G*(5*b),_e+=z*(5*P),_e+=M*(5*v),_e+=J*(5*p),ne=_e>>>13,_e&=8191,_e+=W*(5*h),_e+=oe*(5*Z),_e+=O*(5*d),_e+=A*(5*c),_e+=S*(5*m),ne+=_e>>>13,_e&=8191;var he=ne;he+=j*m,he+=G*x,he+=z*(5*b),he+=M*(5*P),he+=J*(5*v),ne=he>>>13,he&=8191,he+=W*(5*p),he+=oe*(5*h),he+=O*(5*Z),he+=A*(5*d),he+=S*(5*c),ne+=he>>>13,he&=8191;var be=ne;be+=j*c,be+=G*m,be+=z*x,be+=M*(5*b),be+=J*(5*P),ne=be>>>13,be&=8191,be+=W*(5*v),be+=oe*(5*p),be+=O*(5*h),be+=A*(5*Z),be+=S*(5*d),ne+=be>>>13,be&=8191;var X=ne;X+=j*d,X+=G*c,X+=z*m,X+=M*x,X+=J*(5*b),ne=X>>>13,X&=8191,X+=W*(5*P),X+=oe*(5*v),X+=O*(5*p),X+=A*(5*h),X+=S*(5*Z),ne+=X>>>13,X&=8191;var Y=ne;Y+=j*Z,Y+=G*d,Y+=z*c,Y+=M*m,Y+=J*x,ne=Y>>>13,Y&=8191,Y+=W*(5*b),Y+=oe*(5*P),Y+=O*(5*v),Y+=A*(5*p),Y+=S*(5*h),ne+=Y>>>13,Y&=8191;var B=ne;B+=j*h,B+=G*Z,B+=z*d,B+=M*c,B+=J*m,ne=B>>>13,B&=8191,B+=W*x,B+=oe*(5*b),B+=O*(5*P),B+=A*(5*v),B+=S*(5*p),ne+=B>>>13,B&=8191;var f=ne;f+=j*p,f+=G*h,f+=z*Z,f+=M*d,f+=J*c,ne=f>>>13,f&=8191,f+=W*m,f+=oe*x,f+=O*(5*b),f+=A*(5*P),f+=S*(5*v),ne+=f>>>13,f&=8191;var U=ne;U+=j*v,U+=G*p,U+=z*h,U+=M*Z,U+=J*d,ne=U>>>13,U&=8191,U+=W*c,U+=oe*m,U+=O*x,U+=A*(5*b),U+=S*(5*P),ne+=U>>>13,U&=8191;var fe=ne;fe+=j*P,fe+=G*v,fe+=z*p,fe+=M*h,fe+=J*Z,ne=fe>>>13,fe&=8191,fe+=W*d,fe+=oe*c,fe+=O*m,fe+=A*x,fe+=S*(5*b),ne+=fe>>>13,fe&=8191;var pe=ne;pe+=j*b,pe+=G*P,pe+=z*v,pe+=M*p,pe+=J*h,ne=pe>>>13,pe&=8191,pe+=W*Z,pe+=oe*d,pe+=O*c,pe+=A*m,pe+=S*x,ne+=pe>>>13,pe&=8191,ne=(ne<<2)+ne|0,ne=ne+_e|0,_e=ne&8191,ne=ne>>>13,he+=ne,j=_e,G=he,z=be,M=X,J=Y,W=B,oe=f,O=U,A=fe,S=pe,E+=16,N-=16}this._h[0]=j,this._h[1]=G,this._h[2]=z,this._h[3]=M,this._h[4]=J,this._h[5]=W,this._h[6]=oe,this._h[7]=O,this._h[8]=A,this._h[9]=S},w.prototype.finish=function(y,E){E===void 0&&(E=0);var N=new Uint16Array(10),T,j,G,z;if(this._leftover){for(z=this._leftover,this._buffer[z++]=1;z<16;z++)this._buffer[z]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(T=this._h[1]>>>13,this._h[1]&=8191,z=2;z<10;z++)this._h[z]+=T,T=this._h[z]>>>13,this._h[z]&=8191;for(this._h[0]+=T*5,T=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=T,T=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=T,N[0]=this._h[0]+5,T=N[0]>>>13,N[0]&=8191,z=1;z<10;z++)N[z]=this._h[z]+T,T=N[z]>>>13,N[z]&=8191;for(N[9]-=1<<13,j=(T^1)-1,z=0;z<10;z++)N[z]&=j;for(j=~j,z=0;z<10;z++)this._h[z]=this._h[z]&j|N[z];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,G=this._h[0]+this._pad[0],this._h[0]=G&65535,z=1;z<8;z++)G=(this._h[z]+this._pad[z]|0)+(G>>>16)|0,this._h[z]=G&65535;return y[E+0]=this._h[0]>>>0,y[E+1]=this._h[0]>>>8,y[E+2]=this._h[1]>>>0,y[E+3]=this._h[1]>>>8,y[E+4]=this._h[2]>>>0,y[E+5]=this._h[2]>>>8,y[E+6]=this._h[3]>>>0,y[E+7]=this._h[3]>>>8,y[E+8]=this._h[4]>>>0,y[E+9]=this._h[4]>>>8,y[E+10]=this._h[5]>>>0,y[E+11]=this._h[5]>>>8,y[E+12]=this._h[6]>>>0,y[E+13]=this._h[6]>>>8,y[E+14]=this._h[7]>>>0,y[E+15]=this._h[7]>>>8,this._finished=!0,this},w.prototype.update=function(y){var E=0,N=y.length,T;if(this._leftover){T=16-this._leftover,T>N&&(T=N);for(var j=0;j<T;j++)this._buffer[this._leftover+j]=y[E+j];if(N-=T,E+=T,this._leftover+=T,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(N>=16&&(T=N-N%16,this._blocks(y,E,T),E+=T,N-=T),N){for(var j=0;j<N;j++)this._buffer[this._leftover+j]=y[E+j];this._leftover+=N}return this},w.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var y=new Uint8Array(16);return this.finish(y),y},w.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},w}();i.Poly1305=s;function o(w,y){var E=new s(w);E.update(y);var N=E.digest();return E.clean(),N}i.oneTimeAuth=o;function l(w,y){return w.length!==i.DIGEST_LENGTH||y.length!==i.DIGEST_LENGTH?!1:t.equal(w,y)}i.equal=l})(nd);(function(i){Object.defineProperty(i,"__esModule",{value:!0});var t=$a,r=nd,s=Or,o=je,l=Cn;i.KEY_LENGTH=32,i.NONCE_LENGTH=12,i.TAG_LENGTH=16;var w=new Uint8Array(16),y=function(){function E(N){if(this.nonceLength=i.NONCE_LENGTH,this.tagLength=i.TAG_LENGTH,N.length!==i.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(N)}return E.prototype.seal=function(N,T,j,G){if(N.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var z=new Uint8Array(16);z.set(N,z.length-N.length);var M=new Uint8Array(32);t.stream(this._key,z,M,4);var J=T.length+this.tagLength,W;if(G){if(G.length!==J)throw new Error("ChaCha20Poly1305: incorrect destination length");W=G}else W=new Uint8Array(J);return t.streamXOR(this._key,z,T,W,4),this._authenticate(W.subarray(W.length-this.tagLength,W.length),M,W.subarray(0,W.length-this.tagLength),j),s.wipe(z),W},E.prototype.open=function(N,T,j,G){if(N.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(T.length<this.tagLength)return null;var z=new Uint8Array(16);z.set(N,z.length-N.length);var M=new Uint8Array(32);t.stream(this._key,z,M,4);var J=new Uint8Array(this.tagLength);if(this._authenticate(J,M,T.subarray(0,T.length-this.tagLength),j),!l.equal(J,T.subarray(T.length-this.tagLength,T.length)))return null;var W=T.length-this.tagLength,oe;if(G){if(G.length!==W)throw new Error("ChaCha20Poly1305: incorrect destination length");oe=G}else oe=new Uint8Array(W);return t.streamXOR(this._key,z,T.subarray(0,T.length-this.tagLength),oe,4),s.wipe(z),oe},E.prototype.clean=function(){return s.wipe(this._key),this},E.prototype._authenticate=function(N,T,j,G){var z=new r.Poly1305(T);G&&(z.update(G),G.length%16>0&&z.update(w.subarray(G.length%16))),z.update(j),j.length%16>0&&z.update(w.subarray(j.length%16));var M=new Uint8Array(8);G&&o.writeUint64LE(G.length,M),z.update(M),o.writeUint64LE(j.length,M),z.update(M);for(var J=z.digest(),W=0;W<J.length;W++)N[W]=J[W];z.clean(),s.wipe(J),s.wipe(M)},E}();i.ChaCha20Poly1305=y})(ru);var sd={},ds={},nu={};Object.defineProperty(nu,"__esModule",{value:!0});function gb(i){return typeof i.saveState<"u"&&typeof i.restoreState<"u"&&typeof i.cleanSavedState<"u"}nu.isSerializableHash=gb;Object.defineProperty(ds,"__esModule",{value:!0});var Zr=nu,yb=Cn,_b=Or,ad=function(){function i(t,r){this._finished=!1,this._inner=new t,this._outer=new t,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var s=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(s).clean():s.set(r);for(var o=0;o<s.length;o++)s[o]^=54;this._inner.update(s);for(var o=0;o<s.length;o++)s[o]^=106;this._outer.update(s),Zr.isSerializableHash(this._inner)&&Zr.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),_b.wipe(s)}return i.prototype.reset=function(){if(!Zr.isSerializableHash(this._inner)||!Zr.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},i.prototype.clean=function(){Zr.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Zr.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},i.prototype.update=function(t){return this._inner.update(t),this},i.prototype.finish=function(t){return this._finished?(this._outer.finish(t),this):(this._inner.finish(t),this._outer.update(t.subarray(0,this.digestLength)).finish(t),this._finished=!0,this)},i.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},i.prototype.saveState=function(){if(!Zr.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},i.prototype.restoreState=function(t){if(!Zr.isSerializableHash(this._inner)||!Zr.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(t),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},i.prototype.cleanSavedState=function(t){if(!Zr.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(t)},i}();ds.HMAC=ad;function vb(i,t,r){var s=new ad(i,t);s.update(r);var o=s.digest();return s.clean(),o}ds.hmac=vb;ds.equal=yb.equal;Object.defineProperty(sd,"__esModule",{value:!0});var Eh=ds,Dh=Or,bb=function(){function i(t,r,s,o){s===void 0&&(s=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=t,this._info=o;var l=Eh.hmac(this._hash,s,r);this._hmac=new Eh.HMAC(t,l),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return i.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(t===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),t>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},i.prototype.expand=function(t){for(var r=new Uint8Array(t),s=0;s<r.length;s++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[s]=this._buffer[this._bufpos++];return r},i.prototype.clean=function(){this._hmac.clean(),Dh.wipe(this._buffer),Dh.wipe(this._counter),this._bufpos=0},i}(),mb=sd.HKDF=bb,Ci={},Ma={},za={};Object.defineProperty(za,"__esModule",{value:!0});za.BrowserRandomSource=void 0;const Sh=65536;class wb{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const t=typeof self<"u"?self.crypto||self.msCrypto:null;t&&t.getRandomValues!==void 0&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(t);for(let s=0;s<r.length;s+=Sh)this._crypto.getRandomValues(r.subarray(s,s+Math.min(r.length-s,Sh)));return r}}za.BrowserRandomSource=wb;var qa={};Object.defineProperty(qa,"__esModule",{value:!0});qa.NodeRandomSource=void 0;const Eb=Or;class Db{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Uv<"u"){const t=jv;t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(t);if(r.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");const s=new Uint8Array(t);for(let o=0;o<s.length;o++)s[o]=r[o];return(0,Eb.wipe)(r),s}}qa.NodeRandomSource=Db;Object.defineProperty(Ma,"__esModule",{value:!0});Ma.SystemRandomSource=void 0;const Sb=za,Ob=qa;class Ib{constructor(){if(this.isAvailable=!1,this.name="",this._source=new Sb.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Ob.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)}}Ma.SystemRandomSource=Ib;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.randomStringForEntropy=i.randomString=i.randomUint32=i.randomBytes=i.defaultRandomSource=void 0;const t=Ma,r=je,s=Or;i.defaultRandomSource=new t.SystemRandomSource;function o(N,T=i.defaultRandomSource){return T.randomBytes(N)}i.randomBytes=o;function l(N=i.defaultRandomSource){const T=o(4,N),j=(0,r.readUint32LE)(T);return(0,s.wipe)(T),j}i.randomUint32=l;const w="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function y(N,T=w,j=i.defaultRandomSource){if(T.length<2)throw new Error("randomString charset is too short");if(T.length>256)throw new Error("randomString charset is too long");let G="";const z=T.length,M=256-256%z;for(;N>0;){const J=o(Math.ceil(N*256/M),j);for(let W=0;W<J.length&&N>0;W++){const oe=J[W];oe<M&&(G+=T.charAt(oe%z),N--)}(0,s.wipe)(J)}return G}i.randomString=y;function E(N,T=w,j=i.defaultRandomSource){const G=Math.ceil(N/(Math.log(T.length)/Math.LN2));return y(G,T,j)}i.randomStringForEntropy=E})(Ci);var Ba={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var t=je,r=Or;i.DIGEST_LENGTH=32,i.BLOCK_SIZE=64;var s=function(){function y(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return y.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},y.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},y.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},y.prototype.update=function(E,N){if(N===void 0&&(N=E.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var T=0;if(this._bytesHashed+=N,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&N>0;)this._buffer[this._bufferLength++]=E[T++],N--;this._bufferLength===this.blockSize&&(l(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(N>=this.blockSize&&(T=l(this._temp,this._state,E,T,N),N%=this.blockSize);N>0;)this._buffer[this._bufferLength++]=E[T++],N--;return this},y.prototype.finish=function(E){if(!this._finished){var N=this._bytesHashed,T=this._bufferLength,j=N/536870912|0,G=N<<3,z=N%64<56?64:128;this._buffer[T]=128;for(var M=T+1;M<z-8;M++)this._buffer[M]=0;t.writeUint32BE(j,this._buffer,z-8),t.writeUint32BE(G,this._buffer,z-4),l(this._temp,this._state,this._buffer,0,z),this._finished=!0}for(var M=0;M<this.digestLength/4;M++)t.writeUint32BE(this._state[M],E,M*4);return this},y.prototype.digest=function(){var E=new Uint8Array(this.digestLength);return this.finish(E),E},y.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},y.prototype.restoreState=function(E){return this._state.set(E.state),this._bufferLength=E.bufferLength,E.buffer&&this._buffer.set(E.buffer),this._bytesHashed=E.bytesHashed,this._finished=!1,this},y.prototype.cleanSavedState=function(E){r.wipe(E.state),E.buffer&&r.wipe(E.buffer),E.bufferLength=0,E.bytesHashed=0},y}();i.SHA256=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function l(y,E,N,T,j){for(;j>=64;){for(var G=E[0],z=E[1],M=E[2],J=E[3],W=E[4],oe=E[5],O=E[6],A=E[7],S=0;S<16;S++){var x=T+S*4;y[S]=t.readUint32BE(N,x)}for(var S=16;S<64;S++){var m=y[S-2],c=(m>>>17|m<<32-17)^(m>>>19|m<<32-19)^m>>>10;m=y[S-15];var d=(m>>>7|m<<32-7)^(m>>>18|m<<32-18)^m>>>3;y[S]=(c+y[S-7]|0)+(d+y[S-16]|0)}for(var S=0;S<64;S++){var c=(((W>>>6|W<<26)^(W>>>11|W<<21)^(W>>>25|W<<7))+(W&oe^~W&O)|0)+(A+(o[S]+y[S]|0)|0)|0,d=((G>>>2|G<<32-2)^(G>>>13|G<<32-13)^(G>>>22|G<<32-22))+(G&z^G&M^z&M)|0;A=O,O=oe,oe=W,W=J+c|0,J=M,M=z,z=G,G=c+d|0}E[0]+=G,E[1]+=z,E[2]+=M,E[3]+=J,E[4]+=W,E[5]+=oe,E[6]+=O,E[7]+=A,T+=64,j-=64}return T}function w(y){var E=new s;E.update(y);var N=E.digest();return E.clean(),N}i.hash=w})(Ba);var iu={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.sharedKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.scalarMultBase=i.scalarMult=i.SHARED_KEY_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=void 0;const t=Ci,r=Or;i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=32,i.SHARED_KEY_LENGTH=32;function s(S){const x=new Float64Array(16);if(S)for(let m=0;m<S.length;m++)x[m]=S[m];return x}const o=new Uint8Array(32);o[0]=9;const l=s([56129,1]);function w(S){let x=1;for(let m=0;m<16;m++){let c=S[m]+x+65535;x=Math.floor(c/65536),S[m]=c-x*65536}S[0]+=x-1+37*(x-1)}function y(S,x,m){const c=~(m-1);for(let d=0;d<16;d++){const Z=c&(S[d]^x[d]);S[d]^=Z,x[d]^=Z}}function E(S,x){const m=s(),c=s();for(let d=0;d<16;d++)c[d]=x[d];w(c),w(c),w(c);for(let d=0;d<2;d++){m[0]=c[0]-65517;for(let h=1;h<15;h++)m[h]=c[h]-65535-(m[h-1]>>16&1),m[h-1]&=65535;m[15]=c[15]-32767-(m[14]>>16&1);const Z=m[15]>>16&1;m[14]&=65535,y(c,m,1-Z)}for(let d=0;d<16;d++)S[2*d]=c[d]&255,S[2*d+1]=c[d]>>8}function N(S,x){for(let m=0;m<16;m++)S[m]=x[2*m]+(x[2*m+1]<<8);S[15]&=32767}function T(S,x,m){for(let c=0;c<16;c++)S[c]=x[c]+m[c]}function j(S,x,m){for(let c=0;c<16;c++)S[c]=x[c]-m[c]}function G(S,x,m){let c,d,Z=0,h=0,p=0,v=0,P=0,b=0,g=0,L=0,q=0,Q=0,R=0,k=0,te=0,se=0,ne=0,_e=0,he=0,be=0,X=0,Y=0,B=0,f=0,U=0,fe=0,pe=0,Oe=0,Be=0,Ve=0,Le=0,gt=0,yt=0,Me=m[0],Ie=m[1],Re=m[2],Fe=m[3],ze=m[4],Pe=m[5],Ue=m[6],Se=m[7],Ae=m[8],He=m[9],xe=m[10],ke=m[11],We=m[12],et=m[13],tt=m[14],Je=m[15];c=x[0],Z+=c*Me,h+=c*Ie,p+=c*Re,v+=c*Fe,P+=c*ze,b+=c*Pe,g+=c*Ue,L+=c*Se,q+=c*Ae,Q+=c*He,R+=c*xe,k+=c*ke,te+=c*We,se+=c*et,ne+=c*tt,_e+=c*Je,c=x[1],h+=c*Me,p+=c*Ie,v+=c*Re,P+=c*Fe,b+=c*ze,g+=c*Pe,L+=c*Ue,q+=c*Se,Q+=c*Ae,R+=c*He,k+=c*xe,te+=c*ke,se+=c*We,ne+=c*et,_e+=c*tt,he+=c*Je,c=x[2],p+=c*Me,v+=c*Ie,P+=c*Re,b+=c*Fe,g+=c*ze,L+=c*Pe,q+=c*Ue,Q+=c*Se,R+=c*Ae,k+=c*He,te+=c*xe,se+=c*ke,ne+=c*We,_e+=c*et,he+=c*tt,be+=c*Je,c=x[3],v+=c*Me,P+=c*Ie,b+=c*Re,g+=c*Fe,L+=c*ze,q+=c*Pe,Q+=c*Ue,R+=c*Se,k+=c*Ae,te+=c*He,se+=c*xe,ne+=c*ke,_e+=c*We,he+=c*et,be+=c*tt,X+=c*Je,c=x[4],P+=c*Me,b+=c*Ie,g+=c*Re,L+=c*Fe,q+=c*ze,Q+=c*Pe,R+=c*Ue,k+=c*Se,te+=c*Ae,se+=c*He,ne+=c*xe,_e+=c*ke,he+=c*We,be+=c*et,X+=c*tt,Y+=c*Je,c=x[5],b+=c*Me,g+=c*Ie,L+=c*Re,q+=c*Fe,Q+=c*ze,R+=c*Pe,k+=c*Ue,te+=c*Se,se+=c*Ae,ne+=c*He,_e+=c*xe,he+=c*ke,be+=c*We,X+=c*et,Y+=c*tt,B+=c*Je,c=x[6],g+=c*Me,L+=c*Ie,q+=c*Re,Q+=c*Fe,R+=c*ze,k+=c*Pe,te+=c*Ue,se+=c*Se,ne+=c*Ae,_e+=c*He,he+=c*xe,be+=c*ke,X+=c*We,Y+=c*et,B+=c*tt,f+=c*Je,c=x[7],L+=c*Me,q+=c*Ie,Q+=c*Re,R+=c*Fe,k+=c*ze,te+=c*Pe,se+=c*Ue,ne+=c*Se,_e+=c*Ae,he+=c*He,be+=c*xe,X+=c*ke,Y+=c*We,B+=c*et,f+=c*tt,U+=c*Je,c=x[8],q+=c*Me,Q+=c*Ie,R+=c*Re,k+=c*Fe,te+=c*ze,se+=c*Pe,ne+=c*Ue,_e+=c*Se,he+=c*Ae,be+=c*He,X+=c*xe,Y+=c*ke,B+=c*We,f+=c*et,U+=c*tt,fe+=c*Je,c=x[9],Q+=c*Me,R+=c*Ie,k+=c*Re,te+=c*Fe,se+=c*ze,ne+=c*Pe,_e+=c*Ue,he+=c*Se,be+=c*Ae,X+=c*He,Y+=c*xe,B+=c*ke,f+=c*We,U+=c*et,fe+=c*tt,pe+=c*Je,c=x[10],R+=c*Me,k+=c*Ie,te+=c*Re,se+=c*Fe,ne+=c*ze,_e+=c*Pe,he+=c*Ue,be+=c*Se,X+=c*Ae,Y+=c*He,B+=c*xe,f+=c*ke,U+=c*We,fe+=c*et,pe+=c*tt,Oe+=c*Je,c=x[11],k+=c*Me,te+=c*Ie,se+=c*Re,ne+=c*Fe,_e+=c*ze,he+=c*Pe,be+=c*Ue,X+=c*Se,Y+=c*Ae,B+=c*He,f+=c*xe,U+=c*ke,fe+=c*We,pe+=c*et,Oe+=c*tt,Be+=c*Je,c=x[12],te+=c*Me,se+=c*Ie,ne+=c*Re,_e+=c*Fe,he+=c*ze,be+=c*Pe,X+=c*Ue,Y+=c*Se,B+=c*Ae,f+=c*He,U+=c*xe,fe+=c*ke,pe+=c*We,Oe+=c*et,Be+=c*tt,Ve+=c*Je,c=x[13],se+=c*Me,ne+=c*Ie,_e+=c*Re,he+=c*Fe,be+=c*ze,X+=c*Pe,Y+=c*Ue,B+=c*Se,f+=c*Ae,U+=c*He,fe+=c*xe,pe+=c*ke,Oe+=c*We,Be+=c*et,Ve+=c*tt,Le+=c*Je,c=x[14],ne+=c*Me,_e+=c*Ie,he+=c*Re,be+=c*Fe,X+=c*ze,Y+=c*Pe,B+=c*Ue,f+=c*Se,U+=c*Ae,fe+=c*He,pe+=c*xe,Oe+=c*ke,Be+=c*We,Ve+=c*et,Le+=c*tt,gt+=c*Je,c=x[15],_e+=c*Me,he+=c*Ie,be+=c*Re,X+=c*Fe,Y+=c*ze,B+=c*Pe,f+=c*Ue,U+=c*Se,fe+=c*Ae,pe+=c*He,Oe+=c*xe,Be+=c*ke,Ve+=c*We,Le+=c*et,gt+=c*tt,yt+=c*Je,Z+=38*he,h+=38*be,p+=38*X,v+=38*Y,P+=38*B,b+=38*f,g+=38*U,L+=38*fe,q+=38*pe,Q+=38*Oe,R+=38*Be,k+=38*Ve,te+=38*Le,se+=38*gt,ne+=38*yt,d=1,c=Z+d+65535,d=Math.floor(c/65536),Z=c-d*65536,c=h+d+65535,d=Math.floor(c/65536),h=c-d*65536,c=p+d+65535,d=Math.floor(c/65536),p=c-d*65536,c=v+d+65535,d=Math.floor(c/65536),v=c-d*65536,c=P+d+65535,d=Math.floor(c/65536),P=c-d*65536,c=b+d+65535,d=Math.floor(c/65536),b=c-d*65536,c=g+d+65535,d=Math.floor(c/65536),g=c-d*65536,c=L+d+65535,d=Math.floor(c/65536),L=c-d*65536,c=q+d+65535,d=Math.floor(c/65536),q=c-d*65536,c=Q+d+65535,d=Math.floor(c/65536),Q=c-d*65536,c=R+d+65535,d=Math.floor(c/65536),R=c-d*65536,c=k+d+65535,d=Math.floor(c/65536),k=c-d*65536,c=te+d+65535,d=Math.floor(c/65536),te=c-d*65536,c=se+d+65535,d=Math.floor(c/65536),se=c-d*65536,c=ne+d+65535,d=Math.floor(c/65536),ne=c-d*65536,c=_e+d+65535,d=Math.floor(c/65536),_e=c-d*65536,Z+=d-1+37*(d-1),d=1,c=Z+d+65535,d=Math.floor(c/65536),Z=c-d*65536,c=h+d+65535,d=Math.floor(c/65536),h=c-d*65536,c=p+d+65535,d=Math.floor(c/65536),p=c-d*65536,c=v+d+65535,d=Math.floor(c/65536),v=c-d*65536,c=P+d+65535,d=Math.floor(c/65536),P=c-d*65536,c=b+d+65535,d=Math.floor(c/65536),b=c-d*65536,c=g+d+65535,d=Math.floor(c/65536),g=c-d*65536,c=L+d+65535,d=Math.floor(c/65536),L=c-d*65536,c=q+d+65535,d=Math.floor(c/65536),q=c-d*65536,c=Q+d+65535,d=Math.floor(c/65536),Q=c-d*65536,c=R+d+65535,d=Math.floor(c/65536),R=c-d*65536,c=k+d+65535,d=Math.floor(c/65536),k=c-d*65536,c=te+d+65535,d=Math.floor(c/65536),te=c-d*65536,c=se+d+65535,d=Math.floor(c/65536),se=c-d*65536,c=ne+d+65535,d=Math.floor(c/65536),ne=c-d*65536,c=_e+d+65535,d=Math.floor(c/65536),_e=c-d*65536,Z+=d-1+37*(d-1),S[0]=Z,S[1]=h,S[2]=p,S[3]=v,S[4]=P,S[5]=b,S[6]=g,S[7]=L,S[8]=q,S[9]=Q,S[10]=R,S[11]=k,S[12]=te,S[13]=se,S[14]=ne,S[15]=_e}function z(S,x){G(S,x,x)}function M(S,x){const m=s();for(let c=0;c<16;c++)m[c]=x[c];for(let c=253;c>=0;c--)z(m,m),c!==2&&c!==4&&G(m,m,x);for(let c=0;c<16;c++)S[c]=m[c]}function J(S,x){const m=new Uint8Array(32),c=new Float64Array(80),d=s(),Z=s(),h=s(),p=s(),v=s(),P=s();for(let q=0;q<31;q++)m[q]=S[q];m[31]=S[31]&127|64,m[0]&=248,N(c,x);for(let q=0;q<16;q++)Z[q]=c[q];d[0]=p[0]=1;for(let q=254;q>=0;--q){const Q=m[q>>>3]>>>(q&7)&1;y(d,Z,Q),y(h,p,Q),T(v,d,h),j(d,d,h),T(h,Z,p),j(Z,Z,p),z(p,v),z(P,d),G(d,h,d),G(h,Z,v),T(v,d,h),j(d,d,h),z(Z,d),j(h,p,P),G(d,h,l),T(d,d,p),G(h,h,d),G(d,p,P),G(p,Z,c),z(Z,v),y(d,Z,Q),y(h,p,Q)}for(let q=0;q<16;q++)c[q+16]=d[q],c[q+32]=h[q],c[q+48]=Z[q],c[q+64]=p[q];const b=c.subarray(32),g=c.subarray(16);M(b,b),G(g,g,b);const L=new Uint8Array(32);return E(L,g),L}i.scalarMult=J;function W(S){return J(S,o)}i.scalarMultBase=W;function oe(S){if(S.length!==i.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${i.SECRET_KEY_LENGTH} bytes`);const x=new Uint8Array(S);return{publicKey:W(x),secretKey:x}}i.generateKeyPairFromSeed=oe;function O(S){const x=(0,t.randomBytes)(32,S),m=oe(x);return(0,r.wipe)(x),m}i.generateKeyPair=O;function A(S,x,m=!1){if(S.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(x.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const c=J(S,x);if(m){let d=0;for(let Z=0;Z<c.length;Z++)d|=c[Z];if(d===0)throw new Error("X25519: invalid shared key")}return c}i.sharedKey=A})(iu);function su(i){return globalThis.Buffer!=null?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function od(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?su(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function qc(i,t){t||(t=i.reduce((o,l)=>o+l.length,0));const r=od(t);let s=0;for(const o of i)r.set(o,s),s+=o.length;return su(r)}function xb(i,t){if(i.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var o=0;o<i.length;o++){var l=i.charAt(o),w=l.charCodeAt(0);if(r[w]!==255)throw new TypeError(l+" is ambiguous");r[w]=o}var y=i.length,E=i.charAt(0),N=Math.log(y)/Math.log(256),T=Math.log(256)/Math.log(y);function j(M){if(M instanceof Uint8Array||(ArrayBuffer.isView(M)?M=new Uint8Array(M.buffer,M.byteOffset,M.byteLength):Array.isArray(M)&&(M=Uint8Array.from(M))),!(M instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(M.length===0)return"";for(var J=0,W=0,oe=0,O=M.length;oe!==O&&M[oe]===0;)oe++,J++;for(var A=(O-oe)*T+1>>>0,S=new Uint8Array(A);oe!==O;){for(var x=M[oe],m=0,c=A-1;(x!==0||m<W)&&c!==-1;c--,m++)x+=256*S[c]>>>0,S[c]=x%y>>>0,x=x/y>>>0;if(x!==0)throw new Error("Non-zero carry");W=m,oe++}for(var d=A-W;d!==A&&S[d]===0;)d++;for(var Z=E.repeat(J);d<A;++d)Z+=i.charAt(S[d]);return Z}function G(M){if(typeof M!="string")throw new TypeError("Expected String");if(M.length===0)return new Uint8Array;var J=0;if(M[J]!==" "){for(var W=0,oe=0;M[J]===E;)W++,J++;for(var O=(M.length-J)*N+1>>>0,A=new Uint8Array(O);M[J];){var S=r[M.charCodeAt(J)];if(S===255)return;for(var x=0,m=O-1;(S!==0||x<oe)&&m!==-1;m--,x++)S+=y*A[m]>>>0,A[m]=S%256>>>0,S=S/256>>>0;if(S!==0)throw new Error("Non-zero carry");oe=x,J++}if(M[J]!==" "){for(var c=O-oe;c!==O&&A[c]===0;)c++;for(var d=new Uint8Array(W+(O-c)),Z=W;c!==O;)d[Z++]=A[c++];return d}}}function z(M){var J=G(M);if(J)return J;throw new Error(`Non-${t} character`)}return{encode:j,decodeUnsafe:G,decode:z}}var Pb=xb,Ab=Pb;const Cb=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},Tb=i=>new TextEncoder().encode(i),Nb=i=>new TextDecoder().decode(i);class Rb{constructor(t,r,s){this.name=t,this.prefix=r,this.baseEncode=s}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Fb{constructor(t,r,s){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return cd(this,t)}}class Ub{constructor(t){this.decoders=t}or(t){return cd(this,t)}decode(t){const r=t[0],s=this.decoders[r];if(s)return s.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const cd=(i,t)=>new Ub({...i.decoders||{[i.prefix]:i},...t.decoders||{[t.prefix]:t}});class jb{constructor(t,r,s,o){this.name=t,this.prefix=r,this.baseEncode=s,this.baseDecode=o,this.encoder=new Rb(t,r,s),this.decoder=new Fb(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Ha=({name:i,prefix:t,encode:r,decode:s})=>new jb(i,t,r,s),ps=({prefix:i,name:t,alphabet:r})=>{const{encode:s,decode:o}=Ab(r,t);return Ha({prefix:i,name:t,encode:s,decode:l=>Cb(o(l))})},Lb=(i,t,r,s)=>{const o={};for(let T=0;T<t.length;++T)o[t[T]]=T;let l=i.length;for(;i[l-1]==="=";)--l;const w=new Uint8Array(l*r/8|0);let y=0,E=0,N=0;for(let T=0;T<l;++T){const j=o[i[T]];if(j===void 0)throw new SyntaxError(`Non-${s} character`);E=E<<r|j,y+=r,y>=8&&(y-=8,w[N++]=255&E>>y)}if(y>=r||255&E<<8-y)throw new SyntaxError("Unexpected end of data");return w},$b=(i,t,r)=>{const s=t[t.length-1]==="=",o=(1<<r)-1;let l="",w=0,y=0;for(let E=0;E<i.length;++E)for(y=y<<8|i[E],w+=8;w>r;)w-=r,l+=t[o&y>>w];if(w&&(l+=t[o&y<<r-w]),s)for(;l.length*r&7;)l+="=";return l},Yt=({name:i,prefix:t,bitsPerChar:r,alphabet:s})=>Ha({prefix:t,name:i,encode(o){return $b(o,s,r)},decode(o){return Lb(o,s,r,i)}}),Mb=Ha({prefix:"\0",name:"identity",encode:i=>Nb(i),decode:i=>Tb(i)}),zb=Object.freeze(Object.defineProperty({__proto__:null,identity:Mb},Symbol.toStringTag,{value:"Module"})),qb=Yt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Bb=Object.freeze(Object.defineProperty({__proto__:null,base2:qb},Symbol.toStringTag,{value:"Module"})),Hb=Yt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Kb=Object.freeze(Object.defineProperty({__proto__:null,base8:Hb},Symbol.toStringTag,{value:"Module"})),Vb=ps({prefix:"9",name:"base10",alphabet:"0123456789"}),kb=Object.freeze(Object.defineProperty({__proto__:null,base10:Vb},Symbol.toStringTag,{value:"Module"})),Gb=Yt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Wb=Yt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Yb=Object.freeze(Object.defineProperty({__proto__:null,base16:Gb,base16upper:Wb},Symbol.toStringTag,{value:"Module"})),Jb=Yt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Xb=Yt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Zb=Yt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Qb=Yt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),em=Yt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),tm=Yt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),rm=Yt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),nm=Yt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),im=Yt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),sm=Object.freeze(Object.defineProperty({__proto__:null,base32:Jb,base32hex:em,base32hexpad:rm,base32hexpadupper:nm,base32hexupper:tm,base32pad:Zb,base32padupper:Qb,base32upper:Xb,base32z:im},Symbol.toStringTag,{value:"Module"})),am=ps({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),om=ps({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),cm=Object.freeze(Object.defineProperty({__proto__:null,base36:am,base36upper:om},Symbol.toStringTag,{value:"Module"})),um=ps({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),fm=ps({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),hm=Object.freeze(Object.defineProperty({__proto__:null,base58btc:um,base58flickr:fm},Symbol.toStringTag,{value:"Module"})),lm=Yt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),dm=Yt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),pm=Yt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),gm=Yt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),ym=Object.freeze(Object.defineProperty({__proto__:null,base64:lm,base64pad:dm,base64url:pm,base64urlpad:gm},Symbol.toStringTag,{value:"Module"})),ud=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),_m=ud.reduce((i,t,r)=>(i[r]=t,i),[]),vm=ud.reduce((i,t,r)=>(i[t.codePointAt(0)]=r,i),[]);function bm(i){return i.reduce((t,r)=>(t+=_m[r],t),"")}function mm(i){const t=[];for(const r of i){const s=vm[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(s)}return new Uint8Array(t)}const wm=Ha({prefix:"ðŸš€",name:"base256emoji",encode:bm,decode:mm}),Em=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:wm},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Oh={...zb,...Bb,...Kb,...kb,...Yb,...sm,...cm,...hm,...ym,...Em};function fd(i,t,r,s){return{name:i,prefix:t,encoder:{name:i,prefix:t,encode:r},decoder:{decode:s}}}const Ih=fd("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),vc=fd("ascii","a",i=>{let t="a";for(let r=0;r<i.length;r++)t+=String.fromCharCode(i[r]);return t},i=>{i=i.substring(1);const t=od(i.length);for(let r=0;r<i.length;r++)t[r]=i.charCodeAt(r);return t}),hd={utf8:Ih,"utf-8":Ih,hex:Oh.base16,latin1:vc,ascii:vc,binary:vc,...Oh};function vr(i,t="utf8"){const r=hd[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?su(globalThis.Buffer.from(i,"utf-8")):r.decoder.decode(`${r.prefix}${i}`)}function fr(i,t="utf8"){const r=hd[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(i.buffer,i.byteOffset,i.byteLength).toString("utf8"):r.encoder.encode(i).substring(1)}var De={},Pi={},Dm={get exports(){return Pi},set exports(i){Pi=i}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(i){var t,r,s,o,l,w,y,E,N,T,j,G,z,M,J,W,oe,O,A,S,x,m,c;(function(d){var Z=typeof cr=="object"?cr:typeof self=="object"?self:typeof this=="object"?this:{};d(h(Z,h(i.exports)));function h(p,v){return p!==Z&&(typeof Object.create=="function"?Object.defineProperty(p,"__esModule",{value:!0}):p.__esModule=!0),function(P,b){return p[P]=v?v(P,b):b}}})(function(d){var Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var v in p)p.hasOwnProperty(v)&&(h[v]=p[v])};t=function(h,p){Z(h,p);function v(){this.constructor=h}h.prototype=p===null?Object.create(p):(v.prototype=p.prototype,new v)},r=Object.assign||function(h){for(var p,v=1,P=arguments.length;v<P;v++){p=arguments[v];for(var b in p)Object.prototype.hasOwnProperty.call(p,b)&&(h[b]=p[b])}return h},s=function(h,p){var v={};for(var P in h)Object.prototype.hasOwnProperty.call(h,P)&&p.indexOf(P)<0&&(v[P]=h[P]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,P=Object.getOwnPropertySymbols(h);b<P.length;b++)p.indexOf(P[b])<0&&Object.prototype.propertyIsEnumerable.call(h,P[b])&&(v[P[b]]=h[P[b]]);return v},o=function(h,p,v,P){var b=arguments.length,g=b<3?p:P===null?P=Object.getOwnPropertyDescriptor(p,v):P,L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(h,p,v,P);else for(var q=h.length-1;q>=0;q--)(L=h[q])&&(g=(b<3?L(g):b>3?L(p,v,g):L(p,v))||g);return b>3&&g&&Object.defineProperty(p,v,g),g},l=function(h,p){return function(v,P){p(v,P,h)}},w=function(h,p){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(h,p)},y=function(h,p,v,P){function b(g){return g instanceof v?g:new v(function(L){L(g)})}return new(v||(v=Promise))(function(g,L){function q(k){try{R(P.next(k))}catch(te){L(te)}}function Q(k){try{R(P.throw(k))}catch(te){L(te)}}function R(k){k.done?g(k.value):b(k.value).then(q,Q)}R((P=P.apply(h,p||[])).next())})},E=function(h,p){var v={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},P,b,g,L;return L={next:q(0),throw:q(1),return:q(2)},typeof Symbol=="function"&&(L[Symbol.iterator]=function(){return this}),L;function q(R){return function(k){return Q([R,k])}}function Q(R){if(P)throw new TypeError("Generator is already executing.");for(;v;)try{if(P=1,b&&(g=R[0]&2?b.return:R[0]?b.throw||((g=b.return)&&g.call(b),0):b.next)&&!(g=g.call(b,R[1])).done)return g;switch(b=0,g&&(R=[R[0]&2,g.value]),R[0]){case 0:case 1:g=R;break;case 4:return v.label++,{value:R[1],done:!1};case 5:v.label++,b=R[1],R=[0];continue;case 7:R=v.ops.pop(),v.trys.pop();continue;default:if(g=v.trys,!(g=g.length>0&&g[g.length-1])&&(R[0]===6||R[0]===2)){v=0;continue}if(R[0]===3&&(!g||R[1]>g[0]&&R[1]<g[3])){v.label=R[1];break}if(R[0]===6&&v.label<g[1]){v.label=g[1],g=R;break}if(g&&v.label<g[2]){v.label=g[2],v.ops.push(R);break}g[2]&&v.ops.pop(),v.trys.pop();continue}R=p.call(h,v)}catch(k){R=[6,k],b=0}finally{P=g=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}},c=function(h,p,v,P){P===void 0&&(P=v),h[P]=p[v]},N=function(h,p){for(var v in h)v!=="default"&&!p.hasOwnProperty(v)&&(p[v]=h[v])},T=function(h){var p=typeof Symbol=="function"&&Symbol.iterator,v=p&&h[p],P=0;if(v)return v.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&P>=h.length&&(h=void 0),{value:h&&h[P++],done:!h}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},j=function(h,p){var v=typeof Symbol=="function"&&h[Symbol.iterator];if(!v)return h;var P=v.call(h),b,g=[],L;try{for(;(p===void 0||p-- >0)&&!(b=P.next()).done;)g.push(b.value)}catch(q){L={error:q}}finally{try{b&&!b.done&&(v=P.return)&&v.call(P)}finally{if(L)throw L.error}}return g},G=function(){for(var h=[],p=0;p<arguments.length;p++)h=h.concat(j(arguments[p]));return h},z=function(){for(var h=0,p=0,v=arguments.length;p<v;p++)h+=arguments[p].length;for(var P=Array(h),b=0,p=0;p<v;p++)for(var g=arguments[p],L=0,q=g.length;L<q;L++,b++)P[b]=g[L];return P},M=function(h){return this instanceof M?(this.v=h,this):new M(h)},J=function(h,p,v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P=v.apply(h,p||[]),b,g=[];return b={},L("next"),L("throw"),L("return"),b[Symbol.asyncIterator]=function(){return this},b;function L(se){P[se]&&(b[se]=function(ne){return new Promise(function(_e,he){g.push([se,ne,_e,he])>1||q(se,ne)})})}function q(se,ne){try{Q(P[se](ne))}catch(_e){te(g[0][3],_e)}}function Q(se){se.value instanceof M?Promise.resolve(se.value.v).then(R,k):te(g[0][2],se)}function R(se){q("next",se)}function k(se){q("throw",se)}function te(se,ne){se(ne),g.shift(),g.length&&q(g[0][0],g[0][1])}},W=function(h){var p,v;return p={},P("next"),P("throw",function(b){throw b}),P("return"),p[Symbol.iterator]=function(){return this},p;function P(b,g){p[b]=h[b]?function(L){return(v=!v)?{value:M(h[b](L)),done:b==="return"}:g?g(L):L}:g}},oe=function(h){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var p=h[Symbol.asyncIterator],v;return p?p.call(h):(h=typeof T=="function"?T(h):h[Symbol.iterator](),v={},P("next"),P("throw"),P("return"),v[Symbol.asyncIterator]=function(){return this},v);function P(g){v[g]=h[g]&&function(L){return new Promise(function(q,Q){L=h[g](L),b(q,Q,L.done,L.value)})}}function b(g,L,q,Q){Promise.resolve(Q).then(function(R){g({value:R,done:q})},L)}},O=function(h,p){return Object.defineProperty?Object.defineProperty(h,"raw",{value:p}):h.raw=p,h},A=function(h){if(h&&h.__esModule)return h;var p={};if(h!=null)for(var v in h)Object.hasOwnProperty.call(h,v)&&(p[v]=h[v]);return p.default=h,p},S=function(h){return h&&h.__esModule?h:{default:h}},x=function(h,p){if(!p.has(h))throw new TypeError("attempted to get private field on non-instance");return p.get(h)},m=function(h,p,v){if(!p.has(h))throw new TypeError("attempted to set private field on non-instance");return p.set(h,v),v},d("__extends",t),d("__assign",r),d("__rest",s),d("__decorate",o),d("__param",l),d("__metadata",w),d("__awaiter",y),d("__generator",E),d("__exportStar",N),d("__createBinding",c),d("__values",T),d("__read",j),d("__spread",G),d("__spreadArrays",z),d("__await",M),d("__asyncGenerator",J),d("__asyncDelegator",W),d("__asyncValues",oe),d("__makeTemplateObject",O),d("__importStar",A),d("__importDefault",S),d("__classPrivateFieldGet",x),d("__classPrivateFieldSet",m)})})(Dm);var bc={},Qi={},xh;function Sm(){if(xh)return Qi;xh=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.delay=void 0;function i(t){return new Promise(r=>{setTimeout(()=>{r(!0)},t)})}return Qi.delay=i,Qi}var kn={},mc={},Gn={},Ph;function Om(){return Ph||(Ph=1,Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.ONE_THOUSAND=Gn.ONE_HUNDRED=void 0,Gn.ONE_HUNDRED=100,Gn.ONE_THOUSAND=1e3),Gn}var wc={},Ah;function Im(){return Ah||(Ah=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ONE_YEAR=i.FOUR_WEEKS=i.THREE_WEEKS=i.TWO_WEEKS=i.ONE_WEEK=i.THIRTY_DAYS=i.SEVEN_DAYS=i.FIVE_DAYS=i.THREE_DAYS=i.ONE_DAY=i.TWENTY_FOUR_HOURS=i.TWELVE_HOURS=i.SIX_HOURS=i.THREE_HOURS=i.ONE_HOUR=i.SIXTY_MINUTES=i.THIRTY_MINUTES=i.TEN_MINUTES=i.FIVE_MINUTES=i.ONE_MINUTE=i.SIXTY_SECONDS=i.THIRTY_SECONDS=i.TEN_SECONDS=i.FIVE_SECONDS=i.ONE_SECOND=void 0,i.ONE_SECOND=1,i.FIVE_SECONDS=5,i.TEN_SECONDS=10,i.THIRTY_SECONDS=30,i.SIXTY_SECONDS=60,i.ONE_MINUTE=i.SIXTY_SECONDS,i.FIVE_MINUTES=i.ONE_MINUTE*5,i.TEN_MINUTES=i.ONE_MINUTE*10,i.THIRTY_MINUTES=i.ONE_MINUTE*30,i.SIXTY_MINUTES=i.ONE_MINUTE*60,i.ONE_HOUR=i.SIXTY_MINUTES,i.THREE_HOURS=i.ONE_HOUR*3,i.SIX_HOURS=i.ONE_HOUR*6,i.TWELVE_HOURS=i.ONE_HOUR*12,i.TWENTY_FOUR_HOURS=i.ONE_HOUR*24,i.ONE_DAY=i.TWENTY_FOUR_HOURS,i.THREE_DAYS=i.ONE_DAY*3,i.FIVE_DAYS=i.ONE_DAY*5,i.SEVEN_DAYS=i.ONE_DAY*7,i.THIRTY_DAYS=i.ONE_DAY*30,i.ONE_WEEK=i.SEVEN_DAYS,i.TWO_WEEKS=i.ONE_WEEK*2,i.THREE_WEEKS=i.ONE_WEEK*3,i.FOUR_WEEKS=i.ONE_WEEK*4,i.ONE_YEAR=i.ONE_DAY*365}(wc)),wc}var Ch;function ld(){return Ch||(Ch=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const t=Pi;t.__exportStar(Om(),i),t.__exportStar(Im(),i)}(mc)),mc}var Th;function xm(){if(Th)return kn;Th=1,Object.defineProperty(kn,"__esModule",{value:!0}),kn.fromMiliseconds=kn.toMiliseconds=void 0;const i=ld();function t(s){return s*i.ONE_THOUSAND}kn.toMiliseconds=t;function r(s){return Math.floor(s/i.ONE_THOUSAND)}return kn.fromMiliseconds=r,kn}var Nh;function Pm(){return Nh||(Nh=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const t=Pi;t.__exportStar(Sm(),i),t.__exportStar(xm(),i)}(bc)),bc}var Si={},Rh;function Am(){if(Rh)return Si;Rh=1,Object.defineProperty(Si,"__esModule",{value:!0}),Si.Watch=void 0;class i{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const s=this.get(r);if(typeof s.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const o=Date.now()-s.started;this.timestamps.set(r,{started:s.started,elapsed:o})}get(r){const s=this.timestamps.get(r);if(typeof s>"u")throw new Error(`No timestamp found for label: ${r}`);return s}elapsed(r){const s=this.get(r);return s.elapsed||Date.now()-s.started}}return Si.Watch=i,Si.default=i,Si}var Ec={},es={},Fh;function Cm(){if(Fh)return es;Fh=1,Object.defineProperty(es,"__esModule",{value:!0}),es.IWatch=void 0;class i{}return es.IWatch=i,es}var Uh;function Tm(){return Uh||(Uh=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),Pi.__exportStar(Cm(),i)}(Ec)),Ec}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const t=Pi;t.__exportStar(Pm(),i),t.__exportStar(Am(),i),t.__exportStar(Tm(),i),t.__exportStar(ld(),i)})(De);var dd=function(i,t){for(var r={},s=Object.keys(i),o=Array.isArray(t),l=0;l<s.length;l++){var w=s[l],y=i[w];(o?t.indexOf(w)!==-1:t(w,y,i))&&(r[w]=y)}return r};const Nm={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};var Ka={},Na={},Rm={get exports(){return Na},set exports(i){Na=i}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(i){var t,r,s,o,l,w,y,E,N,T,j,G,z,M,J,W,oe,O,A,S,x,m,c;(function(d){var Z=typeof cr=="object"?cr:typeof self=="object"?self:typeof this=="object"?this:{};d(h(Z,h(i.exports)));function h(p,v){return p!==Z&&(typeof Object.create=="function"?Object.defineProperty(p,"__esModule",{value:!0}):p.__esModule=!0),function(P,b){return p[P]=v?v(P,b):b}}})(function(d){var Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var v in p)p.hasOwnProperty(v)&&(h[v]=p[v])};t=function(h,p){Z(h,p);function v(){this.constructor=h}h.prototype=p===null?Object.create(p):(v.prototype=p.prototype,new v)},r=Object.assign||function(h){for(var p,v=1,P=arguments.length;v<P;v++){p=arguments[v];for(var b in p)Object.prototype.hasOwnProperty.call(p,b)&&(h[b]=p[b])}return h},s=function(h,p){var v={};for(var P in h)Object.prototype.hasOwnProperty.call(h,P)&&p.indexOf(P)<0&&(v[P]=h[P]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,P=Object.getOwnPropertySymbols(h);b<P.length;b++)p.indexOf(P[b])<0&&Object.prototype.propertyIsEnumerable.call(h,P[b])&&(v[P[b]]=h[P[b]]);return v},o=function(h,p,v,P){var b=arguments.length,g=b<3?p:P===null?P=Object.getOwnPropertyDescriptor(p,v):P,L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(h,p,v,P);else for(var q=h.length-1;q>=0;q--)(L=h[q])&&(g=(b<3?L(g):b>3?L(p,v,g):L(p,v))||g);return b>3&&g&&Object.defineProperty(p,v,g),g},l=function(h,p){return function(v,P){p(v,P,h)}},w=function(h,p){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(h,p)},y=function(h,p,v,P){function b(g){return g instanceof v?g:new v(function(L){L(g)})}return new(v||(v=Promise))(function(g,L){function q(k){try{R(P.next(k))}catch(te){L(te)}}function Q(k){try{R(P.throw(k))}catch(te){L(te)}}function R(k){k.done?g(k.value):b(k.value).then(q,Q)}R((P=P.apply(h,p||[])).next())})},E=function(h,p){var v={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},P,b,g,L;return L={next:q(0),throw:q(1),return:q(2)},typeof Symbol=="function"&&(L[Symbol.iterator]=function(){return this}),L;function q(R){return function(k){return Q([R,k])}}function Q(R){if(P)throw new TypeError("Generator is already executing.");for(;v;)try{if(P=1,b&&(g=R[0]&2?b.return:R[0]?b.throw||((g=b.return)&&g.call(b),0):b.next)&&!(g=g.call(b,R[1])).done)return g;switch(b=0,g&&(R=[R[0]&2,g.value]),R[0]){case 0:case 1:g=R;break;case 4:return v.label++,{value:R[1],done:!1};case 5:v.label++,b=R[1],R=[0];continue;case 7:R=v.ops.pop(),v.trys.pop();continue;default:if(g=v.trys,!(g=g.length>0&&g[g.length-1])&&(R[0]===6||R[0]===2)){v=0;continue}if(R[0]===3&&(!g||R[1]>g[0]&&R[1]<g[3])){v.label=R[1];break}if(R[0]===6&&v.label<g[1]){v.label=g[1],g=R;break}if(g&&v.label<g[2]){v.label=g[2],v.ops.push(R);break}g[2]&&v.ops.pop(),v.trys.pop();continue}R=p.call(h,v)}catch(k){R=[6,k],b=0}finally{P=g=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}},c=function(h,p,v,P){P===void 0&&(P=v),h[P]=p[v]},N=function(h,p){for(var v in h)v!=="default"&&!p.hasOwnProperty(v)&&(p[v]=h[v])},T=function(h){var p=typeof Symbol=="function"&&Symbol.iterator,v=p&&h[p],P=0;if(v)return v.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&P>=h.length&&(h=void 0),{value:h&&h[P++],done:!h}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},j=function(h,p){var v=typeof Symbol=="function"&&h[Symbol.iterator];if(!v)return h;var P=v.call(h),b,g=[],L;try{for(;(p===void 0||p-- >0)&&!(b=P.next()).done;)g.push(b.value)}catch(q){L={error:q}}finally{try{b&&!b.done&&(v=P.return)&&v.call(P)}finally{if(L)throw L.error}}return g},G=function(){for(var h=[],p=0;p<arguments.length;p++)h=h.concat(j(arguments[p]));return h},z=function(){for(var h=0,p=0,v=arguments.length;p<v;p++)h+=arguments[p].length;for(var P=Array(h),b=0,p=0;p<v;p++)for(var g=arguments[p],L=0,q=g.length;L<q;L++,b++)P[b]=g[L];return P},M=function(h){return this instanceof M?(this.v=h,this):new M(h)},J=function(h,p,v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P=v.apply(h,p||[]),b,g=[];return b={},L("next"),L("throw"),L("return"),b[Symbol.asyncIterator]=function(){return this},b;function L(se){P[se]&&(b[se]=function(ne){return new Promise(function(_e,he){g.push([se,ne,_e,he])>1||q(se,ne)})})}function q(se,ne){try{Q(P[se](ne))}catch(_e){te(g[0][3],_e)}}function Q(se){se.value instanceof M?Promise.resolve(se.value.v).then(R,k):te(g[0][2],se)}function R(se){q("next",se)}function k(se){q("throw",se)}function te(se,ne){se(ne),g.shift(),g.length&&q(g[0][0],g[0][1])}},W=function(h){var p,v;return p={},P("next"),P("throw",function(b){throw b}),P("return"),p[Symbol.iterator]=function(){return this},p;function P(b,g){p[b]=h[b]?function(L){return(v=!v)?{value:M(h[b](L)),done:b==="return"}:g?g(L):L}:g}},oe=function(h){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var p=h[Symbol.asyncIterator],v;return p?p.call(h):(h=typeof T=="function"?T(h):h[Symbol.iterator](),v={},P("next"),P("throw"),P("return"),v[Symbol.asyncIterator]=function(){return this},v);function P(g){v[g]=h[g]&&function(L){return new Promise(function(q,Q){L=h[g](L),b(q,Q,L.done,L.value)})}}function b(g,L,q,Q){Promise.resolve(Q).then(function(R){g({value:R,done:q})},L)}},O=function(h,p){return Object.defineProperty?Object.defineProperty(h,"raw",{value:p}):h.raw=p,h},A=function(h){if(h&&h.__esModule)return h;var p={};if(h!=null)for(var v in h)Object.hasOwnProperty.call(h,v)&&(p[v]=h[v]);return p.default=h,p},S=function(h){return h&&h.__esModule?h:{default:h}},x=function(h,p){if(!p.has(h))throw new TypeError("attempted to get private field on non-instance");return p.get(h)},m=function(h,p,v){if(!p.has(h))throw new TypeError("attempted to set private field on non-instance");return p.set(h,v),v},d("__extends",t),d("__assign",r),d("__rest",s),d("__decorate",o),d("__param",l),d("__metadata",w),d("__awaiter",y),d("__generator",E),d("__exportStar",N),d("__createBinding",c),d("__values",T),d("__read",j),d("__spread",G),d("__spreadArrays",z),d("__await",M),d("__asyncGenerator",J),d("__asyncDelegator",W),d("__asyncValues",oe),d("__makeTemplateObject",O),d("__importStar",A),d("__importDefault",S),d("__classPrivateFieldGet",x),d("__classPrivateFieldSet",m)})})(Rm);var gs={};Object.defineProperty(gs,"__esModule",{value:!0});function Fm(i){if(typeof i!="string")throw new Error(`Cannot safe json parse value of type ${typeof i}`);try{return JSON.parse(i)}catch{return i}}gs.safeJsonParse=Fm;function Um(i){return typeof i=="string"?i:JSON.stringify(i,(t,r)=>typeof r>"u"?null:r)}gs.safeJsonStringify=Um;var Ra={},Dc={get exports(){return Ra},set exports(i){Ra=i}},jh;function jm(){return jh||(jh=1,function(){let i;function t(){}i=t,i.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},i.prototype.setItem=function(r,s){this[r]=String(s)},i.prototype.removeItem=function(r){delete this[r]},i.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(s){r[s]=void 0,delete r[s]})},i.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},i.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof cr<"u"&&cr.localStorage?Dc.exports=cr.localStorage:typeof window<"u"&&window.localStorage?Dc.exports=window.localStorage:Dc.exports=new t}()),Ra}var Sc={},ts={},Lh;function Lm(){if(Lh)return ts;Lh=1,Object.defineProperty(ts,"__esModule",{value:!0}),ts.IKeyValueStorage=void 0;class i{}return ts.IKeyValueStorage=i,ts}var rs={},$h;function $m(){if($h)return rs;$h=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.parseEntry=void 0;const i=gs;function t(r){var s;return[r[0],i.safeJsonParse((s=r[1])!==null&&s!==void 0?s:"")]}return rs.parseEntry=t,rs}var Mh;function Mm(){return Mh||(Mh=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const t=Na;t.__exportStar(Lm(),i),t.__exportStar($m(),i)}(Sc)),Sc}Object.defineProperty(Ka,"__esModule",{value:!0});Ka.KeyValueStorage=void 0;const Oi=Na,zh=gs,zm=Oi.__importDefault(jm()),qm=Mm();class pd{constructor(){this.localStorage=zm.default}getKeys(){return Oi.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return Oi.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(qm.parseEntry)})}getItem(t){return Oi.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(t);if(r!==null)return zh.safeJsonParse(r)})}setItem(t,r){return Oi.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(t,zh.safeJsonStringify(r))})}removeItem(t){return Oi.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(t)})}}Ka.KeyValueStorage=pd;var Bm=Ka.default=pd,ys={},Ai={},Hm={get exports(){return Ai},set exports(i){Ai=i}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(i){var t,r,s,o,l,w,y,E,N,T,j,G,z,M,J,W,oe,O,A,S,x,m,c;(function(d){var Z=typeof cr=="object"?cr:typeof self=="object"?self:typeof this=="object"?this:{};d(h(Z,h(i.exports)));function h(p,v){return p!==Z&&(typeof Object.create=="function"?Object.defineProperty(p,"__esModule",{value:!0}):p.__esModule=!0),function(P,b){return p[P]=v?v(P,b):b}}})(function(d){var Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var v in p)p.hasOwnProperty(v)&&(h[v]=p[v])};t=function(h,p){Z(h,p);function v(){this.constructor=h}h.prototype=p===null?Object.create(p):(v.prototype=p.prototype,new v)},r=Object.assign||function(h){for(var p,v=1,P=arguments.length;v<P;v++){p=arguments[v];for(var b in p)Object.prototype.hasOwnProperty.call(p,b)&&(h[b]=p[b])}return h},s=function(h,p){var v={};for(var P in h)Object.prototype.hasOwnProperty.call(h,P)&&p.indexOf(P)<0&&(v[P]=h[P]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,P=Object.getOwnPropertySymbols(h);b<P.length;b++)p.indexOf(P[b])<0&&Object.prototype.propertyIsEnumerable.call(h,P[b])&&(v[P[b]]=h[P[b]]);return v},o=function(h,p,v,P){var b=arguments.length,g=b<3?p:P===null?P=Object.getOwnPropertyDescriptor(p,v):P,L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(h,p,v,P);else for(var q=h.length-1;q>=0;q--)(L=h[q])&&(g=(b<3?L(g):b>3?L(p,v,g):L(p,v))||g);return b>3&&g&&Object.defineProperty(p,v,g),g},l=function(h,p){return function(v,P){p(v,P,h)}},w=function(h,p){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(h,p)},y=function(h,p,v,P){function b(g){return g instanceof v?g:new v(function(L){L(g)})}return new(v||(v=Promise))(function(g,L){function q(k){try{R(P.next(k))}catch(te){L(te)}}function Q(k){try{R(P.throw(k))}catch(te){L(te)}}function R(k){k.done?g(k.value):b(k.value).then(q,Q)}R((P=P.apply(h,p||[])).next())})},E=function(h,p){var v={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},P,b,g,L;return L={next:q(0),throw:q(1),return:q(2)},typeof Symbol=="function"&&(L[Symbol.iterator]=function(){return this}),L;function q(R){return function(k){return Q([R,k])}}function Q(R){if(P)throw new TypeError("Generator is already executing.");for(;v;)try{if(P=1,b&&(g=R[0]&2?b.return:R[0]?b.throw||((g=b.return)&&g.call(b),0):b.next)&&!(g=g.call(b,R[1])).done)return g;switch(b=0,g&&(R=[R[0]&2,g.value]),R[0]){case 0:case 1:g=R;break;case 4:return v.label++,{value:R[1],done:!1};case 5:v.label++,b=R[1],R=[0];continue;case 7:R=v.ops.pop(),v.trys.pop();continue;default:if(g=v.trys,!(g=g.length>0&&g[g.length-1])&&(R[0]===6||R[0]===2)){v=0;continue}if(R[0]===3&&(!g||R[1]>g[0]&&R[1]<g[3])){v.label=R[1];break}if(R[0]===6&&v.label<g[1]){v.label=g[1],g=R;break}if(g&&v.label<g[2]){v.label=g[2],v.ops.push(R);break}g[2]&&v.ops.pop(),v.trys.pop();continue}R=p.call(h,v)}catch(k){R=[6,k],b=0}finally{P=g=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}},c=function(h,p,v,P){P===void 0&&(P=v),h[P]=p[v]},N=function(h,p){for(var v in h)v!=="default"&&!p.hasOwnProperty(v)&&(p[v]=h[v])},T=function(h){var p=typeof Symbol=="function"&&Symbol.iterator,v=p&&h[p],P=0;if(v)return v.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&P>=h.length&&(h=void 0),{value:h&&h[P++],done:!h}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},j=function(h,p){var v=typeof Symbol=="function"&&h[Symbol.iterator];if(!v)return h;var P=v.call(h),b,g=[],L;try{for(;(p===void 0||p-- >0)&&!(b=P.next()).done;)g.push(b.value)}catch(q){L={error:q}}finally{try{b&&!b.done&&(v=P.return)&&v.call(P)}finally{if(L)throw L.error}}return g},G=function(){for(var h=[],p=0;p<arguments.length;p++)h=h.concat(j(arguments[p]));return h},z=function(){for(var h=0,p=0,v=arguments.length;p<v;p++)h+=arguments[p].length;for(var P=Array(h),b=0,p=0;p<v;p++)for(var g=arguments[p],L=0,q=g.length;L<q;L++,b++)P[b]=g[L];return P},M=function(h){return this instanceof M?(this.v=h,this):new M(h)},J=function(h,p,v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P=v.apply(h,p||[]),b,g=[];return b={},L("next"),L("throw"),L("return"),b[Symbol.asyncIterator]=function(){return this},b;function L(se){P[se]&&(b[se]=function(ne){return new Promise(function(_e,he){g.push([se,ne,_e,he])>1||q(se,ne)})})}function q(se,ne){try{Q(P[se](ne))}catch(_e){te(g[0][3],_e)}}function Q(se){se.value instanceof M?Promise.resolve(se.value.v).then(R,k):te(g[0][2],se)}function R(se){q("next",se)}function k(se){q("throw",se)}function te(se,ne){se(ne),g.shift(),g.length&&q(g[0][0],g[0][1])}},W=function(h){var p,v;return p={},P("next"),P("throw",function(b){throw b}),P("return"),p[Symbol.iterator]=function(){return this},p;function P(b,g){p[b]=h[b]?function(L){return(v=!v)?{value:M(h[b](L)),done:b==="return"}:g?g(L):L}:g}},oe=function(h){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var p=h[Symbol.asyncIterator],v;return p?p.call(h):(h=typeof T=="function"?T(h):h[Symbol.iterator](),v={},P("next"),P("throw"),P("return"),v[Symbol.asyncIterator]=function(){return this},v);function P(g){v[g]=h[g]&&function(L){return new Promise(function(q,Q){L=h[g](L),b(q,Q,L.done,L.value)})}}function b(g,L,q,Q){Promise.resolve(Q).then(function(R){g({value:R,done:q})},L)}},O=function(h,p){return Object.defineProperty?Object.defineProperty(h,"raw",{value:p}):h.raw=p,h},A=function(h){if(h&&h.__esModule)return h;var p={};if(h!=null)for(var v in h)Object.hasOwnProperty.call(h,v)&&(p[v]=h[v]);return p.default=h,p},S=function(h){return h&&h.__esModule?h:{default:h}},x=function(h,p){if(!p.has(h))throw new TypeError("attempted to get private field on non-instance");return p.get(h)},m=function(h,p,v){if(!p.has(h))throw new TypeError("attempted to set private field on non-instance");return p.set(h,v),v},d("__extends",t),d("__assign",r),d("__rest",s),d("__decorate",o),d("__param",l),d("__metadata",w),d("__awaiter",y),d("__generator",E),d("__exportStar",N),d("__createBinding",c),d("__values",T),d("__read",j),d("__spread",G),d("__spreadArrays",z),d("__await",M),d("__asyncGenerator",J),d("__asyncDelegator",W),d("__asyncValues",oe),d("__makeTemplateObject",O),d("__importStar",A),d("__importDefault",S),d("__classPrivateFieldGet",x),d("__classPrivateFieldSet",m)})})(Hm);var ns={},Oc={},is={};class Qn{}const Km=Object.freeze(Object.defineProperty({__proto__:null,IEvents:Qn},Symbol.toStringTag,{value:"Module"})),Vm=Lv(Km);var qh;function km(){if(qh)return is;qh=1,Object.defineProperty(is,"__esModule",{value:!0}),is.IHeartBeat=void 0;const i=Vm;class t extends i.IEvents{constructor(s){super()}}return is.IHeartBeat=t,is}var Bh;function gd(){return Bh||(Bh=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),Ai.__exportStar(km(),i)}(Oc)),Oc}var Ic={},Wn={},Hh;function Gm(){if(Hh)return Wn;Hh=1,Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.HEARTBEAT_EVENTS=Wn.HEARTBEAT_INTERVAL=void 0;const i=De;return Wn.HEARTBEAT_INTERVAL=i.FIVE_SECONDS,Wn.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Wn}var Kh;function yd(){return Kh||(Kh=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),Ai.__exportStar(Gm(),i)}(Ic)),Ic}var Vh;function Wm(){if(Vh)return ns;Vh=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.HeartBeat=void 0;const i=Ai,t=$r,r=De,s=gd(),o=yd();class l extends s.IHeartBeat{constructor(y){super(y),this.events=new t.EventEmitter,this.interval=o.HEARTBEAT_INTERVAL,this.interval=y?.interval||o.HEARTBEAT_INTERVAL}static init(y){return i.__awaiter(this,void 0,void 0,function*(){const E=new l(y);return yield E.init(),E})}init(){return i.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(y,E){this.events.on(y,E)}once(y,E){this.events.once(y,E)}off(y,E){this.events.off(y,E)}removeListener(y,E){this.events.removeListener(y,E)}initialize(){return i.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(o.HEARTBEAT_EVENTS.pulse)}}return ns.HeartBeat=l,ns}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const t=Ai;t.__exportStar(Wm(),i),t.__exportStar(gd(),i),t.__exportStar(yd(),i)})(ys);var Qe={},Bc={},Ym={get exports(){return Bc},set exports(i){Bc=i}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(i){var t,r,s,o,l,w,y,E,N,T,j,G,z,M,J,W,oe,O,A,S,x,m,c;(function(d){var Z=typeof cr=="object"?cr:typeof self=="object"?self:typeof this=="object"?this:{};d(h(Z,h(i.exports)));function h(p,v){return p!==Z&&(typeof Object.create=="function"?Object.defineProperty(p,"__esModule",{value:!0}):p.__esModule=!0),function(P,b){return p[P]=v?v(P,b):b}}})(function(d){var Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var v in p)p.hasOwnProperty(v)&&(h[v]=p[v])};t=function(h,p){Z(h,p);function v(){this.constructor=h}h.prototype=p===null?Object.create(p):(v.prototype=p.prototype,new v)},r=Object.assign||function(h){for(var p,v=1,P=arguments.length;v<P;v++){p=arguments[v];for(var b in p)Object.prototype.hasOwnProperty.call(p,b)&&(h[b]=p[b])}return h},s=function(h,p){var v={};for(var P in h)Object.prototype.hasOwnProperty.call(h,P)&&p.indexOf(P)<0&&(v[P]=h[P]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,P=Object.getOwnPropertySymbols(h);b<P.length;b++)p.indexOf(P[b])<0&&Object.prototype.propertyIsEnumerable.call(h,P[b])&&(v[P[b]]=h[P[b]]);return v},o=function(h,p,v,P){var b=arguments.length,g=b<3?p:P===null?P=Object.getOwnPropertyDescriptor(p,v):P,L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(h,p,v,P);else for(var q=h.length-1;q>=0;q--)(L=h[q])&&(g=(b<3?L(g):b>3?L(p,v,g):L(p,v))||g);return b>3&&g&&Object.defineProperty(p,v,g),g},l=function(h,p){return function(v,P){p(v,P,h)}},w=function(h,p){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(h,p)},y=function(h,p,v,P){function b(g){return g instanceof v?g:new v(function(L){L(g)})}return new(v||(v=Promise))(function(g,L){function q(k){try{R(P.next(k))}catch(te){L(te)}}function Q(k){try{R(P.throw(k))}catch(te){L(te)}}function R(k){k.done?g(k.value):b(k.value).then(q,Q)}R((P=P.apply(h,p||[])).next())})},E=function(h,p){var v={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},P,b,g,L;return L={next:q(0),throw:q(1),return:q(2)},typeof Symbol=="function"&&(L[Symbol.iterator]=function(){return this}),L;function q(R){return function(k){return Q([R,k])}}function Q(R){if(P)throw new TypeError("Generator is already executing.");for(;v;)try{if(P=1,b&&(g=R[0]&2?b.return:R[0]?b.throw||((g=b.return)&&g.call(b),0):b.next)&&!(g=g.call(b,R[1])).done)return g;switch(b=0,g&&(R=[R[0]&2,g.value]),R[0]){case 0:case 1:g=R;break;case 4:return v.label++,{value:R[1],done:!1};case 5:v.label++,b=R[1],R=[0];continue;case 7:R=v.ops.pop(),v.trys.pop();continue;default:if(g=v.trys,!(g=g.length>0&&g[g.length-1])&&(R[0]===6||R[0]===2)){v=0;continue}if(R[0]===3&&(!g||R[1]>g[0]&&R[1]<g[3])){v.label=R[1];break}if(R[0]===6&&v.label<g[1]){v.label=g[1],g=R;break}if(g&&v.label<g[2]){v.label=g[2],v.ops.push(R);break}g[2]&&v.ops.pop(),v.trys.pop();continue}R=p.call(h,v)}catch(k){R=[6,k],b=0}finally{P=g=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}},c=function(h,p,v,P){P===void 0&&(P=v),h[P]=p[v]},N=function(h,p){for(var v in h)v!=="default"&&!p.hasOwnProperty(v)&&(p[v]=h[v])},T=function(h){var p=typeof Symbol=="function"&&Symbol.iterator,v=p&&h[p],P=0;if(v)return v.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&P>=h.length&&(h=void 0),{value:h&&h[P++],done:!h}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},j=function(h,p){var v=typeof Symbol=="function"&&h[Symbol.iterator];if(!v)return h;var P=v.call(h),b,g=[],L;try{for(;(p===void 0||p-- >0)&&!(b=P.next()).done;)g.push(b.value)}catch(q){L={error:q}}finally{try{b&&!b.done&&(v=P.return)&&v.call(P)}finally{if(L)throw L.error}}return g},G=function(){for(var h=[],p=0;p<arguments.length;p++)h=h.concat(j(arguments[p]));return h},z=function(){for(var h=0,p=0,v=arguments.length;p<v;p++)h+=arguments[p].length;for(var P=Array(h),b=0,p=0;p<v;p++)for(var g=arguments[p],L=0,q=g.length;L<q;L++,b++)P[b]=g[L];return P},M=function(h){return this instanceof M?(this.v=h,this):new M(h)},J=function(h,p,v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P=v.apply(h,p||[]),b,g=[];return b={},L("next"),L("throw"),L("return"),b[Symbol.asyncIterator]=function(){return this},b;function L(se){P[se]&&(b[se]=function(ne){return new Promise(function(_e,he){g.push([se,ne,_e,he])>1||q(se,ne)})})}function q(se,ne){try{Q(P[se](ne))}catch(_e){te(g[0][3],_e)}}function Q(se){se.value instanceof M?Promise.resolve(se.value.v).then(R,k):te(g[0][2],se)}function R(se){q("next",se)}function k(se){q("throw",se)}function te(se,ne){se(ne),g.shift(),g.length&&q(g[0][0],g[0][1])}},W=function(h){var p,v;return p={},P("next"),P("throw",function(b){throw b}),P("return"),p[Symbol.iterator]=function(){return this},p;function P(b,g){p[b]=h[b]?function(L){return(v=!v)?{value:M(h[b](L)),done:b==="return"}:g?g(L):L}:g}},oe=function(h){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var p=h[Symbol.asyncIterator],v;return p?p.call(h):(h=typeof T=="function"?T(h):h[Symbol.iterator](),v={},P("next"),P("throw"),P("return"),v[Symbol.asyncIterator]=function(){return this},v);function P(g){v[g]=h[g]&&function(L){return new Promise(function(q,Q){L=h[g](L),b(q,Q,L.done,L.value)})}}function b(g,L,q,Q){Promise.resolve(Q).then(function(R){g({value:R,done:q})},L)}},O=function(h,p){return Object.defineProperty?Object.defineProperty(h,"raw",{value:p}):h.raw=p,h},A=function(h){if(h&&h.__esModule)return h;var p={};if(h!=null)for(var v in h)Object.hasOwnProperty.call(h,v)&&(p[v]=h[v]);return p.default=h,p},S=function(h){return h&&h.__esModule?h:{default:h}},x=function(h,p){if(!p.has(h))throw new TypeError("attempted to get private field on non-instance");return p.get(h)},m=function(h,p,v){if(!p.has(h))throw new TypeError("attempted to set private field on non-instance");return p.set(h,v),v},d("__extends",t),d("__assign",r),d("__rest",s),d("__decorate",o),d("__param",l),d("__metadata",w),d("__awaiter",y),d("__generator",E),d("__exportStar",N),d("__createBinding",c),d("__values",T),d("__read",j),d("__spread",G),d("__spreadArrays",z),d("__await",M),d("__asyncGenerator",J),d("__asyncDelegator",W),d("__asyncValues",oe),d("__makeTemplateObject",O),d("__importStar",A),d("__importDefault",S),d("__classPrivateFieldGet",x),d("__classPrivateFieldSet",m)})})(Ym);var xc,kh;function Jm(){if(kh)return xc;kh=1;function i(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}xc=t;function t(r,s,o){var l=o&&o.stringify||i,w=1;if(typeof r=="object"&&r!==null){var y=s.length+w;if(y===1)return r;var E=new Array(y);E[0]=l(r);for(var N=1;N<y;N++)E[N]=l(s[N]);return E.join(" ")}if(typeof r!="string")return r;var T=s.length;if(T===0)return r;for(var j="",G=1-w,z=-1,M=r&&r.length||0,J=0;J<M;){if(r.charCodeAt(J)===37&&J+1<M){switch(z=z>-1?z:0,r.charCodeAt(J+1)){case 100:case 102:if(G>=T||s[G]==null)break;z<J&&(j+=r.slice(z,J)),j+=Number(s[G]),z=J+2,J++;break;case 105:if(G>=T||s[G]==null)break;z<J&&(j+=r.slice(z,J)),j+=Math.floor(Number(s[G])),z=J+2,J++;break;case 79:case 111:case 106:if(G>=T||s[G]===void 0)break;z<J&&(j+=r.slice(z,J));var W=typeof s[G];if(W==="string"){j+="'"+s[G]+"'",z=J+2,J++;break}if(W==="function"){j+=s[G].name||"<anonymous>",z=J+2,J++;break}j+=l(s[G]),z=J+2,J++;break;case 115:if(G>=T)break;z<J&&(j+=r.slice(z,J)),j+=String(s[G]),z=J+2,J++;break;case 37:z<J&&(j+=r.slice(z,J)),j+="%",z=J+2,J++,G--;break}++G}++J}return z===-1?r:(z<M&&(j+=r.slice(z)),j)}return xc}var Pc,Gh;function Xm(){if(Gh)return Pc;Gh=1;const i=Jm();Pc=o;const t=x().console||{},r={mapHttpRequest:M,mapHttpResponse:M,wrapRequestSerializer:J,wrapResponseSerializer:J,wrapErrorSerializer:J,req:M,res:M,err:G};function s(m,c){return Array.isArray(m)?m.filter(function(Z){return Z!=="!stdSerializers.err"}):m===!0?Object.keys(c):!1}function o(m){m=m||{},m.browser=m.browser||{};const c=m.browser.transmit;if(c&&typeof c.send!="function")throw Error("pino: transmit option must have a send function");const d=m.browser.write||t;m.browser.write&&(m.browser.asObject=!0);const Z=m.serializers||{},h=s(m.browser.serialize,Z);let p=m.browser.serialize;Array.isArray(m.browser.serialize)&&m.browser.serialize.indexOf("!stdSerializers.err")>-1&&(p=!1);const v=["error","fatal","warn","info","debug","trace"];typeof d=="function"&&(d.error=d.fatal=d.warn=d.info=d.debug=d.trace=d),m.enabled===!1&&(m.level="silent");const P=m.level||"info",b=Object.create(d);b.log||(b.log=W),Object.defineProperty(b,"levelVal",{get:L}),Object.defineProperty(b,"level",{get:q,set:Q});const g={transmit:c,serialize:h,asObject:m.browser.asObject,levels:v,timestamp:z(m)};b.levels=o.levels,b.level=P,b.setMaxListeners=b.getMaxListeners=b.emit=b.addListener=b.on=b.prependListener=b.once=b.prependOnceListener=b.removeListener=b.removeAllListeners=b.listeners=b.listenerCount=b.eventNames=b.write=b.flush=W,b.serializers=Z,b._serialize=h,b._stdErrSerialize=p,b.child=R,c&&(b._logEvent=j());function L(){return this.level==="silent"?1/0:this.levels.values[this.level]}function q(){return this._level}function Q(k){if(k!=="silent"&&!this.levels.values[k])throw Error("unknown level "+k);this._level=k,l(g,b,"error","log"),l(g,b,"fatal","error"),l(g,b,"warn","error"),l(g,b,"info","log"),l(g,b,"debug","log"),l(g,b,"trace","log")}function R(k,te){if(!k)throw new Error("missing bindings for child Pino");te=te||{},h&&k.serializers&&(te.serializers=k.serializers);const se=te.serializers;if(h&&se){var ne=Object.assign({},Z,se),_e=m.browser.serialize===!0?Object.keys(ne):h;delete k.serializers,E([k],_e,ne,this._stdErrSerialize)}function he(be){this._childLevel=(be._childLevel|0)+1,this.error=N(be,k,"error"),this.fatal=N(be,k,"fatal"),this.warn=N(be,k,"warn"),this.info=N(be,k,"info"),this.debug=N(be,k,"debug"),this.trace=N(be,k,"trace"),ne&&(this.serializers=ne,this._serialize=_e),c&&(this._logEvent=j([].concat(be._logEvent.bindings,k)))}return he.prototype=this,new he(this)}return b}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=r,o.stdTimeFunctions=Object.assign({},{nullTime:oe,epochTime:O,unixTime:A,isoTime:S});function l(m,c,d,Z){const h=Object.getPrototypeOf(c);c[d]=c.levelVal>c.levels.values[d]?W:h[d]?h[d]:t[d]||t[Z]||W,w(m,c,d)}function w(m,c,d){!m.transmit&&c[d]===W||(c[d]=function(Z){return function(){const p=m.timestamp(),v=new Array(arguments.length),P=Object.getPrototypeOf&&Object.getPrototypeOf(this)===t?t:this;for(var b=0;b<v.length;b++)v[b]=arguments[b];if(m.serialize&&!m.asObject&&E(v,this._serialize,this.serializers,this._stdErrSerialize),m.asObject?Z.call(P,y(this,d,v,p)):Z.apply(P,v),m.transmit){const g=m.transmit.level||c.level,L=o.levels.values[g],q=o.levels.values[d];if(q<L)return;T(this,{ts:p,methodLevel:d,methodValue:q,transmitLevel:g,transmitValue:o.levels.values[m.transmit.level||c.level],send:m.transmit.send,val:c.levelVal},v)}}}(c[d]))}function y(m,c,d,Z){m._serialize&&E(d,m._serialize,m.serializers,m._stdErrSerialize);const h=d.slice();let p=h[0];const v={};Z&&(v.time=Z),v.level=o.levels.values[c];let P=(m._childLevel|0)+1;if(P<1&&(P=1),p!==null&&typeof p=="object"){for(;P--&&typeof h[0]=="object";)Object.assign(v,h.shift());p=h.length?i(h.shift(),h):void 0}else typeof p=="string"&&(p=i(h.shift(),h));return p!==void 0&&(v.msg=p),v}function E(m,c,d,Z){for(const h in m)if(Z&&m[h]instanceof Error)m[h]=o.stdSerializers.err(m[h]);else if(typeof m[h]=="object"&&!Array.isArray(m[h]))for(const p in m[h])c&&c.indexOf(p)>-1&&p in d&&(m[h][p]=d[p](m[h][p]))}function N(m,c,d){return function(){const Z=new Array(1+arguments.length);Z[0]=c;for(var h=1;h<Z.length;h++)Z[h]=arguments[h-1];return m[d].apply(this,Z)}}function T(m,c,d){const Z=c.send,h=c.ts,p=c.methodLevel,v=c.methodValue,P=c.val,b=m._logEvent.bindings;E(d,m._serialize||Object.keys(m.serializers),m.serializers,m._stdErrSerialize===void 0?!0:m._stdErrSerialize),m._logEvent.ts=h,m._logEvent.messages=d.filter(function(g){return b.indexOf(g)===-1}),m._logEvent.level.label=p,m._logEvent.level.value=v,Z(p,m._logEvent,P),m._logEvent=j(b)}function j(m){return{ts:0,messages:[],bindings:m||[],level:{label:"",value:0}}}function G(m){const c={type:m.constructor.name,msg:m.message,stack:m.stack};for(const d in m)c[d]===void 0&&(c[d]=m[d]);return c}function z(m){return typeof m.timestamp=="function"?m.timestamp:m.timestamp===!1?oe:O}function M(){return{}}function J(m){return m}function W(){}function oe(){return!1}function O(){return Date.now()}function A(){return Math.round(Date.now()/1e3)}function S(){return new Date(Date.now()).toISOString()}function x(){function m(c){return typeof c<"u"&&c}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return m(self)||m(window)||m(this)||{}}}return Pc}var Yn={},Wh;function _d(){return Wh||(Wh=1,Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.PINO_CUSTOM_CONTEXT_KEY=Yn.PINO_LOGGER_DEFAULTS=void 0,Yn.PINO_LOGGER_DEFAULTS={level:"info"},Yn.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Yn}var ar={},Yh;function Zm(){if(Yh)return ar;Yh=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.generateChildLogger=ar.formatChildLoggerContext=ar.getLoggerContext=ar.setBrowserLoggerContext=ar.getBrowserLoggerContext=ar.getDefaultLoggerOptions=void 0;const i=_d();function t(y){return Object.assign(Object.assign({},y),{level:y?.level||i.PINO_LOGGER_DEFAULTS.level})}ar.getDefaultLoggerOptions=t;function r(y,E=i.PINO_CUSTOM_CONTEXT_KEY){return y[E]||""}ar.getBrowserLoggerContext=r;function s(y,E,N=i.PINO_CUSTOM_CONTEXT_KEY){return y[N]=E,y}ar.setBrowserLoggerContext=s;function o(y,E=i.PINO_CUSTOM_CONTEXT_KEY){let N="";return typeof y.bindings>"u"?N=r(y,E):N=y.bindings().context||"",N}ar.getLoggerContext=o;function l(y,E,N=i.PINO_CUSTOM_CONTEXT_KEY){const T=o(y,N);return T.trim()?`${T}/${E}`:E}ar.formatChildLoggerContext=l;function w(y,E,N=i.PINO_CUSTOM_CONTEXT_KEY){const T=l(y,E,N),j=y.child({context:T});return s(j,T,N)}return ar.generateChildLogger=w,ar}(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.pino=void 0;const t=Bc,r=t.__importDefault(Xm());Object.defineProperty(i,"pino",{enumerable:!0,get:function(){return r.default}}),t.__exportStar(_d(),i),t.__exportStar(Zm(),i)})(Qe);class Qm extends Qn{constructor(t){super(),this.opts=t,this.protocol="wc",this.version=2}}class ew extends Qn{constructor(t,r){super(),this.core=t,this.logger=r,this.records=new Map}}class tw{constructor(t,r){this.logger=t,this.core=r}}class rw extends Qn{constructor(t,r){super(),this.relayer=t,this.logger=r}}class nw extends Qn{constructor(t){super()}}let iw=class{constructor(t,r,s,o){this.core=t,this.logger=r,this.name=s}};class sw extends Qn{constructor(t,r){super(),this.relayer=t,this.logger=r}}let aw=class extends Qn{constructor(t,r){super(),this.core=t,this.logger=r}};class ow{constructor(t,r){this.projectId=t,this.logger=r}}let cw=class{constructor(t){this.opts=t,this.protocol="wc",this.version=2}},uw=class{constructor(t){this.client=t}};var au={},vd={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var t=je,r=Or;i.DIGEST_LENGTH=64,i.BLOCK_SIZE=128;var s=function(){function y(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return y.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},y.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},y.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},y.prototype.update=function(E,N){if(N===void 0&&(N=E.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var T=0;if(this._bytesHashed+=N,this._bufferLength>0){for(;this._bufferLength<i.BLOCK_SIZE&&N>0;)this._buffer[this._bufferLength++]=E[T++],N--;this._bufferLength===this.blockSize&&(l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(N>=this.blockSize&&(T=l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,E,T,N),N%=this.blockSize);N>0;)this._buffer[this._bufferLength++]=E[T++],N--;return this},y.prototype.finish=function(E){if(!this._finished){var N=this._bytesHashed,T=this._bufferLength,j=N/536870912|0,G=N<<3,z=N%128<112?128:256;this._buffer[T]=128;for(var M=T+1;M<z-8;M++)this._buffer[M]=0;t.writeUint32BE(j,this._buffer,z-8),t.writeUint32BE(G,this._buffer,z-4),l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,z),this._finished=!0}for(var M=0;M<this.digestLength/8;M++)t.writeUint32BE(this._stateHi[M],E,M*8),t.writeUint32BE(this._stateLo[M],E,M*8+4);return this},y.prototype.digest=function(){var E=new Uint8Array(this.digestLength);return this.finish(E),E},y.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},y.prototype.restoreState=function(E){return this._stateHi.set(E.stateHi),this._stateLo.set(E.stateLo),this._bufferLength=E.bufferLength,E.buffer&&this._buffer.set(E.buffer),this._bytesHashed=E.bytesHashed,this._finished=!1,this},y.prototype.cleanSavedState=function(E){r.wipe(E.stateHi),r.wipe(E.stateLo),E.buffer&&r.wipe(E.buffer),E.bufferLength=0,E.bytesHashed=0},y}();i.SHA512=s;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function l(y,E,N,T,j,G,z){for(var M=N[0],J=N[1],W=N[2],oe=N[3],O=N[4],A=N[5],S=N[6],x=N[7],m=T[0],c=T[1],d=T[2],Z=T[3],h=T[4],p=T[5],v=T[6],P=T[7],b,g,L,q,Q,R,k,te;z>=128;){for(var se=0;se<16;se++){var ne=8*se+G;y[se]=t.readUint32BE(j,ne),E[se]=t.readUint32BE(j,ne+4)}for(var se=0;se<80;se++){var _e=M,he=J,be=W,X=oe,Y=O,B=A,f=S,U=x,fe=m,pe=c,Oe=d,Be=Z,Ve=h,Le=p,gt=v,yt=P;if(b=x,g=P,Q=g&65535,R=g>>>16,k=b&65535,te=b>>>16,b=(O>>>14|h<<32-14)^(O>>>18|h<<32-18)^(h>>>41-32|O<<32-(41-32)),g=(h>>>14|O<<32-14)^(h>>>18|O<<32-18)^(O>>>41-32|h<<32-(41-32)),Q+=g&65535,R+=g>>>16,k+=b&65535,te+=b>>>16,b=O&A^~O&S,g=h&p^~h&v,Q+=g&65535,R+=g>>>16,k+=b&65535,te+=b>>>16,b=o[se*2],g=o[se*2+1],Q+=g&65535,R+=g>>>16,k+=b&65535,te+=b>>>16,b=y[se%16],g=E[se%16],Q+=g&65535,R+=g>>>16,k+=b&65535,te+=b>>>16,R+=Q>>>16,k+=R>>>16,te+=k>>>16,L=k&65535|te<<16,q=Q&65535|R<<16,b=L,g=q,Q=g&65535,R=g>>>16,k=b&65535,te=b>>>16,b=(M>>>28|m<<32-28)^(m>>>34-32|M<<32-(34-32))^(m>>>39-32|M<<32-(39-32)),g=(m>>>28|M<<32-28)^(M>>>34-32|m<<32-(34-32))^(M>>>39-32|m<<32-(39-32)),Q+=g&65535,R+=g>>>16,k+=b&65535,te+=b>>>16,b=M&J^M&W^J&W,g=m&c^m&d^c&d,Q+=g&65535,R+=g>>>16,k+=b&65535,te+=b>>>16,R+=Q>>>16,k+=R>>>16,te+=k>>>16,U=k&65535|te<<16,yt=Q&65535|R<<16,b=X,g=Be,Q=g&65535,R=g>>>16,k=b&65535,te=b>>>16,b=L,g=q,Q+=g&65535,R+=g>>>16,k+=b&65535,te+=b>>>16,R+=Q>>>16,k+=R>>>16,te+=k>>>16,X=k&65535|te<<16,Be=Q&65535|R<<16,J=_e,W=he,oe=be,O=X,A=Y,S=B,x=f,M=U,c=fe,d=pe,Z=Oe,h=Be,p=Ve,v=Le,P=gt,m=yt,se%16===15)for(var ne=0;ne<16;ne++)b=y[ne],g=E[ne],Q=g&65535,R=g>>>16,k=b&65535,te=b>>>16,b=y[(ne+9)%16],g=E[(ne+9)%16],Q+=g&65535,R+=g>>>16,k+=b&65535,te+=b>>>16,L=y[(ne+1)%16],q=E[(ne+1)%16],b=(L>>>1|q<<32-1)^(L>>>8|q<<32-8)^L>>>7,g=(q>>>1|L<<32-1)^(q>>>8|L<<32-8)^(q>>>7|L<<32-7),Q+=g&65535,R+=g>>>16,k+=b&65535,te+=b>>>16,L=y[(ne+14)%16],q=E[(ne+14)%16],b=(L>>>19|q<<32-19)^(q>>>61-32|L<<32-(61-32))^L>>>6,g=(q>>>19|L<<32-19)^(L>>>61-32|q<<32-(61-32))^(q>>>6|L<<32-6),Q+=g&65535,R+=g>>>16,k+=b&65535,te+=b>>>16,R+=Q>>>16,k+=R>>>16,te+=k>>>16,y[ne]=k&65535|te<<16,E[ne]=Q&65535|R<<16}b=M,g=m,Q=g&65535,R=g>>>16,k=b&65535,te=b>>>16,b=N[0],g=T[0],Q+=g&65535,R+=g>>>16,k+=b&65535,te+=b>>>16,R+=Q>>>16,k+=R>>>16,te+=k>>>16,N[0]=M=k&65535|te<<16,T[0]=m=Q&65535|R<<16,b=J,g=c,Q=g&65535,R=g>>>16,k=b&65535,te=b>>>16,b=N[1],g=T[1],Q+=g&65535,R+=g>>>16,k+=b&65535,te+=b>>>16,R+=Q>>>16,k+=R>>>16,te+=k>>>16,N[1]=J=k&65535|te<<16,T[1]=c=Q&65535|R<<16,b=W,g=d,Q=g&65535,R=g>>>16,k=b&65535,te=b>>>16,b=N[2],g=T[2],Q+=g&65535,R+=g>>>16,k+=b&65535,te+=b>>>16,R+=Q>>>16,k+=R>>>16,te+=k>>>16,N[2]=W=k&65535|te<<16,T[2]=d=Q&65535|R<<16,b=oe,g=Z,Q=g&65535,R=g>>>16,k=b&65535,te=b>>>16,b=N[3],g=T[3],Q+=g&65535,R+=g>>>16,k+=b&65535,te+=b>>>16,R+=Q>>>16,k+=R>>>16,te+=k>>>16,N[3]=oe=k&65535|te<<16,T[3]=Z=Q&65535|R<<16,b=O,g=h,Q=g&65535,R=g>>>16,k=b&65535,te=b>>>16,b=N[4],g=T[4],Q+=g&65535,R+=g>>>16,k+=b&65535,te+=b>>>16,R+=Q>>>16,k+=R>>>16,te+=k>>>16,N[4]=O=k&65535|te<<16,T[4]=h=Q&65535|R<<16,b=A,g=p,Q=g&65535,R=g>>>16,k=b&65535,te=b>>>16,b=N[5],g=T[5],Q+=g&65535,R+=g>>>16,k+=b&65535,te+=b>>>16,R+=Q>>>16,k+=R>>>16,te+=k>>>16,N[5]=A=k&65535|te<<16,T[5]=p=Q&65535|R<<16,b=S,g=v,Q=g&65535,R=g>>>16,k=b&65535,te=b>>>16,b=N[6],g=T[6],Q+=g&65535,R+=g>>>16,k+=b&65535,te+=b>>>16,R+=Q>>>16,k+=R>>>16,te+=k>>>16,N[6]=S=k&65535|te<<16,T[6]=v=Q&65535|R<<16,b=x,g=P,Q=g&65535,R=g>>>16,k=b&65535,te=b>>>16,b=N[7],g=T[7],Q+=g&65535,R+=g>>>16,k+=b&65535,te+=b>>>16,R+=Q>>>16,k+=R>>>16,te+=k>>>16,N[7]=x=k&65535|te<<16,T[7]=P=Q&65535|R<<16,G+=128,z-=128}return G}function w(y){var E=new s;E.update(y);var N=E.digest();return E.clean(),N}i.hash=w})(vd);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.convertSecretKeyToX25519=i.convertPublicKeyToX25519=i.verify=i.sign=i.extractPublicKeyFromSecretKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.SEED_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=i.SIGNATURE_LENGTH=void 0;const t=Ci,r=vd,s=Or;i.SIGNATURE_LENGTH=64,i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=64,i.SEED_LENGTH=32;function o(X){const Y=new Float64Array(16);if(X)for(let B=0;B<X.length;B++)Y[B]=X[B];return Y}const l=new Uint8Array(32);l[0]=9;const w=o(),y=o([1]),E=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),N=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),T=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),j=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),G=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function z(X,Y){for(let B=0;B<16;B++)X[B]=Y[B]|0}function M(X){let Y=1;for(let B=0;B<16;B++){let f=X[B]+Y+65535;Y=Math.floor(f/65536),X[B]=f-Y*65536}X[0]+=Y-1+37*(Y-1)}function J(X,Y,B){const f=~(B-1);for(let U=0;U<16;U++){const fe=f&(X[U]^Y[U]);X[U]^=fe,Y[U]^=fe}}function W(X,Y){const B=o(),f=o();for(let U=0;U<16;U++)f[U]=Y[U];M(f),M(f),M(f);for(let U=0;U<2;U++){B[0]=f[0]-65517;for(let pe=1;pe<15;pe++)B[pe]=f[pe]-65535-(B[pe-1]>>16&1),B[pe-1]&=65535;B[15]=f[15]-32767-(B[14]>>16&1);const fe=B[15]>>16&1;B[14]&=65535,J(f,B,1-fe)}for(let U=0;U<16;U++)X[2*U]=f[U]&255,X[2*U+1]=f[U]>>8}function oe(X,Y){let B=0;for(let f=0;f<32;f++)B|=X[f]^Y[f];return(1&B-1>>>8)-1}function O(X,Y){const B=new Uint8Array(32),f=new Uint8Array(32);return W(B,X),W(f,Y),oe(B,f)}function A(X){const Y=new Uint8Array(32);return W(Y,X),Y[0]&1}function S(X,Y){for(let B=0;B<16;B++)X[B]=Y[2*B]+(Y[2*B+1]<<8);X[15]&=32767}function x(X,Y,B){for(let f=0;f<16;f++)X[f]=Y[f]+B[f]}function m(X,Y,B){for(let f=0;f<16;f++)X[f]=Y[f]-B[f]}function c(X,Y,B){let f,U,fe=0,pe=0,Oe=0,Be=0,Ve=0,Le=0,gt=0,yt=0,Me=0,Ie=0,Re=0,Fe=0,ze=0,Pe=0,Ue=0,Se=0,Ae=0,He=0,xe=0,ke=0,We=0,et=0,tt=0,Je=0,er=0,hr=0,kr=0,tr=0,tn=0,gn=0,Nn=0,Et=B[0],_t=B[1],Dt=B[2],St=B[3],mt=B[4],vt=B[5],Rt=B[6],Ft=B[7],Ot=B[8],Ut=B[9],It=B[10],At=B[11],xt=B[12],ft=B[13],jt=B[14],Lt=B[15];f=Y[0],fe+=f*Et,pe+=f*_t,Oe+=f*Dt,Be+=f*St,Ve+=f*mt,Le+=f*vt,gt+=f*Rt,yt+=f*Ft,Me+=f*Ot,Ie+=f*Ut,Re+=f*It,Fe+=f*At,ze+=f*xt,Pe+=f*ft,Ue+=f*jt,Se+=f*Lt,f=Y[1],pe+=f*Et,Oe+=f*_t,Be+=f*Dt,Ve+=f*St,Le+=f*mt,gt+=f*vt,yt+=f*Rt,Me+=f*Ft,Ie+=f*Ot,Re+=f*Ut,Fe+=f*It,ze+=f*At,Pe+=f*xt,Ue+=f*ft,Se+=f*jt,Ae+=f*Lt,f=Y[2],Oe+=f*Et,Be+=f*_t,Ve+=f*Dt,Le+=f*St,gt+=f*mt,yt+=f*vt,Me+=f*Rt,Ie+=f*Ft,Re+=f*Ot,Fe+=f*Ut,ze+=f*It,Pe+=f*At,Ue+=f*xt,Se+=f*ft,Ae+=f*jt,He+=f*Lt,f=Y[3],Be+=f*Et,Ve+=f*_t,Le+=f*Dt,gt+=f*St,yt+=f*mt,Me+=f*vt,Ie+=f*Rt,Re+=f*Ft,Fe+=f*Ot,ze+=f*Ut,Pe+=f*It,Ue+=f*At,Se+=f*xt,Ae+=f*ft,He+=f*jt,xe+=f*Lt,f=Y[4],Ve+=f*Et,Le+=f*_t,gt+=f*Dt,yt+=f*St,Me+=f*mt,Ie+=f*vt,Re+=f*Rt,Fe+=f*Ft,ze+=f*Ot,Pe+=f*Ut,Ue+=f*It,Se+=f*At,Ae+=f*xt,He+=f*ft,xe+=f*jt,ke+=f*Lt,f=Y[5],Le+=f*Et,gt+=f*_t,yt+=f*Dt,Me+=f*St,Ie+=f*mt,Re+=f*vt,Fe+=f*Rt,ze+=f*Ft,Pe+=f*Ot,Ue+=f*Ut,Se+=f*It,Ae+=f*At,He+=f*xt,xe+=f*ft,ke+=f*jt,We+=f*Lt,f=Y[6],gt+=f*Et,yt+=f*_t,Me+=f*Dt,Ie+=f*St,Re+=f*mt,Fe+=f*vt,ze+=f*Rt,Pe+=f*Ft,Ue+=f*Ot,Se+=f*Ut,Ae+=f*It,He+=f*At,xe+=f*xt,ke+=f*ft,We+=f*jt,et+=f*Lt,f=Y[7],yt+=f*Et,Me+=f*_t,Ie+=f*Dt,Re+=f*St,Fe+=f*mt,ze+=f*vt,Pe+=f*Rt,Ue+=f*Ft,Se+=f*Ot,Ae+=f*Ut,He+=f*It,xe+=f*At,ke+=f*xt,We+=f*ft,et+=f*jt,tt+=f*Lt,f=Y[8],Me+=f*Et,Ie+=f*_t,Re+=f*Dt,Fe+=f*St,ze+=f*mt,Pe+=f*vt,Ue+=f*Rt,Se+=f*Ft,Ae+=f*Ot,He+=f*Ut,xe+=f*It,ke+=f*At,We+=f*xt,et+=f*ft,tt+=f*jt,Je+=f*Lt,f=Y[9],Ie+=f*Et,Re+=f*_t,Fe+=f*Dt,ze+=f*St,Pe+=f*mt,Ue+=f*vt,Se+=f*Rt,Ae+=f*Ft,He+=f*Ot,xe+=f*Ut,ke+=f*It,We+=f*At,et+=f*xt,tt+=f*ft,Je+=f*jt,er+=f*Lt,f=Y[10],Re+=f*Et,Fe+=f*_t,ze+=f*Dt,Pe+=f*St,Ue+=f*mt,Se+=f*vt,Ae+=f*Rt,He+=f*Ft,xe+=f*Ot,ke+=f*Ut,We+=f*It,et+=f*At,tt+=f*xt,Je+=f*ft,er+=f*jt,hr+=f*Lt,f=Y[11],Fe+=f*Et,ze+=f*_t,Pe+=f*Dt,Ue+=f*St,Se+=f*mt,Ae+=f*vt,He+=f*Rt,xe+=f*Ft,ke+=f*Ot,We+=f*Ut,et+=f*It,tt+=f*At,Je+=f*xt,er+=f*ft,hr+=f*jt,kr+=f*Lt,f=Y[12],ze+=f*Et,Pe+=f*_t,Ue+=f*Dt,Se+=f*St,Ae+=f*mt,He+=f*vt,xe+=f*Rt,ke+=f*Ft,We+=f*Ot,et+=f*Ut,tt+=f*It,Je+=f*At,er+=f*xt,hr+=f*ft,kr+=f*jt,tr+=f*Lt,f=Y[13],Pe+=f*Et,Ue+=f*_t,Se+=f*Dt,Ae+=f*St,He+=f*mt,xe+=f*vt,ke+=f*Rt,We+=f*Ft,et+=f*Ot,tt+=f*Ut,Je+=f*It,er+=f*At,hr+=f*xt,kr+=f*ft,tr+=f*jt,tn+=f*Lt,f=Y[14],Ue+=f*Et,Se+=f*_t,Ae+=f*Dt,He+=f*St,xe+=f*mt,ke+=f*vt,We+=f*Rt,et+=f*Ft,tt+=f*Ot,Je+=f*Ut,er+=f*It,hr+=f*At,kr+=f*xt,tr+=f*ft,tn+=f*jt,gn+=f*Lt,f=Y[15],Se+=f*Et,Ae+=f*_t,He+=f*Dt,xe+=f*St,ke+=f*mt,We+=f*vt,et+=f*Rt,tt+=f*Ft,Je+=f*Ot,er+=f*Ut,hr+=f*It,kr+=f*At,tr+=f*xt,tn+=f*ft,gn+=f*jt,Nn+=f*Lt,fe+=38*Ae,pe+=38*He,Oe+=38*xe,Be+=38*ke,Ve+=38*We,Le+=38*et,gt+=38*tt,yt+=38*Je,Me+=38*er,Ie+=38*hr,Re+=38*kr,Fe+=38*tr,ze+=38*tn,Pe+=38*gn,Ue+=38*Nn,U=1,f=fe+U+65535,U=Math.floor(f/65536),fe=f-U*65536,f=pe+U+65535,U=Math.floor(f/65536),pe=f-U*65536,f=Oe+U+65535,U=Math.floor(f/65536),Oe=f-U*65536,f=Be+U+65535,U=Math.floor(f/65536),Be=f-U*65536,f=Ve+U+65535,U=Math.floor(f/65536),Ve=f-U*65536,f=Le+U+65535,U=Math.floor(f/65536),Le=f-U*65536,f=gt+U+65535,U=Math.floor(f/65536),gt=f-U*65536,f=yt+U+65535,U=Math.floor(f/65536),yt=f-U*65536,f=Me+U+65535,U=Math.floor(f/65536),Me=f-U*65536,f=Ie+U+65535,U=Math.floor(f/65536),Ie=f-U*65536,f=Re+U+65535,U=Math.floor(f/65536),Re=f-U*65536,f=Fe+U+65535,U=Math.floor(f/65536),Fe=f-U*65536,f=ze+U+65535,U=Math.floor(f/65536),ze=f-U*65536,f=Pe+U+65535,U=Math.floor(f/65536),Pe=f-U*65536,f=Ue+U+65535,U=Math.floor(f/65536),Ue=f-U*65536,f=Se+U+65535,U=Math.floor(f/65536),Se=f-U*65536,fe+=U-1+37*(U-1),U=1,f=fe+U+65535,U=Math.floor(f/65536),fe=f-U*65536,f=pe+U+65535,U=Math.floor(f/65536),pe=f-U*65536,f=Oe+U+65535,U=Math.floor(f/65536),Oe=f-U*65536,f=Be+U+65535,U=Math.floor(f/65536),Be=f-U*65536,f=Ve+U+65535,U=Math.floor(f/65536),Ve=f-U*65536,f=Le+U+65535,U=Math.floor(f/65536),Le=f-U*65536,f=gt+U+65535,U=Math.floor(f/65536),gt=f-U*65536,f=yt+U+65535,U=Math.floor(f/65536),yt=f-U*65536,f=Me+U+65535,U=Math.floor(f/65536),Me=f-U*65536,f=Ie+U+65535,U=Math.floor(f/65536),Ie=f-U*65536,f=Re+U+65535,U=Math.floor(f/65536),Re=f-U*65536,f=Fe+U+65535,U=Math.floor(f/65536),Fe=f-U*65536,f=ze+U+65535,U=Math.floor(f/65536),ze=f-U*65536,f=Pe+U+65535,U=Math.floor(f/65536),Pe=f-U*65536,f=Ue+U+65535,U=Math.floor(f/65536),Ue=f-U*65536,f=Se+U+65535,U=Math.floor(f/65536),Se=f-U*65536,fe+=U-1+37*(U-1),X[0]=fe,X[1]=pe,X[2]=Oe,X[3]=Be,X[4]=Ve,X[5]=Le,X[6]=gt,X[7]=yt,X[8]=Me,X[9]=Ie,X[10]=Re,X[11]=Fe,X[12]=ze,X[13]=Pe,X[14]=Ue,X[15]=Se}function d(X,Y){c(X,Y,Y)}function Z(X,Y){const B=o();let f;for(f=0;f<16;f++)B[f]=Y[f];for(f=253;f>=0;f--)d(B,B),f!==2&&f!==4&&c(B,B,Y);for(f=0;f<16;f++)X[f]=B[f]}function h(X,Y){const B=o();let f;for(f=0;f<16;f++)B[f]=Y[f];for(f=250;f>=0;f--)d(B,B),f!==1&&c(B,B,Y);for(f=0;f<16;f++)X[f]=B[f]}function p(X,Y){const B=o(),f=o(),U=o(),fe=o(),pe=o(),Oe=o(),Be=o(),Ve=o(),Le=o();m(B,X[1],X[0]),m(Le,Y[1],Y[0]),c(B,B,Le),x(f,X[0],X[1]),x(Le,Y[0],Y[1]),c(f,f,Le),c(U,X[3],Y[3]),c(U,U,N),c(fe,X[2],Y[2]),x(fe,fe,fe),m(pe,f,B),m(Oe,fe,U),x(Be,fe,U),x(Ve,f,B),c(X[0],pe,Oe),c(X[1],Ve,Be),c(X[2],Be,Oe),c(X[3],pe,Ve)}function v(X,Y,B){for(let f=0;f<4;f++)J(X[f],Y[f],B)}function P(X,Y){const B=o(),f=o(),U=o();Z(U,Y[2]),c(B,Y[0],U),c(f,Y[1],U),W(X,f),X[31]^=A(B)<<7}function b(X,Y,B){z(X[0],w),z(X[1],y),z(X[2],y),z(X[3],w);for(let f=255;f>=0;--f){const U=B[f/8|0]>>(f&7)&1;v(X,Y,U),p(Y,X),p(X,X),v(X,Y,U)}}function g(X,Y){const B=[o(),o(),o(),o()];z(B[0],T),z(B[1],j),z(B[2],y),c(B[3],T,j),b(X,B,Y)}function L(X){if(X.length!==i.SEED_LENGTH)throw new Error(`ed25519: seed must be ${i.SEED_LENGTH} bytes`);const Y=(0,r.hash)(X);Y[0]&=248,Y[31]&=127,Y[31]|=64;const B=new Uint8Array(32),f=[o(),o(),o(),o()];g(f,Y),P(B,f);const U=new Uint8Array(64);return U.set(X),U.set(B,32),{publicKey:B,secretKey:U}}i.generateKeyPairFromSeed=L;function q(X){const Y=(0,t.randomBytes)(32,X),B=L(Y);return(0,s.wipe)(Y),B}i.generateKeyPair=q;function Q(X){if(X.length!==i.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${i.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(X.subarray(32))}i.extractPublicKeyFromSecretKey=Q;const R=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function k(X,Y){let B,f,U,fe;for(f=63;f>=32;--f){for(B=0,U=f-32,fe=f-12;U<fe;++U)Y[U]+=B-16*Y[f]*R[U-(f-32)],B=Math.floor((Y[U]+128)/256),Y[U]-=B*256;Y[U]+=B,Y[f]=0}for(B=0,U=0;U<32;U++)Y[U]+=B-(Y[31]>>4)*R[U],B=Y[U]>>8,Y[U]&=255;for(U=0;U<32;U++)Y[U]-=B*R[U];for(f=0;f<32;f++)Y[f+1]+=Y[f]>>8,X[f]=Y[f]&255}function te(X){const Y=new Float64Array(64);for(let B=0;B<64;B++)Y[B]=X[B];for(let B=0;B<64;B++)X[B]=0;k(X,Y)}function se(X,Y){const B=new Float64Array(64),f=[o(),o(),o(),o()],U=(0,r.hash)(X.subarray(0,32));U[0]&=248,U[31]&=127,U[31]|=64;const fe=new Uint8Array(64);fe.set(U.subarray(32),32);const pe=new r.SHA512;pe.update(fe.subarray(32)),pe.update(Y);const Oe=pe.digest();pe.clean(),te(Oe),g(f,Oe),P(fe,f),pe.reset(),pe.update(fe.subarray(0,32)),pe.update(X.subarray(32)),pe.update(Y);const Be=pe.digest();te(Be);for(let Ve=0;Ve<32;Ve++)B[Ve]=Oe[Ve];for(let Ve=0;Ve<32;Ve++)for(let Le=0;Le<32;Le++)B[Ve+Le]+=Be[Ve]*U[Le];return k(fe.subarray(32),B),fe}i.sign=se;function ne(X,Y){const B=o(),f=o(),U=o(),fe=o(),pe=o(),Oe=o(),Be=o();return z(X[2],y),S(X[1],Y),d(U,X[1]),c(fe,U,E),m(U,U,X[2]),x(fe,X[2],fe),d(pe,fe),d(Oe,pe),c(Be,Oe,pe),c(B,Be,U),c(B,B,fe),h(B,B),c(B,B,U),c(B,B,fe),c(B,B,fe),c(X[0],B,fe),d(f,X[0]),c(f,f,fe),O(f,U)&&c(X[0],X[0],G),d(f,X[0]),c(f,f,fe),O(f,U)?-1:(A(X[0])===Y[31]>>7&&m(X[0],w,X[0]),c(X[3],X[0],X[1]),0)}function _e(X,Y,B){const f=new Uint8Array(32),U=[o(),o(),o(),o()],fe=[o(),o(),o(),o()];if(B.length!==i.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${i.SIGNATURE_LENGTH} bytes`);if(ne(fe,X))return!1;const pe=new r.SHA512;pe.update(B.subarray(0,32)),pe.update(X),pe.update(Y);const Oe=pe.digest();return te(Oe),b(U,fe,Oe),g(fe,B.subarray(32)),p(U,fe),P(f,U),!oe(B,f)}i.verify=_e;function he(X){let Y=[o(),o(),o(),o()];if(ne(Y,X))throw new Error("Ed25519: invalid public key");let B=o(),f=o(),U=Y[1];x(B,y,U),m(f,y,U),Z(f,f),c(B,B,f);let fe=new Uint8Array(32);return W(fe,B),fe}i.convertPublicKeyToX25519=he;function be(X){const Y=(0,r.hash)(X.subarray(0,32));Y[0]&=248,Y[31]&=127,Y[31]|=64;const B=new Uint8Array(Y.subarray(0,32));return(0,s.wipe)(Y),B}i.convertSecretKeyToX25519=be})(au);const fw="EdDSA",hw="JWT",bd=".",md="base64url",lw="utf8",dw="utf8",pw=":",gw="did",yw="key",Jh="base58btc",_w="z",vw="K36",bw=32;function Fa(i){return fr(vr(Xc(i),lw),md)}function wd(i){const t=vr(vw,Jh),r=_w+fr(qc([t,i]),Jh);return[gw,yw,r].join(pw)}function mw(i){return fr(i,md)}function ww(i){return vr([Fa(i.header),Fa(i.payload)].join(bd),dw)}function Ew(i){return[Fa(i.header),Fa(i.payload),mw(i.signature)].join(bd)}function Xh(i=Ci.randomBytes(bw)){return au.generateKeyPairFromSeed(i)}async function Dw(i,t,r,s,o=De.fromMiliseconds(Date.now())){const l={alg:fw,typ:hw},w=wd(s.publicKey),y=o+r,E={iss:w,sub:i,aud:t,iat:o,exp:y},N=ww({header:l,payload:E}),T=au.sign(s.secretKey,N);return Ew({header:l,payload:E,signature:T})}var Zh=globalThis&&globalThis.__spreadArray||function(i,t,r){if(r||arguments.length===2)for(var s=0,o=t.length,l;s<o;s++)(l||!(s in t))&&(l||(l=Array.prototype.slice.call(t,0,s)),l[s]=t[s]);return i.concat(l||Array.prototype.slice.call(t))},Sw=function(){function i(t,r,s){this.name=t,this.version=r,this.os=s,this.type="browser"}return i}(),Ow=function(){function i(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return i}(),Iw=function(){function i(t,r,s,o){this.name=t,this.version=r,this.os=s,this.bot=o,this.type="bot-device"}return i}(),xw=function(){function i(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return i}(),Pw=function(){function i(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return i}(),Aw=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Cw=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Qh=3,Tw=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Aw]],el=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Nw(i){return i?tl(i):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Pw:typeof navigator<"u"?tl(navigator.userAgent):Uw()}function Rw(i){return i!==""&&Tw.reduce(function(t,r){var s=r[0],o=r[1];if(t)return t;var l=o.exec(i);return!!l&&[s,l]},!1)}function tl(i){var t=Rw(i);if(!t)return null;var r=t[0],s=t[1];if(r==="searchbot")return new xw;var o=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);o?o.length<Qh&&(o=Zh(Zh([],o,!0),jw(Qh-o.length),!0)):o=[];var l=o.join("."),w=Fw(i),y=Cw.exec(i);return y&&y[1]?new Iw(r,l,w,y[1]):new Sw(r,l,w)}function Fw(i){for(var t=0,r=el.length;t<r;t++){var s=el[t],o=s[0],l=s[1],w=l.exec(i);if(w)return o}return null}function Uw(){var i=typeof process<"u"&&process.version;return i?new Ow(process.version.slice(1)):null}function jw(i){for(var t=[],r=0;r<i;r++)t.push("0");return t}var ht={};Object.defineProperty(ht,"__esModule",{value:!0});ht.getLocalStorage=ht.getLocalStorageOrThrow=ht.getCrypto=ht.getCryptoOrThrow=Dd=ht.getLocation=ht.getLocationOrThrow=ou=ht.getNavigator=ht.getNavigatorOrThrow=Ed=ht.getDocument=ht.getDocumentOrThrow=ht.getFromWindowOrThrow=ht.getFromWindow=void 0;function ei(i){let t;return typeof window<"u"&&typeof window[i]<"u"&&(t=window[i]),t}ht.getFromWindow=ei;function Ti(i){const t=ei(i);if(!t)throw new Error(`${i} is not defined in Window`);return t}ht.getFromWindowOrThrow=Ti;function Lw(){return Ti("document")}ht.getDocumentOrThrow=Lw;function $w(){return ei("document")}var Ed=ht.getDocument=$w;function Mw(){return Ti("navigator")}ht.getNavigatorOrThrow=Mw;function zw(){return ei("navigator")}var ou=ht.getNavigator=zw;function qw(){return Ti("location")}ht.getLocationOrThrow=qw;function Bw(){return ei("location")}var Dd=ht.getLocation=Bw;function Hw(){return Ti("crypto")}ht.getCryptoOrThrow=Hw;function Kw(){return ei("crypto")}ht.getCrypto=Kw;function Vw(){return Ti("localStorage")}ht.getLocalStorageOrThrow=Vw;function kw(){return ei("localStorage")}ht.getLocalStorage=kw;var cu={};Object.defineProperty(cu,"__esModule",{value:!0});var Sd=cu.getWindowMetadata=void 0;const rl=ht;function Gw(){let i,t;try{i=rl.getDocumentOrThrow(),t=rl.getLocationOrThrow()}catch{return null}function r(){const j=i.getElementsByTagName("link"),G=[];for(let z=0;z<j.length;z++){const M=j[z],J=M.getAttribute("rel");if(J&&J.toLowerCase().indexOf("icon")>-1){const W=M.getAttribute("href");if(W)if(W.toLowerCase().indexOf("https:")===-1&&W.toLowerCase().indexOf("http:")===-1&&W.indexOf("//")!==0){let oe=t.protocol+"//"+t.host;if(W.indexOf("/")===0)oe+=W;else{const O=t.pathname.split("/");O.pop();const A=O.join("/");oe+=A+"/"+W}G.push(oe)}else if(W.indexOf("//")===0){const oe=t.protocol+W;G.push(oe)}else G.push(W)}}return G}function s(...j){const G=i.getElementsByTagName("meta");for(let z=0;z<G.length;z++){const M=G[z],J=["itemprop","property","name"].map(W=>M.getAttribute(W)).filter(W=>W?j.includes(W):!1);if(J.length&&J){const W=M.getAttribute("content");if(W)return W}}return""}function o(){let j=s("name","og:site_name","og:title","twitter:title");return j||(j=i.title),j}function l(){return s("description","og:description","twitter:description","keywords")}const w=o(),y=l(),E=t.origin,N=r();return{description:y,url:E,icons:N,name:w}}Sd=cu.getWindowMetadata=Gw;var ls={};(function(i){const t=kl,r=Gl,s=Vl,o=dd,l=O=>O==null,w=Symbol("encodeFragmentIdentifier");function y(O){switch(O.arrayFormat){case"index":return A=>(S,x)=>{const m=S.length;return x===void 0||O.skipNull&&x===null||O.skipEmptyString&&x===""?S:x===null?[...S,[T(A,O),"[",m,"]"].join("")]:[...S,[T(A,O),"[",T(m,O),"]=",T(x,O)].join("")]};case"bracket":return A=>(S,x)=>x===void 0||O.skipNull&&x===null||O.skipEmptyString&&x===""?S:x===null?[...S,[T(A,O),"[]"].join("")]:[...S,[T(A,O),"[]=",T(x,O)].join("")];case"colon-list-separator":return A=>(S,x)=>x===void 0||O.skipNull&&x===null||O.skipEmptyString&&x===""?S:x===null?[...S,[T(A,O),":list="].join("")]:[...S,[T(A,O),":list=",T(x,O)].join("")];case"comma":case"separator":case"bracket-separator":{const A=O.arrayFormat==="bracket-separator"?"[]=":"=";return S=>(x,m)=>m===void 0||O.skipNull&&m===null||O.skipEmptyString&&m===""?x:(m=m===null?"":m,x.length===0?[[T(S,O),A,T(m,O)].join("")]:[[x,T(m,O)].join(O.arrayFormatSeparator)])}default:return A=>(S,x)=>x===void 0||O.skipNull&&x===null||O.skipEmptyString&&x===""?S:x===null?[...S,T(A,O)]:[...S,[T(A,O),"=",T(x,O)].join("")]}}function E(O){let A;switch(O.arrayFormat){case"index":return(S,x,m)=>{if(A=/\[(\d*)\]$/.exec(S),S=S.replace(/\[\d*\]$/,""),!A){m[S]=x;return}m[S]===void 0&&(m[S]={}),m[S][A[1]]=x};case"bracket":return(S,x,m)=>{if(A=/(\[\])$/.exec(S),S=S.replace(/\[\]$/,""),!A){m[S]=x;return}if(m[S]===void 0){m[S]=[x];return}m[S]=[].concat(m[S],x)};case"colon-list-separator":return(S,x,m)=>{if(A=/(:list)$/.exec(S),S=S.replace(/:list$/,""),!A){m[S]=x;return}if(m[S]===void 0){m[S]=[x];return}m[S]=[].concat(m[S],x)};case"comma":case"separator":return(S,x,m)=>{const c=typeof x=="string"&&x.includes(O.arrayFormatSeparator),d=typeof x=="string"&&!c&&j(x,O).includes(O.arrayFormatSeparator);x=d?j(x,O):x;const Z=c||d?x.split(O.arrayFormatSeparator).map(h=>j(h,O)):x===null?x:j(x,O);m[S]=Z};case"bracket-separator":return(S,x,m)=>{const c=/(\[\])$/.test(S);if(S=S.replace(/\[\]$/,""),!c){m[S]=x&&j(x,O);return}const d=x===null?[]:x.split(O.arrayFormatSeparator).map(Z=>j(Z,O));if(m[S]===void 0){m[S]=d;return}m[S]=[].concat(m[S],d)};default:return(S,x,m)=>{if(m[S]===void 0){m[S]=x;return}m[S]=[].concat(m[S],x)}}}function N(O){if(typeof O!="string"||O.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function T(O,A){return A.encode?A.strict?t(O):encodeURIComponent(O):O}function j(O,A){return A.decode?r(O):O}function G(O){return Array.isArray(O)?O.sort():typeof O=="object"?G(Object.keys(O)).sort((A,S)=>Number(A)-Number(S)).map(A=>O[A]):O}function z(O){const A=O.indexOf("#");return A!==-1&&(O=O.slice(0,A)),O}function M(O){let A="";const S=O.indexOf("#");return S!==-1&&(A=O.slice(S)),A}function J(O){O=z(O);const A=O.indexOf("?");return A===-1?"":O.slice(A+1)}function W(O,A){return A.parseNumbers&&!Number.isNaN(Number(O))&&typeof O=="string"&&O.trim()!==""?O=Number(O):A.parseBooleans&&O!==null&&(O.toLowerCase()==="true"||O.toLowerCase()==="false")&&(O=O.toLowerCase()==="true"),O}function oe(O,A){A=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},A),N(A.arrayFormatSeparator);const S=E(A),x=Object.create(null);if(typeof O!="string"||(O=O.trim().replace(/^[?#&]/,""),!O))return x;for(const m of O.split("&")){if(m==="")continue;let[c,d]=s(A.decode?m.replace(/\+/g," "):m,"=");d=d===void 0?null:["comma","separator","bracket-separator"].includes(A.arrayFormat)?d:j(d,A),S(j(c,A),d,x)}for(const m of Object.keys(x)){const c=x[m];if(typeof c=="object"&&c!==null)for(const d of Object.keys(c))c[d]=W(c[d],A);else x[m]=W(c,A)}return A.sort===!1?x:(A.sort===!0?Object.keys(x).sort():Object.keys(x).sort(A.sort)).reduce((m,c)=>{const d=x[c];return Boolean(d)&&typeof d=="object"&&!Array.isArray(d)?m[c]=G(d):m[c]=d,m},Object.create(null))}i.extract=J,i.parse=oe,i.stringify=(O,A)=>{if(!O)return"";A=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},A),N(A.arrayFormatSeparator);const S=d=>A.skipNull&&l(O[d])||A.skipEmptyString&&O[d]==="",x=y(A),m={};for(const d of Object.keys(O))S(d)||(m[d]=O[d]);const c=Object.keys(m);return A.sort!==!1&&c.sort(A.sort),c.map(d=>{const Z=O[d];return Z===void 0?"":Z===null?T(d,A):Array.isArray(Z)?Z.length===0&&A.arrayFormat==="bracket-separator"?T(d,A)+"[]":Z.reduce(x(d),[]).join("&"):T(d,A)+"="+T(Z,A)}).filter(d=>d.length>0).join("&")},i.parseUrl=(O,A)=>{A=Object.assign({decode:!0},A);const[S,x]=s(O,"#");return Object.assign({url:S.split("?")[0]||"",query:oe(J(O),A)},A&&A.parseFragmentIdentifier&&x?{fragmentIdentifier:j(x,A)}:{})},i.stringifyUrl=(O,A)=>{A=Object.assign({encode:!0,strict:!0,[w]:!0},A);const S=z(O.url).split("?")[0]||"",x=i.extract(O.url),m=i.parse(x,{sort:!1}),c=Object.assign(m,O.query);let d=i.stringify(c,A);d&&(d=`?${d}`);let Z=M(O.url);return O.fragmentIdentifier&&(Z=`#${A[w]?T(O.fragmentIdentifier,A):O.fragmentIdentifier}`),`${S}${d}${Z}`},i.pick=(O,A,S)=>{S=Object.assign({parseFragmentIdentifier:!0,[w]:!1},S);const{url:x,query:m,fragmentIdentifier:c}=i.parseUrl(O,S);return i.stringifyUrl({url:x,query:o(m,A),fragmentIdentifier:c},S)},i.exclude=(O,A,S)=>{const x=Array.isArray(A)?m=>!A.includes(m):(m,c)=>!A(m,c);return i.pick(O,x,S)}})(ls);function Od(i,t){return i.includes(":")?[i]:t.chains||[]}const Id="base10",ur="base16",Hc="base64pad",uu="utf8",xd=0,ti=1,Ww=0,nl=1,Kc=12,fu=32;function Yw(){const i=iu.generateKeyPair();return{privateKey:fr(i.secretKey,ur),publicKey:fr(i.publicKey,ur)}}function Vc(){const i=Ci.randomBytes(fu);return fr(i,ur)}function Jw(i,t){const r=iu.sharedKey(vr(i,ur),vr(t,ur)),s=new mb(Ba.SHA256,r).expand(fu);return fr(s,ur)}function Xw(i){const t=Ba.hash(vr(i,ur));return fr(t,ur)}function Xn(i){const t=Ba.hash(vr(i,uu));return fr(t,ur)}function Zw(i){return vr(`${i}`,Id)}function _s(i){return Number(fr(i,Id))}function Qw(i){const t=Zw(typeof i.type<"u"?i.type:xd);if(_s(t)===ti&&typeof i.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof i.senderPublicKey<"u"?vr(i.senderPublicKey,ur):void 0,s=typeof i.iv<"u"?vr(i.iv,ur):Ci.randomBytes(Kc),o=new ru.ChaCha20Poly1305(vr(i.symKey,ur)).seal(s,vr(i.message,uu));return tE({type:t,sealed:o,iv:s,senderPublicKey:r})}function eE(i){const t=new ru.ChaCha20Poly1305(vr(i.symKey,ur)),{sealed:r,iv:s}=Ua(i.encoded),o=t.open(s,r);if(o===null)throw new Error("Failed to decrypt");return fr(o,uu)}function tE(i){if(_s(i.type)===ti){if(typeof i.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return fr(qc([i.type,i.senderPublicKey,i.iv,i.sealed]),Hc)}return fr(qc([i.type,i.iv,i.sealed]),Hc)}function Ua(i){const t=vr(i,Hc),r=t.slice(Ww,nl),s=nl;if(_s(r)===ti){const y=s+fu,E=y+Kc,N=t.slice(s,y),T=t.slice(y,E),j=t.slice(E);return{type:r,sealed:j,iv:T,senderPublicKey:N}}const o=s+Kc,l=t.slice(s,o),w=t.slice(o);return{type:r,sealed:w,iv:l}}function rE(i,t){const r=Ua(i);return Pd({type:_s(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?fr(r.senderPublicKey,ur):void 0,receiverPublicKey:t?.receiverPublicKey})}function Pd(i){const t=i?.type||xd;if(t===ti){if(typeof i?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof i?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:i?.senderPublicKey,receiverPublicKey:i?.receiverPublicKey}}function il(i){return i.type===ti&&typeof i.senderPublicKey=="string"&&typeof i.receiverPublicKey=="string"}var nE=Object.defineProperty,sl=Object.getOwnPropertySymbols,iE=Object.prototype.hasOwnProperty,sE=Object.prototype.propertyIsEnumerable,al=(i,t,r)=>t in i?nE(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,ol=(i,t)=>{for(var r in t||(t={}))iE.call(t,r)&&al(i,r,t[r]);if(sl)for(var r of sl(t))sE.call(t,r)&&al(i,r,t[r]);return i};const aE="ReactNative",fs={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},oE="js";function hu(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Ad(){return!Ed()&&!!ou()&&navigator.product===aE}function lu(){return!hu()&&!!ou()}function cE(){return Ad()?fs.reactNative:hu()?fs.node:lu()?fs.browser:fs.unknown}function uE(i,t){let r=ls.parse(i);return r=ol(ol({},r),t),i=ls.stringify(r),i}function fE(){return Sd()||{name:"",description:"",url:"",icons:[""]}}function hE(){const i=Nw();if(i===null)return"unknown";const t=i.os?i.os.replace(" ","").toLowerCase():"unknown";return i.type==="browser"?[t,i.name,i.version].join("-"):[t,i.version].join("-")}function lE(){var i;const t=cE();return t===fs.browser?[t,((i=Dd())==null?void 0:i.host)||"unknown"].join(":"):t}function dE(i,t,r){const s=hE(),o=lE();return[[i,t].join("-"),[oE,r].join("-"),s,o].join("/")}function pE({protocol:i,version:t,relayUrl:r,sdkVersion:s,auth:o,projectId:l,useOnCloseEvent:w}){const y=r.split("?"),E=dE(i,t,s),N={auth:o,ua:E,projectId:l,useOnCloseEvent:w||void 0},T=uE(y[1]||"",N);return y[0]+"?"+T}function Jn(i,t){return i.filter(r=>t.includes(r)).length===i.length}function Cd(i){return Object.fromEntries(i.entries())}function Td(i){return new Map(Object.entries(i))}function Ii(i=De.FIVE_MINUTES,t){const r=De.toMiliseconds(i||De.FIVE_MINUTES);let s,o,l;return{resolve:w=>{l&&s&&(clearTimeout(l),s(w))},reject:w=>{l&&o&&(clearTimeout(l),o(w))},done:()=>new Promise((w,y)=>{l=setTimeout(()=>{y(new Error(t))},r),s=w,o=y})}}function ja(i,t,r){return new Promise(async(s,o)=>{const l=setTimeout(()=>o(new Error(r)),t);try{const w=await i;s(w)}catch(w){o(w)}clearTimeout(l)})}function Nd(i,t){if(typeof t=="string"&&t.startsWith(`${i}:`))return t;if(i.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(i.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${i}`)}function gE(i){return Nd("topic",i)}function yE(i){return Nd("id",i)}function Rd(i){const[t,r]=i.split(":"),s={id:void 0,topic:void 0};if(t==="topic"&&typeof r=="string")s.topic=r;else if(t==="id"&&Number.isInteger(Number(r)))s.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return s}function Vr(i,t){return De.fromMiliseconds((t||Date.now())+De.toMiliseconds(i))}function xn(i){return Date.now()>=De.toMiliseconds(i)}function zt(i,t){return`${i}${t?`:${t}`:""}`}const _E="irn";function kc(i){return i?.relay||{protocol:_E}}function xa(i){const t=Nm[i];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${i}`);return t}var vE=Object.defineProperty,cl=Object.getOwnPropertySymbols,bE=Object.prototype.hasOwnProperty,mE=Object.prototype.propertyIsEnumerable,ul=(i,t,r)=>t in i?vE(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,wE=(i,t)=>{for(var r in t||(t={}))bE.call(t,r)&&ul(i,r,t[r]);if(cl)for(var r of cl(t))mE.call(t,r)&&ul(i,r,t[r]);return i};function EE(i,t="-"){const r={},s="relay"+t;return Object.keys(i).forEach(o=>{if(o.startsWith(s)){const l=o.replace(s,""),w=i[o];r[l]=w}}),r}function DE(i){const t=i.indexOf(":"),r=i.indexOf("?")!==-1?i.indexOf("?"):void 0,s=i.substring(0,t),o=i.substring(t+1,r).split("@"),l=typeof r<"u"?i.substring(r):"",w=ls.parse(l);return{protocol:s,topic:o[0],version:parseInt(o[1],10),symKey:w.symKey,relay:EE(w)}}function SE(i,t="-"){const r="relay",s={};return Object.keys(i).forEach(o=>{const l=r+t+o;i[o]&&(s[l]=i[o])}),s}function OE(i){return`${i.protocol}:${i.topic}@${i.version}?`+ls.stringify(wE({symKey:i.symKey},SE(i.relay)))}function Ni(i){const t=[];return i.forEach(r=>{const[s,o]=r.split(":");t.push(`${s}:${o}`)}),t}function IE(i){const t=[];return Object.values(i).forEach(r=>{t.push(...Ni(r.accounts))}),t}function xE(i,t){const r=[];return Object.values(i).forEach(s=>{Ni(s.accounts).includes(t)&&r.push(...s.methods)}),r}function PE(i,t){const r=[];return Object.values(i).forEach(s=>{Ni(s.accounts).includes(t)&&r.push(...s.events)}),r}function AE(i,t){const r=Pa(i,t);if(r)throw new Error(r.message);const s={};for(const[o,l]of Object.entries(i))s[o]={methods:l.methods,events:l.events,chains:l.accounts.map(w=>`${w.split(":")[0]}:${w.split(":")[1]}`)};return s}const CE={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},TE={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function de(i,t){const{message:r,code:s}=TE[i];return{message:t?`${r} ${t}`:r,code:s}}function kt(i,t){const{message:r,code:s}=CE[i];return{message:t?`${r} ${t}`:r,code:s}}function vs(i,t){return Array.isArray(i)?typeof t<"u"&&i.length?i.every(t):!0:!1}function hs(i){return Object.getPrototypeOf(i)===Object.prototype&&Object.keys(i).length}function or(i){return typeof i>"u"}function Gt(i,t){return t&&or(i)?!0:typeof i=="string"&&Boolean(i.trim().length)}function du(i,t){return t&&or(i)?!0:typeof i=="number"&&!isNaN(i)}function NE(i,t){const{requiredNamespaces:r}=t,s=Object.keys(i.namespaces),o=Object.keys(r);let l=!0;return Jn(o,s)?(s.forEach(w=>{const{accounts:y,methods:E,events:N}=i.namespaces[w],T=Ni(y),j=r[w];(!Jn(Od(w,j),T)||!Jn(j.methods,E)||!Jn(j.events,N))&&(l=!1)}),l):!1}function pu(i){return Gt(i,!1)&&i.includes(":")?i.split(":").length===2:!1}function RE(i){if(Gt(i,!1)&&i.includes(":")){const t=i.split(":");if(t.length===3){const r=t[0]+":"+t[1];return!!t[2]&&pu(r)}}return!1}function FE(i){if(Gt(i,!1))try{return typeof new URL(i)<"u"}catch{return!1}return!1}function UE(i){var t;return(t=i?.proposer)==null?void 0:t.publicKey}function jE(i){return i?.topic}function LE(i,t){let r=null;return Gt(i?.publicKey,!1)||(r=de("MISSING_OR_INVALID",`${t} controller public key should be a string`)),r}function fl(i){let t=!0;return vs(i)?i.length&&(t=i.every(r=>Gt(r,!1))):t=!1,t}function $E(i,t,r){let s=null;return vs(t)?t.forEach(o=>{s||(!pu(o)||!o.includes(i))&&(s=kt("UNSUPPORTED_CHAINS",`${r}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):s=kt("UNSUPPORTED_CHAINS",`${r}, chains ${t} should be an array of strings conforming to "namespace:chainId" format`),s}function ME(i,t){let r=null;return Object.entries(i).forEach(([s,o])=>{if(r)return;const l=$E(s,Od(s,o),`${t} requiredNamespace`);l&&(r=l)}),r}function zE(i,t){let r=null;return vs(i)?i.forEach(s=>{r||RE(s)||(r=kt("UNSUPPORTED_ACCOUNTS",`${t}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):r=kt("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function qE(i,t){let r=null;return Object.values(i).forEach(s=>{if(r)return;const o=zE(s?.accounts,`${t} namespace`);o&&(r=o)}),r}function BE(i,t){let r=null;return fl(i?.methods)?fl(i?.events)||(r=kt("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=kt("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}function Fd(i,t){let r=null;return Object.values(i).forEach(s=>{if(r)return;const o=BE(s,`${t}, namespace`);o&&(r=o)}),r}function HE(i,t,r){let s=null;if(i&&hs(i)){const o=Fd(i,t);o&&(s=o);const l=ME(i,t);l&&(s=l)}else s=de("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return s}function Pa(i,t){let r=null;if(i&&hs(i)){const s=Fd(i,t);s&&(r=s);const o=qE(i,t);o&&(r=o)}else r=de("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function Ud(i){return Gt(i.protocol,!0)}function KE(i,t){let r=!1;return t&&!i?r=!0:i&&vs(i)&&i.length&&i.forEach(s=>{r=Ud(s)}),r}function VE(i){return typeof i=="number"}function _r(i){return typeof i<"u"&&typeof i!==null}function kE(i){return!(!i||typeof i!="object"||!i.code||!du(i.code,!1)||!i.message||!Gt(i.message,!1))}function GE(i){return!(or(i)||!Gt(i.method,!1))}function WE(i){return!(or(i)||or(i.result)&&or(i.error)||!du(i.id,!1)||!Gt(i.jsonrpc,!1))}function YE(i){return!(or(i)||!Gt(i.name,!1))}function hl(i,t){return!(!pu(t)||!IE(i).includes(t))}function JE(i,t,r){return Gt(r,!1)?xE(i,t).includes(r):!1}function XE(i,t,r){return Gt(r,!1)?PE(i,t).includes(r):!1}function ll(i,t,r){let s=null;const o=ZE(i),l=QE(t),w=Object.keys(o),y=Object.keys(l),E=dl(Object.keys(i)),N=dl(Object.keys(t)),T=E.filter(j=>!N.includes(j));return T.length&&(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${T.toString()}
      Received: ${Object.keys(t).toString()}`)),Jn(w,y)||(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${w.toString()}
      Approved: ${y.toString()}`)),Object.keys(t).forEach(j=>{if(!j.includes(":")||s)return;const G=Ni(t[j].accounts);G.includes(j)||(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${j}
        Required: ${j}
        Approved: ${G.toString()}`))}),w.forEach(j=>{s||(Jn(o[j].methods,l[j].methods)?Jn(o[j].events,l[j].events)||(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${j}`)):s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${j}`))}),s}function ZE(i){const t={};return Object.keys(i).forEach(r=>{var s;r.includes(":")?t[r]=i[r]:(s=i[r].chains)==null||s.forEach(o=>{t[o]={methods:i[r].methods,events:i[r].events}})}),t}function dl(i){return[...new Set(i.map(t=>t.includes(":")?t.split(":")[0]:t))]}function QE(i){const t={};return Object.keys(i).forEach(r=>{r.includes(":")?t[r]=i[r]:Ni(i[r].accounts)?.forEach(o=>{t[o]={accounts:i[r].accounts.filter(l=>l.includes(`${o}:`)),methods:i[r].methods,events:i[r].events}})}),t}function e3(i,t){return du(i,!1)&&i<=t.max&&i>=t.min}const pl=10,t3=()=>typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:require("ws"),r3=()=>typeof window<"u",n3=t3();class i3{constructor(t){if(this.url=t,this.events=new $r.EventEmitter,this.registering=!1,!wh(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);this.url=t}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){return new Promise((t,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),t()},this.socket.close()})}async send(t,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Xc(t))}catch(s){this.onError(t.id,s)}}register(t=this.url){if(!wh(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((s,o)=>{this.events.once("register_error",l=>{this.resetMaxListeners(),o(l)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=t,this.registering=!0,new Promise((r,s)=>{const o=$v.isReactNative()?void 0:{rejectUnauthorized:!Mv(t)},l=new n3(t,[],o);r3()?l.onerror=w=>{const y=w;s(this.emitError(y.error))}:l.on("error",w=>{s(this.emitError(w))}),l.onopen=()=>{this.onOpen(l),r(l)}})}onOpen(t){t.onmessage=r=>this.onPayload(r),t.onclose=r=>this.onClose(r),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(typeof t.data>"u")return;const r=typeof t.data=="string"?Wl(t.data):t.data;this.events.emit("payload",r)}onError(t,r){const s=this.parseError(r),o=s.message||s.toString(),l=Zc(t,o);this.events.emit("payload",l)}parseError(t,r=this.url){return zv(t,r,"WS")}resetMaxListeners(){this.events.getMaxListeners()>pl&&this.events.setMaxListeners(pl)}emitError(t){const r=this.parseError(new Error(t?.message||`WebSocket connection failed for URL: ${this.url}`));return this.events.emit("register_error",r),r}}var La={},s3={get exports(){return La},set exports(i){La=i}};(function(i,t){var r=200,s="__lodash_hash_undefined__",o=1,l=2,w=9007199254740991,y="[object Arguments]",E="[object Array]",N="[object AsyncFunction]",T="[object Boolean]",j="[object Date]",G="[object Error]",z="[object Function]",M="[object GeneratorFunction]",J="[object Map]",W="[object Number]",oe="[object Null]",O="[object Object]",A="[object Promise]",S="[object Proxy]",x="[object RegExp]",m="[object Set]",c="[object String]",d="[object Symbol]",Z="[object Undefined]",h="[object WeakMap]",p="[object ArrayBuffer]",v="[object DataView]",P="[object Float32Array]",b="[object Float64Array]",g="[object Int8Array]",L="[object Int16Array]",q="[object Int32Array]",Q="[object Uint8Array]",R="[object Uint8ClampedArray]",k="[object Uint16Array]",te="[object Uint32Array]",se=/[\\^$.*+?()[\]{}|]/g,ne=/^\[object .+?Constructor\]$/,_e=/^(?:0|[1-9]\d*)$/,he={};he[P]=he[b]=he[g]=he[L]=he[q]=he[Q]=he[R]=he[k]=he[te]=!0,he[y]=he[E]=he[p]=he[T]=he[v]=he[j]=he[G]=he[z]=he[J]=he[W]=he[O]=he[x]=he[m]=he[c]=he[h]=!1;var be=typeof cr=="object"&&cr&&cr.Object===Object&&cr,X=typeof self=="object"&&self&&self.Object===Object&&self,Y=be||X||Function("return this")(),B=t&&!t.nodeType&&t,f=B&&!0&&i&&!i.nodeType&&i,U=f&&f.exports===B,fe=U&&be.process,pe=function(){try{return fe&&fe.binding&&fe.binding("util")}catch{}}(),Oe=pe&&pe.isTypedArray;function Be(C,H){for(var ce=-1,ge=C==null?0:C.length,ot=0,Te=[];++ce<ge;){var dt=C[ce];H(dt,ce,C)&&(Te[ot++]=dt)}return Te}function Ve(C,H){for(var ce=-1,ge=H.length,ot=C.length;++ce<ge;)C[ot+ce]=H[ce];return C}function Le(C,H){for(var ce=-1,ge=C==null?0:C.length;++ce<ge;)if(H(C[ce],ce,C))return!0;return!1}function gt(C,H){for(var ce=-1,ge=Array(C);++ce<C;)ge[ce]=H(ce);return ge}function yt(C){return function(H){return C(H)}}function Me(C,H){return C.has(H)}function Ie(C,H){return C?.[H]}function Re(C){var H=-1,ce=Array(C.size);return C.forEach(function(ge,ot){ce[++H]=[ot,ge]}),ce}function Fe(C,H){return function(ce){return C(H(ce))}}function ze(C){var H=-1,ce=Array(C.size);return C.forEach(function(ge){ce[++H]=ge}),ce}var Pe=Array.prototype,Ue=Function.prototype,Se=Object.prototype,Ae=Y["__core-js_shared__"],He=Ue.toString,xe=Se.hasOwnProperty,ke=function(){var C=/[^.]+$/.exec(Ae&&Ae.keys&&Ae.keys.IE_PROTO||"");return C?"Symbol(src)_1."+C:""}(),We=Se.toString,et=RegExp("^"+He.call(xe).replace(se,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=U?Y.Buffer:void 0,Je=Y.Symbol,er=Y.Uint8Array,hr=Se.propertyIsEnumerable,kr=Pe.splice,tr=Je?Je.toStringTag:void 0,tn=Object.getOwnPropertySymbols,gn=tt?tt.isBuffer:void 0,Nn=Fe(Object.keys,Object),Et=br(Y,"DataView"),_t=br(Y,"Map"),Dt=br(Y,"Promise"),St=br(Y,"Set"),mt=br(Y,"WeakMap"),vt=br(Object,"create"),Rt=nn(Et),Ft=nn(_t),Ot=nn(Dt),Ut=nn(St),It=nn(mt),At=Je?Je.prototype:void 0,xt=At?At.valueOf:void 0;function ft(C){var H=-1,ce=C==null?0:C.length;for(this.clear();++H<ce;){var ge=C[H];this.set(ge[0],ge[1])}}function jt(){this.__data__=vt?vt(null):{},this.size=0}function Lt(C){var H=this.has(C)&&delete this.__data__[C];return this.size-=H?1:0,H}function Ga(C){var H=this.__data__;if(vt){var ce=H[C];return ce===s?void 0:ce}return xe.call(H,C)?H[C]:void 0}function Wa(C){var H=this.__data__;return vt?H[C]!==void 0:xe.call(H,C)}function Ya(C,H){var ce=this.__data__;return this.size+=this.has(C)?0:1,ce[C]=vt&&H===void 0?s:H,this}ft.prototype.clear=jt,ft.prototype.delete=Lt,ft.prototype.get=Ga,ft.prototype.has=Wa,ft.prototype.set=Ya;function Ir(C){var H=-1,ce=C==null?0:C.length;for(this.clear();++H<ce;){var ge=C[H];this.set(ge[0],ge[1])}}function Ja(){this.__data__=[],this.size=0}function Xa(C){var H=this.__data__,ce=Rn(H,C);if(ce<0)return!1;var ge=H.length-1;return ce==ge?H.pop():kr.call(H,ce,1),--this.size,!0}function Za(C){var H=this.__data__,ce=Rn(H,C);return ce<0?void 0:H[ce][1]}function Qa(C){return Rn(this.__data__,C)>-1}function eo(C,H){var ce=this.__data__,ge=Rn(ce,C);return ge<0?(++this.size,ce.push([C,H])):ce[ge][1]=H,this}Ir.prototype.clear=Ja,Ir.prototype.delete=Xa,Ir.prototype.get=Za,Ir.prototype.has=Qa,Ir.prototype.set=eo;function rn(C){var H=-1,ce=C==null?0:C.length;for(this.clear();++H<ce;){var ge=C[H];this.set(ge[0],ge[1])}}function ii(){this.size=0,this.__data__={hash:new ft,map:new(_t||Ir),string:new ft}}function to(C){var H=yn(this,C).delete(C);return this.size-=H?1:0,H}function si(C){return yn(this,C).get(C)}function ro(C){return yn(this,C).has(C)}function no(C,H){var ce=yn(this,C),ge=ce.size;return ce.set(C,H),this.size+=ce.size==ge?0:1,this}rn.prototype.clear=ii,rn.prototype.delete=to,rn.prototype.get=si,rn.prototype.has=ro,rn.prototype.set=no;function ai(C){var H=-1,ce=C==null?0:C.length;for(this.__data__=new rn;++H<ce;)this.add(C[H])}function ms(C){return this.__data__.set(C,s),this}function ws(C){return this.__data__.has(C)}ai.prototype.add=ai.prototype.push=ms,ai.prototype.has=ws;function Mr(C){var H=this.__data__=new Ir(C);this.size=H.size}function io(){this.__data__=new Ir,this.size=0}function so(C){var H=this.__data__,ce=H.delete(C);return this.size=H.size,ce}function ao(C){return this.__data__.get(C)}function oo(C){return this.__data__.has(C)}function Es(C,H){var ce=this.__data__;if(ce instanceof Ir){var ge=ce.__data__;if(!_t||ge.length<r-1)return ge.push([C,H]),this.size=++ce.size,this;ce=this.__data__=new rn(ge)}return ce.set(C,H),this.size=ce.size,this}Mr.prototype.clear=io,Mr.prototype.delete=so,Mr.prototype.get=ao,Mr.prototype.has=oo,Mr.prototype.set=Es;function Ds(C,H){var ce=ui(C),ge=!ce&&Us(C),ot=!ce&&!ge&&ji(C),Te=!ce&&!ge&&!ot&&$s(C),dt=ce||ge||ot||Te,$t=dt?gt(C.length,String):[],Xe=$t.length;for(var ct in C)(H||xe.call(C,ct))&&!(dt&&(ct=="length"||ot&&(ct=="offset"||ct=="parent")||Te&&(ct=="buffer"||ct=="byteLength"||ct=="byteOffset")||Cs(ct,Xe)))&&$t.push(ct);return $t}function Rn(C,H){for(var ce=C.length;ce--;)if(Fs(C[ce][0],H))return ce;return-1}function Fi(C,H,ce){var ge=H(C);return ui(C)?ge:Ve(ge,ce(C))}function Fn(C){return C==null?C===void 0?Z:oe:tr&&tr in Object(C)?Ps(C):fo(C)}function Ui(C){return jn(C)&&Fn(C)==y}function Un(C,H,ce,ge,ot){return C===H?!0:C==null||H==null||!jn(C)&&!jn(H)?C!==C&&H!==H:Ss(C,H,ce,ge,Un,ot)}function Ss(C,H,ce,ge,ot,Te){var dt=ui(C),$t=ui(H),Xe=dt?E:Gr(C),ct=$t?E:Gr(H);Xe=Xe==y?O:Xe,ct=ct==y?O:ct;var Ct=Xe==O,lr=ct==O,Mt=Xe==ct;if(Mt&&ji(C)){if(!ji(H))return!1;dt=!0,Ct=!1}if(Mt&&!Ct)return Te||(Te=new Mr),dt||$s(C)?oi(C,H,ce,ge,ot,Te):uo(C,H,Xe,ce,ge,ot,Te);if(!(ce&o)){var pt=Ct&&xe.call(C,"__wrapped__"),rr=lr&&xe.call(H,"__wrapped__");if(pt||rr){var zr=pt?C.value():C,xr=rr?H.value():H;return Te||(Te=new Mr),ot(zr,xr,ce,ge,Te)}}return Mt?(Te||(Te=new Mr),xs(C,H,ce,ge,ot,Te)):!1}function co(C){if(!Ls(C)||Ns(C))return!1;var H=fi(C)?et:ne;return H.test(nn(C))}function Os(C){return jn(C)&&js(C.length)&&!!he[Fn(C)]}function Is(C){if(!Rs(C))return Nn(C);var H=[];for(var ce in Object(C))xe.call(C,ce)&&ce!="constructor"&&H.push(ce);return H}function oi(C,H,ce,ge,ot,Te){var dt=ce&o,$t=C.length,Xe=H.length;if($t!=Xe&&!(dt&&Xe>$t))return!1;var ct=Te.get(C);if(ct&&Te.get(H))return ct==H;var Ct=-1,lr=!0,Mt=ce&l?new ai:void 0;for(Te.set(C,H),Te.set(H,C);++Ct<$t;){var pt=C[Ct],rr=H[Ct];if(ge)var zr=dt?ge(rr,pt,Ct,H,C,Te):ge(pt,rr,Ct,C,H,Te);if(zr!==void 0){if(zr)continue;lr=!1;break}if(Mt){if(!Le(H,function(xr,Wr){if(!Me(Mt,Wr)&&(pt===xr||ot(pt,xr,ce,ge,Te)))return Mt.push(Wr)})){lr=!1;break}}else if(!(pt===rr||ot(pt,rr,ce,ge,Te))){lr=!1;break}}return Te.delete(C),Te.delete(H),lr}function uo(C,H,ce,ge,ot,Te,dt){switch(ce){case v:if(C.byteLength!=H.byteLength||C.byteOffset!=H.byteOffset)return!1;C=C.buffer,H=H.buffer;case p:return!(C.byteLength!=H.byteLength||!Te(new er(C),new er(H)));case T:case j:case W:return Fs(+C,+H);case G:return C.name==H.name&&C.message==H.message;case x:case c:return C==H+"";case J:var $t=Re;case m:var Xe=ge&o;if($t||($t=ze),C.size!=H.size&&!Xe)return!1;var ct=dt.get(C);if(ct)return ct==H;ge|=l,dt.set(C,H);var Ct=oi($t(C),$t(H),ge,ot,Te,dt);return dt.delete(C),Ct;case d:if(xt)return xt.call(C)==xt.call(H)}return!1}function xs(C,H,ce,ge,ot,Te){var dt=ce&o,$t=ci(C),Xe=$t.length,ct=ci(H),Ct=ct.length;if(Xe!=Ct&&!dt)return!1;for(var lr=Xe;lr--;){var Mt=$t[lr];if(!(dt?Mt in H:xe.call(H,Mt)))return!1}var pt=Te.get(C);if(pt&&Te.get(H))return pt==H;var rr=!0;Te.set(C,H),Te.set(H,C);for(var zr=dt;++lr<Xe;){Mt=$t[lr];var xr=C[Mt],Wr=H[Mt];if(ge)var Li=dt?ge(Wr,xr,Mt,H,C,Te):ge(xr,Wr,Mt,C,H,Te);if(!(Li===void 0?xr===Wr||ot(xr,Wr,ce,ge,Te):Li)){rr=!1;break}zr||(zr=Mt=="constructor")}if(rr&&!zr){var Ln=C.constructor,Ht=H.constructor;Ln!=Ht&&"constructor"in C&&"constructor"in H&&!(typeof Ln=="function"&&Ln instanceof Ln&&typeof Ht=="function"&&Ht instanceof Ht)&&(rr=!1)}return Te.delete(C),Te.delete(H),rr}function ci(C){return Fi(C,po,As)}function yn(C,H){var ce=C.__data__;return Ts(H)?ce[typeof H=="string"?"string":"hash"]:ce.map}function br(C,H){var ce=Ie(C,H);return co(ce)?ce:void 0}function Ps(C){var H=xe.call(C,tr),ce=C[tr];try{C[tr]=void 0;var ge=!0}catch{}var ot=We.call(C);return ge&&(H?C[tr]=ce:delete C[tr]),ot}var As=tn?function(C){return C==null?[]:(C=Object(C),Be(tn(C),function(H){return hr.call(C,H)}))}:at,Gr=Fn;(Et&&Gr(new Et(new ArrayBuffer(1)))!=v||_t&&Gr(new _t)!=J||Dt&&Gr(Dt.resolve())!=A||St&&Gr(new St)!=m||mt&&Gr(new mt)!=h)&&(Gr=function(C){var H=Fn(C),ce=H==O?C.constructor:void 0,ge=ce?nn(ce):"";if(ge)switch(ge){case Rt:return v;case Ft:return J;case Ot:return A;case Ut:return m;case It:return h}return H});function Cs(C,H){return H=H??w,!!H&&(typeof C=="number"||_e.test(C))&&C>-1&&C%1==0&&C<H}function Ts(C){var H=typeof C;return H=="string"||H=="number"||H=="symbol"||H=="boolean"?C!=="__proto__":C===null}function Ns(C){return!!ke&&ke in C}function Rs(C){var H=C&&C.constructor,ce=typeof H=="function"&&H.prototype||Se;return C===ce}function fo(C){return We.call(C)}function nn(C){if(C!=null){try{return He.call(C)}catch{}try{return C+""}catch{}}return""}function Fs(C,H){return C===H||C!==C&&H!==H}var Us=Ui(function(){return arguments}())?Ui:function(C){return jn(C)&&xe.call(C,"callee")&&!hr.call(C,"callee")},ui=Array.isArray;function ho(C){return C!=null&&js(C.length)&&!fi(C)}var ji=gn||st;function lo(C,H){return Un(C,H)}function fi(C){if(!Ls(C))return!1;var H=Fn(C);return H==z||H==M||H==N||H==S}function js(C){return typeof C=="number"&&C>-1&&C%1==0&&C<=w}function Ls(C){var H=typeof C;return C!=null&&(H=="object"||H=="function")}function jn(C){return C!=null&&typeof C=="object"}var $s=Oe?yt(Oe):Os;function po(C){return ho(C)?Ds(C):Is(C)}function at(){return[]}function st(){return!1}i.exports=lo})(s3,La);function a3(i,t){if(i.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var o=0;o<i.length;o++){var l=i.charAt(o),w=l.charCodeAt(0);if(r[w]!==255)throw new TypeError(l+" is ambiguous");r[w]=o}var y=i.length,E=i.charAt(0),N=Math.log(y)/Math.log(256),T=Math.log(256)/Math.log(y);function j(M){if(M instanceof Uint8Array||(ArrayBuffer.isView(M)?M=new Uint8Array(M.buffer,M.byteOffset,M.byteLength):Array.isArray(M)&&(M=Uint8Array.from(M))),!(M instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(M.length===0)return"";for(var J=0,W=0,oe=0,O=M.length;oe!==O&&M[oe]===0;)oe++,J++;for(var A=(O-oe)*T+1>>>0,S=new Uint8Array(A);oe!==O;){for(var x=M[oe],m=0,c=A-1;(x!==0||m<W)&&c!==-1;c--,m++)x+=256*S[c]>>>0,S[c]=x%y>>>0,x=x/y>>>0;if(x!==0)throw new Error("Non-zero carry");W=m,oe++}for(var d=A-W;d!==A&&S[d]===0;)d++;for(var Z=E.repeat(J);d<A;++d)Z+=i.charAt(S[d]);return Z}function G(M){if(typeof M!="string")throw new TypeError("Expected String");if(M.length===0)return new Uint8Array;var J=0;if(M[J]!==" "){for(var W=0,oe=0;M[J]===E;)W++,J++;for(var O=(M.length-J)*N+1>>>0,A=new Uint8Array(O);M[J];){var S=r[M.charCodeAt(J)];if(S===255)return;for(var x=0,m=O-1;(S!==0||x<oe)&&m!==-1;m--,x++)S+=y*A[m]>>>0,A[m]=S%256>>>0,S=S/256>>>0;if(S!==0)throw new Error("Non-zero carry");oe=x,J++}if(M[J]!==" "){for(var c=O-oe;c!==O&&A[c]===0;)c++;for(var d=new Uint8Array(W+(O-c)),Z=W;c!==O;)d[Z++]=A[c++];return d}}}function z(M){var J=G(M);if(J)return J;throw new Error(`Non-${t} character`)}return{encode:j,decodeUnsafe:G,decode:z}}var o3=a3,c3=o3;const jd=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},u3=i=>new TextEncoder().encode(i),f3=i=>new TextDecoder().decode(i);class h3{constructor(t,r,s){this.name=t,this.prefix=r,this.baseEncode=s}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}let l3=class{constructor(t,r,s){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Ld(this,t)}};class d3{constructor(t){this.decoders=t}or(t){return Ld(this,t)}decode(t){const r=t[0],s=this.decoders[r];if(s)return s.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Ld=(i,t)=>new d3({...i.decoders||{[i.prefix]:i},...t.decoders||{[t.prefix]:t}});class p3{constructor(t,r,s,o){this.name=t,this.prefix=r,this.baseEncode=s,this.baseDecode=o,this.encoder=new h3(t,r,s),this.decoder=new l3(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Va=({name:i,prefix:t,encode:r,decode:s})=>new p3(i,t,r,s),bs=({prefix:i,name:t,alphabet:r})=>{const{encode:s,decode:o}=c3(r,t);return Va({prefix:i,name:t,encode:s,decode:l=>jd(o(l))})},g3=(i,t,r,s)=>{const o={};for(let T=0;T<t.length;++T)o[t[T]]=T;let l=i.length;for(;i[l-1]==="=";)--l;const w=new Uint8Array(l*r/8|0);let y=0,E=0,N=0;for(let T=0;T<l;++T){const j=o[i[T]];if(j===void 0)throw new SyntaxError(`Non-${s} character`);E=E<<r|j,y+=r,y>=8&&(y-=8,w[N++]=255&E>>y)}if(y>=r||255&E<<8-y)throw new SyntaxError("Unexpected end of data");return w},y3=(i,t,r)=>{const s=t[t.length-1]==="=",o=(1<<r)-1;let l="",w=0,y=0;for(let E=0;E<i.length;++E)for(y=y<<8|i[E],w+=8;w>r;)w-=r,l+=t[o&y>>w];if(w&&(l+=t[o&y<<r-w]),s)for(;l.length*r&7;)l+="=";return l},Jt=({name:i,prefix:t,bitsPerChar:r,alphabet:s})=>Va({prefix:t,name:i,encode(o){return y3(o,s,r)},decode(o){return g3(o,s,r,i)}}),_3=Va({prefix:"\0",name:"identity",encode:i=>f3(i),decode:i=>u3(i)});var v3=Object.freeze({__proto__:null,identity:_3});const b3=Jt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var m3=Object.freeze({__proto__:null,base2:b3});const w3=Jt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var E3=Object.freeze({__proto__:null,base8:w3});const D3=bs({prefix:"9",name:"base10",alphabet:"0123456789"});var S3=Object.freeze({__proto__:null,base10:D3});const O3=Jt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),I3=Jt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var x3=Object.freeze({__proto__:null,base16:O3,base16upper:I3});const P3=Jt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),A3=Jt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),C3=Jt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),T3=Jt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),N3=Jt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),R3=Jt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),F3=Jt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),U3=Jt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),j3=Jt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var L3=Object.freeze({__proto__:null,base32:P3,base32upper:A3,base32pad:C3,base32padupper:T3,base32hex:N3,base32hexupper:R3,base32hexpad:F3,base32hexpadupper:U3,base32z:j3});const $3=bs({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),M3=bs({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var z3=Object.freeze({__proto__:null,base36:$3,base36upper:M3});const q3=bs({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),B3=bs({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var H3=Object.freeze({__proto__:null,base58btc:q3,base58flickr:B3});const K3=Jt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),V3=Jt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),k3=Jt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),G3=Jt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var W3=Object.freeze({__proto__:null,base64:K3,base64pad:V3,base64url:k3,base64urlpad:G3});const $d=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),Y3=$d.reduce((i,t,r)=>(i[r]=t,i),[]),J3=$d.reduce((i,t,r)=>(i[t.codePointAt(0)]=r,i),[]);function X3(i){return i.reduce((t,r)=>(t+=Y3[r],t),"")}function Z3(i){const t=[];for(const r of i){const s=J3[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(s)}return new Uint8Array(t)}const Q3=Va({prefix:"ðŸš€",name:"base256emoji",encode:X3,decode:Z3});var e6=Object.freeze({__proto__:null,base256emoji:Q3}),t6=Md,gl=128,r6=127,n6=~r6,i6=Math.pow(2,31);function Md(i,t,r){t=t||[],r=r||0;for(var s=r;i>=i6;)t[r++]=i&255|gl,i/=128;for(;i&n6;)t[r++]=i&255|gl,i>>>=7;return t[r]=i|0,Md.bytes=r-s+1,t}var s6=Gc,a6=128,yl=127;function Gc(i,s){var r=0,s=s||0,o=0,l=s,w,y=i.length;do{if(l>=y)throw Gc.bytes=0,new RangeError("Could not decode varint");w=i[l++],r+=o<28?(w&yl)<<o:(w&yl)*Math.pow(2,o),o+=7}while(w>=a6);return Gc.bytes=l-s,r}var o6=Math.pow(2,7),c6=Math.pow(2,14),u6=Math.pow(2,21),f6=Math.pow(2,28),h6=Math.pow(2,35),l6=Math.pow(2,42),d6=Math.pow(2,49),p6=Math.pow(2,56),g6=Math.pow(2,63),y6=function(i){return i<o6?1:i<c6?2:i<u6?3:i<f6?4:i<h6?5:i<l6?6:i<d6?7:i<p6?8:i<g6?9:10},_6={encode:t6,decode:s6,encodingLength:y6},zd=_6;const _l=(i,t,r=0)=>(zd.encode(i,t,r),t),vl=i=>zd.encodingLength(i),Wc=(i,t)=>{const r=t.byteLength,s=vl(i),o=s+vl(r),l=new Uint8Array(o+r);return _l(i,l,0),_l(r,l,s),l.set(t,o),new v6(i,r,t,l)};class v6{constructor(t,r,s,o){this.code=t,this.size=r,this.digest=s,this.bytes=o}}const qd=({name:i,code:t,encode:r})=>new b6(i,t,r);class b6{constructor(t,r,s){this.name=t,this.code=r,this.encode=s}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?Wc(this.code,r):r.then(s=>Wc(this.code,s))}else throw Error("Unknown type, must be binary type")}}const Bd=i=>async t=>new Uint8Array(await crypto.subtle.digest(i,t)),m6=qd({name:"sha2-256",code:18,encode:Bd("SHA-256")}),w6=qd({name:"sha2-512",code:19,encode:Bd("SHA-512")});var E6=Object.freeze({__proto__:null,sha256:m6,sha512:w6});const Hd=0,D6="identity",Kd=jd,S6=i=>Wc(Hd,Kd(i)),O6={code:Hd,name:D6,encode:Kd,digest:S6};var I6=Object.freeze({__proto__:null,identity:O6});new TextEncoder,new TextDecoder;const bl={...v3,...m3,...E3,...S3,...x3,...L3,...z3,...H3,...W3,...e6};({...E6,...I6});function Vd(i){return globalThis.Buffer!=null?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function x6(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Vd(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function kd(i,t,r,s){return{name:i,prefix:t,encoder:{name:i,prefix:t,encode:r},decoder:{decode:s}}}const ml=kd("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),Ac=kd("ascii","a",i=>{let t="a";for(let r=0;r<i.length;r++)t+=String.fromCharCode(i[r]);return t},i=>{i=i.substring(1);const t=x6(i.length);for(let r=0;r<i.length;r++)t[r]=i.charCodeAt(r);return t}),P6={utf8:ml,"utf-8":ml,hex:bl.base16,latin1:Ac,ascii:Ac,binary:Ac,...bl};function A6(i,t="utf8"){const r=P6[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Vd(globalThis.Buffer.from(i,"utf-8")):r.decoder.decode(`${r.prefix}${i}`)}const Gd="wc",C6=2,gu="core",Pn=`${Gd}@${2}:${gu}:`,T6={name:gu,logger:"error"},N6={database:":memory:"},R6="crypto",wl="client_ed25519_seed",F6=De.ONE_DAY,U6="keychain",j6="0.3",L6="messages",$6="0.3",M6=De.SIX_HOURS,z6="publisher",Wd="irn",q6="error",Yd="wss://relay.walletconnect.com",B6="relayer",Vt={message:"relayer_message",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},H6="_subscription",ss={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},K6=De.ONE_SECOND/2,V6="2.7.2",k6="0.3",en={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},G6="subscription",W6="0.3",Y6=De.FIVE_SECONDS*1e3,J6="pairing",X6="0.3",as={wc_pairingDelete:{req:{ttl:De.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:De.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:De.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:De.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:De.ONE_DAY,prompt:!1,tag:0},res:{ttl:De.ONE_DAY,prompt:!1,tag:0}}},Qr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Z6="history",Q6="0.3",e2="expirer",jr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},t2="0.3",El="verify-api",Dl="https://verify.walletconnect.com";class r2{constructor(t,r){this.core=t,this.logger=r,this.keychain=new Map,this.name=U6,this.version=j6,this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,o)=>{this.isInitialized(),this.keychain.set(s,o),await this.persist()},this.get=s=>{this.isInitialized();const o=this.keychain.get(s);if(typeof o>"u"){const{message:l}=de("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(l)}return o},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=t,this.logger=Qe.generateChildLogger(r,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,Cd(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?Td(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}class n2{constructor(t,r,s){this.core=t,this.logger=r,this.name=R6,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=async()=>{this.isInitialized();const o=await this.getClientSeed(),l=Xh(o);return wd(l.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const o=Yw();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=async o=>{this.isInitialized();const l=await this.getClientSeed(),w=Xh(l),y=Vc();return await Dw(y,o,F6,w)},this.generateSharedKey=(o,l,w)=>{this.isInitialized();const y=this.getPrivateKey(o),E=Jw(y,l);return this.setSymKey(E,w)},this.setSymKey=async(o,l)=>{this.isInitialized();const w=l||Xw(o);return await this.keychain.set(w,o),w},this.deleteKeyPair=async o=>{this.isInitialized(),await this.keychain.del(o)},this.deleteSymKey=async o=>{this.isInitialized(),await this.keychain.del(o)},this.encode=async(o,l,w)=>{this.isInitialized();const y=Pd(w),E=Xc(l);if(il(y)){const G=y.senderPublicKey,z=y.receiverPublicKey;o=await this.generateSharedKey(G,z)}const N=this.getSymKey(o),{type:T,senderPublicKey:j}=y;return Qw({type:T,symKey:N,message:E,senderPublicKey:j})},this.decode=async(o,l,w)=>{this.isInitialized();const y=rE(l,w);if(il(y)){const T=y.receiverPublicKey,j=y.senderPublicKey;o=await this.generateSharedKey(T,j)}const E=this.getSymKey(o),N=eE({symKey:E,encoded:l});return Wl(N)},this.getPayloadType=o=>{const l=Ua(o);return _s(l.type)},this.getPayloadSenderPublicKey=o=>{const l=Ua(o);return l.senderPublicKey?fr(l.senderPublicKey,ur):void 0},this.core=t,this.logger=Qe.generateChildLogger(r,this.name),this.keychain=s||new r2(this.core,this.logger)}get context(){return Qe.getLoggerContext(this.logger)}async setPrivateKey(t,r){return await this.keychain.set(t,r),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(wl)}catch{t=Vc(),await this.keychain.set(wl,t)}return A6(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}class i2 extends tw{constructor(t,r){super(t,r),this.logger=t,this.core=r,this.messages=new Map,this.name=L6,this.version=$6,this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,o)=>{this.isInitialized();const l=Xn(o);let w=this.messages.get(s);return typeof w>"u"&&(w={}),typeof w[l]<"u"||(w[l]=o,this.messages.set(s,w),await this.persist()),l},this.get=s=>{this.isInitialized();let o=this.messages.get(s);return typeof o>"u"&&(o={}),o},this.has=(s,o)=>{this.isInitialized();const l=this.get(s),w=Xn(o);return typeof l[w]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=Qe.generateChildLogger(t,this.name),this.core=r}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,Cd(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?Td(t):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}class s2 extends rw{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.events=new $r.EventEmitter,this.name=z6,this.queue=new Map,this.publishTimeout=1e4,this.publish=async(s,o,l)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:l}});try{const w=l?.ttl||M6,y=kc(l),E=l?.prompt||!1,N=l?.tag||0,T={topic:s,message:o,opts:{ttl:w,relay:y,prompt:E,tag:N}},j=Xn(o);this.queue.set(j,T);try{await await ja(this.rpcPublish(s,o,w,y,E,N),this.publishTimeout),this.relayer.events.emit(Vt.publish,T)}catch{this.logger.debug("Publishing Payload stalled"),this.relayer.events.emit(Vt.connection_stalled);return}this.onPublish(j,T),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:l}})}catch(w){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(w),w}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.relayer=t,this.logger=Qe.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Qe.getLoggerContext(this.logger)}rpcPublish(t,r,s,o,l,w){var y,E,N,T;const j={method:xa(o.protocol).publish,params:{topic:t,message:r,ttl:s,prompt:l,tag:w}};return or((y=j.params)==null?void 0:y.prompt)&&((E=j.params)==null||delete E.prompt),or((N=j.params)==null?void 0:N.tag)&&((T=j.params)==null||delete T.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:j}),this.relayer.request(j)}onPublish(t,r){this.queue.delete(t)}checkQueue(){this.queue.forEach(async t=>{const{topic:r,message:s,opts:o}=t;await this.publish(r,s,o)})}registerEventListeners(){this.relayer.core.heartbeat.on(ys.HEARTBEAT_EVENTS.pulse,()=>{this.checkQueue()})}}let a2=class{constructor(){this.map=new Map,this.set=(t,r)=>{const s=this.get(t);this.exists(t,r)||this.map.set(t,[...s,r])},this.get=t=>this.map.get(t)||[],this.exists=(t,r)=>this.get(t).includes(r),this.delete=(t,r)=>{if(typeof r>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const s=this.get(t);if(!this.exists(t,r))return;const o=s.filter(l=>l!==r);if(!o.length){this.map.delete(t);return}this.map.set(t,o)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}};var o2=Object.defineProperty,c2=Object.defineProperties,u2=Object.getOwnPropertyDescriptors,Sl=Object.getOwnPropertySymbols,f2=Object.prototype.hasOwnProperty,h2=Object.prototype.propertyIsEnumerable,Ol=(i,t,r)=>t in i?o2(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,os=(i,t)=>{for(var r in t||(t={}))f2.call(t,r)&&Ol(i,r,t[r]);if(Sl)for(var r of Sl(t))h2.call(t,r)&&Ol(i,r,t[r]);return i},Cc=(i,t)=>c2(i,u2(t));class l2 extends sw{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.subscriptions=new Map,this.topicMap=new a2,this.events=new $r.EventEmitter,this.name=G6,this.version=W6,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Pn,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}});try{const l=kc(o),w={topic:s,relay:l};this.pending.set(s,w);const y=await this.rpcSubscribe(s,l);return this.onSubscribe(y,w),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}}),y}catch(l){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(l),l}},this.unsubscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),typeof o?.id<"u"?await this.unsubscribeById(s,o.id,o):await this.unsubscribeByTopic(s,o)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((o,l)=>{const w=new De.Watch;w.start(this.pendingSubscriptionWatchLabel);const y=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(y),w.stop(this.pendingSubscriptionWatchLabel),o(!0)),w.elapsed(this.pendingSubscriptionWatchLabel)>=Y6&&(clearInterval(y),w.stop(this.pendingSubscriptionWatchLabel),l(!1))},this.pollingInterval)}),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=t,this.logger=Qe.generateChildLogger(r,this.name),this.clientId=""}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(t,r){let s=!1;try{s=this.getSubscription(t).topic===r}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,r){const s=this.topicMap.get(t);await Promise.all(s.map(async o=>await this.unsubscribeById(t,o,r)))}async unsubscribeById(t,r,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:s}});try{const o=kc(s);await this.rpcUnsubscribe(t,r,o);const l=kt("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,r,l),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:s}})}catch(o){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(o),o}}async rpcSubscribe(t,r){const s={method:xa(r.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await ja(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Vt.connection_stalled)}return Xn(t+this.clientId)}async rpcBatchSubscribe(t){if(!t.length)return;const r=t[0].relay,s={method:xa(r.protocol).batchSubscribe,params:{topics:t.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await ja(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Vt.connection_stalled)}}rpcUnsubscribe(t,r,s){const o={method:xa(s.protocol).unsubscribe,params:{topic:t,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o}),this.relayer.request(o)}onSubscribe(t,r){this.setSubscription(t,Cc(os({},r),{id:t})),this.pending.delete(r.topic)}onBatchSubscribe(t){t.length&&t.forEach(r=>{this.setSubscription(r.id,os({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(t,r,s){this.events.removeAllListeners(r),this.hasSubscription(r,t)&&this.deleteSubscription(r,s),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,r){this.subscriptions.has(t)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:r}),this.addSubscription(t,r))}addSubscription(t,r){this.subscriptions.set(t,os({},r)),this.topicMap.set(r.topic,t),this.events.emit(en.created,r)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const r=this.subscriptions.get(t);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(s)}return r}deleteSubscription(t,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:r});const s=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(s.topic,t),this.events.emit(en.deleted,Cc(os({},s),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(en.sync)}async reset(){if(this.cached.length){const t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(en.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){if(!t.length)return;const r=await this.rpcBatchSubscribe(t);vs(r)&&this.onBatchSubscribe(r.map((s,o)=>Cc(os({},t[o]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const t=[];this.pending.forEach(r=>{t.push(r)}),await this.batchSubscribe(t)}registerEventListeners(){this.relayer.core.heartbeat.on(ys.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Vt.connect,async()=>{await this.onConnect()}),this.relayer.on(Vt.disconnect,()=>{this.onDisconnect()}),this.events.on(en.created,async t=>{const r=en.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()}),this.events.on(en.deleted,async t=>{const r=en.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(){this.restartInProgress&&await new Promise(t=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),t())},this.pollingInterval)})}}var d2=Object.defineProperty,Il=Object.getOwnPropertySymbols,p2=Object.prototype.hasOwnProperty,g2=Object.prototype.propertyIsEnumerable,xl=(i,t,r)=>t in i?d2(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,y2=(i,t)=>{for(var r in t||(t={}))p2.call(t,r)&&xl(i,r,t[r]);if(Il)for(var r of Il(t))g2.call(t,r)&&xl(i,r,t[r]);return i};class _2 extends nw{constructor(t){super(t),this.protocol="wc",this.version=2,this.events=new $r.EventEmitter,this.name=B6,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.core=t.core,this.logger=typeof t.logger<"u"&&typeof t.logger!="string"?Qe.generateChildLogger(t.logger,this.name):Qe.pino(Qe.getDefaultLoggerOptions({level:t.logger||q6})),this.messages=new i2(this.logger,t.core),this.subscriber=new l2(this,this.logger),this.publisher=new s2(this,this.logger),this.relayUrl=t?.relayUrl||Yd,this.projectId=t.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.transportOpen(),this.subscriber.init()]),this.registerEventListeners(),this.initialized=!0}get context(){return Qe.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(t,r,s){this.isInitialized(),await this.publisher.publish(t,r,s),await this.recordMessageEvent({topic:t,message:r,publishedAt:Date.now()})}async subscribe(t,r){this.isInitialized();let s="";return await Promise.all([new Promise(o=>{this.subscriber.once(en.created,l=>{l.topic===t&&o()})}),new Promise(async o=>{s=await this.subscriber.subscribe(t,r),o()})]),s}async unsubscribe(t,r){this.isInitialized(),await this.subscriber.unsubscribe(t,r)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(Vt.transport_closed))}async transportOpen(t){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=t||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(r=>{this.initialized||r(),this.subscriber.once(en.resubscribed,()=>{r()})}),await Promise.race([new Promise(async(r,s)=>{await ja(this.provider.connect(),5e3,"socket stalled").catch(o=>s(o)).then(()=>r()).finally(()=>this.removeListener(Vt.transport_closed,this.rejectTransportOpen))}),new Promise(r=>this.once(Vt.transport_closed,this.rejectTransportOpen))])])}catch(r){this.logger.error(r);const s=r;if(!this.isConnectionStalled(s.message))throw r;this.events.emit(Vt.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(t){this.transportExplicitlyClosed||(this.relayUrl=t||this.relayUrl,this.connected&&await Promise.all([new Promise(r=>{this.provider.once(ss.disconnect,()=>{r()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(t){return this.staleConnectionErrors.some(r=>t.includes(r))}rejectTransportOpen(){throw new Error("closeTransport called before connection was established")}async createProvider(){const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new An(new i3(pE({sdkVersion:V6,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(t){const{topic:r,message:s}=t;await this.messages.set(r,s)}async shouldIgnoreMessageEvent(t){const{topic:r,message:s}=t;return await this.subscriber.isSubscribed(r)?this.messages.has(r,s):!0}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),Qc(t)){if(!t.method.endsWith(H6))return;const r=t.params,{topic:s,message:o,publishedAt:l}=r.data,w={topic:s,message:o,publishedAt:l};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(y2({type:"event",event:r.id},w)),this.events.emit(r.id,w),await this.acknowledgePayload(t),await this.onMessageEvent(w)}}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(this.events.emit(Vt.message,t),await this.recordMessageEvent(t))}async acknowledgePayload(t){const r=eu(t.id,!0);await this.provider.connection.send(r)}registerProviderListeners(){this.provider.on(ss.payload,t=>this.onProviderPayload(t)),this.provider.on(ss.connect,()=>{this.events.emit(Vt.connect)}),this.provider.on(ss.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(ss.error,t=>{this.logger.error(t),this.events.emit(Vt.error,t)})}registerEventListeners(){this.events.on(Vt.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(Vt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},De.toMiliseconds(K6))}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(t=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),t())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var v2=Object.defineProperty,Pl=Object.getOwnPropertySymbols,b2=Object.prototype.hasOwnProperty,m2=Object.prototype.propertyIsEnumerable,Al=(i,t,r)=>t in i?v2(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Cl=(i,t)=>{for(var r in t||(t={}))b2.call(t,r)&&Al(i,r,t[r]);if(Pl)for(var r of Pl(t))m2.call(t,r)&&Al(i,r,t[r]);return i};class ka extends iw{constructor(t,r,s,o=Pn,l=void 0){super(t,r,s,o),this.core=t,this.logger=r,this.name=s,this.map=new Map,this.version=k6,this.cached=[],this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(w=>{this.getKey&&w!==null&&!or(w)?this.map.set(this.getKey(w),w):UE(w)?this.map.set(w.id,w):jE(w)&&this.map.set(w.topic,w)}),this.cached=[],this.initialized=!0)},this.set=async(w,y)=>{this.isInitialized(),this.map.has(w)?await this.update(w,y):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:w,value:y}),this.map.set(w,y),await this.persist())},this.get=w=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:w}),this.getData(w)),this.getAll=w=>(this.isInitialized(),w?this.values.filter(y=>Object.keys(w).every(E=>La(y[E],w[E]))):this.values),this.update=async(w,y)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:w,update:y});const E=Cl(Cl({},this.getData(w)),y);this.map.set(w,E),await this.persist()},this.delete=async(w,y)=>{this.isInitialized(),this.map.has(w)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:w,reason:y}),this.map.delete(w),await this.persist())},this.logger=Qe.generateChildLogger(r,this.name),this.storagePrefix=o,this.getKey=l}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const r=this.map.get(t);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(s),new Error(s)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}class w2{constructor(t,r){this.core=t,this.logger=r,this.name=J6,this.version=X6,this.events=new $r,this.initialized=!1,this.storagePrefix=Pn,this.ignoredPayloadTypes=[ti],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=Vc(),o=await this.core.crypto.setSymKey(s),l=Vr(De.FIVE_MINUTES),w={protocol:Wd},y={topic:o,expiry:l,relay:w,active:!1},E=OE({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:s,relay:w});return await this.pairings.set(o,y),await this.core.relayer.subscribe(o),this.core.expirer.set(o,l),{topic:o,uri:E}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:o,symKey:l,relay:w}=DE(s.uri);if(this.pairings.keys.includes(o))throw new Error(`Pairing already exists: ${o}`);if(this.core.crypto.hasKeys(o))throw new Error(`Keychain already exists: ${o}`);const y=Vr(De.FIVE_MINUTES),E={topic:o,relay:w,expiry:y,active:!1};return await this.pairings.set(o,E),await this.core.crypto.setSymKey(l,o),await this.core.relayer.subscribe(o,{relay:w}),this.core.expirer.set(o,y),s.activatePairing&&await this.activate({topic:o}),E},this.activate=async({topic:s})=>{this.isInitialized();const o=Vr(De.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:o}),this.core.expirer.set(s,o)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:o}=s;if(this.pairings.keys.includes(o)){const l=await this.sendRequest(o,"wc_pairingPing",{}),{done:w,resolve:y,reject:E}=Ii();this.events.once(zt("pairing_ping",l),({error:N})=>{N?E(N):y()}),await w()}},this.updateExpiry=async({topic:s,expiry:o})=>{this.isInitialized(),await this.pairings.update(s,{expiry:o})},this.updateMetadata=async({topic:s,metadata:o})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:o})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:o}=s;this.pairings.keys.includes(o)&&(await this.sendRequest(o,"wc_pairingDelete",kt("USER_DISCONNECTED")),await this.deletePairing(o))},this.sendRequest=async(s,o,l)=>{const w=tu(o,l),y=await this.core.crypto.encode(s,w),E=as[o].req;return this.core.history.set(s,w),await this.core.relayer.publish(s,y,E),w.id},this.sendResult=async(s,o,l)=>{const w=eu(s,l),y=await this.core.crypto.encode(o,w),E=await this.core.history.get(o,s),N=as[E.request.method].res;await this.core.relayer.publish(o,y,N),await this.core.history.resolve(w)},this.sendError=async(s,o,l)=>{const w=Zc(s,l),y=await this.core.crypto.encode(o,w),E=await this.core.history.get(o,s),N=as[E.request.method]?as[E.request.method].res:as.unregistered_method.res;await this.core.relayer.publish(o,y,N),await this.core.history.resolve(w)},this.deletePairing=async(s,o)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,kt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),o?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(o=>xn(o.expiry));await Promise.all(s.map(o=>this.deletePairing(o.topic)))},this.onRelayEventRequest=s=>{const{topic:o,payload:l}=s,w=l.method;if(this.pairings.keys.includes(o))switch(w){case"wc_pairingPing":return this.onPairingPingRequest(o,l);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,l);default:return this.onUnknownRpcMethodRequest(o,l)}},this.onRelayEventResponse=async s=>{const{topic:o,payload:l}=s,w=(await this.core.history.get(o,l.id)).request.method;if(this.pairings.keys.includes(o))switch(w){case"wc_pairingPing":return this.onPairingPingResponse(o,l);default:return this.onUnknownRpcMethodResponse(w)}},this.onPairingPingRequest=async(s,o)=>{const{id:l}=o;try{this.isValidPing({topic:s}),await this.sendResult(l,s,!0),this.events.emit("pairing_ping",{id:l,topic:s})}catch(w){await this.sendError(l,s,w),this.logger.error(w)}},this.onPairingPingResponse=(s,o)=>{const{id:l}=o;setTimeout(()=>{In(o)?this.events.emit(zt("pairing_ping",l),{}):pn(o)&&this.events.emit(zt("pairing_ping",l),{error:o.error})},500)},this.onPairingDeleteRequest=async(s,o)=>{const{id:l}=o;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit("pairing_delete",{id:l,topic:s})}catch(w){await this.sendError(l,s,w),this.logger.error(w)}},this.onUnknownRpcMethodRequest=async(s,o)=>{const{id:l,method:w}=o;try{if(this.registeredMethods.includes(w))return;const y=kt("WC_METHOD_UNSUPPORTED",w);await this.sendError(l,s,y),this.logger.error(y)}catch(y){await this.sendError(l,s,y),this.logger.error(y)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(kt("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{if(!_r(s)){const{message:o}=de("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(o)}if(!FE(s.uri)){const{message:o}=de("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(o)}},this.isValidPing=async s=>{if(!_r(s)){const{message:l}=de("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(l)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidDisconnect=async s=>{if(!_r(s)){const{message:l}=de("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(l)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidPairingTopic=async s=>{if(!Gt(s,!1)){const{message:o}=de("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(o)}if(!this.pairings.keys.includes(s)){const{message:o}=de("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(o)}if(xn(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:o}=de("EXPIRED",`pairing topic: ${s}`);throw new Error(o)}},this.core=t,this.logger=Qe.generateChildLogger(r,this.name),this.pairings=new ka(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Qe.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(Vt.message,async t=>{const{topic:r,message:s}=t;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const o=await this.core.crypto.decode(r,s);Qc(o)?(this.core.history.set(r,o),this.onRelayEventRequest({topic:r,payload:o})):Yl(o)&&(await this.core.history.resolve(o),this.onRelayEventResponse({topic:r,payload:o}))})}registerExpirerEvents(){this.core.expirer.on(jr.expired,async t=>{const{topic:r}=Rd(t.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}}class E2 extends ew{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.records=new Map,this.events=new $r.EventEmitter,this.name=Z6,this.version=Q6,this.cached=[],this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,o,l)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:o,chainId:l}),this.records.has(o.id))return;const w={id:o.id,topic:s,request:{method:o.method,params:o.params||null},chainId:l};this.records.set(w.id,w),this.events.emit(Qr.created,w)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const o=await this.getRecord(s.id);typeof o.response>"u"&&(o.response=pn(s)?{error:s.error}:{result:s.result},this.records.set(o.id,o),this.events.emit(Qr.updated,o))},this.get=async(s,o)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:o}),await this.getRecord(o)),this.delete=(s,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(l=>{if(l.topic===s){if(typeof o<"u"&&l.id!==o)return;this.records.delete(l.id),this.events.emit(Qr.deleted,l)}})},this.exists=async(s,o)=>(this.isInitialized(),this.records.has(o)?(await this.getRecord(o)).topic===s:!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Qe.generateChildLogger(r,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const s={topic:r.topic,request:tu(r.request.method,r.request.params,r.id),chainId:r.chainId};return t.push(s)}),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const r=this.records.get(t);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(s)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Qr.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(Qr.created,t=>{const r=Qr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.events.on(Qr.updated,t=>{const r=Qr.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.events.on(Qr.deleted,t=>{const r=Qr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}let D2=class extends aw{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.expirations=new Map,this.events=new $r.EventEmitter,this.name=e2,this.version=t2,this.cached=[],this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const o=this.formatTarget(s);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(s,o)=>{this.isInitialized();const l=this.formatTarget(s),w={target:l,expiry:o};this.expirations.set(l,w),this.checkExpiry(l,w),this.events.emit(jr.created,{target:l,expiration:w})},this.get=s=>{this.isInitialized();const o=this.formatTarget(s);return this.getExpiration(o)},this.del=s=>{if(this.isInitialized(),this.has(s)){const o=this.formatTarget(s),l=this.getExpiration(o);this.expirations.delete(o),this.events.emit(jr.deleted,{target:o,expiration:l})}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Qe.generateChildLogger(r,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return gE(t);if(typeof t=="number")return yE(t);const{message:r}=de("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(r)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(jr.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const r=this.expirations.get(t);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(s),new Error(s)}return r}checkExpiry(t,r){const{expiry:s}=r;De.toMiliseconds(s)-Date.now()<=0&&this.expire(t,r)}expire(t,r){this.expirations.delete(t),this.events.emit(jr.expired,{target:t,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((t,r)=>this.checkExpiry(r,t))}registerEventListeners(){this.core.heartbeat.on(ys.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(jr.created,t=>{const r=jr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(jr.expired,t=>{const r=jr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(jr.deleted,t=>{const r=jr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}};class S2 extends ow{constructor(t,r){super(t,r),this.projectId=t,this.logger=r,this.name=El,this.initialized=!1,this.init=async s=>{Ad()||!lu()||(this.verifyUrl=s?.verifyUrl||Dl,await this.createIframe())},this.register=async s=>{var o;this.initialized||await this.init(),this.iframe&&((o=this.iframe.contentWindow)==null||o.postMessage(s.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${s.attestationId} ${this.verifyUrl}`))},this.resolve=async s=>{var o;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${s.attestationId}`);const l=this.startAbortTimer(De.FIVE_SECONDS),w=await fetch(`${this.verifyUrl}/attestation/${s.attestationId}`,{signal:this.abortController.signal});return clearTimeout(l),w.status===200?(o=await w.json())==null?void 0:o.origin:""},this.createIframe=async()=>{try{const s=this.startAbortTimer(De.FIVE_SECONDS);await Promise.race([new Promise((o,l)=>{const w=document.createElement("iframe");w.setAttribute("id",El),w.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),w.style.display="none",w.addEventListener("load",()=>{this.initialized=!0,clearTimeout(s),o()}),w.addEventListener("error",y=>{l(y)}),document.body.append(w),this.iframe=w}),new Promise(o=>{this.abortController.signal.addEventListener("abort",()=>{o("iframe load timeout")})})])}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s)}},this.logger=Qe.generateChildLogger(r,this.name),this.verifyUrl=Dl,this.abortController=new AbortController,this.isDevEnv=hu()&&{}.IS_VITEST}get context(){return Qe.getLoggerContext(this.logger)}startAbortTimer(t){return setTimeout(()=>this.abortController.abort(),Vr(t))}}var O2=Object.defineProperty,Tl=Object.getOwnPropertySymbols,I2=Object.prototype.hasOwnProperty,x2=Object.prototype.propertyIsEnumerable,Nl=(i,t,r)=>t in i?O2(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Rl=(i,t)=>{for(var r in t||(t={}))I2.call(t,r)&&Nl(i,r,t[r]);if(Tl)for(var r of Tl(t))x2.call(t,r)&&Nl(i,r,t[r]);return i};let P2=class Jd extends Qm{constructor(t){super(t),this.protocol=Gd,this.version=C6,this.name=gu,this.events=new $r.EventEmitter,this.initialized=!1,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.projectId=t?.projectId,this.relayUrl=t?.relayUrl||Yd;const r=typeof t?.logger<"u"&&typeof t?.logger!="string"?t.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:t?.logger||T6.logger}));this.logger=Qe.generateChildLogger(r,this.name),this.heartbeat=new ys.HeartBeat,this.crypto=new n2(this,this.logger,t?.keychain),this.history=new E2(this,this.logger),this.expirer=new D2(this,this.logger),this.storage=t!=null&&t.storage?t.storage:new Bm(Rl(Rl({},N6),t?.storageOptions)),this.relayer=new _2({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new w2(this,this.logger),this.verify=new S2(this.projectId||"",this.logger)}static async init(t){const r=new Jd(t);return await r.initialize(),r}get context(){return Qe.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}};const A2=P2,Xd="wc",Zd=2,Qd="client",yu=`${Xd}@${Zd}:${Qd}:`,Tc={name:Qd,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},C2="proposal",ep="Proposal expired",T2="session",Sa=De.SEVEN_DAYS,N2="engine",cs={wc_sessionPropose:{req:{ttl:De.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:De.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:De.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:De.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:De.ONE_DAY,prompt:!1,tag:1104},res:{ttl:De.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:De.ONE_DAY,prompt:!1,tag:1106},res:{ttl:De.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:De.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:De.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:De.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:De.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:De.ONE_DAY,prompt:!1,tag:1112},res:{ttl:De.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:De.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:De.THIRTY_SECONDS,prompt:!1,tag:1115}}},Nc={min:De.FIVE_MINUTES,max:De.SEVEN_DAYS},R2="request",F2=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var U2=Object.defineProperty,j2=Object.defineProperties,L2=Object.getOwnPropertyDescriptors,Fl=Object.getOwnPropertySymbols,$2=Object.prototype.hasOwnProperty,M2=Object.prototype.propertyIsEnumerable,Ul=(i,t,r)=>t in i?U2(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Ur=(i,t)=>{for(var r in t||(t={}))$2.call(t,r)&&Ul(i,r,t[r]);if(Fl)for(var r of Fl(t))M2.call(t,r)&&Ul(i,r,t[r]);return i},Rc=(i,t)=>j2(i,L2(t));class z2 extends uw{constructor(t){super(t),this.name=N2,this.events=new $r,this.initialized=!1,this.ignoredPayloadTypes=[ti],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(cs)}),this.initialized=!0)},this.connect=async r=>{this.isInitialized();const s=Rc(Ur({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:o,requiredNamespaces:l,optionalNamespaces:w,sessionProperties:y,relays:E}=s;let N=o,T,j=!1;if(N&&(j=this.client.core.pairing.pairings.get(N).active),!N||!j){const{topic:A,uri:S}=await this.client.core.pairing.create();N=A,T=S}const G=await this.client.core.crypto.generateKeyPair(),z=Ur({requiredNamespaces:l,optionalNamespaces:w,relays:E??[{protocol:Wd}],proposer:{publicKey:G,metadata:this.client.metadata}},y&&{sessionProperties:y}),{reject:M,resolve:J,done:W}=Ii(De.FIVE_MINUTES,ep);if(this.events.once(zt("session_connect"),async({error:A,session:S})=>{if(A)M(A);else if(S){S.self.publicKey=G;const x=Rc(Ur({},S),{requiredNamespaces:S.requiredNamespaces,optionalNamespaces:S.optionalNamespaces});await this.client.session.set(S.topic,x),await this.setExpiry(S.topic,S.expiry),N&&await this.client.core.pairing.updateMetadata({topic:N,metadata:S.peer.metadata}),J(x)}}),!N){const{message:A}=de("NO_MATCHING_KEY",`connect() pairing topic: ${N}`);throw new Error(A)}const oe=await this.sendRequest(N,"wc_sessionPropose",z),O=Vr(De.FIVE_MINUTES);return await this.setProposal(oe,Ur({id:oe,expiry:O},z)),{uri:T,approval:W}},this.pair=async r=>(this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{this.isInitialized(),await this.isValidApprove(r);const{id:s,relayProtocol:o,namespaces:l,sessionProperties:w}=r,y=this.client.proposal.get(s);let{pairingTopic:E,proposer:N,requiredNamespaces:T,optionalNamespaces:j}=y;E=E||"",hs(T)||(T=AE(l,"approve()"));const G=await this.client.core.crypto.generateKeyPair(),z=N.publicKey,M=await this.client.core.crypto.generateSharedKey(G,z);E&&s&&(await this.client.core.pairing.updateMetadata({topic:E,metadata:N.metadata}),await this.sendResult(s,E,{relay:{protocol:o??"irn"},responderPublicKey:G}),await this.client.proposal.delete(s,kt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:E}));const J=Ur({relay:{protocol:o??"irn"},namespaces:l,requiredNamespaces:T,optionalNamespaces:j,pairingTopic:E,controller:{publicKey:G,metadata:this.client.metadata},expiry:Vr(Sa)},w&&{sessionProperties:w});await this.client.core.relayer.subscribe(M),await this.sendRequest(M,"wc_sessionSettle",J);const W=Rc(Ur({},J),{topic:M,pairingTopic:E,acknowledged:!1,self:J.controller,peer:{publicKey:N.publicKey,metadata:N.metadata},controller:G});return await this.client.session.set(M,W),await this.setExpiry(M,Vr(Sa)),{topic:M,acknowledged:()=>new Promise(oe=>oe(this.client.session.get(M)))}},this.reject=async r=>{this.isInitialized(),await this.isValidReject(r);const{id:s,reason:o}=r,{pairingTopic:l}=this.client.proposal.get(s);l&&(await this.sendError(s,l,o),await this.client.proposal.delete(s,kt("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.isValidUpdate(r);const{topic:s,namespaces:o}=r,l=await this.sendRequest(s,"wc_sessionUpdate",{namespaces:o}),{done:w,resolve:y,reject:E}=Ii();return this.events.once(zt("session_update",l),({error:N})=>{N?E(N):y()}),await this.client.session.update(s,{namespaces:o}),{acknowledged:w}},this.extend=async r=>{this.isInitialized(),await this.isValidExtend(r);const{topic:s}=r,o=await this.sendRequest(s,"wc_sessionExtend",{}),{done:l,resolve:w,reject:y}=Ii();return this.events.once(zt("session_extend",o),({error:E})=>{E?y(E):w()}),await this.setExpiry(s,Vr(Sa)),{acknowledged:l}},this.request=async r=>{this.isInitialized(),await this.isValidRequest(r);const{chainId:s,request:o,topic:l,expiry:w}=r,y=await this.sendRequest(l,"wc_sessionRequest",{request:o,chainId:s},w),{done:E,resolve:N,reject:T}=Ii(w);return this.events.once(zt("session_request",y),({error:j,result:G})=>{j?T(j):N(G)}),this.client.events.emit("session_request_sent",{topic:l,request:o,chainId:s,id:y}),await E()},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:s,response:o}=r,{id:l}=o;In(o)?await this.sendResult(l,s,o.result):pn(o)&&await this.sendError(l,s,o.error),this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0})},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);const{topic:s}=r;if(this.client.session.keys.includes(s)){const o=await this.sendRequest(s,"wc_sessionPing",{}),{done:l,resolve:w,reject:y}=Ii();this.events.once(zt("session_ping",o),({error:E})=>{E?y(E):w()}),await l()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async r=>{this.isInitialized(),await this.isValidEmit(r);const{topic:s,event:o,chainId:l}=r;await this.sendRequest(s,"wc_sessionEvent",{event:o,chainId:l})},this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.client.session.keys.includes(s)?(await this.sendRequest(s,"wc_sessionDelete",kt("USER_DISCONNECTED")),await this.deleteSession(s)):await this.client.core.pairing.disconnect({topic:s})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(s=>NE(s,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.deleteSession=async(r,s)=>{const{self:o}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await Promise.all([this.client.session.delete(r,kt("USER_DISCONNECTED")),this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.deleteSymKey(r),s?Promise.resolve():this.client.core.expirer.del(r)])},this.deleteProposal=async(r,s)=>{await Promise.all([this.client.proposal.delete(r,kt("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,s,o=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,s),o?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,s)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:s}),this.client.core.expirer.set(r,s)},this.setProposal=async(r,s)=>{await this.client.proposal.set(r,s),this.client.core.expirer.set(r,s.expiry)},this.setPendingSessionRequest=async r=>{const s=cs.wc_sessionRequest.req.ttl,{id:o,topic:l,params:w}=r;await this.client.pendingRequest.set(o,{id:o,topic:l,params:w}),s&&this.client.core.expirer.set(o,Vr(s))},this.sendRequest=async(r,s,o,l)=>{const w=tu(s,o);if(lu()&&F2.includes(s)){const N=Xn(JSON.stringify(w));await this.client.core.verify.register({attestationId:N})}const y=await this.client.core.crypto.encode(r,w),E=cs[s].req;return l&&(E.ttl=l),this.client.core.history.set(r,w),this.client.core.relayer.publish(r,y,E),w.id},this.sendResult=async(r,s,o)=>{const l=eu(r,o),w=await this.client.core.crypto.encode(s,l),y=await this.client.core.history.get(s,r),E=cs[y.request.method].res;this.client.core.relayer.publish(s,w,E),await this.client.core.history.resolve(l)},this.sendError=async(r,s,o)=>{const l=Zc(r,o),w=await this.client.core.crypto.encode(s,l),y=await this.client.core.history.get(s,r),E=cs[y.request.method].res;this.client.core.relayer.publish(s,w,E),await this.client.core.history.resolve(l)},this.cleanup=async()=>{const r=[],s=[];this.client.session.getAll().forEach(o=>{xn(o.expiry)&&r.push(o.topic)}),this.client.proposal.getAll().forEach(o=>{xn(o.expiry)&&s.push(o.id)}),await Promise.all([...r.map(o=>this.deleteSession(o)),...s.map(o=>this.deleteProposal(o))])},this.onRelayEventRequest=r=>{const{topic:s,payload:o}=r,l=o.method;switch(l){case"wc_sessionPropose":return this.onSessionProposeRequest(s,o);case"wc_sessionSettle":return this.onSessionSettleRequest(s,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,o);case"wc_sessionExtend":return this.onSessionExtendRequest(s,o);case"wc_sessionPing":return this.onSessionPingRequest(s,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,o);case"wc_sessionRequest":return this.onSessionRequest(s,o);case"wc_sessionEvent":return this.onSessionEventRequest(s,o);default:return this.client.logger.info(`Unsupported request method ${l}`)}},this.onRelayEventResponse=async r=>{const{topic:s,payload:o}=r,l=(await this.client.core.history.get(s,o.id)).request.method;switch(l){case"wc_sessionPropose":return this.onSessionProposeResponse(s,o);case"wc_sessionSettle":return this.onSessionSettleResponse(s,o);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,o);case"wc_sessionExtend":return this.onSessionExtendResponse(s,o);case"wc_sessionPing":return this.onSessionPingResponse(s,o);case"wc_sessionRequest":return this.onSessionRequestResponse(s,o);default:return this.client.logger.info(`Unsupported response method ${l}`)}},this.onSessionProposeRequest=async(r,s)=>{const{params:o,id:l}=s;try{this.isValidConnect(Ur({},s.params));const w=Vr(De.FIVE_MINUTES),y=Ur({id:l,pairingTopic:r,expiry:w},o);await this.setProposal(l,y);const E=Xn(JSON.stringify(s)),N=await this.getVerifyContext(E,y.proposer.metadata);this.client.events.emit("session_proposal",{id:l,params:y,context:N})}catch(w){await this.sendError(l,r,w),this.client.logger.error(w)}},this.onSessionProposeResponse=async(r,s)=>{const{id:o}=s;if(In(s)){const{result:l}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:l});const w=this.client.proposal.get(o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:w});const y=w.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:y});const E=l.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:E});const N=await this.client.core.crypto.generateSharedKey(y,E);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:N});const T=await this.client.core.relayer.subscribe(N);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:T}),await this.client.core.pairing.activate({topic:r})}else pn(s)&&(await this.client.proposal.delete(o,kt("USER_DISCONNECTED")),this.events.emit(zt("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(r,s)=>{const{id:o,params:l}=s;try{this.isValidSessionSettleRequest(l);const{relay:w,controller:y,expiry:E,namespaces:N,requiredNamespaces:T,optionalNamespaces:j,sessionProperties:G,pairingTopic:z}=s.params,M=Ur({topic:r,relay:w,expiry:E,namespaces:N,acknowledged:!0,pairingTopic:z,requiredNamespaces:T,optionalNamespaces:j,controller:y.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:y.publicKey,metadata:y.metadata}},G&&{sessionProperties:G});await this.sendResult(s.id,r,!0),this.events.emit(zt("session_connect"),{session:M})}catch(w){await this.sendError(o,r,w),this.client.logger.error(w)}},this.onSessionSettleResponse=async(r,s)=>{const{id:o}=s;In(s)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(zt("session_approve",o),{})):pn(s)&&(await this.client.session.delete(r,kt("USER_DISCONNECTED")),this.events.emit(zt("session_approve",o),{error:s.error}))},this.onSessionUpdateRequest=async(r,s)=>{const{params:o,id:l}=s;try{this.isValidUpdate(Ur({topic:r},o)),await this.client.session.update(r,{namespaces:o.namespaces}),await this.sendResult(l,r,!0),this.client.events.emit("session_update",{id:l,topic:r,params:o})}catch(w){await this.sendError(l,r,w),this.client.logger.error(w)}},this.onSessionUpdateResponse=(r,s)=>{const{id:o}=s;In(s)?this.events.emit(zt("session_update",o),{}):pn(s)&&this.events.emit(zt("session_update",o),{error:s.error})},this.onSessionExtendRequest=async(r,s)=>{const{id:o}=s;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Vr(Sa)),await this.sendResult(o,r,!0),this.client.events.emit("session_extend",{id:o,topic:r})}catch(l){await this.sendError(o,r,l),this.client.logger.error(l)}},this.onSessionExtendResponse=(r,s)=>{const{id:o}=s;In(s)?this.events.emit(zt("session_extend",o),{}):pn(s)&&this.events.emit(zt("session_extend",o),{error:s.error})},this.onSessionPingRequest=async(r,s)=>{const{id:o}=s;try{this.isValidPing({topic:r}),await this.sendResult(o,r,!0),this.client.events.emit("session_ping",{id:o,topic:r})}catch(l){await this.sendError(o,r,l),this.client.logger.error(l)}},this.onSessionPingResponse=(r,s)=>{const{id:o}=s;setTimeout(()=>{In(s)?this.events.emit(zt("session_ping",o),{}):pn(s)&&this.events.emit(zt("session_ping",o),{error:s.error})},500)},this.onSessionDeleteRequest=async(r,s)=>{const{id:o}=s;try{this.isValidDisconnect({topic:r,reason:s.params}),await Promise.all([new Promise(l=>{this.client.core.relayer.once(Vt.publish,async()=>{l(await this.deleteSession(r))})}),this.sendResult(o,r,!0)]),this.client.events.emit("session_delete",{id:o,topic:r})}catch(l){await this.sendError(o,r,l),this.client.logger.error(l)}},this.onSessionRequest=async(r,s)=>{const{id:o,params:l}=s;try{this.isValidRequest(Ur({topic:r},l)),await this.setPendingSessionRequest({id:o,topic:r,params:l});const w=Xn(JSON.stringify(s)),y=this.client.session.get(r),E=await this.getVerifyContext(w,y.peer.metadata);this.client.events.emit("session_request",{id:o,topic:r,params:l,context:E})}catch(w){await this.sendError(o,r,w),this.client.logger.error(w)}},this.onSessionRequestResponse=(r,s)=>{const{id:o}=s;In(s)?this.events.emit(zt("session_request",o),{result:s.result}):pn(s)&&this.events.emit(zt("session_request",o),{error:s.error})},this.onSessionEventRequest=async(r,s)=>{const{id:o,params:l}=s;try{this.isValidEmit(Ur({topic:r},l)),this.client.events.emit("session_event",{id:o,topic:r,params:l})}catch(w){await this.sendError(o,r,w),this.client.logger.error(w)}},this.isValidConnect=async r=>{if(!_r(r)){const{message:E}=de("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(E)}const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:l,sessionProperties:w,relays:y}=r;if(or(s)||await this.isValidPairingTopic(s),!KE(y,!0)){const{message:E}=de("MISSING_OR_INVALID",`connect() relays: ${y}`);throw new Error(E)}!or(o)&&hs(o)!==0&&this.validateNamespaces(o,"requiredNamespaces"),!or(l)&&hs(l)!==0&&this.validateNamespaces(l,"optionalNamespaces"),or(w)||this.validateSessionProps(w,"sessionProperties")},this.validateNamespaces=(r,s)=>{const o=HE(r,"connect()",s);if(o)throw new Error(o.message)},this.isValidApprove=async r=>{if(!_r(r))throw new Error(de("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:s,namespaces:o,relayProtocol:l,sessionProperties:w}=r;await this.isValidProposalId(s);const y=this.client.proposal.get(s),E=Pa(o,"approve()");if(E)throw new Error(E.message);const N=ll(y.requiredNamespaces,o,"approve()");if(N)throw new Error(N.message);if(!Gt(l,!0)){const{message:T}=de("MISSING_OR_INVALID",`approve() relayProtocol: ${l}`);throw new Error(T)}or(w)||this.validateSessionProps(w,"sessionProperties")},this.isValidReject=async r=>{if(!_r(r)){const{message:l}=de("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(l)}const{id:s,reason:o}=r;if(await this.isValidProposalId(s),!kE(o)){const{message:l}=de("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(o)}`);throw new Error(l)}},this.isValidSessionSettleRequest=r=>{if(!_r(r)){const{message:N}=de("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(N)}const{relay:s,controller:o,namespaces:l,expiry:w}=r;if(!Ud(s)){const{message:N}=de("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(N)}const y=LE(o,"onSessionSettleRequest()");if(y)throw new Error(y.message);const E=Pa(l,"onSessionSettleRequest()");if(E)throw new Error(E.message);if(xn(w)){const{message:N}=de("EXPIRED","onSessionSettleRequest()");throw new Error(N)}},this.isValidUpdate=async r=>{if(!_r(r)){const{message:E}=de("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(E)}const{topic:s,namespaces:o}=r;await this.isValidSessionTopic(s);const l=this.client.session.get(s),w=Pa(o,"update()");if(w)throw new Error(w.message);const y=ll(l.requiredNamespaces,o,"update()");if(y)throw new Error(y.message)},this.isValidExtend=async r=>{if(!_r(r)){const{message:o}=de("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(o)}const{topic:s}=r;await this.isValidSessionTopic(s)},this.isValidRequest=async r=>{if(!_r(r)){const{message:E}=de("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(E)}const{topic:s,request:o,chainId:l,expiry:w}=r;await this.isValidSessionTopic(s);const{namespaces:y}=this.client.session.get(s);if(!hl(y,l)){const{message:E}=de("MISSING_OR_INVALID",`request() chainId: ${l}`);throw new Error(E)}if(!GE(o)){const{message:E}=de("MISSING_OR_INVALID",`request() ${JSON.stringify(o)}`);throw new Error(E)}if(!JE(y,l,o.method)){const{message:E}=de("MISSING_OR_INVALID",`request() method: ${o.method}`);throw new Error(E)}if(w&&!e3(w,Nc)){const{message:E}=de("MISSING_OR_INVALID",`request() expiry: ${w}. Expiry must be a number (in seconds) between ${Nc.min} and ${Nc.max}`);throw new Error(E)}},this.isValidRespond=async r=>{if(!_r(r)){const{message:l}=de("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(l)}const{topic:s,response:o}=r;if(await this.isValidSessionTopic(s),!WE(o)){const{message:l}=de("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(o)}`);throw new Error(l)}},this.isValidPing=async r=>{if(!_r(r)){const{message:o}=de("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(o)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async r=>{if(!_r(r)){const{message:y}=de("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(y)}const{topic:s,event:o,chainId:l}=r;await this.isValidSessionTopic(s);const{namespaces:w}=this.client.session.get(s);if(!hl(w,l)){const{message:y}=de("MISSING_OR_INVALID",`emit() chainId: ${l}`);throw new Error(y)}if(!YE(o)){const{message:y}=de("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(y)}if(!XE(w,l,o.name)){const{message:y}=de("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(y)}},this.isValidDisconnect=async r=>{if(!_r(r)){const{message:o}=de("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(o)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(r,s)=>{const o={verified:{verifyUrl:s.verifyUrl||"",validation:"UNKNOWN",origin:s.url||""}};try{const l=await this.client.core.verify.resolve({attestationId:r,verifyUrl:s.verifyUrl});l&&(o.verified.origin=l,o.verified.validation=l===s.url?"VALID":"INVALID")}catch(l){this.client.logger.error(l)}return this.client.logger.info(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(r,s)=>{Object.values(r).forEach(o=>{if(!Gt(o,!1)){const{message:l}=de("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(l)}})}}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.client.core.relayer.on(Vt.message,async t=>{const{topic:r,message:s}=t;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const o=await this.client.core.crypto.decode(r,s);Qc(o)?(this.client.core.history.set(r,o),this.onRelayEventRequest({topic:r,payload:o})):Yl(o)&&(await this.client.core.history.resolve(o),this.onRelayEventResponse({topic:r,payload:o}))})}registerExpirerEvents(){this.client.core.expirer.on(jr.expired,async t=>{const{topic:r,id:s}=Rd(t.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,de("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}isValidPairingTopic(t){if(!Gt(t,!1)){const{message:r}=de("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:r}=de("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(r)}if(xn(this.client.core.pairing.pairings.get(t).expiry)){const{message:r}=de("EXPIRED",`pairing topic: ${t}`);throw new Error(r)}}async isValidSessionTopic(t){if(!Gt(t,!1)){const{message:r}=de("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(r)}if(!this.client.session.keys.includes(t)){const{message:r}=de("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(r)}if(xn(this.client.session.get(t).expiry)){await this.deleteSession(t);const{message:r}=de("EXPIRED",`session topic: ${t}`);throw new Error(r)}}async isValidSessionOrPairingTopic(t){if(this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(Gt(t,!1)){const{message:r}=de("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(r)}else{const{message:r}=de("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(r)}}async isValidProposalId(t){if(!VE(t)){const{message:r}=de("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(r)}if(!this.client.proposal.keys.includes(t)){const{message:r}=de("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(r)}if(xn(this.client.proposal.get(t).expiry)){await this.deleteProposal(t);const{message:r}=de("EXPIRED",`proposal id: ${t}`);throw new Error(r)}}}class q2 extends ka{constructor(t,r){super(t,r,C2,yu),this.core=t,this.logger=r}}class B2 extends ka{constructor(t,r){super(t,r,T2,yu),this.core=t,this.logger=r}}class H2 extends ka{constructor(t,r){super(t,r,R2,yu,s=>s.id),this.core=t,this.logger=r}}class _u extends cw{constructor(t){super(t),this.protocol=Xd,this.version=Zd,this.name=Tc.name,this.events=new $r.EventEmitter,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(o){throw this.logger.error(o.message),o}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(o){throw this.logger.error(o.message),o}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(o){throw this.logger.error(o.message),o}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(o){throw this.logger.error(o.message),o}},this.update=async s=>{try{return await this.engine.update(s)}catch(o){throw this.logger.error(o.message),o}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(o){throw this.logger.error(o.message),o}},this.request=async s=>{try{return await this.engine.request(s)}catch(o){throw this.logger.error(o.message),o}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(o){throw this.logger.error(o.message),o}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(o){throw this.logger.error(o.message),o}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(o){throw this.logger.error(o.message),o}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(o){throw this.logger.error(o.message),o}},this.find=s=>{try{return this.engine.find(s)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=t?.name||Tc.name,this.metadata=t?.metadata||fE();const r=typeof t?.logger<"u"&&typeof t?.logger!="string"?t.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:t?.logger||Tc.logger}));this.core=t?.core||new A2(t),this.logger=Qe.generateChildLogger(r,this.name),this.session=new B2(this.core,this.logger),this.proposal=new q2(this.core,this.logger),this.pendingRequest=new H2(this.core,this.logger),this.engine=new z2(this)}static async init(t){const r=new _u(t);return await r.initialize(),r}get context(){return Qe.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}}var lt={};Object.defineProperty(lt,"__esModule",{value:!0});lt.getLocalStorage=lt.getLocalStorageOrThrow=lt.getCrypto=lt.getCryptoOrThrow=lt.getLocation=lt.getLocationOrThrow=vu=lt.getNavigator=lt.getNavigatorOrThrow=tp=lt.getDocument=lt.getDocumentOrThrow=lt.getFromWindowOrThrow=lt.getFromWindow=void 0;function ri(i){let t;return typeof window<"u"&&typeof window[i]<"u"&&(t=window[i]),t}lt.getFromWindow=ri;function Ri(i){const t=ri(i);if(!t)throw new Error(`${i} is not defined in Window`);return t}lt.getFromWindowOrThrow=Ri;function K2(){return Ri("document")}lt.getDocumentOrThrow=K2;function V2(){return ri("document")}var tp=lt.getDocument=V2;function k2(){return Ri("navigator")}lt.getNavigatorOrThrow=k2;function G2(){return ri("navigator")}var vu=lt.getNavigator=G2;function W2(){return Ri("location")}lt.getLocationOrThrow=W2;function Y2(){return ri("location")}lt.getLocation=Y2;function J2(){return Ri("crypto")}lt.getCryptoOrThrow=J2;function X2(){return ri("crypto")}lt.getCrypto=X2;function Z2(){return Ri("localStorage")}lt.getLocalStorageOrThrow=Z2;function Q2(){return ri("localStorage")}lt.getLocalStorage=Q2;var bu={};Object.defineProperty(bu,"__esModule",{value:!0});bu.getWindowMetadata=void 0;const jl=lt;function eD(){let i,t;try{i=jl.getDocumentOrThrow(),t=jl.getLocationOrThrow()}catch{return null}function r(){const j=i.getElementsByTagName("link"),G=[];for(let z=0;z<j.length;z++){const M=j[z],J=M.getAttribute("rel");if(J&&J.toLowerCase().indexOf("icon")>-1){const W=M.getAttribute("href");if(W)if(W.toLowerCase().indexOf("https:")===-1&&W.toLowerCase().indexOf("http:")===-1&&W.indexOf("//")!==0){let oe=t.protocol+"//"+t.host;if(W.indexOf("/")===0)oe+=W;else{const O=t.pathname.split("/");O.pop();const A=O.join("/");oe+=A+"/"+W}G.push(oe)}else if(W.indexOf("//")===0){const oe=t.protocol+W;G.push(oe)}else G.push(W)}}return G}function s(...j){const G=i.getElementsByTagName("meta");for(let z=0;z<G.length;z++){const M=G[z],J=["itemprop","property","name"].map(W=>M.getAttribute(W)).filter(W=>W?j.includes(W):!1);if(J.length&&J){const W=M.getAttribute("content");if(W)return W}}return""}function o(){let j=s("name","og:site_name","og:title","twitter:title");return j||(j=i.title),j}function l(){return s("description","og:description","twitter:description","keywords")}const w=o(),y=l(),E=t.origin,N=r();return{description:y,url:E,icons:N,name:w}}bu.getWindowMetadata=eD;var tD={};(function(i){const t=kl,r=Gl,s=Vl,o=dd,l=O=>O==null,w=Symbol("encodeFragmentIdentifier");function y(O){switch(O.arrayFormat){case"index":return A=>(S,x)=>{const m=S.length;return x===void 0||O.skipNull&&x===null||O.skipEmptyString&&x===""?S:x===null?[...S,[T(A,O),"[",m,"]"].join("")]:[...S,[T(A,O),"[",T(m,O),"]=",T(x,O)].join("")]};case"bracket":return A=>(S,x)=>x===void 0||O.skipNull&&x===null||O.skipEmptyString&&x===""?S:x===null?[...S,[T(A,O),"[]"].join("")]:[...S,[T(A,O),"[]=",T(x,O)].join("")];case"colon-list-separator":return A=>(S,x)=>x===void 0||O.skipNull&&x===null||O.skipEmptyString&&x===""?S:x===null?[...S,[T(A,O),":list="].join("")]:[...S,[T(A,O),":list=",T(x,O)].join("")];case"comma":case"separator":case"bracket-separator":{const A=O.arrayFormat==="bracket-separator"?"[]=":"=";return S=>(x,m)=>m===void 0||O.skipNull&&m===null||O.skipEmptyString&&m===""?x:(m=m===null?"":m,x.length===0?[[T(S,O),A,T(m,O)].join("")]:[[x,T(m,O)].join(O.arrayFormatSeparator)])}default:return A=>(S,x)=>x===void 0||O.skipNull&&x===null||O.skipEmptyString&&x===""?S:x===null?[...S,T(A,O)]:[...S,[T(A,O),"=",T(x,O)].join("")]}}function E(O){let A;switch(O.arrayFormat){case"index":return(S,x,m)=>{if(A=/\[(\d*)\]$/.exec(S),S=S.replace(/\[\d*\]$/,""),!A){m[S]=x;return}m[S]===void 0&&(m[S]={}),m[S][A[1]]=x};case"bracket":return(S,x,m)=>{if(A=/(\[\])$/.exec(S),S=S.replace(/\[\]$/,""),!A){m[S]=x;return}if(m[S]===void 0){m[S]=[x];return}m[S]=[].concat(m[S],x)};case"colon-list-separator":return(S,x,m)=>{if(A=/(:list)$/.exec(S),S=S.replace(/:list$/,""),!A){m[S]=x;return}if(m[S]===void 0){m[S]=[x];return}m[S]=[].concat(m[S],x)};case"comma":case"separator":return(S,x,m)=>{const c=typeof x=="string"&&x.includes(O.arrayFormatSeparator),d=typeof x=="string"&&!c&&j(x,O).includes(O.arrayFormatSeparator);x=d?j(x,O):x;const Z=c||d?x.split(O.arrayFormatSeparator).map(h=>j(h,O)):x===null?x:j(x,O);m[S]=Z};case"bracket-separator":return(S,x,m)=>{const c=/(\[\])$/.test(S);if(S=S.replace(/\[\]$/,""),!c){m[S]=x&&j(x,O);return}const d=x===null?[]:x.split(O.arrayFormatSeparator).map(Z=>j(Z,O));if(m[S]===void 0){m[S]=d;return}m[S]=[].concat(m[S],d)};default:return(S,x,m)=>{if(m[S]===void 0){m[S]=x;return}m[S]=[].concat(m[S],x)}}}function N(O){if(typeof O!="string"||O.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function T(O,A){return A.encode?A.strict?t(O):encodeURIComponent(O):O}function j(O,A){return A.decode?r(O):O}function G(O){return Array.isArray(O)?O.sort():typeof O=="object"?G(Object.keys(O)).sort((A,S)=>Number(A)-Number(S)).map(A=>O[A]):O}function z(O){const A=O.indexOf("#");return A!==-1&&(O=O.slice(0,A)),O}function M(O){let A="";const S=O.indexOf("#");return S!==-1&&(A=O.slice(S)),A}function J(O){O=z(O);const A=O.indexOf("?");return A===-1?"":O.slice(A+1)}function W(O,A){return A.parseNumbers&&!Number.isNaN(Number(O))&&typeof O=="string"&&O.trim()!==""?O=Number(O):A.parseBooleans&&O!==null&&(O.toLowerCase()==="true"||O.toLowerCase()==="false")&&(O=O.toLowerCase()==="true"),O}function oe(O,A){A=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},A),N(A.arrayFormatSeparator);const S=E(A),x=Object.create(null);if(typeof O!="string"||(O=O.trim().replace(/^[?#&]/,""),!O))return x;for(const m of O.split("&")){if(m==="")continue;let[c,d]=s(A.decode?m.replace(/\+/g," "):m,"=");d=d===void 0?null:["comma","separator","bracket-separator"].includes(A.arrayFormat)?d:j(d,A),S(j(c,A),d,x)}for(const m of Object.keys(x)){const c=x[m];if(typeof c=="object"&&c!==null)for(const d of Object.keys(c))c[d]=W(c[d],A);else x[m]=W(c,A)}return A.sort===!1?x:(A.sort===!0?Object.keys(x).sort():Object.keys(x).sort(A.sort)).reduce((m,c)=>{const d=x[c];return Boolean(d)&&typeof d=="object"&&!Array.isArray(d)?m[c]=G(d):m[c]=d,m},Object.create(null))}i.extract=J,i.parse=oe,i.stringify=(O,A)=>{if(!O)return"";A=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},A),N(A.arrayFormatSeparator);const S=d=>A.skipNull&&l(O[d])||A.skipEmptyString&&O[d]==="",x=y(A),m={};for(const d of Object.keys(O))S(d)||(m[d]=O[d]);const c=Object.keys(m);return A.sort!==!1&&c.sort(A.sort),c.map(d=>{const Z=O[d];return Z===void 0?"":Z===null?T(d,A):Array.isArray(Z)?Z.length===0&&A.arrayFormat==="bracket-separator"?T(d,A)+"[]":Z.reduce(x(d),[]).join("&"):T(d,A)+"="+T(Z,A)}).filter(d=>d.length>0).join("&")},i.parseUrl=(O,A)=>{A=Object.assign({decode:!0},A);const[S,x]=s(O,"#");return Object.assign({url:S.split("?")[0]||"",query:oe(J(O),A)},A&&A.parseFragmentIdentifier&&x?{fragmentIdentifier:j(x,A)}:{})},i.stringifyUrl=(O,A)=>{A=Object.assign({encode:!0,strict:!0,[w]:!0},A);const S=z(O.url).split("?")[0]||"",x=i.extract(O.url),m=i.parse(x,{sort:!1}),c=Object.assign(m,O.query);let d=i.stringify(c,A);d&&(d=`?${d}`);let Z=M(O.url);return O.fragmentIdentifier&&(Z=`#${A[w]?T(O.fragmentIdentifier,A):O.fragmentIdentifier}`),`${S}${d}${Z}`},i.pick=(O,A,S)=>{S=Object.assign({parseFragmentIdentifier:!0,[w]:!1},S);const{url:x,query:m,fragmentIdentifier:c}=i.parseUrl(O,S);return i.stringifyUrl({url:x,query:o(m,A),fragmentIdentifier:c},S)},i.exclude=(O,A,S)=>{const x=Array.isArray(A)?m=>!A.includes(m):(m,c)=>!A(m,c);return i.pick(O,x,S)}})(tD);const rD="ReactNative",xi={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"};function rp(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function nD(){return!tp()&&!!vu()&&navigator.product===rD}function iD(){return!rp()&&!!vu()}function sD(){return nD()?xi.reactNative:rp()?xi.node:iD()?xi.browser:xi.unknown}function Fc(i=[],t=[]){return[...new Set([...i,...t])]}function np(i){return i.includes(":")}function Aa(i){return np(i)?i.split(":")[0]:i}const aD={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function Ll(i,t){const{message:r,code:s}=aD[i];return{message:t?`${r} ${t}`:r,code:s}}function oD(i,t){return Array.isArray(i)?typeof t<"u"&&i.length?i.every(t):!0:!1}function cD(i){return Object.getPrototypeOf(i)===Object.prototype&&Object.keys(i).length}const $l="error",uD="wss://relay.walletconnect.com",fD="wc",hD="universal_provider",Ml=`${fD}@${2}:${hD}:`,lD="https://rpc.walletconnect.com/v1",Tn={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var us=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yc={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(i,t){(function(){var r,s="4.17.21",o=200,l="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",w="Expected a function",y="Invalid `variable` option passed into `_.template`",E="__lodash_hash_undefined__",N=500,T="__lodash_placeholder__",j=1,G=2,z=4,M=1,J=2,W=1,oe=2,O=4,A=8,S=16,x=32,m=64,c=128,d=256,Z=512,h=30,p="...",v=800,P=16,b=1,g=2,L=3,q=1/0,Q=9007199254740991,R=17976931348623157e292,k=0/0,te=4294967295,se=te-1,ne=te>>>1,_e=[["ary",c],["bind",W],["bindKey",oe],["curry",A],["curryRight",S],["flip",Z],["partial",x],["partialRight",m],["rearg",d]],he="[object Arguments]",be="[object Array]",X="[object AsyncFunction]",Y="[object Boolean]",B="[object Date]",f="[object DOMException]",U="[object Error]",fe="[object Function]",pe="[object GeneratorFunction]",Oe="[object Map]",Be="[object Number]",Ve="[object Null]",Le="[object Object]",gt="[object Promise]",yt="[object Proxy]",Me="[object RegExp]",Ie="[object Set]",Re="[object String]",Fe="[object Symbol]",ze="[object Undefined]",Pe="[object WeakMap]",Ue="[object WeakSet]",Se="[object ArrayBuffer]",Ae="[object DataView]",He="[object Float32Array]",xe="[object Float64Array]",ke="[object Int8Array]",We="[object Int16Array]",et="[object Int32Array]",tt="[object Uint8Array]",Je="[object Uint8ClampedArray]",er="[object Uint16Array]",hr="[object Uint32Array]",kr=/\b__p \+= '';/g,tr=/\b(__p \+=) '' \+/g,tn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,gn=/&(?:amp|lt|gt|quot|#39);/g,Nn=/[&<>"']/g,Et=RegExp(gn.source),_t=RegExp(Nn.source),Dt=/<%-([\s\S]+?)%>/g,St=/<%([\s\S]+?)%>/g,mt=/<%=([\s\S]+?)%>/g,vt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rt=/^\w*$/,Ft=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ot=/[\\^$.*+?()[\]{}|]/g,Ut=RegExp(Ot.source),It=/^\s+/,At=/\s/,xt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ft=/\{\n\/\* \[wrapped with (.+)\] \*/,jt=/,? & /,Lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ga=/[()=,{}\[\]\/\s]/,Wa=/\\(\\)?/g,Ya=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ir=/\w*$/,Ja=/^[-+]0x[0-9a-f]+$/i,Xa=/^0b[01]+$/i,Za=/^\[object .+?Constructor\]$/,Qa=/^0o[0-7]+$/i,eo=/^(?:0|[1-9]\d*)$/,rn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ii=/($^)/,to=/['\n\r\u2028\u2029\\]/g,si="\\ud800-\\udfff",ro="\\u0300-\\u036f",no="\\ufe20-\\ufe2f",ai="\\u20d0-\\u20ff",ms=ro+no+ai,ws="\\u2700-\\u27bf",Mr="a-z\\xdf-\\xf6\\xf8-\\xff",io="\\xac\\xb1\\xd7\\xf7",so="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ao="\\u2000-\\u206f",oo=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Es="A-Z\\xc0-\\xd6\\xd8-\\xde",Ds="\\ufe0e\\ufe0f",Rn=io+so+ao+oo,Fi="['â€™]",Fn="["+si+"]",Ui="["+Rn+"]",Un="["+ms+"]",Ss="\\d+",co="["+ws+"]",Os="["+Mr+"]",Is="[^"+si+Rn+Ss+ws+Mr+Es+"]",oi="\\ud83c[\\udffb-\\udfff]",uo="(?:"+Un+"|"+oi+")",xs="[^"+si+"]",ci="(?:\\ud83c[\\udde6-\\uddff]){2}",yn="[\\ud800-\\udbff][\\udc00-\\udfff]",br="["+Es+"]",Ps="\\u200d",As="(?:"+Os+"|"+Is+")",Gr="(?:"+br+"|"+Is+")",Cs="(?:"+Fi+"(?:d|ll|m|re|s|t|ve))?",Ts="(?:"+Fi+"(?:D|LL|M|RE|S|T|VE))?",Ns=uo+"?",Rs="["+Ds+"]?",fo="(?:"+Ps+"(?:"+[xs,ci,yn].join("|")+")"+Rs+Ns+")*",nn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Fs="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Us=Rs+Ns+fo,ui="(?:"+[co,ci,yn].join("|")+")"+Us,ho="(?:"+[xs+Un+"?",Un,ci,yn,Fn].join("|")+")",ji=RegExp(Fi,"g"),lo=RegExp(Un,"g"),fi=RegExp(oi+"(?="+oi+")|"+ho+Us,"g"),js=RegExp([br+"?"+Os+"+"+Cs+"(?="+[Ui,br,"$"].join("|")+")",Gr+"+"+Ts+"(?="+[Ui,br+As,"$"].join("|")+")",br+"?"+As+"+"+Cs,br+"+"+Ts,Fs,nn,Ss,ui].join("|"),"g"),Ls=RegExp("["+Ps+si+ms+Ds+"]"),jn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$s=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],po=-1,at={};at[He]=at[xe]=at[ke]=at[We]=at[et]=at[tt]=at[Je]=at[er]=at[hr]=!0,at[he]=at[be]=at[Se]=at[Y]=at[Ae]=at[B]=at[U]=at[fe]=at[Oe]=at[Be]=at[Le]=at[Me]=at[Ie]=at[Re]=at[Pe]=!1;var st={};st[he]=st[be]=st[Se]=st[Ae]=st[Y]=st[B]=st[He]=st[xe]=st[ke]=st[We]=st[et]=st[Oe]=st[Be]=st[Le]=st[Me]=st[Ie]=st[Re]=st[Fe]=st[tt]=st[Je]=st[er]=st[hr]=!0,st[U]=st[fe]=st[Pe]=!1;var C={Ã€:"A",Ã:"A",Ã‚:"A",Ãƒ:"A",Ã„:"A",Ã…:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã‡:"C",Ã§:"c",Ã:"D",Ã°:"d",Ãˆ:"E",Ã‰:"E",ÃŠ:"E",Ã‹:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",ÃŒ:"I",Ã:"I",ÃŽ:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã‘:"N",Ã±:"n",Ã’:"O",Ã“:"O",Ã”:"O",Ã•:"O",Ã–:"O",Ã˜:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã™:"U",Ãš:"U",Ã›:"U",Ãœ:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã†:"Ae",Ã¦:"ae",Ãž:"Th",Ã¾:"th",ÃŸ:"ss",Ä€:"A",Ä‚:"A",Ä„:"A",Ä:"a",Äƒ:"a",Ä…:"a",Ä†:"C",Äˆ:"C",ÄŠ:"C",ÄŒ:"C",Ä‡:"c",Ä‰:"c",Ä‹:"c",Ä:"c",ÄŽ:"D",Ä:"D",Ä:"d",Ä‘:"d",Ä’:"E",Ä”:"E",Ä–:"E",Ä˜:"E",Äš:"E",Ä“:"e",Ä•:"e",Ä—:"e",Ä™:"e",Ä›:"e",Äœ:"G",Äž:"G",Ä :"G",Ä¢:"G",Ä:"g",ÄŸ:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å€:"l",Å‚:"l",Åƒ:"N",Å…:"N",Å‡:"N",ÅŠ:"N",Å„:"n",Å†:"n",Åˆ:"n",Å‹:"n",ÅŒ:"O",ÅŽ:"O",Å:"O",Å:"o",Å:"o",Å‘:"o",Å”:"R",Å–:"R",Å˜:"R",Å•:"r",Å—:"r",Å™:"r",Åš:"S",Åœ:"S",Åž:"S",Å :"S",Å›:"s",Å:"s",ÅŸ:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å’:"Oe",Å“:"oe",Å‰:"'n",Å¿:"s"},H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ce={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ge={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ot=parseFloat,Te=parseInt,dt=typeof us=="object"&&us&&us.Object===Object&&us,$t=typeof self=="object"&&self&&self.Object===Object&&self,Xe=dt||$t||Function("return this")(),ct=t&&!t.nodeType&&t,Ct=ct&&!0&&i&&!i.nodeType&&i,lr=Ct&&Ct.exports===ct,Mt=lr&&dt.process,pt=function(){try{var K=Ct&&Ct.require&&Ct.require("util").types;return K||Mt&&Mt.binding&&Mt.binding("util")}catch{}}(),rr=pt&&pt.isArrayBuffer,zr=pt&&pt.isDate,xr=pt&&pt.isMap,Wr=pt&&pt.isRegExp,Li=pt&&pt.isSet,Ln=pt&&pt.isTypedArray;function Ht(K,re,ee){switch(ee.length){case 0:return K.call(re);case 1:return K.call(re,ee[0]);case 2:return K.call(re,ee[0],ee[1]);case 3:return K.call(re,ee[0],ee[1],ee[2])}return K.apply(re,ee)}function ip(K,re,ee,ye){for(var Ce=-1,rt=K==null?0:K.length;++Ce<rt;){var qt=K[Ce];re(ye,qt,ee(qt),K)}return ye}function Pr(K,re){for(var ee=-1,ye=K==null?0:K.length;++ee<ye&&re(K[ee],ee,K)!==!1;);return K}function sp(K,re){for(var ee=K==null?0:K.length;ee--&&re(K[ee],ee,K)!==!1;);return K}function wu(K,re){for(var ee=-1,ye=K==null?0:K.length;++ee<ye;)if(!re(K[ee],ee,K))return!1;return!0}function _n(K,re){for(var ee=-1,ye=K==null?0:K.length,Ce=0,rt=[];++ee<ye;){var qt=K[ee];re(qt,ee,K)&&(rt[Ce++]=qt)}return rt}function Ms(K,re){var ee=K==null?0:K.length;return!!ee&&hi(K,re,0)>-1}function go(K,re,ee){for(var ye=-1,Ce=K==null?0:K.length;++ye<Ce;)if(ee(re,K[ye]))return!0;return!1}function bt(K,re){for(var ee=-1,ye=K==null?0:K.length,Ce=Array(ye);++ee<ye;)Ce[ee]=re(K[ee],ee,K);return Ce}function vn(K,re){for(var ee=-1,ye=re.length,Ce=K.length;++ee<ye;)K[Ce+ee]=re[ee];return K}function yo(K,re,ee,ye){var Ce=-1,rt=K==null?0:K.length;for(ye&&rt&&(ee=K[++Ce]);++Ce<rt;)ee=re(ee,K[Ce],Ce,K);return ee}function ap(K,re,ee,ye){var Ce=K==null?0:K.length;for(ye&&Ce&&(ee=K[--Ce]);Ce--;)ee=re(ee,K[Ce],Ce,K);return ee}function _o(K,re){for(var ee=-1,ye=K==null?0:K.length;++ee<ye;)if(re(K[ee],ee,K))return!0;return!1}var op=vo("length");function cp(K){return K.split("")}function up(K){return K.match(Lt)||[]}function Eu(K,re,ee){var ye;return ee(K,function(Ce,rt,qt){if(re(Ce,rt,qt))return ye=rt,!1}),ye}function zs(K,re,ee,ye){for(var Ce=K.length,rt=ee+(ye?1:-1);ye?rt--:++rt<Ce;)if(re(K[rt],rt,K))return rt;return-1}function hi(K,re,ee){return re===re?wp(K,re,ee):zs(K,Du,ee)}function fp(K,re,ee,ye){for(var Ce=ee-1,rt=K.length;++Ce<rt;)if(ye(K[Ce],re))return Ce;return-1}function Du(K){return K!==K}function Su(K,re){var ee=K==null?0:K.length;return ee?mo(K,re)/ee:k}function vo(K){return function(re){return re==null?r:re[K]}}function bo(K){return function(re){return K==null?r:K[re]}}function Ou(K,re,ee,ye,Ce){return Ce(K,function(rt,qt,ut){ee=ye?(ye=!1,rt):re(ee,rt,qt,ut)}),ee}function hp(K,re){var ee=K.length;for(K.sort(re);ee--;)K[ee]=K[ee].value;return K}function mo(K,re){for(var ee,ye=-1,Ce=K.length;++ye<Ce;){var rt=re(K[ye]);rt!==r&&(ee=ee===r?rt:ee+rt)}return ee}function wo(K,re){for(var ee=-1,ye=Array(K);++ee<K;)ye[ee]=re(ee);return ye}function lp(K,re){return bt(re,function(ee){return[ee,K[ee]]})}function Iu(K){return K&&K.slice(0,Cu(K)+1).replace(It,"")}function mr(K){return function(re){return K(re)}}function Eo(K,re){return bt(re,function(ee){return K[ee]})}function $i(K,re){return K.has(re)}function xu(K,re){for(var ee=-1,ye=K.length;++ee<ye&&hi(re,K[ee],0)>-1;);return ee}function Pu(K,re){for(var ee=K.length;ee--&&hi(re,K[ee],0)>-1;);return ee}function dp(K,re){for(var ee=K.length,ye=0;ee--;)K[ee]===re&&++ye;return ye}var pp=bo(C),gp=bo(H);function yp(K){return"\\"+ge[K]}function _p(K,re){return K==null?r:K[re]}function li(K){return Ls.test(K)}function vp(K){return jn.test(K)}function bp(K){for(var re,ee=[];!(re=K.next()).done;)ee.push(re.value);return ee}function Do(K){var re=-1,ee=Array(K.size);return K.forEach(function(ye,Ce){ee[++re]=[Ce,ye]}),ee}function Au(K,re){return function(ee){return K(re(ee))}}function bn(K,re){for(var ee=-1,ye=K.length,Ce=0,rt=[];++ee<ye;){var qt=K[ee];(qt===re||qt===T)&&(K[ee]=T,rt[Ce++]=ee)}return rt}function qs(K){var re=-1,ee=Array(K.size);return K.forEach(function(ye){ee[++re]=ye}),ee}function mp(K){var re=-1,ee=Array(K.size);return K.forEach(function(ye){ee[++re]=[ye,ye]}),ee}function wp(K,re,ee){for(var ye=ee-1,Ce=K.length;++ye<Ce;)if(K[ye]===re)return ye;return-1}function Ep(K,re,ee){for(var ye=ee+1;ye--;)if(K[ye]===re)return ye;return ye}function di(K){return li(K)?Sp(K):op(K)}function qr(K){return li(K)?Op(K):cp(K)}function Cu(K){for(var re=K.length;re--&&At.test(K.charAt(re)););return re}var Dp=bo(ce);function Sp(K){for(var re=fi.lastIndex=0;fi.test(K);)++re;return re}function Op(K){return K.match(fi)||[]}function Ip(K){return K.match(js)||[]}var xp=function K(re){re=re==null?Xe:pi.defaults(Xe.Object(),re,pi.pick(Xe,$s));var ee=re.Array,ye=re.Date,Ce=re.Error,rt=re.Function,qt=re.Math,ut=re.Object,So=re.RegExp,Pp=re.String,Ar=re.TypeError,Bs=ee.prototype,Ap=rt.prototype,gi=ut.prototype,Hs=re["__core-js_shared__"],Ks=Ap.toString,it=gi.hasOwnProperty,Cp=0,Tu=function(){var e=/[^.]+$/.exec(Hs&&Hs.keys&&Hs.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Vs=gi.toString,Tp=Ks.call(ut),Np=Xe._,Rp=So("^"+Ks.call(it).replace(Ot,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ks=lr?re.Buffer:r,mn=re.Symbol,Gs=re.Uint8Array,Nu=ks?ks.allocUnsafe:r,Ws=Au(ut.getPrototypeOf,ut),Ru=ut.create,Fu=gi.propertyIsEnumerable,Ys=Bs.splice,Uu=mn?mn.isConcatSpreadable:r,Mi=mn?mn.iterator:r,$n=mn?mn.toStringTag:r,Js=function(){try{var e=Hn(ut,"defineProperty");return e({},"",{}),e}catch{}}(),Fp=re.clearTimeout!==Xe.clearTimeout&&re.clearTimeout,Up=ye&&ye.now!==Xe.Date.now&&ye.now,jp=re.setTimeout!==Xe.setTimeout&&re.setTimeout,Xs=qt.ceil,Zs=qt.floor,Oo=ut.getOwnPropertySymbols,Lp=ks?ks.isBuffer:r,ju=re.isFinite,$p=Bs.join,Mp=Au(ut.keys,ut),Bt=qt.max,Xt=qt.min,zp=ye.now,qp=re.parseInt,Lu=qt.random,Bp=Bs.reverse,Io=Hn(re,"DataView"),zi=Hn(re,"Map"),xo=Hn(re,"Promise"),yi=Hn(re,"Set"),qi=Hn(re,"WeakMap"),Bi=Hn(ut,"create"),Qs=qi&&new qi,_i={},Hp=Kn(Io),Kp=Kn(zi),Vp=Kn(xo),kp=Kn(yi),Gp=Kn(qi),ea=mn?mn.prototype:r,Hi=ea?ea.valueOf:r,$u=ea?ea.toString:r;function D(e){if(Pt(e)&&!Ne(e)&&!(e instanceof Ye)){if(e instanceof Cr)return e;if(it.call(e,"__wrapped__"))return zf(e)}return new Cr(e)}var vi=function(){function e(){}return function(n){if(!wt(n))return{};if(Ru)return Ru(n);e.prototype=n;var a=new e;return e.prototype=r,a}}();function ta(){}function Cr(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=r}D.templateSettings={escape:Dt,evaluate:St,interpolate:mt,variable:"",imports:{_:D}},D.prototype=ta.prototype,D.prototype.constructor=D,Cr.prototype=vi(ta.prototype),Cr.prototype.constructor=Cr;function Ye(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=te,this.__views__=[]}function Wp(){var e=new Ye(this.__wrapped__);return e.__actions__=dr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=dr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=dr(this.__views__),e}function Yp(){if(this.__filtered__){var e=new Ye(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Jp(){var e=this.__wrapped__.value(),n=this.__dir__,a=Ne(e),u=n<0,_=a?e.length:0,I=c0(0,_,this.__views__),F=I.start,$=I.end,V=$-F,ie=u?$:F-1,ae=this.__iteratees__,ue=ae.length,le=0,ve=Xt(V,this.__takeCount__);if(!a||!u&&_==V&&ve==V)return uf(e,this.__actions__);var we=[];e:for(;V--&&le<ve;){ie+=n;for(var qe=-1,Ee=e[ie];++qe<ue;){var Ge=ae[qe],Ze=Ge.iteratee,Dr=Ge.type,sr=Ze(Ee);if(Dr==g)Ee=sr;else if(!sr){if(Dr==b)continue e;break e}}we[le++]=Ee}return we}Ye.prototype=vi(ta.prototype),Ye.prototype.constructor=Ye;function Mn(e){var n=-1,a=e==null?0:e.length;for(this.clear();++n<a;){var u=e[n];this.set(u[0],u[1])}}function Xp(){this.__data__=Bi?Bi(null):{},this.size=0}function Zp(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}function Qp(e){var n=this.__data__;if(Bi){var a=n[e];return a===E?r:a}return it.call(n,e)?n[e]:r}function eg(e){var n=this.__data__;return Bi?n[e]!==r:it.call(n,e)}function tg(e,n){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=Bi&&n===r?E:n,this}Mn.prototype.clear=Xp,Mn.prototype.delete=Zp,Mn.prototype.get=Qp,Mn.prototype.has=eg,Mn.prototype.set=tg;function sn(e){var n=-1,a=e==null?0:e.length;for(this.clear();++n<a;){var u=e[n];this.set(u[0],u[1])}}function rg(){this.__data__=[],this.size=0}function ng(e){var n=this.__data__,a=ra(n,e);if(a<0)return!1;var u=n.length-1;return a==u?n.pop():Ys.call(n,a,1),--this.size,!0}function ig(e){var n=this.__data__,a=ra(n,e);return a<0?r:n[a][1]}function sg(e){return ra(this.__data__,e)>-1}function ag(e,n){var a=this.__data__,u=ra(a,e);return u<0?(++this.size,a.push([e,n])):a[u][1]=n,this}sn.prototype.clear=rg,sn.prototype.delete=ng,sn.prototype.get=ig,sn.prototype.has=sg,sn.prototype.set=ag;function an(e){var n=-1,a=e==null?0:e.length;for(this.clear();++n<a;){var u=e[n];this.set(u[0],u[1])}}function og(){this.size=0,this.__data__={hash:new Mn,map:new(zi||sn),string:new Mn}}function cg(e){var n=pa(this,e).delete(e);return this.size-=n?1:0,n}function ug(e){return pa(this,e).get(e)}function fg(e){return pa(this,e).has(e)}function hg(e,n){var a=pa(this,e),u=a.size;return a.set(e,n),this.size+=a.size==u?0:1,this}an.prototype.clear=og,an.prototype.delete=cg,an.prototype.get=ug,an.prototype.has=fg,an.prototype.set=hg;function zn(e){var n=-1,a=e==null?0:e.length;for(this.__data__=new an;++n<a;)this.add(e[n])}function lg(e){return this.__data__.set(e,E),this}function dg(e){return this.__data__.has(e)}zn.prototype.add=zn.prototype.push=lg,zn.prototype.has=dg;function Br(e){var n=this.__data__=new sn(e);this.size=n.size}function pg(){this.__data__=new sn,this.size=0}function gg(e){var n=this.__data__,a=n.delete(e);return this.size=n.size,a}function yg(e){return this.__data__.get(e)}function _g(e){return this.__data__.has(e)}function vg(e,n){var a=this.__data__;if(a instanceof sn){var u=a.__data__;if(!zi||u.length<o-1)return u.push([e,n]),this.size=++a.size,this;a=this.__data__=new an(u)}return a.set(e,n),this.size=a.size,this}Br.prototype.clear=pg,Br.prototype.delete=gg,Br.prototype.get=yg,Br.prototype.has=_g,Br.prototype.set=vg;function Mu(e,n){var a=Ne(e),u=!a&&Vn(e),_=!a&&!u&&On(e),I=!a&&!u&&!_&&Ei(e),F=a||u||_||I,$=F?wo(e.length,Pp):[],V=$.length;for(var ie in e)(n||it.call(e,ie))&&!(F&&(ie=="length"||_&&(ie=="offset"||ie=="parent")||I&&(ie=="buffer"||ie=="byteLength"||ie=="byteOffset")||fn(ie,V)))&&$.push(ie);return $}function zu(e){var n=e.length;return n?e[$o(0,n-1)]:r}function bg(e,n){return ga(dr(e),qn(n,0,e.length))}function mg(e){return ga(dr(e))}function Po(e,n,a){(a!==r&&!Hr(e[n],a)||a===r&&!(n in e))&&on(e,n,a)}function Ki(e,n,a){var u=e[n];(!(it.call(e,n)&&Hr(u,a))||a===r&&!(n in e))&&on(e,n,a)}function ra(e,n){for(var a=e.length;a--;)if(Hr(e[a][0],n))return a;return-1}function wg(e,n,a,u){return wn(e,function(_,I,F){n(u,_,a(_),F)}),u}function qu(e,n){return e&&Jr(n,Kt(n),e)}function Eg(e,n){return e&&Jr(n,gr(n),e)}function on(e,n,a){n=="__proto__"&&Js?Js(e,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[n]=a}function Ao(e,n){for(var a=-1,u=n.length,_=ee(u),I=e==null;++a<u;)_[a]=I?r:uc(e,n[a]);return _}function qn(e,n,a){return e===e&&(a!==r&&(e=e<=a?e:a),n!==r&&(e=e>=n?e:n)),e}function Tr(e,n,a,u,_,I){var F,$=n&j,V=n&G,ie=n&z;if(a&&(F=_?a(e,u,_,I):a(e)),F!==r)return F;if(!wt(e))return e;var ae=Ne(e);if(ae){if(F=f0(e),!$)return dr(e,F)}else{var ue=Zt(e),le=ue==fe||ue==pe;if(On(e))return lf(e,$);if(ue==Le||ue==he||le&&!_){if(F=V||le?{}:Tf(e),!$)return V?Qg(e,Eg(F,e)):Zg(e,qu(F,e))}else{if(!st[ue])return _?e:{};F=h0(e,ue,$)}}I||(I=new Br);var ve=I.get(e);if(ve)return ve;I.set(e,F),ah(e)?e.forEach(function(Ee){F.add(Tr(Ee,n,a,Ee,e,I))}):ih(e)&&e.forEach(function(Ee,Ge){F.set(Ge,Tr(Ee,n,a,Ge,e,I))});var we=ie?V?Yo:Wo:V?gr:Kt,qe=ae?r:we(e);return Pr(qe||e,function(Ee,Ge){qe&&(Ge=Ee,Ee=e[Ge]),Ki(F,Ge,Tr(Ee,n,a,Ge,e,I))}),F}function Dg(e){var n=Kt(e);return function(a){return Bu(a,e,n)}}function Bu(e,n,a){var u=a.length;if(e==null)return!u;for(e=ut(e);u--;){var _=a[u],I=n[_],F=e[_];if(F===r&&!(_ in e)||!I(F))return!1}return!0}function Hu(e,n,a){if(typeof e!="function")throw new Ar(w);return Xi(function(){e.apply(r,a)},n)}function Vi(e,n,a,u){var _=-1,I=Ms,F=!0,$=e.length,V=[],ie=n.length;if(!$)return V;a&&(n=bt(n,mr(a))),u?(I=go,F=!1):n.length>=o&&(I=$i,F=!1,n=new zn(n));e:for(;++_<$;){var ae=e[_],ue=a==null?ae:a(ae);if(ae=u||ae!==0?ae:0,F&&ue===ue){for(var le=ie;le--;)if(n[le]===ue)continue e;V.push(ae)}else I(n,ue,u)||V.push(ae)}return V}var wn=_f(Yr),Ku=_f(To,!0);function Sg(e,n){var a=!0;return wn(e,function(u,_,I){return a=!!n(u,_,I),a}),a}function na(e,n,a){for(var u=-1,_=e.length;++u<_;){var I=e[u],F=n(I);if(F!=null&&($===r?F===F&&!Er(F):a(F,$)))var $=F,V=I}return V}function Og(e,n,a,u){var _=e.length;for(a=$e(a),a<0&&(a=-a>_?0:_+a),u=u===r||u>_?_:$e(u),u<0&&(u+=_),u=a>u?0:ch(u);a<u;)e[a++]=n;return e}function Vu(e,n){var a=[];return wn(e,function(u,_,I){n(u,_,I)&&a.push(u)}),a}function Wt(e,n,a,u,_){var I=-1,F=e.length;for(a||(a=d0),_||(_=[]);++I<F;){var $=e[I];n>0&&a($)?n>1?Wt($,n-1,a,u,_):vn(_,$):u||(_[_.length]=$)}return _}var Co=vf(),ku=vf(!0);function Yr(e,n){return e&&Co(e,n,Kt)}function To(e,n){return e&&ku(e,n,Kt)}function ia(e,n){return _n(n,function(a){return hn(e[a])})}function Bn(e,n){n=Dn(n,e);for(var a=0,u=n.length;e!=null&&a<u;)e=e[Xr(n[a++])];return a&&a==u?e:r}function Gu(e,n,a){var u=n(e);return Ne(e)?u:vn(u,a(e))}function nr(e){return e==null?e===r?ze:Ve:$n&&$n in ut(e)?o0(e):m0(e)}function No(e,n){return e>n}function Ig(e,n){return e!=null&&it.call(e,n)}function xg(e,n){return e!=null&&n in ut(e)}function Pg(e,n,a){return e>=Xt(n,a)&&e<Bt(n,a)}function Ro(e,n,a){for(var u=a?go:Ms,_=e[0].length,I=e.length,F=I,$=ee(I),V=1/0,ie=[];F--;){var ae=e[F];F&&n&&(ae=bt(ae,mr(n))),V=Xt(ae.length,V),$[F]=!a&&(n||_>=120&&ae.length>=120)?new zn(F&&ae):r}ae=e[0];var ue=-1,le=$[0];e:for(;++ue<_&&ie.length<V;){var ve=ae[ue],we=n?n(ve):ve;if(ve=a||ve!==0?ve:0,!(le?$i(le,we):u(ie,we,a))){for(F=I;--F;){var qe=$[F];if(!(qe?$i(qe,we):u(e[F],we,a)))continue e}le&&le.push(we),ie.push(ve)}}return ie}function Ag(e,n,a,u){return Yr(e,function(_,I,F){n(u,a(_),I,F)}),u}function ki(e,n,a){n=Dn(n,e),e=Uf(e,n);var u=e==null?e:e[Xr(Rr(n))];return u==null?r:Ht(u,e,a)}function Wu(e){return Pt(e)&&nr(e)==he}function Cg(e){return Pt(e)&&nr(e)==Se}function Tg(e){return Pt(e)&&nr(e)==B}function Gi(e,n,a,u,_){return e===n?!0:e==null||n==null||!Pt(e)&&!Pt(n)?e!==e&&n!==n:Ng(e,n,a,u,Gi,_)}function Ng(e,n,a,u,_,I){var F=Ne(e),$=Ne(n),V=F?be:Zt(e),ie=$?be:Zt(n);V=V==he?Le:V,ie=ie==he?Le:ie;var ae=V==Le,ue=ie==Le,le=V==ie;if(le&&On(e)){if(!On(n))return!1;F=!0,ae=!1}if(le&&!ae)return I||(I=new Br),F||Ei(e)?Pf(e,n,a,u,_,I):s0(e,n,V,a,u,_,I);if(!(a&M)){var ve=ae&&it.call(e,"__wrapped__"),we=ue&&it.call(n,"__wrapped__");if(ve||we){var qe=ve?e.value():e,Ee=we?n.value():n;return I||(I=new Br),_(qe,Ee,a,u,I)}}return le?(I||(I=new Br),a0(e,n,a,u,_,I)):!1}function Rg(e){return Pt(e)&&Zt(e)==Oe}function Fo(e,n,a,u){var _=a.length,I=_,F=!u;if(e==null)return!I;for(e=ut(e);_--;){var $=a[_];if(F&&$[2]?$[1]!==e[$[0]]:!($[0]in e))return!1}for(;++_<I;){$=a[_];var V=$[0],ie=e[V],ae=$[1];if(F&&$[2]){if(ie===r&&!(V in e))return!1}else{var ue=new Br;if(u)var le=u(ie,ae,V,e,n,ue);if(!(le===r?Gi(ae,ie,M|J,u,ue):le))return!1}}return!0}function Yu(e){if(!wt(e)||g0(e))return!1;var n=hn(e)?Rp:Za;return n.test(Kn(e))}function Fg(e){return Pt(e)&&nr(e)==Me}function Ug(e){return Pt(e)&&Zt(e)==Ie}function jg(e){return Pt(e)&&wa(e.length)&&!!at[nr(e)]}function Ju(e){return typeof e=="function"?e:e==null?yr:typeof e=="object"?Ne(e)?Qu(e[0],e[1]):Zu(e):bh(e)}function Uo(e){if(!Ji(e))return Mp(e);var n=[];for(var a in ut(e))it.call(e,a)&&a!="constructor"&&n.push(a);return n}function Lg(e){if(!wt(e))return b0(e);var n=Ji(e),a=[];for(var u in e)u=="constructor"&&(n||!it.call(e,u))||a.push(u);return a}function jo(e,n){return e<n}function Xu(e,n){var a=-1,u=pr(e)?ee(e.length):[];return wn(e,function(_,I,F){u[++a]=n(_,I,F)}),u}function Zu(e){var n=Xo(e);return n.length==1&&n[0][2]?Rf(n[0][0],n[0][1]):function(a){return a===e||Fo(a,e,n)}}function Qu(e,n){return Qo(e)&&Nf(n)?Rf(Xr(e),n):function(a){var u=uc(a,e);return u===r&&u===n?fc(a,e):Gi(n,u,M|J)}}function sa(e,n,a,u,_){e!==n&&Co(n,function(I,F){if(_||(_=new Br),wt(I))$g(e,n,F,a,sa,u,_);else{var $=u?u(tc(e,F),I,F+"",e,n,_):r;$===r&&($=I),Po(e,F,$)}},gr)}function $g(e,n,a,u,_,I,F){var $=tc(e,a),V=tc(n,a),ie=F.get(V);if(ie){Po(e,a,ie);return}var ae=I?I($,V,a+"",e,n,F):r,ue=ae===r;if(ue){var le=Ne(V),ve=!le&&On(V),we=!le&&!ve&&Ei(V);ae=V,le||ve||we?Ne($)?ae=$:Tt($)?ae=dr($):ve?(ue=!1,ae=lf(V,!0)):we?(ue=!1,ae=df(V,!0)):ae=[]:Zi(V)||Vn(V)?(ae=$,Vn($)?ae=uh($):(!wt($)||hn($))&&(ae=Tf(V))):ue=!1}ue&&(F.set(V,ae),_(ae,V,u,I,F),F.delete(V)),Po(e,a,ae)}function ef(e,n){var a=e.length;if(a)return n+=n<0?a:0,fn(n,a)?e[n]:r}function tf(e,n,a){n.length?n=bt(n,function(I){return Ne(I)?function(F){return Bn(F,I.length===1?I[0]:I)}:I}):n=[yr];var u=-1;n=bt(n,mr(me()));var _=Xu(e,function(I,F,$){var V=bt(n,function(ie){return ie(I)});return{criteria:V,index:++u,value:I}});return hp(_,function(I,F){return Xg(I,F,a)})}function Mg(e,n){return rf(e,n,function(a,u){return fc(e,u)})}function rf(e,n,a){for(var u=-1,_=n.length,I={};++u<_;){var F=n[u],$=Bn(e,F);a($,F)&&Wi(I,Dn(F,e),$)}return I}function zg(e){return function(n){return Bn(n,e)}}function Lo(e,n,a,u){var _=u?fp:hi,I=-1,F=n.length,$=e;for(e===n&&(n=dr(n)),a&&($=bt(e,mr(a)));++I<F;)for(var V=0,ie=n[I],ae=a?a(ie):ie;(V=_($,ae,V,u))>-1;)$!==e&&Ys.call($,V,1),Ys.call(e,V,1);return e}function nf(e,n){for(var a=e?n.length:0,u=a-1;a--;){var _=n[a];if(a==u||_!==I){var I=_;fn(_)?Ys.call(e,_,1):qo(e,_)}}return e}function $o(e,n){return e+Zs(Lu()*(n-e+1))}function qg(e,n,a,u){for(var _=-1,I=Bt(Xs((n-e)/(a||1)),0),F=ee(I);I--;)F[u?I:++_]=e,e+=a;return F}function Mo(e,n){var a="";if(!e||n<1||n>Q)return a;do n%2&&(a+=e),n=Zs(n/2),n&&(e+=e);while(n);return a}function Ke(e,n){return rc(Ff(e,n,yr),e+"")}function Bg(e){return zu(Di(e))}function Hg(e,n){var a=Di(e);return ga(a,qn(n,0,a.length))}function Wi(e,n,a,u){if(!wt(e))return e;n=Dn(n,e);for(var _=-1,I=n.length,F=I-1,$=e;$!=null&&++_<I;){var V=Xr(n[_]),ie=a;if(V==="__proto__"||V==="constructor"||V==="prototype")return e;if(_!=F){var ae=$[V];ie=u?u(ae,V,$):r,ie===r&&(ie=wt(ae)?ae:fn(n[_+1])?[]:{})}Ki($,V,ie),$=$[V]}return e}var sf=Qs?function(e,n){return Qs.set(e,n),e}:yr,Kg=Js?function(e,n){return Js(e,"toString",{configurable:!0,enumerable:!1,value:lc(n),writable:!0})}:yr;function Vg(e){return ga(Di(e))}function Nr(e,n,a){var u=-1,_=e.length;n<0&&(n=-n>_?0:_+n),a=a>_?_:a,a<0&&(a+=_),_=n>a?0:a-n>>>0,n>>>=0;for(var I=ee(_);++u<_;)I[u]=e[u+n];return I}function kg(e,n){var a;return wn(e,function(u,_,I){return a=n(u,_,I),!a}),!!a}function aa(e,n,a){var u=0,_=e==null?u:e.length;if(typeof n=="number"&&n===n&&_<=ne){for(;u<_;){var I=u+_>>>1,F=e[I];F!==null&&!Er(F)&&(a?F<=n:F<n)?u=I+1:_=I}return _}return zo(e,n,yr,a)}function zo(e,n,a,u){var _=0,I=e==null?0:e.length;if(I===0)return 0;n=a(n);for(var F=n!==n,$=n===null,V=Er(n),ie=n===r;_<I;){var ae=Zs((_+I)/2),ue=a(e[ae]),le=ue!==r,ve=ue===null,we=ue===ue,qe=Er(ue);if(F)var Ee=u||we;else ie?Ee=we&&(u||le):$?Ee=we&&le&&(u||!ve):V?Ee=we&&le&&!ve&&(u||!qe):ve||qe?Ee=!1:Ee=u?ue<=n:ue<n;Ee?_=ae+1:I=ae}return Xt(I,se)}function af(e,n){for(var a=-1,u=e.length,_=0,I=[];++a<u;){var F=e[a],$=n?n(F):F;if(!a||!Hr($,V)){var V=$;I[_++]=F===0?0:F}}return I}function of(e){return typeof e=="number"?e:Er(e)?k:+e}function wr(e){if(typeof e=="string")return e;if(Ne(e))return bt(e,wr)+"";if(Er(e))return $u?$u.call(e):"";var n=e+"";return n=="0"&&1/e==-q?"-0":n}function En(e,n,a){var u=-1,_=Ms,I=e.length,F=!0,$=[],V=$;if(a)F=!1,_=go;else if(I>=o){var ie=n?null:n0(e);if(ie)return qs(ie);F=!1,_=$i,V=new zn}else V=n?[]:$;e:for(;++u<I;){var ae=e[u],ue=n?n(ae):ae;if(ae=a||ae!==0?ae:0,F&&ue===ue){for(var le=V.length;le--;)if(V[le]===ue)continue e;n&&V.push(ue),$.push(ae)}else _(V,ue,a)||(V!==$&&V.push(ue),$.push(ae))}return $}function qo(e,n){return n=Dn(n,e),e=Uf(e,n),e==null||delete e[Xr(Rr(n))]}function cf(e,n,a,u){return Wi(e,n,a(Bn(e,n)),u)}function oa(e,n,a,u){for(var _=e.length,I=u?_:-1;(u?I--:++I<_)&&n(e[I],I,e););return a?Nr(e,u?0:I,u?I+1:_):Nr(e,u?I+1:0,u?_:I)}function uf(e,n){var a=e;return a instanceof Ye&&(a=a.value()),yo(n,function(u,_){return _.func.apply(_.thisArg,vn([u],_.args))},a)}function Bo(e,n,a){var u=e.length;if(u<2)return u?En(e[0]):[];for(var _=-1,I=ee(u);++_<u;)for(var F=e[_],$=-1;++$<u;)$!=_&&(I[_]=Vi(I[_]||F,e[$],n,a));return En(Wt(I,1),n,a)}function ff(e,n,a){for(var u=-1,_=e.length,I=n.length,F={};++u<_;){var $=u<I?n[u]:r;a(F,e[u],$)}return F}function Ho(e){return Tt(e)?e:[]}function Ko(e){return typeof e=="function"?e:yr}function Dn(e,n){return Ne(e)?e:Qo(e,n)?[e]:Mf(nt(e))}var Gg=Ke;function Sn(e,n,a){var u=e.length;return a=a===r?u:a,!n&&a>=u?e:Nr(e,n,a)}var hf=Fp||function(e){return Xe.clearTimeout(e)};function lf(e,n){if(n)return e.slice();var a=e.length,u=Nu?Nu(a):new e.constructor(a);return e.copy(u),u}function Vo(e){var n=new e.constructor(e.byteLength);return new Gs(n).set(new Gs(e)),n}function Wg(e,n){var a=n?Vo(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}function Yg(e){var n=new e.constructor(e.source,Ir.exec(e));return n.lastIndex=e.lastIndex,n}function Jg(e){return Hi?ut(Hi.call(e)):{}}function df(e,n){var a=n?Vo(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}function pf(e,n){if(e!==n){var a=e!==r,u=e===null,_=e===e,I=Er(e),F=n!==r,$=n===null,V=n===n,ie=Er(n);if(!$&&!ie&&!I&&e>n||I&&F&&V&&!$&&!ie||u&&F&&V||!a&&V||!_)return 1;if(!u&&!I&&!ie&&e<n||ie&&a&&_&&!u&&!I||$&&a&&_||!F&&_||!V)return-1}return 0}function Xg(e,n,a){for(var u=-1,_=e.criteria,I=n.criteria,F=_.length,$=a.length;++u<F;){var V=pf(_[u],I[u]);if(V){if(u>=$)return V;var ie=a[u];return V*(ie=="desc"?-1:1)}}return e.index-n.index}function gf(e,n,a,u){for(var _=-1,I=e.length,F=a.length,$=-1,V=n.length,ie=Bt(I-F,0),ae=ee(V+ie),ue=!u;++$<V;)ae[$]=n[$];for(;++_<F;)(ue||_<I)&&(ae[a[_]]=e[_]);for(;ie--;)ae[$++]=e[_++];return ae}function yf(e,n,a,u){for(var _=-1,I=e.length,F=-1,$=a.length,V=-1,ie=n.length,ae=Bt(I-$,0),ue=ee(ae+ie),le=!u;++_<ae;)ue[_]=e[_];for(var ve=_;++V<ie;)ue[ve+V]=n[V];for(;++F<$;)(le||_<I)&&(ue[ve+a[F]]=e[_++]);return ue}function dr(e,n){var a=-1,u=e.length;for(n||(n=ee(u));++a<u;)n[a]=e[a];return n}function Jr(e,n,a,u){var _=!a;a||(a={});for(var I=-1,F=n.length;++I<F;){var $=n[I],V=u?u(a[$],e[$],$,a,e):r;V===r&&(V=e[$]),_?on(a,$,V):Ki(a,$,V)}return a}function Zg(e,n){return Jr(e,Zo(e),n)}function Qg(e,n){return Jr(e,Af(e),n)}function ca(e,n){return function(a,u){var _=Ne(a)?ip:wg,I=n?n():{};return _(a,e,me(u,2),I)}}function bi(e){return Ke(function(n,a){var u=-1,_=a.length,I=_>1?a[_-1]:r,F=_>2?a[2]:r;for(I=e.length>3&&typeof I=="function"?(_--,I):r,F&&ir(a[0],a[1],F)&&(I=_<3?r:I,_=1),n=ut(n);++u<_;){var $=a[u];$&&e(n,$,u,I)}return n})}function _f(e,n){return function(a,u){if(a==null)return a;if(!pr(a))return e(a,u);for(var _=a.length,I=n?_:-1,F=ut(a);(n?I--:++I<_)&&u(F[I],I,F)!==!1;);return a}}function vf(e){return function(n,a,u){for(var _=-1,I=ut(n),F=u(n),$=F.length;$--;){var V=F[e?$:++_];if(a(I[V],V,I)===!1)break}return n}}function e0(e,n,a){var u=n&W,_=Yi(e);function I(){var F=this&&this!==Xe&&this instanceof I?_:e;return F.apply(u?a:this,arguments)}return I}function bf(e){return function(n){n=nt(n);var a=li(n)?qr(n):r,u=a?a[0]:n.charAt(0),_=a?Sn(a,1).join(""):n.slice(1);return u[e]()+_}}function mi(e){return function(n){return yo(_h(yh(n).replace(ji,"")),e,"")}}function Yi(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var a=vi(e.prototype),u=e.apply(a,n);return wt(u)?u:a}}function t0(e,n,a){var u=Yi(e);function _(){for(var I=arguments.length,F=ee(I),$=I,V=wi(_);$--;)F[$]=arguments[$];var ie=I<3&&F[0]!==V&&F[I-1]!==V?[]:bn(F,V);if(I-=ie.length,I<a)return Sf(e,n,ua,_.placeholder,r,F,ie,r,r,a-I);var ae=this&&this!==Xe&&this instanceof _?u:e;return Ht(ae,this,F)}return _}function mf(e){return function(n,a,u){var _=ut(n);if(!pr(n)){var I=me(a,3);n=Kt(n),a=function($){return I(_[$],$,_)}}var F=e(n,a,u);return F>-1?_[I?n[F]:F]:r}}function wf(e){return un(function(n){var a=n.length,u=a,_=Cr.prototype.thru;for(e&&n.reverse();u--;){var I=n[u];if(typeof I!="function")throw new Ar(w);if(_&&!F&&da(I)=="wrapper")var F=new Cr([],!0)}for(u=F?u:a;++u<a;){I=n[u];var $=da(I),V=$=="wrapper"?Jo(I):r;V&&ec(V[0])&&V[1]==(c|A|x|d)&&!V[4].length&&V[9]==1?F=F[da(V[0])].apply(F,V[3]):F=I.length==1&&ec(I)?F[$]():F.thru(I)}return function(){var ie=arguments,ae=ie[0];if(F&&ie.length==1&&Ne(ae))return F.plant(ae).value();for(var ue=0,le=a?n[ue].apply(this,ie):ae;++ue<a;)le=n[ue].call(this,le);return le}})}function ua(e,n,a,u,_,I,F,$,V,ie){var ae=n&c,ue=n&W,le=n&oe,ve=n&(A|S),we=n&Z,qe=le?r:Yi(e);function Ee(){for(var Ge=arguments.length,Ze=ee(Ge),Dr=Ge;Dr--;)Ze[Dr]=arguments[Dr];if(ve)var sr=wi(Ee),Sr=dp(Ze,sr);if(u&&(Ze=gf(Ze,u,_,ve)),I&&(Ze=yf(Ze,I,F,ve)),Ge-=Sr,ve&&Ge<ie){var Nt=bn(Ze,sr);return Sf(e,n,ua,Ee.placeholder,a,Ze,Nt,$,V,ie-Ge)}var Kr=ue?a:this,dn=le?Kr[e]:e;return Ge=Ze.length,$?Ze=w0(Ze,$):we&&Ge>1&&Ze.reverse(),ae&&V<Ge&&(Ze.length=V),this&&this!==Xe&&this instanceof Ee&&(dn=qe||Yi(dn)),dn.apply(Kr,Ze)}return Ee}function Ef(e,n){return function(a,u){return Ag(a,e,n(u),{})}}function fa(e,n){return function(a,u){var _;if(a===r&&u===r)return n;if(a!==r&&(_=a),u!==r){if(_===r)return u;typeof a=="string"||typeof u=="string"?(a=wr(a),u=wr(u)):(a=of(a),u=of(u)),_=e(a,u)}return _}}function ko(e){return un(function(n){return n=bt(n,mr(me())),Ke(function(a){var u=this;return e(n,function(_){return Ht(_,u,a)})})})}function ha(e,n){n=n===r?" ":wr(n);var a=n.length;if(a<2)return a?Mo(n,e):n;var u=Mo(n,Xs(e/di(n)));return li(n)?Sn(qr(u),0,e).join(""):u.slice(0,e)}function r0(e,n,a,u){var _=n&W,I=Yi(e);function F(){for(var $=-1,V=arguments.length,ie=-1,ae=u.length,ue=ee(ae+V),le=this&&this!==Xe&&this instanceof F?I:e;++ie<ae;)ue[ie]=u[ie];for(;V--;)ue[ie++]=arguments[++$];return Ht(le,_?a:this,ue)}return F}function Df(e){return function(n,a,u){return u&&typeof u!="number"&&ir(n,a,u)&&(a=u=r),n=ln(n),a===r?(a=n,n=0):a=ln(a),u=u===r?n<a?1:-1:ln(u),qg(n,a,u,e)}}function la(e){return function(n,a){return typeof n=="string"&&typeof a=="string"||(n=Fr(n),a=Fr(a)),e(n,a)}}function Sf(e,n,a,u,_,I,F,$,V,ie){var ae=n&A,ue=ae?F:r,le=ae?r:F,ve=ae?I:r,we=ae?r:I;n|=ae?x:m,n&=~(ae?m:x),n&O||(n&=~(W|oe));var qe=[e,n,_,ve,ue,we,le,$,V,ie],Ee=a.apply(r,qe);return ec(e)&&jf(Ee,qe),Ee.placeholder=u,Lf(Ee,e,n)}function Go(e){var n=qt[e];return function(a,u){if(a=Fr(a),u=u==null?0:Xt($e(u),292),u&&ju(a)){var _=(nt(a)+"e").split("e"),I=n(_[0]+"e"+(+_[1]+u));return _=(nt(I)+"e").split("e"),+(_[0]+"e"+(+_[1]-u))}return n(a)}}var n0=yi&&1/qs(new yi([,-0]))[1]==q?function(e){return new yi(e)}:gc;function Of(e){return function(n){var a=Zt(n);return a==Oe?Do(n):a==Ie?mp(n):lp(n,e(n))}}function cn(e,n,a,u,_,I,F,$){var V=n&oe;if(!V&&typeof e!="function")throw new Ar(w);var ie=u?u.length:0;if(ie||(n&=~(x|m),u=_=r),F=F===r?F:Bt($e(F),0),$=$===r?$:$e($),ie-=_?_.length:0,n&m){var ae=u,ue=_;u=_=r}var le=V?r:Jo(e),ve=[e,n,a,u,_,ae,ue,I,F,$];if(le&&v0(ve,le),e=ve[0],n=ve[1],a=ve[2],u=ve[3],_=ve[4],$=ve[9]=ve[9]===r?V?0:e.length:Bt(ve[9]-ie,0),!$&&n&(A|S)&&(n&=~(A|S)),!n||n==W)var we=e0(e,n,a);else n==A||n==S?we=t0(e,n,$):(n==x||n==(W|x))&&!_.length?we=r0(e,n,a,u):we=ua.apply(r,ve);var qe=le?sf:jf;return Lf(qe(we,ve),e,n)}function If(e,n,a,u){return e===r||Hr(e,gi[a])&&!it.call(u,a)?n:e}function xf(e,n,a,u,_,I){return wt(e)&&wt(n)&&(I.set(n,e),sa(e,n,r,xf,I),I.delete(n)),e}function i0(e){return Zi(e)?r:e}function Pf(e,n,a,u,_,I){var F=a&M,$=e.length,V=n.length;if($!=V&&!(F&&V>$))return!1;var ie=I.get(e),ae=I.get(n);if(ie&&ae)return ie==n&&ae==e;var ue=-1,le=!0,ve=a&J?new zn:r;for(I.set(e,n),I.set(n,e);++ue<$;){var we=e[ue],qe=n[ue];if(u)var Ee=F?u(qe,we,ue,n,e,I):u(we,qe,ue,e,n,I);if(Ee!==r){if(Ee)continue;le=!1;break}if(ve){if(!_o(n,function(Ge,Ze){if(!$i(ve,Ze)&&(we===Ge||_(we,Ge,a,u,I)))return ve.push(Ze)})){le=!1;break}}else if(!(we===qe||_(we,qe,a,u,I))){le=!1;break}}return I.delete(e),I.delete(n),le}function s0(e,n,a,u,_,I,F){switch(a){case Ae:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case Se:return!(e.byteLength!=n.byteLength||!I(new Gs(e),new Gs(n)));case Y:case B:case Be:return Hr(+e,+n);case U:return e.name==n.name&&e.message==n.message;case Me:case Re:return e==n+"";case Oe:var $=Do;case Ie:var V=u&M;if($||($=qs),e.size!=n.size&&!V)return!1;var ie=F.get(e);if(ie)return ie==n;u|=J,F.set(e,n);var ae=Pf($(e),$(n),u,_,I,F);return F.delete(e),ae;case Fe:if(Hi)return Hi.call(e)==Hi.call(n)}return!1}function a0(e,n,a,u,_,I){var F=a&M,$=Wo(e),V=$.length,ie=Wo(n),ae=ie.length;if(V!=ae&&!F)return!1;for(var ue=V;ue--;){var le=$[ue];if(!(F?le in n:it.call(n,le)))return!1}var ve=I.get(e),we=I.get(n);if(ve&&we)return ve==n&&we==e;var qe=!0;I.set(e,n),I.set(n,e);for(var Ee=F;++ue<V;){le=$[ue];var Ge=e[le],Ze=n[le];if(u)var Dr=F?u(Ze,Ge,le,n,e,I):u(Ge,Ze,le,e,n,I);if(!(Dr===r?Ge===Ze||_(Ge,Ze,a,u,I):Dr)){qe=!1;break}Ee||(Ee=le=="constructor")}if(qe&&!Ee){var sr=e.constructor,Sr=n.constructor;sr!=Sr&&"constructor"in e&&"constructor"in n&&!(typeof sr=="function"&&sr instanceof sr&&typeof Sr=="function"&&Sr instanceof Sr)&&(qe=!1)}return I.delete(e),I.delete(n),qe}function un(e){return rc(Ff(e,r,Hf),e+"")}function Wo(e){return Gu(e,Kt,Zo)}function Yo(e){return Gu(e,gr,Af)}var Jo=Qs?function(e){return Qs.get(e)}:gc;function da(e){for(var n=e.name+"",a=_i[n],u=it.call(_i,n)?a.length:0;u--;){var _=a[u],I=_.func;if(I==null||I==e)return _.name}return n}function wi(e){var n=it.call(D,"placeholder")?D:e;return n.placeholder}function me(){var e=D.iteratee||dc;return e=e===dc?Ju:e,arguments.length?e(arguments[0],arguments[1]):e}function pa(e,n){var a=e.__data__;return p0(n)?a[typeof n=="string"?"string":"hash"]:a.map}function Xo(e){for(var n=Kt(e),a=n.length;a--;){var u=n[a],_=e[u];n[a]=[u,_,Nf(_)]}return n}function Hn(e,n){var a=_p(e,n);return Yu(a)?a:r}function o0(e){var n=it.call(e,$n),a=e[$n];try{e[$n]=r;var u=!0}catch{}var _=Vs.call(e);return u&&(n?e[$n]=a:delete e[$n]),_}var Zo=Oo?function(e){return e==null?[]:(e=ut(e),_n(Oo(e),function(n){return Fu.call(e,n)}))}:yc,Af=Oo?function(e){for(var n=[];e;)vn(n,Zo(e)),e=Ws(e);return n}:yc,Zt=nr;(Io&&Zt(new Io(new ArrayBuffer(1)))!=Ae||zi&&Zt(new zi)!=Oe||xo&&Zt(xo.resolve())!=gt||yi&&Zt(new yi)!=Ie||qi&&Zt(new qi)!=Pe)&&(Zt=function(e){var n=nr(e),a=n==Le?e.constructor:r,u=a?Kn(a):"";if(u)switch(u){case Hp:return Ae;case Kp:return Oe;case Vp:return gt;case kp:return Ie;case Gp:return Pe}return n});function c0(e,n,a){for(var u=-1,_=a.length;++u<_;){var I=a[u],F=I.size;switch(I.type){case"drop":e+=F;break;case"dropRight":n-=F;break;case"take":n=Xt(n,e+F);break;case"takeRight":e=Bt(e,n-F);break}}return{start:e,end:n}}function u0(e){var n=e.match(ft);return n?n[1].split(jt):[]}function Cf(e,n,a){n=Dn(n,e);for(var u=-1,_=n.length,I=!1;++u<_;){var F=Xr(n[u]);if(!(I=e!=null&&a(e,F)))break;e=e[F]}return I||++u!=_?I:(_=e==null?0:e.length,!!_&&wa(_)&&fn(F,_)&&(Ne(e)||Vn(e)))}function f0(e){var n=e.length,a=new e.constructor(n);return n&&typeof e[0]=="string"&&it.call(e,"index")&&(a.index=e.index,a.input=e.input),a}function Tf(e){return typeof e.constructor=="function"&&!Ji(e)?vi(Ws(e)):{}}function h0(e,n,a){var u=e.constructor;switch(n){case Se:return Vo(e);case Y:case B:return new u(+e);case Ae:return Wg(e,a);case He:case xe:case ke:case We:case et:case tt:case Je:case er:case hr:return df(e,a);case Oe:return new u;case Be:case Re:return new u(e);case Me:return Yg(e);case Ie:return new u;case Fe:return Jg(e)}}function l0(e,n){var a=n.length;if(!a)return e;var u=a-1;return n[u]=(a>1?"& ":"")+n[u],n=n.join(a>2?", ":" "),e.replace(xt,`{
/* [wrapped with `+n+`] */
`)}function d0(e){return Ne(e)||Vn(e)||!!(Uu&&e&&e[Uu])}function fn(e,n){var a=typeof e;return n=n??Q,!!n&&(a=="number"||a!="symbol"&&eo.test(e))&&e>-1&&e%1==0&&e<n}function ir(e,n,a){if(!wt(a))return!1;var u=typeof n;return(u=="number"?pr(a)&&fn(n,a.length):u=="string"&&n in a)?Hr(a[n],e):!1}function Qo(e,n){if(Ne(e))return!1;var a=typeof e;return a=="number"||a=="symbol"||a=="boolean"||e==null||Er(e)?!0:Rt.test(e)||!vt.test(e)||n!=null&&e in ut(n)}function p0(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}function ec(e){var n=da(e),a=D[n];if(typeof a!="function"||!(n in Ye.prototype))return!1;if(e===a)return!0;var u=Jo(a);return!!u&&e===u[0]}function g0(e){return!!Tu&&Tu in e}var y0=Hs?hn:_c;function Ji(e){var n=e&&e.constructor,a=typeof n=="function"&&n.prototype||gi;return e===a}function Nf(e){return e===e&&!wt(e)}function Rf(e,n){return function(a){return a==null?!1:a[e]===n&&(n!==r||e in ut(a))}}function _0(e){var n=ba(e,function(u){return a.size===N&&a.clear(),u}),a=n.cache;return n}function v0(e,n){var a=e[1],u=n[1],_=a|u,I=_<(W|oe|c),F=u==c&&a==A||u==c&&a==d&&e[7].length<=n[8]||u==(c|d)&&n[7].length<=n[8]&&a==A;if(!(I||F))return e;u&W&&(e[2]=n[2],_|=a&W?0:O);var $=n[3];if($){var V=e[3];e[3]=V?gf(V,$,n[4]):$,e[4]=V?bn(e[3],T):n[4]}return $=n[5],$&&(V=e[5],e[5]=V?yf(V,$,n[6]):$,e[6]=V?bn(e[5],T):n[6]),$=n[7],$&&(e[7]=$),u&c&&(e[8]=e[8]==null?n[8]:Xt(e[8],n[8])),e[9]==null&&(e[9]=n[9]),e[0]=n[0],e[1]=_,e}function b0(e){var n=[];if(e!=null)for(var a in ut(e))n.push(a);return n}function m0(e){return Vs.call(e)}function Ff(e,n,a){return n=Bt(n===r?e.length-1:n,0),function(){for(var u=arguments,_=-1,I=Bt(u.length-n,0),F=ee(I);++_<I;)F[_]=u[n+_];_=-1;for(var $=ee(n+1);++_<n;)$[_]=u[_];return $[n]=a(F),Ht(e,this,$)}}function Uf(e,n){return n.length<2?e:Bn(e,Nr(n,0,-1))}function w0(e,n){for(var a=e.length,u=Xt(n.length,a),_=dr(e);u--;){var I=n[u];e[u]=fn(I,a)?_[I]:r}return e}function tc(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}var jf=$f(sf),Xi=jp||function(e,n){return Xe.setTimeout(e,n)},rc=$f(Kg);function Lf(e,n,a){var u=n+"";return rc(e,l0(u,E0(u0(u),a)))}function $f(e){var n=0,a=0;return function(){var u=zp(),_=P-(u-a);if(a=u,_>0){if(++n>=v)return arguments[0]}else n=0;return e.apply(r,arguments)}}function ga(e,n){var a=-1,u=e.length,_=u-1;for(n=n===r?u:n;++a<n;){var I=$o(a,_),F=e[I];e[I]=e[a],e[a]=F}return e.length=n,e}var Mf=_0(function(e){var n=[];return e.charCodeAt(0)===46&&n.push(""),e.replace(Ft,function(a,u,_,I){n.push(_?I.replace(Wa,"$1"):u||a)}),n});function Xr(e){if(typeof e=="string"||Er(e))return e;var n=e+"";return n=="0"&&1/e==-q?"-0":n}function Kn(e){if(e!=null){try{return Ks.call(e)}catch{}try{return e+""}catch{}}return""}function E0(e,n){return Pr(_e,function(a){var u="_."+a[0];n&a[1]&&!Ms(e,u)&&e.push(u)}),e.sort()}function zf(e){if(e instanceof Ye)return e.clone();var n=new Cr(e.__wrapped__,e.__chain__);return n.__actions__=dr(e.__actions__),n.__index__=e.__index__,n.__values__=e.__values__,n}function D0(e,n,a){(a?ir(e,n,a):n===r)?n=1:n=Bt($e(n),0);var u=e==null?0:e.length;if(!u||n<1)return[];for(var _=0,I=0,F=ee(Xs(u/n));_<u;)F[I++]=Nr(e,_,_+=n);return F}function S0(e){for(var n=-1,a=e==null?0:e.length,u=0,_=[];++n<a;){var I=e[n];I&&(_[u++]=I)}return _}function O0(){var e=arguments.length;if(!e)return[];for(var n=ee(e-1),a=arguments[0],u=e;u--;)n[u-1]=arguments[u];return vn(Ne(a)?dr(a):[a],Wt(n,1))}var I0=Ke(function(e,n){return Tt(e)?Vi(e,Wt(n,1,Tt,!0)):[]}),x0=Ke(function(e,n){var a=Rr(n);return Tt(a)&&(a=r),Tt(e)?Vi(e,Wt(n,1,Tt,!0),me(a,2)):[]}),P0=Ke(function(e,n){var a=Rr(n);return Tt(a)&&(a=r),Tt(e)?Vi(e,Wt(n,1,Tt,!0),r,a):[]});function A0(e,n,a){var u=e==null?0:e.length;return u?(n=a||n===r?1:$e(n),Nr(e,n<0?0:n,u)):[]}function C0(e,n,a){var u=e==null?0:e.length;return u?(n=a||n===r?1:$e(n),n=u-n,Nr(e,0,n<0?0:n)):[]}function T0(e,n){return e&&e.length?oa(e,me(n,3),!0,!0):[]}function N0(e,n){return e&&e.length?oa(e,me(n,3),!0):[]}function R0(e,n,a,u){var _=e==null?0:e.length;return _?(a&&typeof a!="number"&&ir(e,n,a)&&(a=0,u=_),Og(e,n,a,u)):[]}function qf(e,n,a){var u=e==null?0:e.length;if(!u)return-1;var _=a==null?0:$e(a);return _<0&&(_=Bt(u+_,0)),zs(e,me(n,3),_)}function Bf(e,n,a){var u=e==null?0:e.length;if(!u)return-1;var _=u-1;return a!==r&&(_=$e(a),_=a<0?Bt(u+_,0):Xt(_,u-1)),zs(e,me(n,3),_,!0)}function Hf(e){var n=e==null?0:e.length;return n?Wt(e,1):[]}function F0(e){var n=e==null?0:e.length;return n?Wt(e,q):[]}function U0(e,n){var a=e==null?0:e.length;return a?(n=n===r?1:$e(n),Wt(e,n)):[]}function j0(e){for(var n=-1,a=e==null?0:e.length,u={};++n<a;){var _=e[n];u[_[0]]=_[1]}return u}function Kf(e){return e&&e.length?e[0]:r}function L0(e,n,a){var u=e==null?0:e.length;if(!u)return-1;var _=a==null?0:$e(a);return _<0&&(_=Bt(u+_,0)),hi(e,n,_)}function $0(e){var n=e==null?0:e.length;return n?Nr(e,0,-1):[]}var M0=Ke(function(e){var n=bt(e,Ho);return n.length&&n[0]===e[0]?Ro(n):[]}),z0=Ke(function(e){var n=Rr(e),a=bt(e,Ho);return n===Rr(a)?n=r:a.pop(),a.length&&a[0]===e[0]?Ro(a,me(n,2)):[]}),q0=Ke(function(e){var n=Rr(e),a=bt(e,Ho);return n=typeof n=="function"?n:r,n&&a.pop(),a.length&&a[0]===e[0]?Ro(a,r,n):[]});function B0(e,n){return e==null?"":$p.call(e,n)}function Rr(e){var n=e==null?0:e.length;return n?e[n-1]:r}function H0(e,n,a){var u=e==null?0:e.length;if(!u)return-1;var _=u;return a!==r&&(_=$e(a),_=_<0?Bt(u+_,0):Xt(_,u-1)),n===n?Ep(e,n,_):zs(e,Du,_,!0)}function K0(e,n){return e&&e.length?ef(e,$e(n)):r}var V0=Ke(Vf);function Vf(e,n){return e&&e.length&&n&&n.length?Lo(e,n):e}function k0(e,n,a){return e&&e.length&&n&&n.length?Lo(e,n,me(a,2)):e}function G0(e,n,a){return e&&e.length&&n&&n.length?Lo(e,n,r,a):e}var W0=un(function(e,n){var a=e==null?0:e.length,u=Ao(e,n);return nf(e,bt(n,function(_){return fn(_,a)?+_:_}).sort(pf)),u});function Y0(e,n){var a=[];if(!(e&&e.length))return a;var u=-1,_=[],I=e.length;for(n=me(n,3);++u<I;){var F=e[u];n(F,u,e)&&(a.push(F),_.push(u))}return nf(e,_),a}function nc(e){return e==null?e:Bp.call(e)}function J0(e,n,a){var u=e==null?0:e.length;return u?(a&&typeof a!="number"&&ir(e,n,a)?(n=0,a=u):(n=n==null?0:$e(n),a=a===r?u:$e(a)),Nr(e,n,a)):[]}function X0(e,n){return aa(e,n)}function Z0(e,n,a){return zo(e,n,me(a,2))}function Q0(e,n){var a=e==null?0:e.length;if(a){var u=aa(e,n);if(u<a&&Hr(e[u],n))return u}return-1}function e1(e,n){return aa(e,n,!0)}function t1(e,n,a){return zo(e,n,me(a,2),!0)}function r1(e,n){var a=e==null?0:e.length;if(a){var u=aa(e,n,!0)-1;if(Hr(e[u],n))return u}return-1}function n1(e){return e&&e.length?af(e):[]}function i1(e,n){return e&&e.length?af(e,me(n,2)):[]}function s1(e){var n=e==null?0:e.length;return n?Nr(e,1,n):[]}function a1(e,n,a){return e&&e.length?(n=a||n===r?1:$e(n),Nr(e,0,n<0?0:n)):[]}function o1(e,n,a){var u=e==null?0:e.length;return u?(n=a||n===r?1:$e(n),n=u-n,Nr(e,n<0?0:n,u)):[]}function c1(e,n){return e&&e.length?oa(e,me(n,3),!1,!0):[]}function u1(e,n){return e&&e.length?oa(e,me(n,3)):[]}var f1=Ke(function(e){return En(Wt(e,1,Tt,!0))}),h1=Ke(function(e){var n=Rr(e);return Tt(n)&&(n=r),En(Wt(e,1,Tt,!0),me(n,2))}),l1=Ke(function(e){var n=Rr(e);return n=typeof n=="function"?n:r,En(Wt(e,1,Tt,!0),r,n)});function d1(e){return e&&e.length?En(e):[]}function p1(e,n){return e&&e.length?En(e,me(n,2)):[]}function g1(e,n){return n=typeof n=="function"?n:r,e&&e.length?En(e,r,n):[]}function ic(e){if(!(e&&e.length))return[];var n=0;return e=_n(e,function(a){if(Tt(a))return n=Bt(a.length,n),!0}),wo(n,function(a){return bt(e,vo(a))})}function kf(e,n){if(!(e&&e.length))return[];var a=ic(e);return n==null?a:bt(a,function(u){return Ht(n,r,u)})}var y1=Ke(function(e,n){return Tt(e)?Vi(e,n):[]}),_1=Ke(function(e){return Bo(_n(e,Tt))}),v1=Ke(function(e){var n=Rr(e);return Tt(n)&&(n=r),Bo(_n(e,Tt),me(n,2))}),b1=Ke(function(e){var n=Rr(e);return n=typeof n=="function"?n:r,Bo(_n(e,Tt),r,n)}),m1=Ke(ic);function w1(e,n){return ff(e||[],n||[],Ki)}function E1(e,n){return ff(e||[],n||[],Wi)}var D1=Ke(function(e){var n=e.length,a=n>1?e[n-1]:r;return a=typeof a=="function"?(e.pop(),a):r,kf(e,a)});function Gf(e){var n=D(e);return n.__chain__=!0,n}function S1(e,n){return n(e),e}function ya(e,n){return n(e)}var O1=un(function(e){var n=e.length,a=n?e[0]:0,u=this.__wrapped__,_=function(I){return Ao(I,e)};return n>1||this.__actions__.length||!(u instanceof Ye)||!fn(a)?this.thru(_):(u=u.slice(a,+a+(n?1:0)),u.__actions__.push({func:ya,args:[_],thisArg:r}),new Cr(u,this.__chain__).thru(function(I){return n&&!I.length&&I.push(r),I}))});function I1(){return Gf(this)}function x1(){return new Cr(this.value(),this.__chain__)}function P1(){this.__values__===r&&(this.__values__=oh(this.value()));var e=this.__index__>=this.__values__.length,n=e?r:this.__values__[this.__index__++];return{done:e,value:n}}function A1(){return this}function C1(e){for(var n,a=this;a instanceof ta;){var u=zf(a);u.__index__=0,u.__values__=r,n?_.__wrapped__=u:n=u;var _=u;a=a.__wrapped__}return _.__wrapped__=e,n}function T1(){var e=this.__wrapped__;if(e instanceof Ye){var n=e;return this.__actions__.length&&(n=new Ye(this)),n=n.reverse(),n.__actions__.push({func:ya,args:[nc],thisArg:r}),new Cr(n,this.__chain__)}return this.thru(nc)}function N1(){return uf(this.__wrapped__,this.__actions__)}var R1=ca(function(e,n,a){it.call(e,a)?++e[a]:on(e,a,1)});function F1(e,n,a){var u=Ne(e)?wu:Sg;return a&&ir(e,n,a)&&(n=r),u(e,me(n,3))}function U1(e,n){var a=Ne(e)?_n:Vu;return a(e,me(n,3))}var j1=mf(qf),L1=mf(Bf);function $1(e,n){return Wt(_a(e,n),1)}function M1(e,n){return Wt(_a(e,n),q)}function z1(e,n,a){return a=a===r?1:$e(a),Wt(_a(e,n),a)}function Wf(e,n){var a=Ne(e)?Pr:wn;return a(e,me(n,3))}function Yf(e,n){var a=Ne(e)?sp:Ku;return a(e,me(n,3))}var q1=ca(function(e,n,a){it.call(e,a)?e[a].push(n):on(e,a,[n])});function B1(e,n,a,u){e=pr(e)?e:Di(e),a=a&&!u?$e(a):0;var _=e.length;return a<0&&(a=Bt(_+a,0)),Ea(e)?a<=_&&e.indexOf(n,a)>-1:!!_&&hi(e,n,a)>-1}var H1=Ke(function(e,n,a){var u=-1,_=typeof n=="function",I=pr(e)?ee(e.length):[];return wn(e,function(F){I[++u]=_?Ht(n,F,a):ki(F,n,a)}),I}),K1=ca(function(e,n,a){on(e,a,n)});function _a(e,n){var a=Ne(e)?bt:Xu;return a(e,me(n,3))}function V1(e,n,a,u){return e==null?[]:(Ne(n)||(n=n==null?[]:[n]),a=u?r:a,Ne(a)||(a=a==null?[]:[a]),tf(e,n,a))}var k1=ca(function(e,n,a){e[a?0:1].push(n)},function(){return[[],[]]});function G1(e,n,a){var u=Ne(e)?yo:Ou,_=arguments.length<3;return u(e,me(n,4),a,_,wn)}function W1(e,n,a){var u=Ne(e)?ap:Ou,_=arguments.length<3;return u(e,me(n,4),a,_,Ku)}function Y1(e,n){var a=Ne(e)?_n:Vu;return a(e,ma(me(n,3)))}function J1(e){var n=Ne(e)?zu:Bg;return n(e)}function X1(e,n,a){(a?ir(e,n,a):n===r)?n=1:n=$e(n);var u=Ne(e)?bg:Hg;return u(e,n)}function Z1(e){var n=Ne(e)?mg:Vg;return n(e)}function Q1(e){if(e==null)return 0;if(pr(e))return Ea(e)?di(e):e.length;var n=Zt(e);return n==Oe||n==Ie?e.size:Uo(e).length}function ey(e,n,a){var u=Ne(e)?_o:kg;return a&&ir(e,n,a)&&(n=r),u(e,me(n,3))}var ty=Ke(function(e,n){if(e==null)return[];var a=n.length;return a>1&&ir(e,n[0],n[1])?n=[]:a>2&&ir(n[0],n[1],n[2])&&(n=[n[0]]),tf(e,Wt(n,1),[])}),va=Up||function(){return Xe.Date.now()};function ry(e,n){if(typeof n!="function")throw new Ar(w);return e=$e(e),function(){if(--e<1)return n.apply(this,arguments)}}function Jf(e,n,a){return n=a?r:n,n=e&&n==null?e.length:n,cn(e,c,r,r,r,r,n)}function Xf(e,n){var a;if(typeof n!="function")throw new Ar(w);return e=$e(e),function(){return--e>0&&(a=n.apply(this,arguments)),e<=1&&(n=r),a}}var sc=Ke(function(e,n,a){var u=W;if(a.length){var _=bn(a,wi(sc));u|=x}return cn(e,u,n,a,_)}),Zf=Ke(function(e,n,a){var u=W|oe;if(a.length){var _=bn(a,wi(Zf));u|=x}return cn(n,u,e,a,_)});function Qf(e,n,a){n=a?r:n;var u=cn(e,A,r,r,r,r,r,n);return u.placeholder=Qf.placeholder,u}function eh(e,n,a){n=a?r:n;var u=cn(e,S,r,r,r,r,r,n);return u.placeholder=eh.placeholder,u}function th(e,n,a){var u,_,I,F,$,V,ie=0,ae=!1,ue=!1,le=!0;if(typeof e!="function")throw new Ar(w);n=Fr(n)||0,wt(a)&&(ae=!!a.leading,ue="maxWait"in a,I=ue?Bt(Fr(a.maxWait)||0,n):I,le="trailing"in a?!!a.trailing:le);function ve(Nt){var Kr=u,dn=_;return u=_=r,ie=Nt,F=e.apply(dn,Kr),F}function we(Nt){return ie=Nt,$=Xi(Ge,n),ae?ve(Nt):F}function qe(Nt){var Kr=Nt-V,dn=Nt-ie,mh=n-Kr;return ue?Xt(mh,I-dn):mh}function Ee(Nt){var Kr=Nt-V,dn=Nt-ie;return V===r||Kr>=n||Kr<0||ue&&dn>=I}function Ge(){var Nt=va();if(Ee(Nt))return Ze(Nt);$=Xi(Ge,qe(Nt))}function Ze(Nt){return $=r,le&&u?ve(Nt):(u=_=r,F)}function Dr(){$!==r&&hf($),ie=0,u=V=_=$=r}function sr(){return $===r?F:Ze(va())}function Sr(){var Nt=va(),Kr=Ee(Nt);if(u=arguments,_=this,V=Nt,Kr){if($===r)return we(V);if(ue)return hf($),$=Xi(Ge,n),ve(V)}return $===r&&($=Xi(Ge,n)),F}return Sr.cancel=Dr,Sr.flush=sr,Sr}var ny=Ke(function(e,n){return Hu(e,1,n)}),iy=Ke(function(e,n,a){return Hu(e,Fr(n)||0,a)});function sy(e){return cn(e,Z)}function ba(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new Ar(w);var a=function(){var u=arguments,_=n?n.apply(this,u):u[0],I=a.cache;if(I.has(_))return I.get(_);var F=e.apply(this,u);return a.cache=I.set(_,F)||I,F};return a.cache=new(ba.Cache||an),a}ba.Cache=an;function ma(e){if(typeof e!="function")throw new Ar(w);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}function ay(e){return Xf(2,e)}var oy=Gg(function(e,n){n=n.length==1&&Ne(n[0])?bt(n[0],mr(me())):bt(Wt(n,1),mr(me()));var a=n.length;return Ke(function(u){for(var _=-1,I=Xt(u.length,a);++_<I;)u[_]=n[_].call(this,u[_]);return Ht(e,this,u)})}),ac=Ke(function(e,n){var a=bn(n,wi(ac));return cn(e,x,r,n,a)}),rh=Ke(function(e,n){var a=bn(n,wi(rh));return cn(e,m,r,n,a)}),cy=un(function(e,n){return cn(e,d,r,r,r,n)});function uy(e,n){if(typeof e!="function")throw new Ar(w);return n=n===r?n:$e(n),Ke(e,n)}function fy(e,n){if(typeof e!="function")throw new Ar(w);return n=n==null?0:Bt($e(n),0),Ke(function(a){var u=a[n],_=Sn(a,0,n);return u&&vn(_,u),Ht(e,this,_)})}function hy(e,n,a){var u=!0,_=!0;if(typeof e!="function")throw new Ar(w);return wt(a)&&(u="leading"in a?!!a.leading:u,_="trailing"in a?!!a.trailing:_),th(e,n,{leading:u,maxWait:n,trailing:_})}function ly(e){return Jf(e,1)}function dy(e,n){return ac(Ko(n),e)}function py(){if(!arguments.length)return[];var e=arguments[0];return Ne(e)?e:[e]}function gy(e){return Tr(e,z)}function yy(e,n){return n=typeof n=="function"?n:r,Tr(e,z,n)}function _y(e){return Tr(e,j|z)}function vy(e,n){return n=typeof n=="function"?n:r,Tr(e,j|z,n)}function by(e,n){return n==null||Bu(e,n,Kt(n))}function Hr(e,n){return e===n||e!==e&&n!==n}var my=la(No),wy=la(function(e,n){return e>=n}),Vn=Wu(function(){return arguments}())?Wu:function(e){return Pt(e)&&it.call(e,"callee")&&!Fu.call(e,"callee")},Ne=ee.isArray,Ey=rr?mr(rr):Cg;function pr(e){return e!=null&&wa(e.length)&&!hn(e)}function Tt(e){return Pt(e)&&pr(e)}function Dy(e){return e===!0||e===!1||Pt(e)&&nr(e)==Y}var On=Lp||_c,Sy=zr?mr(zr):Tg;function Oy(e){return Pt(e)&&e.nodeType===1&&!Zi(e)}function Iy(e){if(e==null)return!0;if(pr(e)&&(Ne(e)||typeof e=="string"||typeof e.splice=="function"||On(e)||Ei(e)||Vn(e)))return!e.length;var n=Zt(e);if(n==Oe||n==Ie)return!e.size;if(Ji(e))return!Uo(e).length;for(var a in e)if(it.call(e,a))return!1;return!0}function xy(e,n){return Gi(e,n)}function Py(e,n,a){a=typeof a=="function"?a:r;var u=a?a(e,n):r;return u===r?Gi(e,n,r,a):!!u}function oc(e){if(!Pt(e))return!1;var n=nr(e);return n==U||n==f||typeof e.message=="string"&&typeof e.name=="string"&&!Zi(e)}function Ay(e){return typeof e=="number"&&ju(e)}function hn(e){if(!wt(e))return!1;var n=nr(e);return n==fe||n==pe||n==X||n==yt}function nh(e){return typeof e=="number"&&e==$e(e)}function wa(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Q}function wt(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}function Pt(e){return e!=null&&typeof e=="object"}var ih=xr?mr(xr):Rg;function Cy(e,n){return e===n||Fo(e,n,Xo(n))}function Ty(e,n,a){return a=typeof a=="function"?a:r,Fo(e,n,Xo(n),a)}function Ny(e){return sh(e)&&e!=+e}function Ry(e){if(y0(e))throw new Ce(l);return Yu(e)}function Fy(e){return e===null}function Uy(e){return e==null}function sh(e){return typeof e=="number"||Pt(e)&&nr(e)==Be}function Zi(e){if(!Pt(e)||nr(e)!=Le)return!1;var n=Ws(e);if(n===null)return!0;var a=it.call(n,"constructor")&&n.constructor;return typeof a=="function"&&a instanceof a&&Ks.call(a)==Tp}var cc=Wr?mr(Wr):Fg;function jy(e){return nh(e)&&e>=-Q&&e<=Q}var ah=Li?mr(Li):Ug;function Ea(e){return typeof e=="string"||!Ne(e)&&Pt(e)&&nr(e)==Re}function Er(e){return typeof e=="symbol"||Pt(e)&&nr(e)==Fe}var Ei=Ln?mr(Ln):jg;function Ly(e){return e===r}function $y(e){return Pt(e)&&Zt(e)==Pe}function My(e){return Pt(e)&&nr(e)==Ue}var zy=la(jo),qy=la(function(e,n){return e<=n});function oh(e){if(!e)return[];if(pr(e))return Ea(e)?qr(e):dr(e);if(Mi&&e[Mi])return bp(e[Mi]());var n=Zt(e),a=n==Oe?Do:n==Ie?qs:Di;return a(e)}function ln(e){if(!e)return e===0?e:0;if(e=Fr(e),e===q||e===-q){var n=e<0?-1:1;return n*R}return e===e?e:0}function $e(e){var n=ln(e),a=n%1;return n===n?a?n-a:n:0}function ch(e){return e?qn($e(e),0,te):0}function Fr(e){if(typeof e=="number")return e;if(Er(e))return k;if(wt(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=wt(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=Iu(e);var a=Xa.test(e);return a||Qa.test(e)?Te(e.slice(2),a?2:8):Ja.test(e)?k:+e}function uh(e){return Jr(e,gr(e))}function By(e){return e?qn($e(e),-Q,Q):e===0?e:0}function nt(e){return e==null?"":wr(e)}var Hy=bi(function(e,n){if(Ji(n)||pr(n)){Jr(n,Kt(n),e);return}for(var a in n)it.call(n,a)&&Ki(e,a,n[a])}),fh=bi(function(e,n){Jr(n,gr(n),e)}),Da=bi(function(e,n,a,u){Jr(n,gr(n),e,u)}),Ky=bi(function(e,n,a,u){Jr(n,Kt(n),e,u)}),Vy=un(Ao);function ky(e,n){var a=vi(e);return n==null?a:qu(a,n)}var Gy=Ke(function(e,n){e=ut(e);var a=-1,u=n.length,_=u>2?n[2]:r;for(_&&ir(n[0],n[1],_)&&(u=1);++a<u;)for(var I=n[a],F=gr(I),$=-1,V=F.length;++$<V;){var ie=F[$],ae=e[ie];(ae===r||Hr(ae,gi[ie])&&!it.call(e,ie))&&(e[ie]=I[ie])}return e}),Wy=Ke(function(e){return e.push(r,xf),Ht(hh,r,e)});function Yy(e,n){return Eu(e,me(n,3),Yr)}function Jy(e,n){return Eu(e,me(n,3),To)}function Xy(e,n){return e==null?e:Co(e,me(n,3),gr)}function Zy(e,n){return e==null?e:ku(e,me(n,3),gr)}function Qy(e,n){return e&&Yr(e,me(n,3))}function e_(e,n){return e&&To(e,me(n,3))}function t_(e){return e==null?[]:ia(e,Kt(e))}function r_(e){return e==null?[]:ia(e,gr(e))}function uc(e,n,a){var u=e==null?r:Bn(e,n);return u===r?a:u}function n_(e,n){return e!=null&&Cf(e,n,Ig)}function fc(e,n){return e!=null&&Cf(e,n,xg)}var i_=Ef(function(e,n,a){n!=null&&typeof n.toString!="function"&&(n=Vs.call(n)),e[n]=a},lc(yr)),s_=Ef(function(e,n,a){n!=null&&typeof n.toString!="function"&&(n=Vs.call(n)),it.call(e,n)?e[n].push(a):e[n]=[a]},me),a_=Ke(ki);function Kt(e){return pr(e)?Mu(e):Uo(e)}function gr(e){return pr(e)?Mu(e,!0):Lg(e)}function o_(e,n){var a={};return n=me(n,3),Yr(e,function(u,_,I){on(a,n(u,_,I),u)}),a}function c_(e,n){var a={};return n=me(n,3),Yr(e,function(u,_,I){on(a,_,n(u,_,I))}),a}var u_=bi(function(e,n,a){sa(e,n,a)}),hh=bi(function(e,n,a,u){sa(e,n,a,u)}),f_=un(function(e,n){var a={};if(e==null)return a;var u=!1;n=bt(n,function(I){return I=Dn(I,e),u||(u=I.length>1),I}),Jr(e,Yo(e),a),u&&(a=Tr(a,j|G|z,i0));for(var _=n.length;_--;)qo(a,n[_]);return a});function h_(e,n){return lh(e,ma(me(n)))}var l_=un(function(e,n){return e==null?{}:Mg(e,n)});function lh(e,n){if(e==null)return{};var a=bt(Yo(e),function(u){return[u]});return n=me(n),rf(e,a,function(u,_){return n(u,_[0])})}function d_(e,n,a){n=Dn(n,e);var u=-1,_=n.length;for(_||(_=1,e=r);++u<_;){var I=e==null?r:e[Xr(n[u])];I===r&&(u=_,I=a),e=hn(I)?I.call(e):I}return e}function p_(e,n,a){return e==null?e:Wi(e,n,a)}function g_(e,n,a,u){return u=typeof u=="function"?u:r,e==null?e:Wi(e,n,a,u)}var dh=Of(Kt),ph=Of(gr);function y_(e,n,a){var u=Ne(e),_=u||On(e)||Ei(e);if(n=me(n,4),a==null){var I=e&&e.constructor;_?a=u?new I:[]:wt(e)?a=hn(I)?vi(Ws(e)):{}:a={}}return(_?Pr:Yr)(e,function(F,$,V){return n(a,F,$,V)}),a}function __(e,n){return e==null?!0:qo(e,n)}function v_(e,n,a){return e==null?e:cf(e,n,Ko(a))}function b_(e,n,a,u){return u=typeof u=="function"?u:r,e==null?e:cf(e,n,Ko(a),u)}function Di(e){return e==null?[]:Eo(e,Kt(e))}function m_(e){return e==null?[]:Eo(e,gr(e))}function w_(e,n,a){return a===r&&(a=n,n=r),a!==r&&(a=Fr(a),a=a===a?a:0),n!==r&&(n=Fr(n),n=n===n?n:0),qn(Fr(e),n,a)}function E_(e,n,a){return n=ln(n),a===r?(a=n,n=0):a=ln(a),e=Fr(e),Pg(e,n,a)}function D_(e,n,a){if(a&&typeof a!="boolean"&&ir(e,n,a)&&(n=a=r),a===r&&(typeof n=="boolean"?(a=n,n=r):typeof e=="boolean"&&(a=e,e=r)),e===r&&n===r?(e=0,n=1):(e=ln(e),n===r?(n=e,e=0):n=ln(n)),e>n){var u=e;e=n,n=u}if(a||e%1||n%1){var _=Lu();return Xt(e+_*(n-e+ot("1e-"+((_+"").length-1))),n)}return $o(e,n)}var S_=mi(function(e,n,a){return n=n.toLowerCase(),e+(a?gh(n):n)});function gh(e){return hc(nt(e).toLowerCase())}function yh(e){return e=nt(e),e&&e.replace(rn,pp).replace(lo,"")}function O_(e,n,a){e=nt(e),n=wr(n);var u=e.length;a=a===r?u:qn($e(a),0,u);var _=a;return a-=n.length,a>=0&&e.slice(a,_)==n}function I_(e){return e=nt(e),e&&_t.test(e)?e.replace(Nn,gp):e}function x_(e){return e=nt(e),e&&Ut.test(e)?e.replace(Ot,"\\$&"):e}var P_=mi(function(e,n,a){return e+(a?"-":"")+n.toLowerCase()}),A_=mi(function(e,n,a){return e+(a?" ":"")+n.toLowerCase()}),C_=bf("toLowerCase");function T_(e,n,a){e=nt(e),n=$e(n);var u=n?di(e):0;if(!n||u>=n)return e;var _=(n-u)/2;return ha(Zs(_),a)+e+ha(Xs(_),a)}function N_(e,n,a){e=nt(e),n=$e(n);var u=n?di(e):0;return n&&u<n?e+ha(n-u,a):e}function R_(e,n,a){e=nt(e),n=$e(n);var u=n?di(e):0;return n&&u<n?ha(n-u,a)+e:e}function F_(e,n,a){return a||n==null?n=0:n&&(n=+n),qp(nt(e).replace(It,""),n||0)}function U_(e,n,a){return(a?ir(e,n,a):n===r)?n=1:n=$e(n),Mo(nt(e),n)}function j_(){var e=arguments,n=nt(e[0]);return e.length<3?n:n.replace(e[1],e[2])}var L_=mi(function(e,n,a){return e+(a?"_":"")+n.toLowerCase()});function $_(e,n,a){return a&&typeof a!="number"&&ir(e,n,a)&&(n=a=r),a=a===r?te:a>>>0,a?(e=nt(e),e&&(typeof n=="string"||n!=null&&!cc(n))&&(n=wr(n),!n&&li(e))?Sn(qr(e),0,a):e.split(n,a)):[]}var M_=mi(function(e,n,a){return e+(a?" ":"")+hc(n)});function z_(e,n,a){return e=nt(e),a=a==null?0:qn($e(a),0,e.length),n=wr(n),e.slice(a,a+n.length)==n}function q_(e,n,a){var u=D.templateSettings;a&&ir(e,n,a)&&(n=r),e=nt(e),n=Da({},n,u,If);var _=Da({},n.imports,u.imports,If),I=Kt(_),F=Eo(_,I),$,V,ie=0,ae=n.interpolate||ii,ue="__p += '",le=So((n.escape||ii).source+"|"+ae.source+"|"+(ae===mt?Ya:ii).source+"|"+(n.evaluate||ii).source+"|$","g"),ve="//# sourceURL="+(it.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++po+"]")+`
`;e.replace(le,function(Ee,Ge,Ze,Dr,sr,Sr){return Ze||(Ze=Dr),ue+=e.slice(ie,Sr).replace(to,yp),Ge&&($=!0,ue+=`' +
__e(`+Ge+`) +
'`),sr&&(V=!0,ue+=`';
`+sr+`;
__p += '`),Ze&&(ue+=`' +
((__t = (`+Ze+`)) == null ? '' : __t) +
'`),ie=Sr+Ee.length,Ee}),ue+=`';
`;var we=it.call(n,"variable")&&n.variable;if(!we)ue=`with (obj) {
`+ue+`
}
`;else if(Ga.test(we))throw new Ce(y);ue=(V?ue.replace(kr,""):ue).replace(tr,"$1").replace(tn,"$1;"),ue="function("+(we||"obj")+`) {
`+(we?"":`obj || (obj = {});
`)+"var __t, __p = ''"+($?", __e = _.escape":"")+(V?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ue+`return __p
}`;var qe=vh(function(){return rt(I,ve+"return "+ue).apply(r,F)});if(qe.source=ue,oc(qe))throw qe;return qe}function B_(e){return nt(e).toLowerCase()}function H_(e){return nt(e).toUpperCase()}function K_(e,n,a){if(e=nt(e),e&&(a||n===r))return Iu(e);if(!e||!(n=wr(n)))return e;var u=qr(e),_=qr(n),I=xu(u,_),F=Pu(u,_)+1;return Sn(u,I,F).join("")}function V_(e,n,a){if(e=nt(e),e&&(a||n===r))return e.slice(0,Cu(e)+1);if(!e||!(n=wr(n)))return e;var u=qr(e),_=Pu(u,qr(n))+1;return Sn(u,0,_).join("")}function k_(e,n,a){if(e=nt(e),e&&(a||n===r))return e.replace(It,"");if(!e||!(n=wr(n)))return e;var u=qr(e),_=xu(u,qr(n));return Sn(u,_).join("")}function G_(e,n){var a=h,u=p;if(wt(n)){var _="separator"in n?n.separator:_;a="length"in n?$e(n.length):a,u="omission"in n?wr(n.omission):u}e=nt(e);var I=e.length;if(li(e)){var F=qr(e);I=F.length}if(a>=I)return e;var $=a-di(u);if($<1)return u;var V=F?Sn(F,0,$).join(""):e.slice(0,$);if(_===r)return V+u;if(F&&($+=V.length-$),cc(_)){if(e.slice($).search(_)){var ie,ae=V;for(_.global||(_=So(_.source,nt(Ir.exec(_))+"g")),_.lastIndex=0;ie=_.exec(ae);)var ue=ie.index;V=V.slice(0,ue===r?$:ue)}}else if(e.indexOf(wr(_),$)!=$){var le=V.lastIndexOf(_);le>-1&&(V=V.slice(0,le))}return V+u}function W_(e){return e=nt(e),e&&Et.test(e)?e.replace(gn,Dp):e}var Y_=mi(function(e,n,a){return e+(a?" ":"")+n.toUpperCase()}),hc=bf("toUpperCase");function _h(e,n,a){return e=nt(e),n=a?r:n,n===r?vp(e)?Ip(e):up(e):e.match(n)||[]}var vh=Ke(function(e,n){try{return Ht(e,r,n)}catch(a){return oc(a)?a:new Ce(a)}}),J_=un(function(e,n){return Pr(n,function(a){a=Xr(a),on(e,a,sc(e[a],e))}),e});function X_(e){var n=e==null?0:e.length,a=me();return e=n?bt(e,function(u){if(typeof u[1]!="function")throw new Ar(w);return[a(u[0]),u[1]]}):[],Ke(function(u){for(var _=-1;++_<n;){var I=e[_];if(Ht(I[0],this,u))return Ht(I[1],this,u)}})}function Z_(e){return Dg(Tr(e,j))}function lc(e){return function(){return e}}function Q_(e,n){return e==null||e!==e?n:e}var ev=wf(),tv=wf(!0);function yr(e){return e}function dc(e){return Ju(typeof e=="function"?e:Tr(e,j))}function rv(e){return Zu(Tr(e,j))}function nv(e,n){return Qu(e,Tr(n,j))}var iv=Ke(function(e,n){return function(a){return ki(a,e,n)}}),sv=Ke(function(e,n){return function(a){return ki(e,a,n)}});function pc(e,n,a){var u=Kt(n),_=ia(n,u);a==null&&!(wt(n)&&(_.length||!u.length))&&(a=n,n=e,e=this,_=ia(n,Kt(n)));var I=!(wt(a)&&"chain"in a)||!!a.chain,F=hn(e);return Pr(_,function($){var V=n[$];e[$]=V,F&&(e.prototype[$]=function(){var ie=this.__chain__;if(I||ie){var ae=e(this.__wrapped__),ue=ae.__actions__=dr(this.__actions__);return ue.push({func:V,args:arguments,thisArg:e}),ae.__chain__=ie,ae}return V.apply(e,vn([this.value()],arguments))})}),e}function av(){return Xe._===this&&(Xe._=Np),this}function gc(){}function ov(e){return e=$e(e),Ke(function(n){return ef(n,e)})}var cv=ko(bt),uv=ko(wu),fv=ko(_o);function bh(e){return Qo(e)?vo(Xr(e)):zg(e)}function hv(e){return function(n){return e==null?r:Bn(e,n)}}var lv=Df(),dv=Df(!0);function yc(){return[]}function _c(){return!1}function pv(){return{}}function gv(){return""}function yv(){return!0}function _v(e,n){if(e=$e(e),e<1||e>Q)return[];var a=te,u=Xt(e,te);n=me(n),e-=te;for(var _=wo(u,n);++a<e;)n(a);return _}function vv(e){return Ne(e)?bt(e,Xr):Er(e)?[e]:dr(Mf(nt(e)))}function bv(e){var n=++Cp;return nt(e)+n}var mv=fa(function(e,n){return e+n},0),wv=Go("ceil"),Ev=fa(function(e,n){return e/n},1),Dv=Go("floor");function Sv(e){return e&&e.length?na(e,yr,No):r}function Ov(e,n){return e&&e.length?na(e,me(n,2),No):r}function Iv(e){return Su(e,yr)}function xv(e,n){return Su(e,me(n,2))}function Pv(e){return e&&e.length?na(e,yr,jo):r}function Av(e,n){return e&&e.length?na(e,me(n,2),jo):r}var Cv=fa(function(e,n){return e*n},1),Tv=Go("round"),Nv=fa(function(e,n){return e-n},0);function Rv(e){return e&&e.length?mo(e,yr):0}function Fv(e,n){return e&&e.length?mo(e,me(n,2)):0}return D.after=ry,D.ary=Jf,D.assign=Hy,D.assignIn=fh,D.assignInWith=Da,D.assignWith=Ky,D.at=Vy,D.before=Xf,D.bind=sc,D.bindAll=J_,D.bindKey=Zf,D.castArray=py,D.chain=Gf,D.chunk=D0,D.compact=S0,D.concat=O0,D.cond=X_,D.conforms=Z_,D.constant=lc,D.countBy=R1,D.create=ky,D.curry=Qf,D.curryRight=eh,D.debounce=th,D.defaults=Gy,D.defaultsDeep=Wy,D.defer=ny,D.delay=iy,D.difference=I0,D.differenceBy=x0,D.differenceWith=P0,D.drop=A0,D.dropRight=C0,D.dropRightWhile=T0,D.dropWhile=N0,D.fill=R0,D.filter=U1,D.flatMap=$1,D.flatMapDeep=M1,D.flatMapDepth=z1,D.flatten=Hf,D.flattenDeep=F0,D.flattenDepth=U0,D.flip=sy,D.flow=ev,D.flowRight=tv,D.fromPairs=j0,D.functions=t_,D.functionsIn=r_,D.groupBy=q1,D.initial=$0,D.intersection=M0,D.intersectionBy=z0,D.intersectionWith=q0,D.invert=i_,D.invertBy=s_,D.invokeMap=H1,D.iteratee=dc,D.keyBy=K1,D.keys=Kt,D.keysIn=gr,D.map=_a,D.mapKeys=o_,D.mapValues=c_,D.matches=rv,D.matchesProperty=nv,D.memoize=ba,D.merge=u_,D.mergeWith=hh,D.method=iv,D.methodOf=sv,D.mixin=pc,D.negate=ma,D.nthArg=ov,D.omit=f_,D.omitBy=h_,D.once=ay,D.orderBy=V1,D.over=cv,D.overArgs=oy,D.overEvery=uv,D.overSome=fv,D.partial=ac,D.partialRight=rh,D.partition=k1,D.pick=l_,D.pickBy=lh,D.property=bh,D.propertyOf=hv,D.pull=V0,D.pullAll=Vf,D.pullAllBy=k0,D.pullAllWith=G0,D.pullAt=W0,D.range=lv,D.rangeRight=dv,D.rearg=cy,D.reject=Y1,D.remove=Y0,D.rest=uy,D.reverse=nc,D.sampleSize=X1,D.set=p_,D.setWith=g_,D.shuffle=Z1,D.slice=J0,D.sortBy=ty,D.sortedUniq=n1,D.sortedUniqBy=i1,D.split=$_,D.spread=fy,D.tail=s1,D.take=a1,D.takeRight=o1,D.takeRightWhile=c1,D.takeWhile=u1,D.tap=S1,D.throttle=hy,D.thru=ya,D.toArray=oh,D.toPairs=dh,D.toPairsIn=ph,D.toPath=vv,D.toPlainObject=uh,D.transform=y_,D.unary=ly,D.union=f1,D.unionBy=h1,D.unionWith=l1,D.uniq=d1,D.uniqBy=p1,D.uniqWith=g1,D.unset=__,D.unzip=ic,D.unzipWith=kf,D.update=v_,D.updateWith=b_,D.values=Di,D.valuesIn=m_,D.without=y1,D.words=_h,D.wrap=dy,D.xor=_1,D.xorBy=v1,D.xorWith=b1,D.zip=m1,D.zipObject=w1,D.zipObjectDeep=E1,D.zipWith=D1,D.entries=dh,D.entriesIn=ph,D.extend=fh,D.extendWith=Da,pc(D,D),D.add=mv,D.attempt=vh,D.camelCase=S_,D.capitalize=gh,D.ceil=wv,D.clamp=w_,D.clone=gy,D.cloneDeep=_y,D.cloneDeepWith=vy,D.cloneWith=yy,D.conformsTo=by,D.deburr=yh,D.defaultTo=Q_,D.divide=Ev,D.endsWith=O_,D.eq=Hr,D.escape=I_,D.escapeRegExp=x_,D.every=F1,D.find=j1,D.findIndex=qf,D.findKey=Yy,D.findLast=L1,D.findLastIndex=Bf,D.findLastKey=Jy,D.floor=Dv,D.forEach=Wf,D.forEachRight=Yf,D.forIn=Xy,D.forInRight=Zy,D.forOwn=Qy,D.forOwnRight=e_,D.get=uc,D.gt=my,D.gte=wy,D.has=n_,D.hasIn=fc,D.head=Kf,D.identity=yr,D.includes=B1,D.indexOf=L0,D.inRange=E_,D.invoke=a_,D.isArguments=Vn,D.isArray=Ne,D.isArrayBuffer=Ey,D.isArrayLike=pr,D.isArrayLikeObject=Tt,D.isBoolean=Dy,D.isBuffer=On,D.isDate=Sy,D.isElement=Oy,D.isEmpty=Iy,D.isEqual=xy,D.isEqualWith=Py,D.isError=oc,D.isFinite=Ay,D.isFunction=hn,D.isInteger=nh,D.isLength=wa,D.isMap=ih,D.isMatch=Cy,D.isMatchWith=Ty,D.isNaN=Ny,D.isNative=Ry,D.isNil=Uy,D.isNull=Fy,D.isNumber=sh,D.isObject=wt,D.isObjectLike=Pt,D.isPlainObject=Zi,D.isRegExp=cc,D.isSafeInteger=jy,D.isSet=ah,D.isString=Ea,D.isSymbol=Er,D.isTypedArray=Ei,D.isUndefined=Ly,D.isWeakMap=$y,D.isWeakSet=My,D.join=B0,D.kebabCase=P_,D.last=Rr,D.lastIndexOf=H0,D.lowerCase=A_,D.lowerFirst=C_,D.lt=zy,D.lte=qy,D.max=Sv,D.maxBy=Ov,D.mean=Iv,D.meanBy=xv,D.min=Pv,D.minBy=Av,D.stubArray=yc,D.stubFalse=_c,D.stubObject=pv,D.stubString=gv,D.stubTrue=yv,D.multiply=Cv,D.nth=K0,D.noConflict=av,D.noop=gc,D.now=va,D.pad=T_,D.padEnd=N_,D.padStart=R_,D.parseInt=F_,D.random=D_,D.reduce=G1,D.reduceRight=W1,D.repeat=U_,D.replace=j_,D.result=d_,D.round=Tv,D.runInContext=K,D.sample=J1,D.size=Q1,D.snakeCase=L_,D.some=ey,D.sortedIndex=X0,D.sortedIndexBy=Z0,D.sortedIndexOf=Q0,D.sortedLastIndex=e1,D.sortedLastIndexBy=t1,D.sortedLastIndexOf=r1,D.startCase=M_,D.startsWith=z_,D.subtract=Nv,D.sum=Rv,D.sumBy=Fv,D.template=q_,D.times=_v,D.toFinite=ln,D.toInteger=$e,D.toLength=ch,D.toLower=B_,D.toNumber=Fr,D.toSafeInteger=By,D.toString=nt,D.toUpper=H_,D.trim=K_,D.trimEnd=V_,D.trimStart=k_,D.truncate=G_,D.unescape=W_,D.uniqueId=bv,D.upperCase=Y_,D.upperFirst=hc,D.each=Wf,D.eachRight=Yf,D.first=Kf,pc(D,function(){var e={};return Yr(D,function(n,a){it.call(D.prototype,a)||(e[a]=n)}),e}(),{chain:!1}),D.VERSION=s,Pr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){D[e].placeholder=D}),Pr(["drop","take"],function(e,n){Ye.prototype[e]=function(a){a=a===r?1:Bt($e(a),0);var u=this.__filtered__&&!n?new Ye(this):this.clone();return u.__filtered__?u.__takeCount__=Xt(a,u.__takeCount__):u.__views__.push({size:Xt(a,te),type:e+(u.__dir__<0?"Right":"")}),u},Ye.prototype[e+"Right"]=function(a){return this.reverse()[e](a).reverse()}}),Pr(["filter","map","takeWhile"],function(e,n){var a=n+1,u=a==b||a==L;Ye.prototype[e]=function(_){var I=this.clone();return I.__iteratees__.push({iteratee:me(_,3),type:a}),I.__filtered__=I.__filtered__||u,I}}),Pr(["head","last"],function(e,n){var a="take"+(n?"Right":"");Ye.prototype[e]=function(){return this[a](1).value()[0]}}),Pr(["initial","tail"],function(e,n){var a="drop"+(n?"":"Right");Ye.prototype[e]=function(){return this.__filtered__?new Ye(this):this[a](1)}}),Ye.prototype.compact=function(){return this.filter(yr)},Ye.prototype.find=function(e){return this.filter(e).head()},Ye.prototype.findLast=function(e){return this.reverse().find(e)},Ye.prototype.invokeMap=Ke(function(e,n){return typeof e=="function"?new Ye(this):this.map(function(a){return ki(a,e,n)})}),Ye.prototype.reject=function(e){return this.filter(ma(me(e)))},Ye.prototype.slice=function(e,n){e=$e(e);var a=this;return a.__filtered__&&(e>0||n<0)?new Ye(a):(e<0?a=a.takeRight(-e):e&&(a=a.drop(e)),n!==r&&(n=$e(n),a=n<0?a.dropRight(-n):a.take(n-e)),a)},Ye.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ye.prototype.toArray=function(){return this.take(te)},Yr(Ye.prototype,function(e,n){var a=/^(?:filter|find|map|reject)|While$/.test(n),u=/^(?:head|last)$/.test(n),_=D[u?"take"+(n=="last"?"Right":""):n],I=u||/^find/.test(n);_&&(D.prototype[n]=function(){var F=this.__wrapped__,$=u?[1]:arguments,V=F instanceof Ye,ie=$[0],ae=V||Ne(F),ue=function(Ge){var Ze=_.apply(D,vn([Ge],$));return u&&le?Ze[0]:Ze};ae&&a&&typeof ie=="function"&&ie.length!=1&&(V=ae=!1);var le=this.__chain__,ve=!!this.__actions__.length,we=I&&!le,qe=V&&!ve;if(!I&&ae){F=qe?F:new Ye(this);var Ee=e.apply(F,$);return Ee.__actions__.push({func:ya,args:[ue],thisArg:r}),new Cr(Ee,le)}return we&&qe?e.apply(this,$):(Ee=this.thru(ue),we?u?Ee.value()[0]:Ee.value():Ee)})}),Pr(["pop","push","shift","sort","splice","unshift"],function(e){var n=Bs[e],a=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",u=/^(?:pop|shift)$/.test(e);D.prototype[e]=function(){var _=arguments;if(u&&!this.__chain__){var I=this.value();return n.apply(Ne(I)?I:[],_)}return this[a](function(F){return n.apply(Ne(F)?F:[],_)})}}),Yr(Ye.prototype,function(e,n){var a=D[n];if(a){var u=a.name+"";it.call(_i,u)||(_i[u]=[]),_i[u].push({name:n,func:a})}}),_i[ua(r,oe).name]=[{name:"wrapper",func:r}],Ye.prototype.clone=Wp,Ye.prototype.reverse=Yp,Ye.prototype.value=Jp,D.prototype.at=O1,D.prototype.chain=I1,D.prototype.commit=x1,D.prototype.next=P1,D.prototype.plant=C1,D.prototype.reverse=T1,D.prototype.toJSON=D.prototype.valueOf=D.prototype.value=N1,D.prototype.first=D.prototype.head,Mi&&(D.prototype[Mi]=A1),D},pi=xp();Ct?((Ct.exports=pi)._=pi,ct._=pi):Xe._=pi}).call(us)})(Yc,Yc.exports);var dD=Object.defineProperty,pD=Object.defineProperties,gD=Object.getOwnPropertyDescriptors,zl=Object.getOwnPropertySymbols,yD=Object.prototype.hasOwnProperty,_D=Object.prototype.propertyIsEnumerable,ql=(i,t,r)=>t in i?dD(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Oa=(i,t)=>{for(var r in t||(t={}))yD.call(t,r)&&ql(i,r,t[r]);if(zl)for(var r of zl(t))_D.call(t,r)&&ql(i,r,t[r]);return i},vD=(i,t)=>pD(i,gD(t));function Lr(i,t,r){let s;const o=Jc(i);return t.rpcMap&&(s=t.rpcMap[o]),s||(s=`${lD}?chainId=eip155:${o}&projectId=${r}`),s}function Jc(i){return i.includes("eip155")?Number(i.split(":")[1]):Number(i)}function bD(i,t){if(!t.includes(i))throw new Error(`Chain '${i}' not approved. Please use one of the following: ${t.toString()}`)}function mD(i){return i.map(t=>`${t.split(":")[0]}:${t.split(":")[1]}`)}function wD(i,t){const r=Object.keys(t.namespaces).filter(o=>o.includes(i));if(!r.length)return[];const s=[];return r.forEach(o=>{const l=t.namespaces[o].accounts;s.push(...l)}),s}function ED(i,t={}){const r=Bl(i),s=Bl(t);return Yc.exports.merge(r,s)}function Bl(i){var t,r,s,o;const l={};if(!cD(i))return l;for(const[w,y]of Object.entries(i)){const E=np(w)?[w]:y.chains,N=y.methods||[],T=y.events||[],j=y.rpcMap||{},G=Aa(w);l[G]=vD(Oa(Oa({},l[G]),y),{chains:Fc(E,(t=l[G])==null?void 0:t.chains),methods:Fc(N,(r=l[G])==null?void 0:r.methods),events:Fc(T,(s=l[G])==null?void 0:s.events),rpcMap:Oa(Oa({},j),(o=l[G])==null?void 0:o.rpcMap)})}return l}const ni=(i,t)=>{const r=s=>{s.request!==t.request||s.topic!==t.topic||(i.events.removeListener("session_request_sent",r),DD(t,i.core.storage))};i.on("session_request_sent",r)};async function DD(i,t){try{const r=await t.getItem("WALLETCONNECT_DEEPLINK_CHOICE");if(!r)return;const s=typeof r=="string"?JSON.parse(r):r,o=s?.href;if(typeof o!="string")return;o.endsWith("/")&&o.slice(0,-1);const l=`${o}/wc?requestId=${i.id}&sessionTopic=${i.topic}`,w=sD();w===xi.browser?window.open(l,"_self","noreferrer noopener"):w===xi.reactNative&&await require("react-native").Linking.openURL(l)}catch(r){console.error(r)}}class SD{constructor(t){this.name="polkadot",this.namespace=t.namespace,this.events=t.events,this.client=t.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?(ni(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(this.chainId=t,!this.httpProviders[t]){const s=r||Lr(`${this.name}:${t}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.events.emit(Tn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||Lr(t,this.namespace);return typeof s>"u"?void 0:new An(new Zn(s))}}class OD{constructor(t){this.name="eip155",this.namespace=t.namespace,this.client=t.client,this.events=t.events,this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(t){var r;switch(t.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return this.handleSwitchChain(t.request.params?(r=t.request.params[0])==null?void 0:r.chainId:"0x0"),null;case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(t.request.method)?(ni(this.client,t),await this.client.request(t)):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,r){const s=Jc(t);if(!this.httpProviders[s]){const o=r||Lr(`${this.name}:${s}`,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${s}`);this.setHttpProvider(s,o)}this.chainId=s,this.events.emit(Tn.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}createHttpProvider(t,r){const s=r||Lr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new An(new Zn(s))}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;const o=Jc(r);t[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const t=this.chainId,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}handleSwitchChain(t){const r=parseInt(t,16),s=`${this.name}:${r}`;bD(s,this.namespace.chains),this.setDefaultChain(`${r}`)}}class ID{constructor(t){this.name="solana",this.namespace=t.namespace,this.events=t.events,this.client=t.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?(ni(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(!this.httpProviders[t]){const s=r||Lr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.chainId=t,this.events.emit(Tn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||Lr(t,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new An(new Zn(s))}}class xD{constructor(t){this.name="cosmos",this.namespace=t.namespace,this.events=t.events,this.client=t.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?(ni(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(this.chainId=t,!this.httpProviders[t]){const s=r||Lr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.events.emit(Tn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||Lr(t,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new An(new Zn(s))}}class PD{constructor(t){this.name="cip34",this.namespace=t.namespace,this.events=t.events,this.client=t.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?(ni(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(this.chainId=t,!this.httpProviders[t]){const s=r||this.getCardanoRPCUrl(t);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.events.emit(Tn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{const s=this.getCardanoRPCUrl(r);t[r]=this.createHttpProvider(r,s)}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}getCardanoRPCUrl(t){const r=this.namespace.rpcMap;if(r)return r[t]}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||this.getCardanoRPCUrl(t);return typeof s>"u"?void 0:new An(new Zn(s))}}class AD{constructor(t){this.name="elrond",this.namespace=t.namespace,this.events=t.events,this.client=t.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?(ni(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(!this.httpProviders[t]){const s=r||Lr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.chainId=t,this.events.emit(Tn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||Lr(t,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new An(new Zn(s))}}class CD{constructor(t){this.name="multiversx",this.namespace=t.namespace,this.events=t.events,this.client=t.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?(ni(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(!this.httpProviders[t]){const s=r||Lr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.chainId=t,this.events.emit(Tn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||Lr(t,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new An(new Zn(s))}}var TD=Object.defineProperty,ND=Object.defineProperties,RD=Object.getOwnPropertyDescriptors,Hl=Object.getOwnPropertySymbols,FD=Object.prototype.hasOwnProperty,UD=Object.prototype.propertyIsEnumerable,Kl=(i,t,r)=>t in i?TD(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Ia=(i,t)=>{for(var r in t||(t={}))FD.call(t,r)&&Kl(i,r,t[r]);if(Hl)for(var r of Hl(t))UD.call(t,r)&&Kl(i,r,t[r]);return i},Uc=(i,t)=>ND(i,RD(t));class mu{constructor(t){this.events=new $r,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.providerOpts=t,this.logger=typeof t?.logger<"u"&&typeof t?.logger!="string"?t.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:t?.logger||$l}))}static async init(t){const r=new mu(t);return await r.initialize(),r}async request(t,r){const[s,o]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Ia({},t),chainId:`${s}:${o}`,topic:this.session.topic})}sendAsync(t,r,s){this.request(t,s).then(o=>r(null,o)).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(t=this.session)==null?void 0:t.topic,reason:Ll("USER_DISCONNECTED")}),await this.cleanup()}async connect(t){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(t),await this.cleanupPendingPairings(),!t.skipPairing)return await this.pair(t.pairingTopic)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}removeListener(t,r){this.events.removeListener(t,r)}off(t,r){this.events.off(t,r)}get isWalletConnect(){return!0}async pair(t){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:o}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await o().then(l=>{this.session=l}).catch(l=>{if(l.message!==ep)throw l;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(t,r){try{const[s,o]=this.validateChain(t);this.getProvider(s).setDefaultChain(o,r)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(t={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(oD(r)){for(const s of r)t.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const t=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[t]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await _u.init({logger:this.providerOpts.logger||$l,relayUrl:this.providerOpts.relayUrl||uD,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");[...new Set(Object.keys(this.session.namespaces).map(t=>Aa(t)))].forEach(t=>{if(!this.session)return;const r=wD(t,this.session),s=mD(r),o=ED(this.namespaces,this.optionalNamespaces),l=Uc(Ia({},o[t]),{accounts:r,chains:s});switch(t){case"eip155":this.rpcProviders[t]=new OD({client:this.client,namespace:l,events:this.events});break;case"solana":this.rpcProviders[t]=new ID({client:this.client,namespace:l,events:this.events});break;case"cosmos":this.rpcProviders[t]=new xD({client:this.client,namespace:l,events:this.events});break;case"polkadot":this.rpcProviders[t]=new SD({client:this.client,namespace:l,events:this.events});break;case"cip34":this.rpcProviders[t]=new PD({client:this.client,namespace:l,events:this.events});break;case"elrond":this.rpcProviders[t]=new AD({client:this.client,namespace:l,events:this.events});break;case"multiversx":this.rpcProviders[t]=new CD({client:this.client,namespace:l,events:this.events});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",t=>{this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{const{params:r}=t,{event:s}=r;s.name==="accountsChanged"?this.events.emit("accountsChanged",s.data):s.name==="chainChanged"?this.onChainChanged(r.chainId):this.events.emit(s.name,s.data),this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:r})=>{var s;const{namespaces:o}=r,l=(s=this.client)==null?void 0:s.session.get(t);this.session=Uc(Ia({},l),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:r})}),this.client.on("session_delete",async t=>{await this.cleanup(),this.events.emit("session_delete",t),this.events.emit("disconnect",Uc(Ia({},Ll("USER_DISCONNECTED")),{data:t.topic}))}),this.on(Tn.DEFAULT_CHAIN_CHANGED,t=>{this.onChainChanged(t,!0)})}getProvider(t){if(!this.rpcProviders[t])throw new Error(`Provider not found: ${t}`);return this.rpcProviders[t]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(t=>{var r;this.getProvider(t).updateNamespace((r=this.session)==null?void 0:r.namespaces[t])})}setNamespaces(t){const{namespaces:r,optionalNamespaces:s,sessionProperties:o}=t;if(!r||!Object.keys(r).length)throw new Error("Namespaces must be not empty");this.namespaces=r,this.optionalNamespaces=s,this.sessionProperties=o,this.persist("namespaces",r),this.persist("optionalNamespaces",s)}validateChain(t){const[r,s]=t?.split(":")||["",""];if(r&&!Object.keys(this.namespaces).map(w=>Aa(w)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&s)return[r,s];const o=Aa(Object.keys(this.namespaces)[0]),l=this.rpcProviders[o].getDefaultChain();return[o,l]}async requestAccounts(){const[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}onChainChanged(t,r=!1){var s;const[o,l]=this.validateChain(t);r||this.getProvider(o).setDefaultChain(l),((s=this.namespaces[o])!=null?s:this.namespaces[`${o}:${l}`]).defaultChain=l,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",l)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0})}persist(t,r){this.client.core.storage.setItem(`${Ml}/${t}`,r)}async getFromStore(t){return await this.client.core.storage.getItem(`${Ml}/${t}`)}}const VD=mu;export{VD as a,dd as f};
