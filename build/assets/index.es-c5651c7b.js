import{c as Jv,r as Xv,a as ur,g as Qv,e as Ir,_ as Zv}from"./index-f50b1567.js";import{s as au,a as ou,d as cu,b as uu,i as Ff,c as em,e as tm,f as ud,g as hu,p as rm,J as Pn,h as fu,j as lu,k as xn,l as gn,m as hd,n as du,H as Zn}from"./http-fb57a3a8.js";var pu={},za={},je={},fd={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});function t(y,I){var N=y>>>16&65535,P=y&65535,U=I>>>16&65535,K=I&65535;return P*K+(N*K+P*U<<16>>>0)|0}i.mul=Math.imul||t;function r(y,I){return y+I|0}i.add=r;function s(y,I){return y-I|0}i.sub=s;function o(y,I){return y<<I|y>>>32-I}i.rotl=o;function d(y,I){return y<<32-I|y>>>I}i.rotr=d;function O(y){return typeof y=="number"&&isFinite(y)&&Math.floor(y)===y}i.isInteger=Number.isInteger||O,i.MAX_SAFE_INTEGER=9007199254740991,i.isSafeInteger=function(y){return i.isInteger(y)&&y>=-i.MAX_SAFE_INTEGER&&y<=i.MAX_SAFE_INTEGER}})(fd);Object.defineProperty(je,"__esModule",{value:!0});var ld=fd;function nm(i,t){return t===void 0&&(t=0),(i[t+0]<<8|i[t+1])<<16>>16}je.readInt16BE=nm;function im(i,t){return t===void 0&&(t=0),(i[t+0]<<8|i[t+1])>>>0}je.readUint16BE=im;function sm(i,t){return t===void 0&&(t=0),(i[t+1]<<8|i[t])<<16>>16}je.readInt16LE=sm;function am(i,t){return t===void 0&&(t=0),(i[t+1]<<8|i[t])>>>0}je.readUint16LE=am;function dd(i,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=i>>>8,t[r+1]=i>>>0,t}je.writeUint16BE=dd;je.writeInt16BE=dd;function pd(i,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=i>>>0,t[r+1]=i>>>8,t}je.writeUint16LE=pd;je.writeInt16LE=pd;function zc(i,t){return t===void 0&&(t=0),i[t]<<24|i[t+1]<<16|i[t+2]<<8|i[t+3]}je.readInt32BE=zc;function Hc(i,t){return t===void 0&&(t=0),(i[t]<<24|i[t+1]<<16|i[t+2]<<8|i[t+3])>>>0}je.readUint32BE=Hc;function Bc(i,t){return t===void 0&&(t=0),i[t+3]<<24|i[t+2]<<16|i[t+1]<<8|i[t]}je.readInt32LE=Bc;function Kc(i,t){return t===void 0&&(t=0),(i[t+3]<<24|i[t+2]<<16|i[t+1]<<8|i[t])>>>0}je.readUint32LE=Kc;function Ra(i,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=i>>>24,t[r+1]=i>>>16,t[r+2]=i>>>8,t[r+3]=i>>>0,t}je.writeUint32BE=Ra;je.writeInt32BE=Ra;function Ua(i,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=i>>>0,t[r+1]=i>>>8,t[r+2]=i>>>16,t[r+3]=i>>>24,t}je.writeUint32LE=Ua;je.writeInt32LE=Ua;function om(i,t){t===void 0&&(t=0);var r=zc(i,t),s=zc(i,t+4);return r*4294967296+s-(s>>31)*4294967296}je.readInt64BE=om;function cm(i,t){t===void 0&&(t=0);var r=Hc(i,t),s=Hc(i,t+4);return r*4294967296+s}je.readUint64BE=cm;function um(i,t){t===void 0&&(t=0);var r=Bc(i,t),s=Bc(i,t+4);return s*4294967296+r-(r>>31)*4294967296}je.readInt64LE=um;function hm(i,t){t===void 0&&(t=0);var r=Kc(i,t),s=Kc(i,t+4);return s*4294967296+r}je.readUint64LE=hm;function gd(i,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),Ra(i/4294967296>>>0,t,r),Ra(i>>>0,t,r+4),t}je.writeUint64BE=gd;je.writeInt64BE=gd;function _d(i,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),Ua(i>>>0,t,r),Ua(i/4294967296>>>0,t,r+4),t}je.writeUint64LE=_d;je.writeInt64LE=_d;function fm(i,t,r){if(r===void 0&&(r=0),i%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(i/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,o=1,d=i/8+r-1;d>=r;d--)s+=t[d]*o,o*=256;return s}je.readUintBE=fm;function lm(i,t,r){if(r===void 0&&(r=0),i%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(i/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,o=1,d=r;d<r+i/8;d++)s+=t[d]*o,o*=256;return s}je.readUintLE=lm;function dm(i,t,r,s){if(r===void 0&&(r=new Uint8Array(i/8)),s===void 0&&(s=0),i%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!ld.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var o=1,d=i/8+s-1;d>=s;d--)r[d]=t/o&255,o*=256;return r}je.writeUintBE=dm;function pm(i,t,r,s){if(r===void 0&&(r=new Uint8Array(i/8)),s===void 0&&(s=0),i%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!ld.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var o=1,d=s;d<s+i/8;d++)r[d]=t/o&255,o*=256;return r}je.writeUintLE=pm;function gm(i,t){t===void 0&&(t=0);var r=new DataView(i.buffer,i.byteOffset,i.byteLength);return r.getFloat32(t)}je.readFloat32BE=gm;function _m(i,t){t===void 0&&(t=0);var r=new DataView(i.buffer,i.byteOffset,i.byteLength);return r.getFloat32(t,!0)}je.readFloat32LE=_m;function ym(i,t){t===void 0&&(t=0);var r=new DataView(i.buffer,i.byteOffset,i.byteLength);return r.getFloat64(t)}je.readFloat64BE=ym;function vm(i,t){t===void 0&&(t=0);var r=new DataView(i.buffer,i.byteOffset,i.byteLength);return r.getFloat64(t,!0)}je.readFloat64LE=vm;function mm(i,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat32(r,i),t}je.writeFloat32BE=mm;function bm(i,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat32(r,i,!0),t}je.writeFloat32LE=bm;function wm(i,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat64(r,i),t}je.writeFloat64BE=wm;function Em(i,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat64(r,i,!0),t}je.writeFloat64LE=Em;var xr={};Object.defineProperty(xr,"__esModule",{value:!0});function Sm(i){for(var t=0;t<i.length;t++)i[t]=0;return i}xr.wipe=Sm;Object.defineProperty(za,"__esModule",{value:!0});var er=je,Vc=xr,Dm=20;function Om(i,t,r){for(var s=1634760805,o=857760878,d=2036477234,O=1797285236,y=r[3]<<24|r[2]<<16|r[1]<<8|r[0],I=r[7]<<24|r[6]<<16|r[5]<<8|r[4],N=r[11]<<24|r[10]<<16|r[9]<<8|r[8],P=r[15]<<24|r[14]<<16|r[13]<<8|r[12],U=r[19]<<24|r[18]<<16|r[17]<<8|r[16],K=r[23]<<24|r[22]<<16|r[21]<<8|r[20],M=r[27]<<24|r[26]<<16|r[25]<<8|r[24],L=r[31]<<24|r[30]<<16|r[29]<<8|r[28],W=t[3]<<24|t[2]<<16|t[1]<<8|t[0],z=t[7]<<24|t[6]<<16|t[5]<<8|t[4],re=t[11]<<24|t[10]<<16|t[9]<<8|t[8],p=t[15]<<24|t[14]<<16|t[13]<<8|t[12],D=s,b=o,S=d,g=O,c=y,l=I,Y=N,h=P,_=U,w=K,C=M,E=L,v=W,$=z,H=re,Z=p,R=0;R<Dm;R+=2)D=D+c|0,v^=D,v=v>>>32-16|v<<16,_=_+v|0,c^=_,c=c>>>32-12|c<<12,b=b+l|0,$^=b,$=$>>>32-16|$<<16,w=w+$|0,l^=w,l=l>>>32-12|l<<12,S=S+Y|0,H^=S,H=H>>>32-16|H<<16,C=C+H|0,Y^=C,Y=Y>>>32-12|Y<<12,g=g+h|0,Z^=g,Z=Z>>>32-16|Z<<16,E=E+Z|0,h^=E,h=h>>>32-12|h<<12,S=S+Y|0,H^=S,H=H>>>32-8|H<<8,C=C+H|0,Y^=C,Y=Y>>>32-7|Y<<7,g=g+h|0,Z^=g,Z=Z>>>32-8|Z<<8,E=E+Z|0,h^=E,h=h>>>32-7|h<<7,b=b+l|0,$^=b,$=$>>>32-8|$<<8,w=w+$|0,l^=w,l=l>>>32-7|l<<7,D=D+c|0,v^=D,v=v>>>32-8|v<<8,_=_+v|0,c^=_,c=c>>>32-7|c<<7,D=D+l|0,Z^=D,Z=Z>>>32-16|Z<<16,C=C+Z|0,l^=C,l=l>>>32-12|l<<12,b=b+Y|0,v^=b,v=v>>>32-16|v<<16,E=E+v|0,Y^=E,Y=Y>>>32-12|Y<<12,S=S+h|0,$^=S,$=$>>>32-16|$<<16,_=_+$|0,h^=_,h=h>>>32-12|h<<12,g=g+c|0,H^=g,H=H>>>32-16|H<<16,w=w+H|0,c^=w,c=c>>>32-12|c<<12,S=S+h|0,$^=S,$=$>>>32-8|$<<8,_=_+$|0,h^=_,h=h>>>32-7|h<<7,g=g+c|0,H^=g,H=H>>>32-8|H<<8,w=w+H|0,c^=w,c=c>>>32-7|c<<7,b=b+Y|0,v^=b,v=v>>>32-8|v<<8,E=E+v|0,Y^=E,Y=Y>>>32-7|Y<<7,D=D+l|0,Z^=D,Z=Z>>>32-8|Z<<8,C=C+Z|0,l^=C,l=l>>>32-7|l<<7;er.writeUint32LE(D+s|0,i,0),er.writeUint32LE(b+o|0,i,4),er.writeUint32LE(S+d|0,i,8),er.writeUint32LE(g+O|0,i,12),er.writeUint32LE(c+y|0,i,16),er.writeUint32LE(l+I|0,i,20),er.writeUint32LE(Y+N|0,i,24),er.writeUint32LE(h+P|0,i,28),er.writeUint32LE(_+U|0,i,32),er.writeUint32LE(w+K|0,i,36),er.writeUint32LE(C+M|0,i,40),er.writeUint32LE(E+L|0,i,44),er.writeUint32LE(v+W|0,i,48),er.writeUint32LE($+z|0,i,52),er.writeUint32LE(H+re|0,i,56),er.writeUint32LE(Z+p|0,i,60)}function yd(i,t,r,s,o){if(o===void 0&&(o=0),i.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<r.length)throw new Error("ChaCha: destination is shorter than source");var d,O;if(o===0){if(t.length!==8&&t.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");d=new Uint8Array(16),O=d.length-t.length,d.set(t,O)}else{if(t.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");d=t,O=o}for(var y=new Uint8Array(64),I=0;I<r.length;I+=64){Om(y,d,i);for(var N=I;N<I+64&&N<r.length;N++)s[N]=r[N]^y[N-I];xm(d,0,O)}return Vc.wipe(y),o===0&&Vc.wipe(d),s}za.streamXOR=yd;function Im(i,t,r,s){return s===void 0&&(s=0),Vc.wipe(r),yd(i,t,r,r,s)}za.stream=Im;function xm(i,t,r){for(var s=1;r--;)s=s+(i[t]&255)|0,i[t]=s&255,s>>>=8,t++;if(s>0)throw new Error("ChaCha: counter overflow")}var vd={},Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});function Am(i,t,r){return~(i-1)&t|i-1&r}Tn.select=Am;function Cm(i,t){return(i|0)-(t|0)-1>>>31&1}Tn.lessOrEqual=Cm;function md(i,t){if(i.length!==t.length)return 0;for(var r=0,s=0;s<i.length;s++)r|=i[s]^t[s];return 1&r-1>>>8}Tn.compare=md;function Pm(i,t){return i.length===0||t.length===0?!1:md(i,t)!==0}Tn.equal=Pm;(function(i){Object.defineProperty(i,"__esModule",{value:!0});var t=Tn,r=xr;i.DIGEST_LENGTH=16;var s=function(){function O(y){this.digestLength=i.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var I=y[0]|y[1]<<8;this._r[0]=I&8191;var N=y[2]|y[3]<<8;this._r[1]=(I>>>13|N<<3)&8191;var P=y[4]|y[5]<<8;this._r[2]=(N>>>10|P<<6)&7939;var U=y[6]|y[7]<<8;this._r[3]=(P>>>7|U<<9)&8191;var K=y[8]|y[9]<<8;this._r[4]=(U>>>4|K<<12)&255,this._r[5]=K>>>1&8190;var M=y[10]|y[11]<<8;this._r[6]=(K>>>14|M<<2)&8191;var L=y[12]|y[13]<<8;this._r[7]=(M>>>11|L<<5)&8065;var W=y[14]|y[15]<<8;this._r[8]=(L>>>8|W<<8)&8191,this._r[9]=W>>>5&127,this._pad[0]=y[16]|y[17]<<8,this._pad[1]=y[18]|y[19]<<8,this._pad[2]=y[20]|y[21]<<8,this._pad[3]=y[22]|y[23]<<8,this._pad[4]=y[24]|y[25]<<8,this._pad[5]=y[26]|y[27]<<8,this._pad[6]=y[28]|y[29]<<8,this._pad[7]=y[30]|y[31]<<8}return O.prototype._blocks=function(y,I,N){for(var P=this._fin?0:2048,U=this._h[0],K=this._h[1],M=this._h[2],L=this._h[3],W=this._h[4],z=this._h[5],re=this._h[6],p=this._h[7],D=this._h[8],b=this._h[9],S=this._r[0],g=this._r[1],c=this._r[2],l=this._r[3],Y=this._r[4],h=this._r[5],_=this._r[6],w=this._r[7],C=this._r[8],E=this._r[9];N>=16;){var v=y[I+0]|y[I+1]<<8;U+=v&8191;var $=y[I+2]|y[I+3]<<8;K+=(v>>>13|$<<3)&8191;var H=y[I+4]|y[I+5]<<8;M+=($>>>10|H<<6)&8191;var Z=y[I+6]|y[I+7]<<8;L+=(H>>>7|Z<<9)&8191;var R=y[I+8]|y[I+9]<<8;W+=(Z>>>4|R<<12)&8191,z+=R>>>1&8191;var J=y[I+10]|y[I+11]<<8;re+=(R>>>14|J<<2)&8191;var te=y[I+12]|y[I+13]<<8;p+=(J>>>11|te<<5)&8191;var ae=y[I+14]|y[I+15]<<8;D+=(te>>>8|ae<<8)&8191,b+=ae>>>5|P;var ie=0,ye=ie;ye+=U*S,ye+=K*(5*E),ye+=M*(5*C),ye+=L*(5*w),ye+=W*(5*_),ie=ye>>>13,ye&=8191,ye+=z*(5*h),ye+=re*(5*Y),ye+=p*(5*l),ye+=D*(5*c),ye+=b*(5*g),ie+=ye>>>13,ye&=8191;var fe=ie;fe+=U*g,fe+=K*S,fe+=M*(5*E),fe+=L*(5*C),fe+=W*(5*w),ie=fe>>>13,fe&=8191,fe+=z*(5*_),fe+=re*(5*h),fe+=p*(5*Y),fe+=D*(5*l),fe+=b*(5*c),ie+=fe>>>13,fe&=8191;var me=ie;me+=U*c,me+=K*g,me+=M*S,me+=L*(5*E),me+=W*(5*C),ie=me>>>13,me&=8191,me+=z*(5*w),me+=re*(5*_),me+=p*(5*h),me+=D*(5*Y),me+=b*(5*l),ie+=me>>>13,me&=8191;var Q=ie;Q+=U*l,Q+=K*c,Q+=M*g,Q+=L*S,Q+=W*(5*E),ie=Q>>>13,Q&=8191,Q+=z*(5*C),Q+=re*(5*w),Q+=p*(5*_),Q+=D*(5*h),Q+=b*(5*Y),ie+=Q>>>13,Q&=8191;var X=ie;X+=U*Y,X+=K*l,X+=M*c,X+=L*g,X+=W*S,ie=X>>>13,X&=8191,X+=z*(5*E),X+=re*(5*C),X+=p*(5*w),X+=D*(5*_),X+=b*(5*h),ie+=X>>>13,X&=8191;var B=ie;B+=U*h,B+=K*Y,B+=M*l,B+=L*c,B+=W*g,ie=B>>>13,B&=8191,B+=z*S,B+=re*(5*E),B+=p*(5*C),B+=D*(5*w),B+=b*(5*_),ie+=B>>>13,B&=8191;var f=ie;f+=U*_,f+=K*h,f+=M*Y,f+=L*l,f+=W*c,ie=f>>>13,f&=8191,f+=z*g,f+=re*S,f+=p*(5*E),f+=D*(5*C),f+=b*(5*w),ie+=f>>>13,f&=8191;var j=ie;j+=U*w,j+=K*_,j+=M*h,j+=L*Y,j+=W*l,ie=j>>>13,j&=8191,j+=z*c,j+=re*g,j+=p*S,j+=D*(5*E),j+=b*(5*C),ie+=j>>>13,j&=8191;var he=ie;he+=U*C,he+=K*w,he+=M*_,he+=L*h,he+=W*Y,ie=he>>>13,he&=8191,he+=z*l,he+=re*c,he+=p*g,he+=D*S,he+=b*(5*E),ie+=he>>>13,he&=8191;var pe=ie;pe+=U*E,pe+=K*C,pe+=M*w,pe+=L*_,pe+=W*h,ie=pe>>>13,pe&=8191,pe+=z*Y,pe+=re*l,pe+=p*c,pe+=D*g,pe+=b*S,ie+=pe>>>13,pe&=8191,ie=(ie<<2)+ie|0,ie=ie+ye|0,ye=ie&8191,ie=ie>>>13,fe+=ie,U=ye,K=fe,M=me,L=Q,W=X,z=B,re=f,p=j,D=he,b=pe,I+=16,N-=16}this._h[0]=U,this._h[1]=K,this._h[2]=M,this._h[3]=L,this._h[4]=W,this._h[5]=z,this._h[6]=re,this._h[7]=p,this._h[8]=D,this._h[9]=b},O.prototype.finish=function(y,I){I===void 0&&(I=0);var N=new Uint16Array(10),P,U,K,M;if(this._leftover){for(M=this._leftover,this._buffer[M++]=1;M<16;M++)this._buffer[M]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(P=this._h[1]>>>13,this._h[1]&=8191,M=2;M<10;M++)this._h[M]+=P,P=this._h[M]>>>13,this._h[M]&=8191;for(this._h[0]+=P*5,P=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=P,P=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=P,N[0]=this._h[0]+5,P=N[0]>>>13,N[0]&=8191,M=1;M<10;M++)N[M]=this._h[M]+P,P=N[M]>>>13,N[M]&=8191;for(N[9]-=1<<13,U=(P^1)-1,M=0;M<10;M++)N[M]&=U;for(U=~U,M=0;M<10;M++)this._h[M]=this._h[M]&U|N[M];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,K=this._h[0]+this._pad[0],this._h[0]=K&65535,M=1;M<8;M++)K=(this._h[M]+this._pad[M]|0)+(K>>>16)|0,this._h[M]=K&65535;return y[I+0]=this._h[0]>>>0,y[I+1]=this._h[0]>>>8,y[I+2]=this._h[1]>>>0,y[I+3]=this._h[1]>>>8,y[I+4]=this._h[2]>>>0,y[I+5]=this._h[2]>>>8,y[I+6]=this._h[3]>>>0,y[I+7]=this._h[3]>>>8,y[I+8]=this._h[4]>>>0,y[I+9]=this._h[4]>>>8,y[I+10]=this._h[5]>>>0,y[I+11]=this._h[5]>>>8,y[I+12]=this._h[6]>>>0,y[I+13]=this._h[6]>>>8,y[I+14]=this._h[7]>>>0,y[I+15]=this._h[7]>>>8,this._finished=!0,this},O.prototype.update=function(y){var I=0,N=y.length,P;if(this._leftover){P=16-this._leftover,P>N&&(P=N);for(var U=0;U<P;U++)this._buffer[this._leftover+U]=y[I+U];if(N-=P,I+=P,this._leftover+=P,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(N>=16&&(P=N-N%16,this._blocks(y,I,P),I+=P,N-=P),N){for(var U=0;U<N;U++)this._buffer[this._leftover+U]=y[I+U];this._leftover+=N}return this},O.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var y=new Uint8Array(16);return this.finish(y),y},O.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},O}();i.Poly1305=s;function o(O,y){var I=new s(O);I.update(y);var N=I.digest();return I.clean(),N}i.oneTimeAuth=o;function d(O,y){return O.length!==i.DIGEST_LENGTH||y.length!==i.DIGEST_LENGTH?!1:t.equal(O,y)}i.equal=d})(vd);(function(i){Object.defineProperty(i,"__esModule",{value:!0});var t=za,r=vd,s=xr,o=je,d=Tn;i.KEY_LENGTH=32,i.NONCE_LENGTH=12,i.TAG_LENGTH=16;var O=new Uint8Array(16),y=function(){function I(N){if(this.nonceLength=i.NONCE_LENGTH,this.tagLength=i.TAG_LENGTH,N.length!==i.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(N)}return I.prototype.seal=function(N,P,U,K){if(N.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var M=new Uint8Array(16);M.set(N,M.length-N.length);var L=new Uint8Array(32);t.stream(this._key,M,L,4);var W=P.length+this.tagLength,z;if(K){if(K.length!==W)throw new Error("ChaCha20Poly1305: incorrect destination length");z=K}else z=new Uint8Array(W);return t.streamXOR(this._key,M,P,z,4),this._authenticate(z.subarray(z.length-this.tagLength,z.length),L,z.subarray(0,z.length-this.tagLength),U),s.wipe(M),z},I.prototype.open=function(N,P,U,K){if(N.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(P.length<this.tagLength)return null;var M=new Uint8Array(16);M.set(N,M.length-N.length);var L=new Uint8Array(32);t.stream(this._key,M,L,4);var W=new Uint8Array(this.tagLength);if(this._authenticate(W,L,P.subarray(0,P.length-this.tagLength),U),!d.equal(W,P.subarray(P.length-this.tagLength,P.length)))return null;var z=P.length-this.tagLength,re;if(K){if(K.length!==z)throw new Error("ChaCha20Poly1305: incorrect destination length");re=K}else re=new Uint8Array(z);return t.streamXOR(this._key,M,P.subarray(0,P.length-this.tagLength),re,4),s.wipe(M),re},I.prototype.clean=function(){return s.wipe(this._key),this},I.prototype._authenticate=function(N,P,U,K){var M=new r.Poly1305(P);K&&(M.update(K),K.length%16>0&&M.update(O.subarray(K.length%16))),M.update(U),U.length%16>0&&M.update(O.subarray(U.length%16));var L=new Uint8Array(8);K&&o.writeUint64LE(K.length,L),M.update(L),o.writeUint64LE(U.length,L),M.update(L);for(var W=M.digest(),z=0;z<W.length;z++)N[z]=W[z];M.clean(),s.wipe(W),s.wipe(L)},I}();i.ChaCha20Poly1305=y})(pu);var bd={},_s={},gu={};Object.defineProperty(gu,"__esModule",{value:!0});function Tm(i){return typeof i.saveState<"u"&&typeof i.restoreState<"u"&&typeof i.cleanSavedState<"u"}gu.isSerializableHash=Tm;Object.defineProperty(_s,"__esModule",{value:!0});var Zr=gu,Nm=Tn,Rm=xr,wd=function(){function i(t,r){this._finished=!1,this._inner=new t,this._outer=new t,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var s=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(s).clean():s.set(r);for(var o=0;o<s.length;o++)s[o]^=54;this._inner.update(s);for(var o=0;o<s.length;o++)s[o]^=106;this._outer.update(s),Zr.isSerializableHash(this._inner)&&Zr.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),Rm.wipe(s)}return i.prototype.reset=function(){if(!Zr.isSerializableHash(this._inner)||!Zr.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},i.prototype.clean=function(){Zr.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Zr.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},i.prototype.update=function(t){return this._inner.update(t),this},i.prototype.finish=function(t){return this._finished?(this._outer.finish(t),this):(this._inner.finish(t),this._outer.update(t.subarray(0,this.digestLength)).finish(t),this._finished=!0,this)},i.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},i.prototype.saveState=function(){if(!Zr.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},i.prototype.restoreState=function(t){if(!Zr.isSerializableHash(this._inner)||!Zr.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(t),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},i.prototype.cleanSavedState=function(t){if(!Zr.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(t)},i}();_s.HMAC=wd;function Um(i,t,r){var s=new wd(i,t);s.update(r);var o=s.digest();return s.clean(),o}_s.hmac=Um;_s.equal=Nm.equal;Object.defineProperty(bd,"__esModule",{value:!0});var jf=_s,$f=xr,Fm=function(){function i(t,r,s,o){s===void 0&&(s=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=t,this._info=o;var d=jf.hmac(this._hash,s,r);this._hmac=new jf.HMAC(t,d),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return i.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(t===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),t>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},i.prototype.expand=function(t){for(var r=new Uint8Array(t),s=0;s<r.length;s++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[s]=this._buffer[this._bufpos++];return r},i.prototype.clean=function(){this._hmac.clean(),$f.wipe(this._buffer),$f.wipe(this._counter),this._bufpos=0},i}(),jm=bd.HKDF=Fm,Ni={},Ha={},Ba={};Object.defineProperty(Ba,"__esModule",{value:!0});Ba.BrowserRandomSource=void 0;const Lf=65536;class $m{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const t=typeof self<"u"?self.crypto||self.msCrypto:null;t&&t.getRandomValues!==void 0&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(t);for(let s=0;s<r.length;s+=Lf)this._crypto.getRandomValues(r.subarray(s,s+Math.min(r.length-s,Lf)));return r}}Ba.BrowserRandomSource=$m;var Ka={};Object.defineProperty(Ka,"__esModule",{value:!0});Ka.NodeRandomSource=void 0;const Lm=xr;class Mm{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Jv<"u"){const t=Xv;t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(t);if(r.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");const s=new Uint8Array(t);for(let o=0;o<s.length;o++)s[o]=r[o];return(0,Lm.wipe)(r),s}}Ka.NodeRandomSource=Mm;Object.defineProperty(Ha,"__esModule",{value:!0});Ha.SystemRandomSource=void 0;const qm=Ba,zm=Ka;class Hm{constructor(){if(this.isAvailable=!1,this.name="",this._source=new qm.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new zm.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)}}Ha.SystemRandomSource=Hm;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.randomStringForEntropy=i.randomString=i.randomUint32=i.randomBytes=i.defaultRandomSource=void 0;const t=Ha,r=je,s=xr;i.defaultRandomSource=new t.SystemRandomSource;function o(N,P=i.defaultRandomSource){return P.randomBytes(N)}i.randomBytes=o;function d(N=i.defaultRandomSource){const P=o(4,N),U=(0,r.readUint32LE)(P);return(0,s.wipe)(P),U}i.randomUint32=d;const O="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function y(N,P=O,U=i.defaultRandomSource){if(P.length<2)throw new Error("randomString charset is too short");if(P.length>256)throw new Error("randomString charset is too long");let K="";const M=P.length,L=256-256%M;for(;N>0;){const W=o(Math.ceil(N*256/L),U);for(let z=0;z<W.length&&N>0;z++){const re=W[z];re<L&&(K+=P.charAt(re%M),N--)}(0,s.wipe)(W)}return K}i.randomString=y;function I(N,P=O,U=i.defaultRandomSource){const K=Math.ceil(N/(Math.log(P.length)/Math.LN2));return y(K,P,U)}i.randomStringForEntropy=I})(Ni);var Va={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var t=je,r=xr;i.DIGEST_LENGTH=32,i.BLOCK_SIZE=64;var s=function(){function y(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return y.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},y.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},y.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},y.prototype.update=function(I,N){if(N===void 0&&(N=I.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var P=0;if(this._bytesHashed+=N,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&N>0;)this._buffer[this._bufferLength++]=I[P++],N--;this._bufferLength===this.blockSize&&(d(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(N>=this.blockSize&&(P=d(this._temp,this._state,I,P,N),N%=this.blockSize);N>0;)this._buffer[this._bufferLength++]=I[P++],N--;return this},y.prototype.finish=function(I){if(!this._finished){var N=this._bytesHashed,P=this._bufferLength,U=N/536870912|0,K=N<<3,M=N%64<56?64:128;this._buffer[P]=128;for(var L=P+1;L<M-8;L++)this._buffer[L]=0;t.writeUint32BE(U,this._buffer,M-8),t.writeUint32BE(K,this._buffer,M-4),d(this._temp,this._state,this._buffer,0,M),this._finished=!0}for(var L=0;L<this.digestLength/4;L++)t.writeUint32BE(this._state[L],I,L*4);return this},y.prototype.digest=function(){var I=new Uint8Array(this.digestLength);return this.finish(I),I},y.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},y.prototype.restoreState=function(I){return this._state.set(I.state),this._bufferLength=I.bufferLength,I.buffer&&this._buffer.set(I.buffer),this._bytesHashed=I.bytesHashed,this._finished=!1,this},y.prototype.cleanSavedState=function(I){r.wipe(I.state),I.buffer&&r.wipe(I.buffer),I.bufferLength=0,I.bytesHashed=0},y}();i.SHA256=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function d(y,I,N,P,U){for(;U>=64;){for(var K=I[0],M=I[1],L=I[2],W=I[3],z=I[4],re=I[5],p=I[6],D=I[7],b=0;b<16;b++){var S=P+b*4;y[b]=t.readUint32BE(N,S)}for(var b=16;b<64;b++){var g=y[b-2],c=(g>>>17|g<<32-17)^(g>>>19|g<<32-19)^g>>>10;g=y[b-15];var l=(g>>>7|g<<32-7)^(g>>>18|g<<32-18)^g>>>3;y[b]=(c+y[b-7]|0)+(l+y[b-16]|0)}for(var b=0;b<64;b++){var c=(((z>>>6|z<<26)^(z>>>11|z<<21)^(z>>>25|z<<7))+(z&re^~z&p)|0)+(D+(o[b]+y[b]|0)|0)|0,l=((K>>>2|K<<32-2)^(K>>>13|K<<32-13)^(K>>>22|K<<32-22))+(K&M^K&L^M&L)|0;D=p,p=re,re=z,z=W+c|0,W=L,L=M,M=K,K=c+l|0}I[0]+=K,I[1]+=M,I[2]+=L,I[3]+=W,I[4]+=z,I[5]+=re,I[6]+=p,I[7]+=D,P+=64,U-=64}return P}function O(y){var I=new s;I.update(y);var N=I.digest();return I.clean(),N}i.hash=O})(Va);var _u={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.sharedKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.scalarMultBase=i.scalarMult=i.SHARED_KEY_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=void 0;const t=Ni,r=xr;i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=32,i.SHARED_KEY_LENGTH=32;function s(b){const S=new Float64Array(16);if(b)for(let g=0;g<b.length;g++)S[g]=b[g];return S}const o=new Uint8Array(32);o[0]=9;const d=s([56129,1]);function O(b){let S=1;for(let g=0;g<16;g++){let c=b[g]+S+65535;S=Math.floor(c/65536),b[g]=c-S*65536}b[0]+=S-1+37*(S-1)}function y(b,S,g){const c=~(g-1);for(let l=0;l<16;l++){const Y=c&(b[l]^S[l]);b[l]^=Y,S[l]^=Y}}function I(b,S){const g=s(),c=s();for(let l=0;l<16;l++)c[l]=S[l];O(c),O(c),O(c);for(let l=0;l<2;l++){g[0]=c[0]-65517;for(let h=1;h<15;h++)g[h]=c[h]-65535-(g[h-1]>>16&1),g[h-1]&=65535;g[15]=c[15]-32767-(g[14]>>16&1);const Y=g[15]>>16&1;g[14]&=65535,y(c,g,1-Y)}for(let l=0;l<16;l++)b[2*l]=c[l]&255,b[2*l+1]=c[l]>>8}function N(b,S){for(let g=0;g<16;g++)b[g]=S[2*g]+(S[2*g+1]<<8);b[15]&=32767}function P(b,S,g){for(let c=0;c<16;c++)b[c]=S[c]+g[c]}function U(b,S,g){for(let c=0;c<16;c++)b[c]=S[c]-g[c]}function K(b,S,g){let c,l,Y=0,h=0,_=0,w=0,C=0,E=0,v=0,$=0,H=0,Z=0,R=0,J=0,te=0,ae=0,ie=0,ye=0,fe=0,me=0,Q=0,X=0,B=0,f=0,j=0,he=0,pe=0,Oe=0,He=0,Ve=0,$e=0,_t=0,yt=0,Me=g[0],Ie=g[1],Re=g[2],Ue=g[3],qe=g[4],Ae=g[5],Fe=g[6],De=g[7],Ce=g[8],Be=g[9],xe=g[10],ke=g[11],We=g[12],et=g[13],tt=g[14],Je=g[15];c=S[0],Y+=c*Me,h+=c*Ie,_+=c*Re,w+=c*Ue,C+=c*qe,E+=c*Ae,v+=c*Fe,$+=c*De,H+=c*Ce,Z+=c*Be,R+=c*xe,J+=c*ke,te+=c*We,ae+=c*et,ie+=c*tt,ye+=c*Je,c=S[1],h+=c*Me,_+=c*Ie,w+=c*Re,C+=c*Ue,E+=c*qe,v+=c*Ae,$+=c*Fe,H+=c*De,Z+=c*Ce,R+=c*Be,J+=c*xe,te+=c*ke,ae+=c*We,ie+=c*et,ye+=c*tt,fe+=c*Je,c=S[2],_+=c*Me,w+=c*Ie,C+=c*Re,E+=c*Ue,v+=c*qe,$+=c*Ae,H+=c*Fe,Z+=c*De,R+=c*Ce,J+=c*Be,te+=c*xe,ae+=c*ke,ie+=c*We,ye+=c*et,fe+=c*tt,me+=c*Je,c=S[3],w+=c*Me,C+=c*Ie,E+=c*Re,v+=c*Ue,$+=c*qe,H+=c*Ae,Z+=c*Fe,R+=c*De,J+=c*Ce,te+=c*Be,ae+=c*xe,ie+=c*ke,ye+=c*We,fe+=c*et,me+=c*tt,Q+=c*Je,c=S[4],C+=c*Me,E+=c*Ie,v+=c*Re,$+=c*Ue,H+=c*qe,Z+=c*Ae,R+=c*Fe,J+=c*De,te+=c*Ce,ae+=c*Be,ie+=c*xe,ye+=c*ke,fe+=c*We,me+=c*et,Q+=c*tt,X+=c*Je,c=S[5],E+=c*Me,v+=c*Ie,$+=c*Re,H+=c*Ue,Z+=c*qe,R+=c*Ae,J+=c*Fe,te+=c*De,ae+=c*Ce,ie+=c*Be,ye+=c*xe,fe+=c*ke,me+=c*We,Q+=c*et,X+=c*tt,B+=c*Je,c=S[6],v+=c*Me,$+=c*Ie,H+=c*Re,Z+=c*Ue,R+=c*qe,J+=c*Ae,te+=c*Fe,ae+=c*De,ie+=c*Ce,ye+=c*Be,fe+=c*xe,me+=c*ke,Q+=c*We,X+=c*et,B+=c*tt,f+=c*Je,c=S[7],$+=c*Me,H+=c*Ie,Z+=c*Re,R+=c*Ue,J+=c*qe,te+=c*Ae,ae+=c*Fe,ie+=c*De,ye+=c*Ce,fe+=c*Be,me+=c*xe,Q+=c*ke,X+=c*We,B+=c*et,f+=c*tt,j+=c*Je,c=S[8],H+=c*Me,Z+=c*Ie,R+=c*Re,J+=c*Ue,te+=c*qe,ae+=c*Ae,ie+=c*Fe,ye+=c*De,fe+=c*Ce,me+=c*Be,Q+=c*xe,X+=c*ke,B+=c*We,f+=c*et,j+=c*tt,he+=c*Je,c=S[9],Z+=c*Me,R+=c*Ie,J+=c*Re,te+=c*Ue,ae+=c*qe,ie+=c*Ae,ye+=c*Fe,fe+=c*De,me+=c*Ce,Q+=c*Be,X+=c*xe,B+=c*ke,f+=c*We,j+=c*et,he+=c*tt,pe+=c*Je,c=S[10],R+=c*Me,J+=c*Ie,te+=c*Re,ae+=c*Ue,ie+=c*qe,ye+=c*Ae,fe+=c*Fe,me+=c*De,Q+=c*Ce,X+=c*Be,B+=c*xe,f+=c*ke,j+=c*We,he+=c*et,pe+=c*tt,Oe+=c*Je,c=S[11],J+=c*Me,te+=c*Ie,ae+=c*Re,ie+=c*Ue,ye+=c*qe,fe+=c*Ae,me+=c*Fe,Q+=c*De,X+=c*Ce,B+=c*Be,f+=c*xe,j+=c*ke,he+=c*We,pe+=c*et,Oe+=c*tt,He+=c*Je,c=S[12],te+=c*Me,ae+=c*Ie,ie+=c*Re,ye+=c*Ue,fe+=c*qe,me+=c*Ae,Q+=c*Fe,X+=c*De,B+=c*Ce,f+=c*Be,j+=c*xe,he+=c*ke,pe+=c*We,Oe+=c*et,He+=c*tt,Ve+=c*Je,c=S[13],ae+=c*Me,ie+=c*Ie,ye+=c*Re,fe+=c*Ue,me+=c*qe,Q+=c*Ae,X+=c*Fe,B+=c*De,f+=c*Ce,j+=c*Be,he+=c*xe,pe+=c*ke,Oe+=c*We,He+=c*et,Ve+=c*tt,$e+=c*Je,c=S[14],ie+=c*Me,ye+=c*Ie,fe+=c*Re,me+=c*Ue,Q+=c*qe,X+=c*Ae,B+=c*Fe,f+=c*De,j+=c*Ce,he+=c*Be,pe+=c*xe,Oe+=c*ke,He+=c*We,Ve+=c*et,$e+=c*tt,_t+=c*Je,c=S[15],ye+=c*Me,fe+=c*Ie,me+=c*Re,Q+=c*Ue,X+=c*qe,B+=c*Ae,f+=c*Fe,j+=c*De,he+=c*Ce,pe+=c*Be,Oe+=c*xe,He+=c*ke,Ve+=c*We,$e+=c*et,_t+=c*tt,yt+=c*Je,Y+=38*fe,h+=38*me,_+=38*Q,w+=38*X,C+=38*B,E+=38*f,v+=38*j,$+=38*he,H+=38*pe,Z+=38*Oe,R+=38*He,J+=38*Ve,te+=38*$e,ae+=38*_t,ie+=38*yt,l=1,c=Y+l+65535,l=Math.floor(c/65536),Y=c-l*65536,c=h+l+65535,l=Math.floor(c/65536),h=c-l*65536,c=_+l+65535,l=Math.floor(c/65536),_=c-l*65536,c=w+l+65535,l=Math.floor(c/65536),w=c-l*65536,c=C+l+65535,l=Math.floor(c/65536),C=c-l*65536,c=E+l+65535,l=Math.floor(c/65536),E=c-l*65536,c=v+l+65535,l=Math.floor(c/65536),v=c-l*65536,c=$+l+65535,l=Math.floor(c/65536),$=c-l*65536,c=H+l+65535,l=Math.floor(c/65536),H=c-l*65536,c=Z+l+65535,l=Math.floor(c/65536),Z=c-l*65536,c=R+l+65535,l=Math.floor(c/65536),R=c-l*65536,c=J+l+65535,l=Math.floor(c/65536),J=c-l*65536,c=te+l+65535,l=Math.floor(c/65536),te=c-l*65536,c=ae+l+65535,l=Math.floor(c/65536),ae=c-l*65536,c=ie+l+65535,l=Math.floor(c/65536),ie=c-l*65536,c=ye+l+65535,l=Math.floor(c/65536),ye=c-l*65536,Y+=l-1+37*(l-1),l=1,c=Y+l+65535,l=Math.floor(c/65536),Y=c-l*65536,c=h+l+65535,l=Math.floor(c/65536),h=c-l*65536,c=_+l+65535,l=Math.floor(c/65536),_=c-l*65536,c=w+l+65535,l=Math.floor(c/65536),w=c-l*65536,c=C+l+65535,l=Math.floor(c/65536),C=c-l*65536,c=E+l+65535,l=Math.floor(c/65536),E=c-l*65536,c=v+l+65535,l=Math.floor(c/65536),v=c-l*65536,c=$+l+65535,l=Math.floor(c/65536),$=c-l*65536,c=H+l+65535,l=Math.floor(c/65536),H=c-l*65536,c=Z+l+65535,l=Math.floor(c/65536),Z=c-l*65536,c=R+l+65535,l=Math.floor(c/65536),R=c-l*65536,c=J+l+65535,l=Math.floor(c/65536),J=c-l*65536,c=te+l+65535,l=Math.floor(c/65536),te=c-l*65536,c=ae+l+65535,l=Math.floor(c/65536),ae=c-l*65536,c=ie+l+65535,l=Math.floor(c/65536),ie=c-l*65536,c=ye+l+65535,l=Math.floor(c/65536),ye=c-l*65536,Y+=l-1+37*(l-1),b[0]=Y,b[1]=h,b[2]=_,b[3]=w,b[4]=C,b[5]=E,b[6]=v,b[7]=$,b[8]=H,b[9]=Z,b[10]=R,b[11]=J,b[12]=te,b[13]=ae,b[14]=ie,b[15]=ye}function M(b,S){K(b,S,S)}function L(b,S){const g=s();for(let c=0;c<16;c++)g[c]=S[c];for(let c=253;c>=0;c--)M(g,g),c!==2&&c!==4&&K(g,g,S);for(let c=0;c<16;c++)b[c]=g[c]}function W(b,S){const g=new Uint8Array(32),c=new Float64Array(80),l=s(),Y=s(),h=s(),_=s(),w=s(),C=s();for(let H=0;H<31;H++)g[H]=b[H];g[31]=b[31]&127|64,g[0]&=248,N(c,S);for(let H=0;H<16;H++)Y[H]=c[H];l[0]=_[0]=1;for(let H=254;H>=0;--H){const Z=g[H>>>3]>>>(H&7)&1;y(l,Y,Z),y(h,_,Z),P(w,l,h),U(l,l,h),P(h,Y,_),U(Y,Y,_),M(_,w),M(C,l),K(l,h,l),K(h,Y,w),P(w,l,h),U(l,l,h),M(Y,l),U(h,_,C),K(l,h,d),P(l,l,_),K(h,h,l),K(l,_,C),K(_,Y,c),M(Y,w),y(l,Y,Z),y(h,_,Z)}for(let H=0;H<16;H++)c[H+16]=l[H],c[H+32]=h[H],c[H+48]=Y[H],c[H+64]=_[H];const E=c.subarray(32),v=c.subarray(16);L(E,E),K(v,v,E);const $=new Uint8Array(32);return I($,v),$}i.scalarMult=W;function z(b){return W(b,o)}i.scalarMultBase=z;function re(b){if(b.length!==i.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${i.SECRET_KEY_LENGTH} bytes`);const S=new Uint8Array(b);return{publicKey:z(S),secretKey:S}}i.generateKeyPairFromSeed=re;function p(b){const S=(0,t.randomBytes)(32,b),g=re(S);return(0,r.wipe)(S),g}i.generateKeyPair=p;function D(b,S,g=!1){if(b.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(S.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const c=W(b,S);if(g){let l=0;for(let Y=0;Y<c.length;Y++)l|=c[Y];if(l===0)throw new Error("X25519: invalid shared key")}return c}i.sharedKey=D})(_u);function yu(i){return globalThis.Buffer!=null?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function Ed(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?yu(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function kc(i,t){t||(t=i.reduce((o,d)=>o+d.length,0));const r=Ed(t);let s=0;for(const o of i)r.set(o,s),s+=o.length;return yu(r)}function Bm(i,t){if(i.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var o=0;o<i.length;o++){var d=i.charAt(o),O=d.charCodeAt(0);if(r[O]!==255)throw new TypeError(d+" is ambiguous");r[O]=o}var y=i.length,I=i.charAt(0),N=Math.log(y)/Math.log(256),P=Math.log(256)/Math.log(y);function U(L){if(L instanceof Uint8Array||(ArrayBuffer.isView(L)?L=new Uint8Array(L.buffer,L.byteOffset,L.byteLength):Array.isArray(L)&&(L=Uint8Array.from(L))),!(L instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(L.length===0)return"";for(var W=0,z=0,re=0,p=L.length;re!==p&&L[re]===0;)re++,W++;for(var D=(p-re)*P+1>>>0,b=new Uint8Array(D);re!==p;){for(var S=L[re],g=0,c=D-1;(S!==0||g<z)&&c!==-1;c--,g++)S+=256*b[c]>>>0,b[c]=S%y>>>0,S=S/y>>>0;if(S!==0)throw new Error("Non-zero carry");z=g,re++}for(var l=D-z;l!==D&&b[l]===0;)l++;for(var Y=I.repeat(W);l<D;++l)Y+=i.charAt(b[l]);return Y}function K(L){if(typeof L!="string")throw new TypeError("Expected String");if(L.length===0)return new Uint8Array;var W=0;if(L[W]!==" "){for(var z=0,re=0;L[W]===I;)z++,W++;for(var p=(L.length-W)*N+1>>>0,D=new Uint8Array(p);L[W];){var b=r[L.charCodeAt(W)];if(b===255)return;for(var S=0,g=p-1;(b!==0||S<re)&&g!==-1;g--,S++)b+=y*D[g]>>>0,D[g]=b%256>>>0,b=b/256>>>0;if(b!==0)throw new Error("Non-zero carry");re=S,W++}if(L[W]!==" "){for(var c=p-re;c!==p&&D[c]===0;)c++;for(var l=new Uint8Array(z+(p-c)),Y=z;c!==p;)l[Y++]=D[c++];return l}}}function M(L){var W=K(L);if(W)return W;throw new Error(`Non-${t} character`)}return{encode:U,decodeUnsafe:K,decode:M}}var Km=Bm,Vm=Km;const km=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},Gm=i=>new TextEncoder().encode(i),Wm=i=>new TextDecoder().decode(i);class Ym{constructor(t,r,s){this.name=t,this.prefix=r,this.baseEncode=s}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Jm{constructor(t,r,s){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Sd(this,t)}}class Xm{constructor(t){this.decoders=t}or(t){return Sd(this,t)}decode(t){const r=t[0],s=this.decoders[r];if(s)return s.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Sd=(i,t)=>new Xm({...i.decoders||{[i.prefix]:i},...t.decoders||{[t.prefix]:t}});class Qm{constructor(t,r,s,o){this.name=t,this.prefix=r,this.baseEncode=s,this.baseDecode=o,this.encoder=new Ym(t,r,s),this.decoder=new Jm(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const ka=({name:i,prefix:t,encode:r,decode:s})=>new Qm(i,t,r,s),ys=({prefix:i,name:t,alphabet:r})=>{const{encode:s,decode:o}=Vm(r,t);return ka({prefix:i,name:t,encode:s,decode:d=>km(o(d))})},Zm=(i,t,r,s)=>{const o={};for(let P=0;P<t.length;++P)o[t[P]]=P;let d=i.length;for(;i[d-1]==="=";)--d;const O=new Uint8Array(d*r/8|0);let y=0,I=0,N=0;for(let P=0;P<d;++P){const U=o[i[P]];if(U===void 0)throw new SyntaxError(`Non-${s} character`);I=I<<r|U,y+=r,y>=8&&(y-=8,O[N++]=255&I>>y)}if(y>=r||255&I<<8-y)throw new SyntaxError("Unexpected end of data");return O},eb=(i,t,r)=>{const s=t[t.length-1]==="=",o=(1<<r)-1;let d="",O=0,y=0;for(let I=0;I<i.length;++I)for(y=y<<8|i[I],O+=8;O>r;)O-=r,d+=t[o&y>>O];if(O&&(d+=t[o&y<<r-O]),s)for(;d.length*r&7;)d+="=";return d},Jt=({name:i,prefix:t,bitsPerChar:r,alphabet:s})=>ka({prefix:t,name:i,encode(o){return eb(o,s,r)},decode(o){return Zm(o,s,r,i)}}),tb=ka({prefix:"\0",name:"identity",encode:i=>Wm(i),decode:i=>Gm(i)}),rb=Object.freeze(Object.defineProperty({__proto__:null,identity:tb},Symbol.toStringTag,{value:"Module"})),nb=Jt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),ib=Object.freeze(Object.defineProperty({__proto__:null,base2:nb},Symbol.toStringTag,{value:"Module"})),sb=Jt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),ab=Object.freeze(Object.defineProperty({__proto__:null,base8:sb},Symbol.toStringTag,{value:"Module"})),ob=ys({prefix:"9",name:"base10",alphabet:"0123456789"}),cb=Object.freeze(Object.defineProperty({__proto__:null,base10:ob},Symbol.toStringTag,{value:"Module"})),ub=Jt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),hb=Jt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),fb=Object.freeze(Object.defineProperty({__proto__:null,base16:ub,base16upper:hb},Symbol.toStringTag,{value:"Module"})),lb=Jt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),db=Jt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),pb=Jt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),gb=Jt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),_b=Jt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),yb=Jt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),vb=Jt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),mb=Jt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),bb=Jt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),wb=Object.freeze(Object.defineProperty({__proto__:null,base32:lb,base32hex:_b,base32hexpad:vb,base32hexpadupper:mb,base32hexupper:yb,base32pad:pb,base32padupper:gb,base32upper:db,base32z:bb},Symbol.toStringTag,{value:"Module"})),Eb=ys({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Sb=ys({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Db=Object.freeze(Object.defineProperty({__proto__:null,base36:Eb,base36upper:Sb},Symbol.toStringTag,{value:"Module"})),Ob=ys({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ib=ys({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),xb=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Ob,base58flickr:Ib},Symbol.toStringTag,{value:"Module"})),Ab=Jt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Cb=Jt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Pb=Jt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Tb=Jt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Nb=Object.freeze(Object.defineProperty({__proto__:null,base64:Ab,base64pad:Cb,base64url:Pb,base64urlpad:Tb},Symbol.toStringTag,{value:"Module"})),Dd=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),Rb=Dd.reduce((i,t,r)=>(i[r]=t,i),[]),Ub=Dd.reduce((i,t,r)=>(i[t.codePointAt(0)]=r,i),[]);function Fb(i){return i.reduce((t,r)=>(t+=Rb[r],t),"")}function jb(i){const t=[];for(const r of i){const s=Ub[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(s)}return new Uint8Array(t)}const $b=ka({prefix:"ðŸš€",name:"base256emoji",encode:Fb,decode:jb}),Lb=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:$b},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Mf={...rb,...ib,...ab,...cb,...fb,...wb,...Db,...xb,...Nb,...Lb};function Od(i,t,r,s){return{name:i,prefix:t,encoder:{name:i,prefix:t,encode:r},decoder:{decode:s}}}const qf=Od("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),wc=Od("ascii","a",i=>{let t="a";for(let r=0;r<i.length;r++)t+=String.fromCharCode(i[r]);return t},i=>{i=i.substring(1);const t=Ed(i.length);for(let r=0;r<i.length;r++)t[r]=i.charCodeAt(r);return t}),Id={utf8:qf,"utf-8":qf,hex:Mf.base16,latin1:wc,ascii:wc,binary:wc,...Mf};function mr(i,t="utf8"){const r=Id[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?yu(globalThis.Buffer.from(i,"utf-8")):r.decoder.decode(`${r.prefix}${i}`)}function fr(i,t="utf8"){const r=Id[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(i.buffer,i.byteOffset,i.byteLength).toString("utf8"):r.encoder.encode(i).substring(1)}var Se={},Pi={},Mb={get exports(){return Pi},set exports(i){Pi=i}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(i){var t,r,s,o,d,O,y,I,N,P,U,K,M,L,W,z,re,p,D,b,S,g,c;(function(l){var Y=typeof ur=="object"?ur:typeof self=="object"?self:typeof this=="object"?this:{};l(h(Y,h(i.exports)));function h(_,w){return _!==Y&&(typeof Object.create=="function"?Object.defineProperty(_,"__esModule",{value:!0}):_.__esModule=!0),function(C,E){return _[C]=w?w(C,E):E}}})(function(l){var Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,_){h.__proto__=_}||function(h,_){for(var w in _)_.hasOwnProperty(w)&&(h[w]=_[w])};t=function(h,_){Y(h,_);function w(){this.constructor=h}h.prototype=_===null?Object.create(_):(w.prototype=_.prototype,new w)},r=Object.assign||function(h){for(var _,w=1,C=arguments.length;w<C;w++){_=arguments[w];for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(h[E]=_[E])}return h},s=function(h,_){var w={};for(var C in h)Object.prototype.hasOwnProperty.call(h,C)&&_.indexOf(C)<0&&(w[C]=h[C]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var E=0,C=Object.getOwnPropertySymbols(h);E<C.length;E++)_.indexOf(C[E])<0&&Object.prototype.propertyIsEnumerable.call(h,C[E])&&(w[C[E]]=h[C[E]]);return w},o=function(h,_,w,C){var E=arguments.length,v=E<3?_:C===null?C=Object.getOwnPropertyDescriptor(_,w):C,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(h,_,w,C);else for(var H=h.length-1;H>=0;H--)($=h[H])&&(v=(E<3?$(v):E>3?$(_,w,v):$(_,w))||v);return E>3&&v&&Object.defineProperty(_,w,v),v},d=function(h,_){return function(w,C){_(w,C,h)}},O=function(h,_){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(h,_)},y=function(h,_,w,C){function E(v){return v instanceof w?v:new w(function($){$(v)})}return new(w||(w=Promise))(function(v,$){function H(J){try{R(C.next(J))}catch(te){$(te)}}function Z(J){try{R(C.throw(J))}catch(te){$(te)}}function R(J){J.done?v(J.value):E(J.value).then(H,Z)}R((C=C.apply(h,_||[])).next())})},I=function(h,_){var w={label:0,sent:function(){if(v[0]&1)throw v[1];return v[1]},trys:[],ops:[]},C,E,v,$;return $={next:H(0),throw:H(1),return:H(2)},typeof Symbol=="function"&&($[Symbol.iterator]=function(){return this}),$;function H(R){return function(J){return Z([R,J])}}function Z(R){if(C)throw new TypeError("Generator is already executing.");for(;w;)try{if(C=1,E&&(v=R[0]&2?E.return:R[0]?E.throw||((v=E.return)&&v.call(E),0):E.next)&&!(v=v.call(E,R[1])).done)return v;switch(E=0,v&&(R=[R[0]&2,v.value]),R[0]){case 0:case 1:v=R;break;case 4:return w.label++,{value:R[1],done:!1};case 5:w.label++,E=R[1],R=[0];continue;case 7:R=w.ops.pop(),w.trys.pop();continue;default:if(v=w.trys,!(v=v.length>0&&v[v.length-1])&&(R[0]===6||R[0]===2)){w=0;continue}if(R[0]===3&&(!v||R[1]>v[0]&&R[1]<v[3])){w.label=R[1];break}if(R[0]===6&&w.label<v[1]){w.label=v[1],v=R;break}if(v&&w.label<v[2]){w.label=v[2],w.ops.push(R);break}v[2]&&w.ops.pop(),w.trys.pop();continue}R=_.call(h,w)}catch(J){R=[6,J],E=0}finally{C=v=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}},c=function(h,_,w,C){C===void 0&&(C=w),h[C]=_[w]},N=function(h,_){for(var w in h)w!=="default"&&!_.hasOwnProperty(w)&&(_[w]=h[w])},P=function(h){var _=typeof Symbol=="function"&&Symbol.iterator,w=_&&h[_],C=0;if(w)return w.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&C>=h.length&&(h=void 0),{value:h&&h[C++],done:!h}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")},U=function(h,_){var w=typeof Symbol=="function"&&h[Symbol.iterator];if(!w)return h;var C=w.call(h),E,v=[],$;try{for(;(_===void 0||_-- >0)&&!(E=C.next()).done;)v.push(E.value)}catch(H){$={error:H}}finally{try{E&&!E.done&&(w=C.return)&&w.call(C)}finally{if($)throw $.error}}return v},K=function(){for(var h=[],_=0;_<arguments.length;_++)h=h.concat(U(arguments[_]));return h},M=function(){for(var h=0,_=0,w=arguments.length;_<w;_++)h+=arguments[_].length;for(var C=Array(h),E=0,_=0;_<w;_++)for(var v=arguments[_],$=0,H=v.length;$<H;$++,E++)C[E]=v[$];return C},L=function(h){return this instanceof L?(this.v=h,this):new L(h)},W=function(h,_,w){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C=w.apply(h,_||[]),E,v=[];return E={},$("next"),$("throw"),$("return"),E[Symbol.asyncIterator]=function(){return this},E;function $(ae){C[ae]&&(E[ae]=function(ie){return new Promise(function(ye,fe){v.push([ae,ie,ye,fe])>1||H(ae,ie)})})}function H(ae,ie){try{Z(C[ae](ie))}catch(ye){te(v[0][3],ye)}}function Z(ae){ae.value instanceof L?Promise.resolve(ae.value.v).then(R,J):te(v[0][2],ae)}function R(ae){H("next",ae)}function J(ae){H("throw",ae)}function te(ae,ie){ae(ie),v.shift(),v.length&&H(v[0][0],v[0][1])}},z=function(h){var _,w;return _={},C("next"),C("throw",function(E){throw E}),C("return"),_[Symbol.iterator]=function(){return this},_;function C(E,v){_[E]=h[E]?function($){return(w=!w)?{value:L(h[E]($)),done:E==="return"}:v?v($):$}:v}},re=function(h){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _=h[Symbol.asyncIterator],w;return _?_.call(h):(h=typeof P=="function"?P(h):h[Symbol.iterator](),w={},C("next"),C("throw"),C("return"),w[Symbol.asyncIterator]=function(){return this},w);function C(v){w[v]=h[v]&&function($){return new Promise(function(H,Z){$=h[v]($),E(H,Z,$.done,$.value)})}}function E(v,$,H,Z){Promise.resolve(Z).then(function(R){v({value:R,done:H})},$)}},p=function(h,_){return Object.defineProperty?Object.defineProperty(h,"raw",{value:_}):h.raw=_,h},D=function(h){if(h&&h.__esModule)return h;var _={};if(h!=null)for(var w in h)Object.hasOwnProperty.call(h,w)&&(_[w]=h[w]);return _.default=h,_},b=function(h){return h&&h.__esModule?h:{default:h}},S=function(h,_){if(!_.has(h))throw new TypeError("attempted to get private field on non-instance");return _.get(h)},g=function(h,_,w){if(!_.has(h))throw new TypeError("attempted to set private field on non-instance");return _.set(h,w),w},l("__extends",t),l("__assign",r),l("__rest",s),l("__decorate",o),l("__param",d),l("__metadata",O),l("__awaiter",y),l("__generator",I),l("__exportStar",N),l("__createBinding",c),l("__values",P),l("__read",U),l("__spread",K),l("__spreadArrays",M),l("__await",L),l("__asyncGenerator",W),l("__asyncDelegator",z),l("__asyncValues",re),l("__makeTemplateObject",p),l("__importStar",D),l("__importDefault",b),l("__classPrivateFieldGet",S),l("__classPrivateFieldSet",g)})})(Mb);var Ec={},rs={},zf;function qb(){if(zf)return rs;zf=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.delay=void 0;function i(t){return new Promise(r=>{setTimeout(()=>{r(!0)},t)})}return rs.delay=i,rs}var Gn={},Sc={},Wn={},Hf;function zb(){return Hf||(Hf=1,Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.ONE_THOUSAND=Wn.ONE_HUNDRED=void 0,Wn.ONE_HUNDRED=100,Wn.ONE_THOUSAND=1e3),Wn}var Dc={},Bf;function Hb(){return Bf||(Bf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ONE_YEAR=i.FOUR_WEEKS=i.THREE_WEEKS=i.TWO_WEEKS=i.ONE_WEEK=i.THIRTY_DAYS=i.SEVEN_DAYS=i.FIVE_DAYS=i.THREE_DAYS=i.ONE_DAY=i.TWENTY_FOUR_HOURS=i.TWELVE_HOURS=i.SIX_HOURS=i.THREE_HOURS=i.ONE_HOUR=i.SIXTY_MINUTES=i.THIRTY_MINUTES=i.TEN_MINUTES=i.FIVE_MINUTES=i.ONE_MINUTE=i.SIXTY_SECONDS=i.THIRTY_SECONDS=i.TEN_SECONDS=i.FIVE_SECONDS=i.ONE_SECOND=void 0,i.ONE_SECOND=1,i.FIVE_SECONDS=5,i.TEN_SECONDS=10,i.THIRTY_SECONDS=30,i.SIXTY_SECONDS=60,i.ONE_MINUTE=i.SIXTY_SECONDS,i.FIVE_MINUTES=i.ONE_MINUTE*5,i.TEN_MINUTES=i.ONE_MINUTE*10,i.THIRTY_MINUTES=i.ONE_MINUTE*30,i.SIXTY_MINUTES=i.ONE_MINUTE*60,i.ONE_HOUR=i.SIXTY_MINUTES,i.THREE_HOURS=i.ONE_HOUR*3,i.SIX_HOURS=i.ONE_HOUR*6,i.TWELVE_HOURS=i.ONE_HOUR*12,i.TWENTY_FOUR_HOURS=i.ONE_HOUR*24,i.ONE_DAY=i.TWENTY_FOUR_HOURS,i.THREE_DAYS=i.ONE_DAY*3,i.FIVE_DAYS=i.ONE_DAY*5,i.SEVEN_DAYS=i.ONE_DAY*7,i.THIRTY_DAYS=i.ONE_DAY*30,i.ONE_WEEK=i.SEVEN_DAYS,i.TWO_WEEKS=i.ONE_WEEK*2,i.THREE_WEEKS=i.ONE_WEEK*3,i.FOUR_WEEKS=i.ONE_WEEK*4,i.ONE_YEAR=i.ONE_DAY*365}(Dc)),Dc}var Kf;function xd(){return Kf||(Kf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const t=Pi;t.__exportStar(zb(),i),t.__exportStar(Hb(),i)}(Sc)),Sc}var Vf;function Bb(){if(Vf)return Gn;Vf=1,Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.fromMiliseconds=Gn.toMiliseconds=void 0;const i=xd();function t(s){return s*i.ONE_THOUSAND}Gn.toMiliseconds=t;function r(s){return Math.floor(s/i.ONE_THOUSAND)}return Gn.fromMiliseconds=r,Gn}var kf;function Kb(){return kf||(kf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const t=Pi;t.__exportStar(qb(),i),t.__exportStar(Bb(),i)}(Ec)),Ec}var Ii={},Gf;function Vb(){if(Gf)return Ii;Gf=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.Watch=void 0;class i{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const s=this.get(r);if(typeof s.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const o=Date.now()-s.started;this.timestamps.set(r,{started:s.started,elapsed:o})}get(r){const s=this.timestamps.get(r);if(typeof s>"u")throw new Error(`No timestamp found for label: ${r}`);return s}elapsed(r){const s=this.get(r);return s.elapsed||Date.now()-s.started}}return Ii.Watch=i,Ii.default=i,Ii}var Oc={},ns={},Wf;function kb(){if(Wf)return ns;Wf=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.IWatch=void 0;class i{}return ns.IWatch=i,ns}var Yf;function Gb(){return Yf||(Yf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),Pi.__exportStar(kb(),i)}(Oc)),Oc}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const t=Pi;t.__exportStar(Kb(),i),t.__exportStar(Vb(),i),t.__exportStar(Gb(),i),t.__exportStar(xd(),i)})(Se);var ft={};Object.defineProperty(ft,"__esModule",{value:!0});ft.getLocalStorage=ft.getLocalStorageOrThrow=ft.getCrypto=ft.getCryptoOrThrow=ft.getLocation=ft.getLocationOrThrow=ft.getNavigator=ft.getNavigatorOrThrow=ft.getDocument=ft.getDocumentOrThrow=ft.getFromWindowOrThrow=ft.getFromWindow=void 0;function ei(i){let t;return typeof window<"u"&&typeof window[i]<"u"&&(t=window[i]),t}ft.getFromWindow=ei;function Ri(i){const t=ei(i);if(!t)throw new Error(`${i} is not defined in Window`);return t}ft.getFromWindowOrThrow=Ri;function Wb(){return Ri("document")}ft.getDocumentOrThrow=Wb;function Yb(){return ei("document")}ft.getDocument=Yb;function Jb(){return Ri("navigator")}ft.getNavigatorOrThrow=Jb;function Xb(){return ei("navigator")}ft.getNavigator=Xb;function Qb(){return Ri("location")}ft.getLocationOrThrow=Qb;function Zb(){return ei("location")}ft.getLocation=Zb;function ew(){return Ri("crypto")}ft.getCryptoOrThrow=ew;function tw(){return ei("crypto")}ft.getCrypto=tw;function rw(){return Ri("localStorage")}ft.getLocalStorageOrThrow=rw;function nw(){return ei("localStorage")}ft.getLocalStorage=nw;var vu={};Object.defineProperty(vu,"__esModule",{value:!0});vu.getWindowMetadata=void 0;const Jf=ft;function iw(){let i,t;try{i=Jf.getDocumentOrThrow(),t=Jf.getLocationOrThrow()}catch{return null}function r(){const U=i.getElementsByTagName("link"),K=[];for(let M=0;M<U.length;M++){const L=U[M],W=L.getAttribute("rel");if(W&&W.toLowerCase().indexOf("icon")>-1){const z=L.getAttribute("href");if(z)if(z.toLowerCase().indexOf("https:")===-1&&z.toLowerCase().indexOf("http:")===-1&&z.indexOf("//")!==0){let re=t.protocol+"//"+t.host;if(z.indexOf("/")===0)re+=z;else{const p=t.pathname.split("/");p.pop();const D=p.join("/");re+=D+"/"+z}K.push(re)}else if(z.indexOf("//")===0){const re=t.protocol+z;K.push(re)}else K.push(z)}}return K}function s(...U){const K=i.getElementsByTagName("meta");for(let M=0;M<K.length;M++){const L=K[M],W=["itemprop","property","name"].map(z=>L.getAttribute(z)).filter(z=>z?U.includes(z):!1);if(W.length&&W){const z=L.getAttribute("content");if(z)return z}}return""}function o(){let U=s("name","og:site_name","og:title","twitter:title");return U||(U=i.title),U}function d(){return s("description","og:description","twitter:description","keywords")}const O=o(),y=d(),I=t.origin,N=r();return{description:y,url:I,icons:N,name:O}}vu.getWindowMetadata=iw;var sw={},mu=function(i,t){for(var r={},s=Object.keys(i),o=Array.isArray(t),d=0;d<s.length;d++){var O=s[d],y=i[O];(o?t.indexOf(O)!==-1:t(O,y,i))&&(r[O]=y)}return r};(function(i){const t=ou,r=cu,s=au,o=mu,d=p=>p==null,O=Symbol("encodeFragmentIdentifier");function y(p){switch(p.arrayFormat){case"index":return D=>(b,S)=>{const g=b.length;return S===void 0||p.skipNull&&S===null||p.skipEmptyString&&S===""?b:S===null?[...b,[P(D,p),"[",g,"]"].join("")]:[...b,[P(D,p),"[",P(g,p),"]=",P(S,p)].join("")]};case"bracket":return D=>(b,S)=>S===void 0||p.skipNull&&S===null||p.skipEmptyString&&S===""?b:S===null?[...b,[P(D,p),"[]"].join("")]:[...b,[P(D,p),"[]=",P(S,p)].join("")];case"colon-list-separator":return D=>(b,S)=>S===void 0||p.skipNull&&S===null||p.skipEmptyString&&S===""?b:S===null?[...b,[P(D,p),":list="].join("")]:[...b,[P(D,p),":list=",P(S,p)].join("")];case"comma":case"separator":case"bracket-separator":{const D=p.arrayFormat==="bracket-separator"?"[]=":"=";return b=>(S,g)=>g===void 0||p.skipNull&&g===null||p.skipEmptyString&&g===""?S:(g=g===null?"":g,S.length===0?[[P(b,p),D,P(g,p)].join("")]:[[S,P(g,p)].join(p.arrayFormatSeparator)])}default:return D=>(b,S)=>S===void 0||p.skipNull&&S===null||p.skipEmptyString&&S===""?b:S===null?[...b,P(D,p)]:[...b,[P(D,p),"=",P(S,p)].join("")]}}function I(p){let D;switch(p.arrayFormat){case"index":return(b,S,g)=>{if(D=/\[(\d*)\]$/.exec(b),b=b.replace(/\[\d*\]$/,""),!D){g[b]=S;return}g[b]===void 0&&(g[b]={}),g[b][D[1]]=S};case"bracket":return(b,S,g)=>{if(D=/(\[\])$/.exec(b),b=b.replace(/\[\]$/,""),!D){g[b]=S;return}if(g[b]===void 0){g[b]=[S];return}g[b]=[].concat(g[b],S)};case"colon-list-separator":return(b,S,g)=>{if(D=/(:list)$/.exec(b),b=b.replace(/:list$/,""),!D){g[b]=S;return}if(g[b]===void 0){g[b]=[S];return}g[b]=[].concat(g[b],S)};case"comma":case"separator":return(b,S,g)=>{const c=typeof S=="string"&&S.includes(p.arrayFormatSeparator),l=typeof S=="string"&&!c&&U(S,p).includes(p.arrayFormatSeparator);S=l?U(S,p):S;const Y=c||l?S.split(p.arrayFormatSeparator).map(h=>U(h,p)):S===null?S:U(S,p);g[b]=Y};case"bracket-separator":return(b,S,g)=>{const c=/(\[\])$/.test(b);if(b=b.replace(/\[\]$/,""),!c){g[b]=S&&U(S,p);return}const l=S===null?[]:S.split(p.arrayFormatSeparator).map(Y=>U(Y,p));if(g[b]===void 0){g[b]=l;return}g[b]=[].concat(g[b],l)};default:return(b,S,g)=>{if(g[b]===void 0){g[b]=S;return}g[b]=[].concat(g[b],S)}}}function N(p){if(typeof p!="string"||p.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function P(p,D){return D.encode?D.strict?t(p):encodeURIComponent(p):p}function U(p,D){return D.decode?r(p):p}function K(p){return Array.isArray(p)?p.sort():typeof p=="object"?K(Object.keys(p)).sort((D,b)=>Number(D)-Number(b)).map(D=>p[D]):p}function M(p){const D=p.indexOf("#");return D!==-1&&(p=p.slice(0,D)),p}function L(p){let D="";const b=p.indexOf("#");return b!==-1&&(D=p.slice(b)),D}function W(p){p=M(p);const D=p.indexOf("?");return D===-1?"":p.slice(D+1)}function z(p,D){return D.parseNumbers&&!Number.isNaN(Number(p))&&typeof p=="string"&&p.trim()!==""?p=Number(p):D.parseBooleans&&p!==null&&(p.toLowerCase()==="true"||p.toLowerCase()==="false")&&(p=p.toLowerCase()==="true"),p}function re(p,D){D=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},D),N(D.arrayFormatSeparator);const b=I(D),S=Object.create(null);if(typeof p!="string"||(p=p.trim().replace(/^[?#&]/,""),!p))return S;for(const g of p.split("&")){if(g==="")continue;let[c,l]=s(D.decode?g.replace(/\+/g," "):g,"=");l=l===void 0?null:["comma","separator","bracket-separator"].includes(D.arrayFormat)?l:U(l,D),b(U(c,D),l,S)}for(const g of Object.keys(S)){const c=S[g];if(typeof c=="object"&&c!==null)for(const l of Object.keys(c))c[l]=z(c[l],D);else S[g]=z(c,D)}return D.sort===!1?S:(D.sort===!0?Object.keys(S).sort():Object.keys(S).sort(D.sort)).reduce((g,c)=>{const l=S[c];return Boolean(l)&&typeof l=="object"&&!Array.isArray(l)?g[c]=K(l):g[c]=l,g},Object.create(null))}i.extract=W,i.parse=re,i.stringify=(p,D)=>{if(!p)return"";D=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},D),N(D.arrayFormatSeparator);const b=l=>D.skipNull&&d(p[l])||D.skipEmptyString&&p[l]==="",S=y(D),g={};for(const l of Object.keys(p))b(l)||(g[l]=p[l]);const c=Object.keys(g);return D.sort!==!1&&c.sort(D.sort),c.map(l=>{const Y=p[l];return Y===void 0?"":Y===null?P(l,D):Array.isArray(Y)?Y.length===0&&D.arrayFormat==="bracket-separator"?P(l,D)+"[]":Y.reduce(S(l),[]).join("&"):P(l,D)+"="+P(Y,D)}).filter(l=>l.length>0).join("&")},i.parseUrl=(p,D)=>{D=Object.assign({decode:!0},D);const[b,S]=s(p,"#");return Object.assign({url:b.split("?")[0]||"",query:re(W(p),D)},D&&D.parseFragmentIdentifier&&S?{fragmentIdentifier:U(S,D)}:{})},i.stringifyUrl=(p,D)=>{D=Object.assign({encode:!0,strict:!0,[O]:!0},D);const b=M(p.url).split("?")[0]||"",S=i.extract(p.url),g=i.parse(S,{sort:!1}),c=Object.assign(g,p.query);let l=i.stringify(c,D);l&&(l=`?${l}`);let Y=L(p.url);return p.fragmentIdentifier&&(Y=`#${D[O]?P(p.fragmentIdentifier,D):p.fragmentIdentifier}`),`${b}${l}${Y}`},i.pick=(p,D,b)=>{b=Object.assign({parseFragmentIdentifier:!0,[O]:!1},b);const{url:S,query:g,fragmentIdentifier:c}=i.parseUrl(p,b);return i.stringifyUrl({url:S,query:o(g,D),fragmentIdentifier:c},b)},i.exclude=(p,D,b)=>{const S=Array.isArray(D)?g=>!D.includes(g):(g,c)=>!D(g,c);return i.pick(p,S,b)}})(sw);const aw={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function ow(i,t=[]){const r=[];return Object.keys(i).forEach(s=>{if(t.length&&!t.includes(s))return;const o=i[s];r.push(...o.accounts)}),r}const cw={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function uw(i,t){const{message:r,code:s}=cw[i];return{message:t?`${r} ${t}`:r,code:s}}function Gc(i,t){return Array.isArray(i)?typeof t<"u"&&i.length?i.every(t):!0:!1}var Ga={},Fa={},hw={get exports(){return Fa},set exports(i){Fa=i}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(i){var t,r,s,o,d,O,y,I,N,P,U,K,M,L,W,z,re,p,D,b,S,g,c;(function(l){var Y=typeof ur=="object"?ur:typeof self=="object"?self:typeof this=="object"?this:{};l(h(Y,h(i.exports)));function h(_,w){return _!==Y&&(typeof Object.create=="function"?Object.defineProperty(_,"__esModule",{value:!0}):_.__esModule=!0),function(C,E){return _[C]=w?w(C,E):E}}})(function(l){var Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,_){h.__proto__=_}||function(h,_){for(var w in _)_.hasOwnProperty(w)&&(h[w]=_[w])};t=function(h,_){Y(h,_);function w(){this.constructor=h}h.prototype=_===null?Object.create(_):(w.prototype=_.prototype,new w)},r=Object.assign||function(h){for(var _,w=1,C=arguments.length;w<C;w++){_=arguments[w];for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(h[E]=_[E])}return h},s=function(h,_){var w={};for(var C in h)Object.prototype.hasOwnProperty.call(h,C)&&_.indexOf(C)<0&&(w[C]=h[C]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var E=0,C=Object.getOwnPropertySymbols(h);E<C.length;E++)_.indexOf(C[E])<0&&Object.prototype.propertyIsEnumerable.call(h,C[E])&&(w[C[E]]=h[C[E]]);return w},o=function(h,_,w,C){var E=arguments.length,v=E<3?_:C===null?C=Object.getOwnPropertyDescriptor(_,w):C,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(h,_,w,C);else for(var H=h.length-1;H>=0;H--)($=h[H])&&(v=(E<3?$(v):E>3?$(_,w,v):$(_,w))||v);return E>3&&v&&Object.defineProperty(_,w,v),v},d=function(h,_){return function(w,C){_(w,C,h)}},O=function(h,_){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(h,_)},y=function(h,_,w,C){function E(v){return v instanceof w?v:new w(function($){$(v)})}return new(w||(w=Promise))(function(v,$){function H(J){try{R(C.next(J))}catch(te){$(te)}}function Z(J){try{R(C.throw(J))}catch(te){$(te)}}function R(J){J.done?v(J.value):E(J.value).then(H,Z)}R((C=C.apply(h,_||[])).next())})},I=function(h,_){var w={label:0,sent:function(){if(v[0]&1)throw v[1];return v[1]},trys:[],ops:[]},C,E,v,$;return $={next:H(0),throw:H(1),return:H(2)},typeof Symbol=="function"&&($[Symbol.iterator]=function(){return this}),$;function H(R){return function(J){return Z([R,J])}}function Z(R){if(C)throw new TypeError("Generator is already executing.");for(;w;)try{if(C=1,E&&(v=R[0]&2?E.return:R[0]?E.throw||((v=E.return)&&v.call(E),0):E.next)&&!(v=v.call(E,R[1])).done)return v;switch(E=0,v&&(R=[R[0]&2,v.value]),R[0]){case 0:case 1:v=R;break;case 4:return w.label++,{value:R[1],done:!1};case 5:w.label++,E=R[1],R=[0];continue;case 7:R=w.ops.pop(),w.trys.pop();continue;default:if(v=w.trys,!(v=v.length>0&&v[v.length-1])&&(R[0]===6||R[0]===2)){w=0;continue}if(R[0]===3&&(!v||R[1]>v[0]&&R[1]<v[3])){w.label=R[1];break}if(R[0]===6&&w.label<v[1]){w.label=v[1],v=R;break}if(v&&w.label<v[2]){w.label=v[2],w.ops.push(R);break}v[2]&&w.ops.pop(),w.trys.pop();continue}R=_.call(h,w)}catch(J){R=[6,J],E=0}finally{C=v=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}},c=function(h,_,w,C){C===void 0&&(C=w),h[C]=_[w]},N=function(h,_){for(var w in h)w!=="default"&&!_.hasOwnProperty(w)&&(_[w]=h[w])},P=function(h){var _=typeof Symbol=="function"&&Symbol.iterator,w=_&&h[_],C=0;if(w)return w.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&C>=h.length&&(h=void 0),{value:h&&h[C++],done:!h}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")},U=function(h,_){var w=typeof Symbol=="function"&&h[Symbol.iterator];if(!w)return h;var C=w.call(h),E,v=[],$;try{for(;(_===void 0||_-- >0)&&!(E=C.next()).done;)v.push(E.value)}catch(H){$={error:H}}finally{try{E&&!E.done&&(w=C.return)&&w.call(C)}finally{if($)throw $.error}}return v},K=function(){for(var h=[],_=0;_<arguments.length;_++)h=h.concat(U(arguments[_]));return h},M=function(){for(var h=0,_=0,w=arguments.length;_<w;_++)h+=arguments[_].length;for(var C=Array(h),E=0,_=0;_<w;_++)for(var v=arguments[_],$=0,H=v.length;$<H;$++,E++)C[E]=v[$];return C},L=function(h){return this instanceof L?(this.v=h,this):new L(h)},W=function(h,_,w){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C=w.apply(h,_||[]),E,v=[];return E={},$("next"),$("throw"),$("return"),E[Symbol.asyncIterator]=function(){return this},E;function $(ae){C[ae]&&(E[ae]=function(ie){return new Promise(function(ye,fe){v.push([ae,ie,ye,fe])>1||H(ae,ie)})})}function H(ae,ie){try{Z(C[ae](ie))}catch(ye){te(v[0][3],ye)}}function Z(ae){ae.value instanceof L?Promise.resolve(ae.value.v).then(R,J):te(v[0][2],ae)}function R(ae){H("next",ae)}function J(ae){H("throw",ae)}function te(ae,ie){ae(ie),v.shift(),v.length&&H(v[0][0],v[0][1])}},z=function(h){var _,w;return _={},C("next"),C("throw",function(E){throw E}),C("return"),_[Symbol.iterator]=function(){return this},_;function C(E,v){_[E]=h[E]?function($){return(w=!w)?{value:L(h[E]($)),done:E==="return"}:v?v($):$}:v}},re=function(h){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _=h[Symbol.asyncIterator],w;return _?_.call(h):(h=typeof P=="function"?P(h):h[Symbol.iterator](),w={},C("next"),C("throw"),C("return"),w[Symbol.asyncIterator]=function(){return this},w);function C(v){w[v]=h[v]&&function($){return new Promise(function(H,Z){$=h[v]($),E(H,Z,$.done,$.value)})}}function E(v,$,H,Z){Promise.resolve(Z).then(function(R){v({value:R,done:H})},$)}},p=function(h,_){return Object.defineProperty?Object.defineProperty(h,"raw",{value:_}):h.raw=_,h},D=function(h){if(h&&h.__esModule)return h;var _={};if(h!=null)for(var w in h)Object.hasOwnProperty.call(h,w)&&(_[w]=h[w]);return _.default=h,_},b=function(h){return h&&h.__esModule?h:{default:h}},S=function(h,_){if(!_.has(h))throw new TypeError("attempted to get private field on non-instance");return _.get(h)},g=function(h,_,w){if(!_.has(h))throw new TypeError("attempted to set private field on non-instance");return _.set(h,w),w},l("__extends",t),l("__assign",r),l("__rest",s),l("__decorate",o),l("__param",d),l("__metadata",O),l("__awaiter",y),l("__generator",I),l("__exportStar",N),l("__createBinding",c),l("__values",P),l("__read",U),l("__spread",K),l("__spreadArrays",M),l("__await",L),l("__asyncGenerator",W),l("__asyncDelegator",z),l("__asyncValues",re),l("__makeTemplateObject",p),l("__importStar",D),l("__importDefault",b),l("__classPrivateFieldGet",S),l("__classPrivateFieldSet",g)})})(hw);var vs={};Object.defineProperty(vs,"__esModule",{value:!0});function fw(i){if(typeof i!="string")throw new Error(`Cannot safe json parse value of type ${typeof i}`);try{return JSON.parse(i)}catch{return i}}vs.safeJsonParse=fw;function lw(i){return typeof i=="string"?i:JSON.stringify(i,(t,r)=>typeof r>"u"?null:r)}vs.safeJsonStringify=lw;var ja={},Ic={get exports(){return ja},set exports(i){ja=i}},Xf;function dw(){return Xf||(Xf=1,function(){let i;function t(){}i=t,i.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},i.prototype.setItem=function(r,s){this[r]=String(s)},i.prototype.removeItem=function(r){delete this[r]},i.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(s){r[s]=void 0,delete r[s]})},i.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},i.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof ur<"u"&&ur.localStorage?Ic.exports=ur.localStorage:typeof window<"u"&&window.localStorage?Ic.exports=window.localStorage:Ic.exports=new t}()),ja}var xc={},is={},Qf;function pw(){if(Qf)return is;Qf=1,Object.defineProperty(is,"__esModule",{value:!0}),is.IKeyValueStorage=void 0;class i{}return is.IKeyValueStorage=i,is}var ss={},Zf;function gw(){if(Zf)return ss;Zf=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.parseEntry=void 0;const i=vs;function t(r){var s;return[r[0],i.safeJsonParse((s=r[1])!==null&&s!==void 0?s:"")]}return ss.parseEntry=t,ss}var el;function _w(){return el||(el=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const t=Fa;t.__exportStar(pw(),i),t.__exportStar(gw(),i)}(xc)),xc}Object.defineProperty(Ga,"__esModule",{value:!0});Ga.KeyValueStorage=void 0;const xi=Fa,tl=vs,yw=xi.__importDefault(dw()),vw=_w();class Ad{constructor(){this.localStorage=yw.default}getKeys(){return xi.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return xi.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(vw.parseEntry)})}getItem(t){return xi.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(t);if(r!==null)return tl.safeJsonParse(r)})}setItem(t,r){return xi.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(t,tl.safeJsonStringify(r))})}removeItem(t){return xi.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(t)})}}Ga.KeyValueStorage=Ad;var mw=Ga.default=Ad,ms={},Ti={},bw={get exports(){return Ti},set exports(i){Ti=i}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(i){var t,r,s,o,d,O,y,I,N,P,U,K,M,L,W,z,re,p,D,b,S,g,c;(function(l){var Y=typeof ur=="object"?ur:typeof self=="object"?self:typeof this=="object"?this:{};l(h(Y,h(i.exports)));function h(_,w){return _!==Y&&(typeof Object.create=="function"?Object.defineProperty(_,"__esModule",{value:!0}):_.__esModule=!0),function(C,E){return _[C]=w?w(C,E):E}}})(function(l){var Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,_){h.__proto__=_}||function(h,_){for(var w in _)_.hasOwnProperty(w)&&(h[w]=_[w])};t=function(h,_){Y(h,_);function w(){this.constructor=h}h.prototype=_===null?Object.create(_):(w.prototype=_.prototype,new w)},r=Object.assign||function(h){for(var _,w=1,C=arguments.length;w<C;w++){_=arguments[w];for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(h[E]=_[E])}return h},s=function(h,_){var w={};for(var C in h)Object.prototype.hasOwnProperty.call(h,C)&&_.indexOf(C)<0&&(w[C]=h[C]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var E=0,C=Object.getOwnPropertySymbols(h);E<C.length;E++)_.indexOf(C[E])<0&&Object.prototype.propertyIsEnumerable.call(h,C[E])&&(w[C[E]]=h[C[E]]);return w},o=function(h,_,w,C){var E=arguments.length,v=E<3?_:C===null?C=Object.getOwnPropertyDescriptor(_,w):C,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(h,_,w,C);else for(var H=h.length-1;H>=0;H--)($=h[H])&&(v=(E<3?$(v):E>3?$(_,w,v):$(_,w))||v);return E>3&&v&&Object.defineProperty(_,w,v),v},d=function(h,_){return function(w,C){_(w,C,h)}},O=function(h,_){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(h,_)},y=function(h,_,w,C){function E(v){return v instanceof w?v:new w(function($){$(v)})}return new(w||(w=Promise))(function(v,$){function H(J){try{R(C.next(J))}catch(te){$(te)}}function Z(J){try{R(C.throw(J))}catch(te){$(te)}}function R(J){J.done?v(J.value):E(J.value).then(H,Z)}R((C=C.apply(h,_||[])).next())})},I=function(h,_){var w={label:0,sent:function(){if(v[0]&1)throw v[1];return v[1]},trys:[],ops:[]},C,E,v,$;return $={next:H(0),throw:H(1),return:H(2)},typeof Symbol=="function"&&($[Symbol.iterator]=function(){return this}),$;function H(R){return function(J){return Z([R,J])}}function Z(R){if(C)throw new TypeError("Generator is already executing.");for(;w;)try{if(C=1,E&&(v=R[0]&2?E.return:R[0]?E.throw||((v=E.return)&&v.call(E),0):E.next)&&!(v=v.call(E,R[1])).done)return v;switch(E=0,v&&(R=[R[0]&2,v.value]),R[0]){case 0:case 1:v=R;break;case 4:return w.label++,{value:R[1],done:!1};case 5:w.label++,E=R[1],R=[0];continue;case 7:R=w.ops.pop(),w.trys.pop();continue;default:if(v=w.trys,!(v=v.length>0&&v[v.length-1])&&(R[0]===6||R[0]===2)){w=0;continue}if(R[0]===3&&(!v||R[1]>v[0]&&R[1]<v[3])){w.label=R[1];break}if(R[0]===6&&w.label<v[1]){w.label=v[1],v=R;break}if(v&&w.label<v[2]){w.label=v[2],w.ops.push(R);break}v[2]&&w.ops.pop(),w.trys.pop();continue}R=_.call(h,w)}catch(J){R=[6,J],E=0}finally{C=v=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}},c=function(h,_,w,C){C===void 0&&(C=w),h[C]=_[w]},N=function(h,_){for(var w in h)w!=="default"&&!_.hasOwnProperty(w)&&(_[w]=h[w])},P=function(h){var _=typeof Symbol=="function"&&Symbol.iterator,w=_&&h[_],C=0;if(w)return w.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&C>=h.length&&(h=void 0),{value:h&&h[C++],done:!h}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")},U=function(h,_){var w=typeof Symbol=="function"&&h[Symbol.iterator];if(!w)return h;var C=w.call(h),E,v=[],$;try{for(;(_===void 0||_-- >0)&&!(E=C.next()).done;)v.push(E.value)}catch(H){$={error:H}}finally{try{E&&!E.done&&(w=C.return)&&w.call(C)}finally{if($)throw $.error}}return v},K=function(){for(var h=[],_=0;_<arguments.length;_++)h=h.concat(U(arguments[_]));return h},M=function(){for(var h=0,_=0,w=arguments.length;_<w;_++)h+=arguments[_].length;for(var C=Array(h),E=0,_=0;_<w;_++)for(var v=arguments[_],$=0,H=v.length;$<H;$++,E++)C[E]=v[$];return C},L=function(h){return this instanceof L?(this.v=h,this):new L(h)},W=function(h,_,w){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C=w.apply(h,_||[]),E,v=[];return E={},$("next"),$("throw"),$("return"),E[Symbol.asyncIterator]=function(){return this},E;function $(ae){C[ae]&&(E[ae]=function(ie){return new Promise(function(ye,fe){v.push([ae,ie,ye,fe])>1||H(ae,ie)})})}function H(ae,ie){try{Z(C[ae](ie))}catch(ye){te(v[0][3],ye)}}function Z(ae){ae.value instanceof L?Promise.resolve(ae.value.v).then(R,J):te(v[0][2],ae)}function R(ae){H("next",ae)}function J(ae){H("throw",ae)}function te(ae,ie){ae(ie),v.shift(),v.length&&H(v[0][0],v[0][1])}},z=function(h){var _,w;return _={},C("next"),C("throw",function(E){throw E}),C("return"),_[Symbol.iterator]=function(){return this},_;function C(E,v){_[E]=h[E]?function($){return(w=!w)?{value:L(h[E]($)),done:E==="return"}:v?v($):$}:v}},re=function(h){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _=h[Symbol.asyncIterator],w;return _?_.call(h):(h=typeof P=="function"?P(h):h[Symbol.iterator](),w={},C("next"),C("throw"),C("return"),w[Symbol.asyncIterator]=function(){return this},w);function C(v){w[v]=h[v]&&function($){return new Promise(function(H,Z){$=h[v]($),E(H,Z,$.done,$.value)})}}function E(v,$,H,Z){Promise.resolve(Z).then(function(R){v({value:R,done:H})},$)}},p=function(h,_){return Object.defineProperty?Object.defineProperty(h,"raw",{value:_}):h.raw=_,h},D=function(h){if(h&&h.__esModule)return h;var _={};if(h!=null)for(var w in h)Object.hasOwnProperty.call(h,w)&&(_[w]=h[w]);return _.default=h,_},b=function(h){return h&&h.__esModule?h:{default:h}},S=function(h,_){if(!_.has(h))throw new TypeError("attempted to get private field on non-instance");return _.get(h)},g=function(h,_,w){if(!_.has(h))throw new TypeError("attempted to set private field on non-instance");return _.set(h,w),w},l("__extends",t),l("__assign",r),l("__rest",s),l("__decorate",o),l("__param",d),l("__metadata",O),l("__awaiter",y),l("__generator",I),l("__exportStar",N),l("__createBinding",c),l("__values",P),l("__read",U),l("__spread",K),l("__spreadArrays",M),l("__await",L),l("__asyncGenerator",W),l("__asyncDelegator",z),l("__asyncValues",re),l("__makeTemplateObject",p),l("__importStar",D),l("__importDefault",b),l("__classPrivateFieldGet",S),l("__classPrivateFieldSet",g)})})(bw);var as={},Ac={},os={};class ti{}const ww=Object.freeze(Object.defineProperty({__proto__:null,IEvents:ti},Symbol.toStringTag,{value:"Module"})),Ew=Qv(ww);var rl;function Sw(){if(rl)return os;rl=1,Object.defineProperty(os,"__esModule",{value:!0}),os.IHeartBeat=void 0;const i=Ew;class t extends i.IEvents{constructor(s){super()}}return os.IHeartBeat=t,os}var nl;function Cd(){return nl||(nl=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),Ti.__exportStar(Sw(),i)}(Ac)),Ac}var Cc={},Yn={},il;function Dw(){if(il)return Yn;il=1,Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.HEARTBEAT_EVENTS=Yn.HEARTBEAT_INTERVAL=void 0;const i=Se;return Yn.HEARTBEAT_INTERVAL=i.FIVE_SECONDS,Yn.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Yn}var sl;function Pd(){return sl||(sl=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),Ti.__exportStar(Dw(),i)}(Cc)),Cc}var al;function Ow(){if(al)return as;al=1,Object.defineProperty(as,"__esModule",{value:!0}),as.HeartBeat=void 0;const i=Ti,t=Ir,r=Se,s=Cd(),o=Pd();class d extends s.IHeartBeat{constructor(y){super(y),this.events=new t.EventEmitter,this.interval=o.HEARTBEAT_INTERVAL,this.interval=y?.interval||o.HEARTBEAT_INTERVAL}static init(y){return i.__awaiter(this,void 0,void 0,function*(){const I=new d(y);return yield I.init(),I})}init(){return i.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(y,I){this.events.on(y,I)}once(y,I){this.events.once(y,I)}off(y,I){this.events.off(y,I)}removeListener(y,I){this.events.removeListener(y,I)}initialize(){return i.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(o.HEARTBEAT_EVENTS.pulse)}}return as.HeartBeat=d,as}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const t=Ti;t.__exportStar(Ow(),i),t.__exportStar(Cd(),i),t.__exportStar(Pd(),i)})(ms);var Ze={},Wc={},Iw={get exports(){return Wc},set exports(i){Wc=i}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(i){var t,r,s,o,d,O,y,I,N,P,U,K,M,L,W,z,re,p,D,b,S,g,c;(function(l){var Y=typeof ur=="object"?ur:typeof self=="object"?self:typeof this=="object"?this:{};l(h(Y,h(i.exports)));function h(_,w){return _!==Y&&(typeof Object.create=="function"?Object.defineProperty(_,"__esModule",{value:!0}):_.__esModule=!0),function(C,E){return _[C]=w?w(C,E):E}}})(function(l){var Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,_){h.__proto__=_}||function(h,_){for(var w in _)_.hasOwnProperty(w)&&(h[w]=_[w])};t=function(h,_){Y(h,_);function w(){this.constructor=h}h.prototype=_===null?Object.create(_):(w.prototype=_.prototype,new w)},r=Object.assign||function(h){for(var _,w=1,C=arguments.length;w<C;w++){_=arguments[w];for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(h[E]=_[E])}return h},s=function(h,_){var w={};for(var C in h)Object.prototype.hasOwnProperty.call(h,C)&&_.indexOf(C)<0&&(w[C]=h[C]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var E=0,C=Object.getOwnPropertySymbols(h);E<C.length;E++)_.indexOf(C[E])<0&&Object.prototype.propertyIsEnumerable.call(h,C[E])&&(w[C[E]]=h[C[E]]);return w},o=function(h,_,w,C){var E=arguments.length,v=E<3?_:C===null?C=Object.getOwnPropertyDescriptor(_,w):C,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(h,_,w,C);else for(var H=h.length-1;H>=0;H--)($=h[H])&&(v=(E<3?$(v):E>3?$(_,w,v):$(_,w))||v);return E>3&&v&&Object.defineProperty(_,w,v),v},d=function(h,_){return function(w,C){_(w,C,h)}},O=function(h,_){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(h,_)},y=function(h,_,w,C){function E(v){return v instanceof w?v:new w(function($){$(v)})}return new(w||(w=Promise))(function(v,$){function H(J){try{R(C.next(J))}catch(te){$(te)}}function Z(J){try{R(C.throw(J))}catch(te){$(te)}}function R(J){J.done?v(J.value):E(J.value).then(H,Z)}R((C=C.apply(h,_||[])).next())})},I=function(h,_){var w={label:0,sent:function(){if(v[0]&1)throw v[1];return v[1]},trys:[],ops:[]},C,E,v,$;return $={next:H(0),throw:H(1),return:H(2)},typeof Symbol=="function"&&($[Symbol.iterator]=function(){return this}),$;function H(R){return function(J){return Z([R,J])}}function Z(R){if(C)throw new TypeError("Generator is already executing.");for(;w;)try{if(C=1,E&&(v=R[0]&2?E.return:R[0]?E.throw||((v=E.return)&&v.call(E),0):E.next)&&!(v=v.call(E,R[1])).done)return v;switch(E=0,v&&(R=[R[0]&2,v.value]),R[0]){case 0:case 1:v=R;break;case 4:return w.label++,{value:R[1],done:!1};case 5:w.label++,E=R[1],R=[0];continue;case 7:R=w.ops.pop(),w.trys.pop();continue;default:if(v=w.trys,!(v=v.length>0&&v[v.length-1])&&(R[0]===6||R[0]===2)){w=0;continue}if(R[0]===3&&(!v||R[1]>v[0]&&R[1]<v[3])){w.label=R[1];break}if(R[0]===6&&w.label<v[1]){w.label=v[1],v=R;break}if(v&&w.label<v[2]){w.label=v[2],w.ops.push(R);break}v[2]&&w.ops.pop(),w.trys.pop();continue}R=_.call(h,w)}catch(J){R=[6,J],E=0}finally{C=v=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}},c=function(h,_,w,C){C===void 0&&(C=w),h[C]=_[w]},N=function(h,_){for(var w in h)w!=="default"&&!_.hasOwnProperty(w)&&(_[w]=h[w])},P=function(h){var _=typeof Symbol=="function"&&Symbol.iterator,w=_&&h[_],C=0;if(w)return w.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&C>=h.length&&(h=void 0),{value:h&&h[C++],done:!h}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")},U=function(h,_){var w=typeof Symbol=="function"&&h[Symbol.iterator];if(!w)return h;var C=w.call(h),E,v=[],$;try{for(;(_===void 0||_-- >0)&&!(E=C.next()).done;)v.push(E.value)}catch(H){$={error:H}}finally{try{E&&!E.done&&(w=C.return)&&w.call(C)}finally{if($)throw $.error}}return v},K=function(){for(var h=[],_=0;_<arguments.length;_++)h=h.concat(U(arguments[_]));return h},M=function(){for(var h=0,_=0,w=arguments.length;_<w;_++)h+=arguments[_].length;for(var C=Array(h),E=0,_=0;_<w;_++)for(var v=arguments[_],$=0,H=v.length;$<H;$++,E++)C[E]=v[$];return C},L=function(h){return this instanceof L?(this.v=h,this):new L(h)},W=function(h,_,w){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C=w.apply(h,_||[]),E,v=[];return E={},$("next"),$("throw"),$("return"),E[Symbol.asyncIterator]=function(){return this},E;function $(ae){C[ae]&&(E[ae]=function(ie){return new Promise(function(ye,fe){v.push([ae,ie,ye,fe])>1||H(ae,ie)})})}function H(ae,ie){try{Z(C[ae](ie))}catch(ye){te(v[0][3],ye)}}function Z(ae){ae.value instanceof L?Promise.resolve(ae.value.v).then(R,J):te(v[0][2],ae)}function R(ae){H("next",ae)}function J(ae){H("throw",ae)}function te(ae,ie){ae(ie),v.shift(),v.length&&H(v[0][0],v[0][1])}},z=function(h){var _,w;return _={},C("next"),C("throw",function(E){throw E}),C("return"),_[Symbol.iterator]=function(){return this},_;function C(E,v){_[E]=h[E]?function($){return(w=!w)?{value:L(h[E]($)),done:E==="return"}:v?v($):$}:v}},re=function(h){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _=h[Symbol.asyncIterator],w;return _?_.call(h):(h=typeof P=="function"?P(h):h[Symbol.iterator](),w={},C("next"),C("throw"),C("return"),w[Symbol.asyncIterator]=function(){return this},w);function C(v){w[v]=h[v]&&function($){return new Promise(function(H,Z){$=h[v]($),E(H,Z,$.done,$.value)})}}function E(v,$,H,Z){Promise.resolve(Z).then(function(R){v({value:R,done:H})},$)}},p=function(h,_){return Object.defineProperty?Object.defineProperty(h,"raw",{value:_}):h.raw=_,h},D=function(h){if(h&&h.__esModule)return h;var _={};if(h!=null)for(var w in h)Object.hasOwnProperty.call(h,w)&&(_[w]=h[w]);return _.default=h,_},b=function(h){return h&&h.__esModule?h:{default:h}},S=function(h,_){if(!_.has(h))throw new TypeError("attempted to get private field on non-instance");return _.get(h)},g=function(h,_,w){if(!_.has(h))throw new TypeError("attempted to set private field on non-instance");return _.set(h,w),w},l("__extends",t),l("__assign",r),l("__rest",s),l("__decorate",o),l("__param",d),l("__metadata",O),l("__awaiter",y),l("__generator",I),l("__exportStar",N),l("__createBinding",c),l("__values",P),l("__read",U),l("__spread",K),l("__spreadArrays",M),l("__await",L),l("__asyncGenerator",W),l("__asyncDelegator",z),l("__asyncValues",re),l("__makeTemplateObject",p),l("__importStar",D),l("__importDefault",b),l("__classPrivateFieldGet",S),l("__classPrivateFieldSet",g)})})(Iw);var Pc,ol;function xw(){if(ol)return Pc;ol=1;function i(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}Pc=t;function t(r,s,o){var d=o&&o.stringify||i,O=1;if(typeof r=="object"&&r!==null){var y=s.length+O;if(y===1)return r;var I=new Array(y);I[0]=d(r);for(var N=1;N<y;N++)I[N]=d(s[N]);return I.join(" ")}if(typeof r!="string")return r;var P=s.length;if(P===0)return r;for(var U="",K=1-O,M=-1,L=r&&r.length||0,W=0;W<L;){if(r.charCodeAt(W)===37&&W+1<L){switch(M=M>-1?M:0,r.charCodeAt(W+1)){case 100:case 102:if(K>=P||s[K]==null)break;M<W&&(U+=r.slice(M,W)),U+=Number(s[K]),M=W+2,W++;break;case 105:if(K>=P||s[K]==null)break;M<W&&(U+=r.slice(M,W)),U+=Math.floor(Number(s[K])),M=W+2,W++;break;case 79:case 111:case 106:if(K>=P||s[K]===void 0)break;M<W&&(U+=r.slice(M,W));var z=typeof s[K];if(z==="string"){U+="'"+s[K]+"'",M=W+2,W++;break}if(z==="function"){U+=s[K].name||"<anonymous>",M=W+2,W++;break}U+=d(s[K]),M=W+2,W++;break;case 115:if(K>=P)break;M<W&&(U+=r.slice(M,W)),U+=String(s[K]),M=W+2,W++;break;case 37:M<W&&(U+=r.slice(M,W)),U+="%",M=W+2,W++,K--;break}++K}++W}return M===-1?r:(M<L&&(U+=r.slice(M)),U)}return Pc}var Tc,cl;function Aw(){if(cl)return Tc;cl=1;const i=xw();Tc=o;const t=S().console||{},r={mapHttpRequest:L,mapHttpResponse:L,wrapRequestSerializer:W,wrapResponseSerializer:W,wrapErrorSerializer:W,req:L,res:L,err:K};function s(g,c){return Array.isArray(g)?g.filter(function(Y){return Y!=="!stdSerializers.err"}):g===!0?Object.keys(c):!1}function o(g){g=g||{},g.browser=g.browser||{};const c=g.browser.transmit;if(c&&typeof c.send!="function")throw Error("pino: transmit option must have a send function");const l=g.browser.write||t;g.browser.write&&(g.browser.asObject=!0);const Y=g.serializers||{},h=s(g.browser.serialize,Y);let _=g.browser.serialize;Array.isArray(g.browser.serialize)&&g.browser.serialize.indexOf("!stdSerializers.err")>-1&&(_=!1);const w=["error","fatal","warn","info","debug","trace"];typeof l=="function"&&(l.error=l.fatal=l.warn=l.info=l.debug=l.trace=l),g.enabled===!1&&(g.level="silent");const C=g.level||"info",E=Object.create(l);E.log||(E.log=z),Object.defineProperty(E,"levelVal",{get:$}),Object.defineProperty(E,"level",{get:H,set:Z});const v={transmit:c,serialize:h,asObject:g.browser.asObject,levels:w,timestamp:M(g)};E.levels=o.levels,E.level=C,E.setMaxListeners=E.getMaxListeners=E.emit=E.addListener=E.on=E.prependListener=E.once=E.prependOnceListener=E.removeListener=E.removeAllListeners=E.listeners=E.listenerCount=E.eventNames=E.write=E.flush=z,E.serializers=Y,E._serialize=h,E._stdErrSerialize=_,E.child=R,c&&(E._logEvent=U());function $(){return this.level==="silent"?1/0:this.levels.values[this.level]}function H(){return this._level}function Z(J){if(J!=="silent"&&!this.levels.values[J])throw Error("unknown level "+J);this._level=J,d(v,E,"error","log"),d(v,E,"fatal","error"),d(v,E,"warn","error"),d(v,E,"info","log"),d(v,E,"debug","log"),d(v,E,"trace","log")}function R(J,te){if(!J)throw new Error("missing bindings for child Pino");te=te||{},h&&J.serializers&&(te.serializers=J.serializers);const ae=te.serializers;if(h&&ae){var ie=Object.assign({},Y,ae),ye=g.browser.serialize===!0?Object.keys(ie):h;delete J.serializers,I([J],ye,ie,this._stdErrSerialize)}function fe(me){this._childLevel=(me._childLevel|0)+1,this.error=N(me,J,"error"),this.fatal=N(me,J,"fatal"),this.warn=N(me,J,"warn"),this.info=N(me,J,"info"),this.debug=N(me,J,"debug"),this.trace=N(me,J,"trace"),ie&&(this.serializers=ie,this._serialize=ye),c&&(this._logEvent=U([].concat(me._logEvent.bindings,J)))}return fe.prototype=this,new fe(this)}return E}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=r,o.stdTimeFunctions=Object.assign({},{nullTime:re,epochTime:p,unixTime:D,isoTime:b});function d(g,c,l,Y){const h=Object.getPrototypeOf(c);c[l]=c.levelVal>c.levels.values[l]?z:h[l]?h[l]:t[l]||t[Y]||z,O(g,c,l)}function O(g,c,l){!g.transmit&&c[l]===z||(c[l]=function(Y){return function(){const _=g.timestamp(),w=new Array(arguments.length),C=Object.getPrototypeOf&&Object.getPrototypeOf(this)===t?t:this;for(var E=0;E<w.length;E++)w[E]=arguments[E];if(g.serialize&&!g.asObject&&I(w,this._serialize,this.serializers,this._stdErrSerialize),g.asObject?Y.call(C,y(this,l,w,_)):Y.apply(C,w),g.transmit){const v=g.transmit.level||c.level,$=o.levels.values[v],H=o.levels.values[l];if(H<$)return;P(this,{ts:_,methodLevel:l,methodValue:H,transmitLevel:v,transmitValue:o.levels.values[g.transmit.level||c.level],send:g.transmit.send,val:c.levelVal},w)}}}(c[l]))}function y(g,c,l,Y){g._serialize&&I(l,g._serialize,g.serializers,g._stdErrSerialize);const h=l.slice();let _=h[0];const w={};Y&&(w.time=Y),w.level=o.levels.values[c];let C=(g._childLevel|0)+1;if(C<1&&(C=1),_!==null&&typeof _=="object"){for(;C--&&typeof h[0]=="object";)Object.assign(w,h.shift());_=h.length?i(h.shift(),h):void 0}else typeof _=="string"&&(_=i(h.shift(),h));return _!==void 0&&(w.msg=_),w}function I(g,c,l,Y){for(const h in g)if(Y&&g[h]instanceof Error)g[h]=o.stdSerializers.err(g[h]);else if(typeof g[h]=="object"&&!Array.isArray(g[h]))for(const _ in g[h])c&&c.indexOf(_)>-1&&_ in l&&(g[h][_]=l[_](g[h][_]))}function N(g,c,l){return function(){const Y=new Array(1+arguments.length);Y[0]=c;for(var h=1;h<Y.length;h++)Y[h]=arguments[h-1];return g[l].apply(this,Y)}}function P(g,c,l){const Y=c.send,h=c.ts,_=c.methodLevel,w=c.methodValue,C=c.val,E=g._logEvent.bindings;I(l,g._serialize||Object.keys(g.serializers),g.serializers,g._stdErrSerialize===void 0?!0:g._stdErrSerialize),g._logEvent.ts=h,g._logEvent.messages=l.filter(function(v){return E.indexOf(v)===-1}),g._logEvent.level.label=_,g._logEvent.level.value=w,Y(_,g._logEvent,C),g._logEvent=U(E)}function U(g){return{ts:0,messages:[],bindings:g||[],level:{label:"",value:0}}}function K(g){const c={type:g.constructor.name,msg:g.message,stack:g.stack};for(const l in g)c[l]===void 0&&(c[l]=g[l]);return c}function M(g){return typeof g.timestamp=="function"?g.timestamp:g.timestamp===!1?re:p}function L(){return{}}function W(g){return g}function z(){}function re(){return!1}function p(){return Date.now()}function D(){return Math.round(Date.now()/1e3)}function b(){return new Date(Date.now()).toISOString()}function S(){function g(c){return typeof c<"u"&&c}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return g(self)||g(window)||g(this)||{}}}return Tc}var Jn={},ul;function Td(){return ul||(ul=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.PINO_CUSTOM_CONTEXT_KEY=Jn.PINO_LOGGER_DEFAULTS=void 0,Jn.PINO_LOGGER_DEFAULTS={level:"info"},Jn.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Jn}var or={},hl;function Cw(){if(hl)return or;hl=1,Object.defineProperty(or,"__esModule",{value:!0}),or.generateChildLogger=or.formatChildLoggerContext=or.getLoggerContext=or.setBrowserLoggerContext=or.getBrowserLoggerContext=or.getDefaultLoggerOptions=void 0;const i=Td();function t(y){return Object.assign(Object.assign({},y),{level:y?.level||i.PINO_LOGGER_DEFAULTS.level})}or.getDefaultLoggerOptions=t;function r(y,I=i.PINO_CUSTOM_CONTEXT_KEY){return y[I]||""}or.getBrowserLoggerContext=r;function s(y,I,N=i.PINO_CUSTOM_CONTEXT_KEY){return y[N]=I,y}or.setBrowserLoggerContext=s;function o(y,I=i.PINO_CUSTOM_CONTEXT_KEY){let N="";return typeof y.bindings>"u"?N=r(y,I):N=y.bindings().context||"",N}or.getLoggerContext=o;function d(y,I,N=i.PINO_CUSTOM_CONTEXT_KEY){const P=o(y,N);return P.trim()?`${P}/${I}`:I}or.formatChildLoggerContext=d;function O(y,I,N=i.PINO_CUSTOM_CONTEXT_KEY){const P=d(y,I,N),U=y.child({context:P});return s(U,P,N)}return or.generateChildLogger=O,or}(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.pino=void 0;const t=Wc,r=t.__importDefault(Aw());Object.defineProperty(i,"pino",{enumerable:!0,get:function(){return r.default}}),t.__exportStar(Td(),i),t.__exportStar(Cw(),i)})(Ze);class Pw extends ti{constructor(t){super(),this.opts=t,this.protocol="wc",this.version=2}}class Tw extends ti{constructor(t,r){super(),this.core=t,this.logger=r,this.records=new Map}}class Nw{constructor(t,r){this.logger=t,this.core=r}}let Rw=class extends ti{constructor(t,r){super(),this.relayer=t,this.logger=r}};class Uw extends ti{constructor(t){super()}}let Fw=class{constructor(t,r,s,o){this.core=t,this.logger=r,this.name=s}};class jw extends ti{constructor(t,r){super(),this.relayer=t,this.logger=r}}let $w=class extends ti{constructor(t,r){super(),this.core=t,this.logger=r}},Lw=class{constructor(t,r){this.projectId=t,this.logger=r}},Mw=class{constructor(t){this.opts=t,this.protocol="wc",this.version=2}},qw=class{constructor(t){this.client=t}};var bu={},Nd={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var t=je,r=xr;i.DIGEST_LENGTH=64,i.BLOCK_SIZE=128;var s=function(){function y(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return y.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},y.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},y.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},y.prototype.update=function(I,N){if(N===void 0&&(N=I.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var P=0;if(this._bytesHashed+=N,this._bufferLength>0){for(;this._bufferLength<i.BLOCK_SIZE&&N>0;)this._buffer[this._bufferLength++]=I[P++],N--;this._bufferLength===this.blockSize&&(d(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(N>=this.blockSize&&(P=d(this._tempHi,this._tempLo,this._stateHi,this._stateLo,I,P,N),N%=this.blockSize);N>0;)this._buffer[this._bufferLength++]=I[P++],N--;return this},y.prototype.finish=function(I){if(!this._finished){var N=this._bytesHashed,P=this._bufferLength,U=N/536870912|0,K=N<<3,M=N%128<112?128:256;this._buffer[P]=128;for(var L=P+1;L<M-8;L++)this._buffer[L]=0;t.writeUint32BE(U,this._buffer,M-8),t.writeUint32BE(K,this._buffer,M-4),d(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,M),this._finished=!0}for(var L=0;L<this.digestLength/8;L++)t.writeUint32BE(this._stateHi[L],I,L*8),t.writeUint32BE(this._stateLo[L],I,L*8+4);return this},y.prototype.digest=function(){var I=new Uint8Array(this.digestLength);return this.finish(I),I},y.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},y.prototype.restoreState=function(I){return this._stateHi.set(I.stateHi),this._stateLo.set(I.stateLo),this._bufferLength=I.bufferLength,I.buffer&&this._buffer.set(I.buffer),this._bytesHashed=I.bytesHashed,this._finished=!1,this},y.prototype.cleanSavedState=function(I){r.wipe(I.stateHi),r.wipe(I.stateLo),I.buffer&&r.wipe(I.buffer),I.bufferLength=0,I.bytesHashed=0},y}();i.SHA512=s;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function d(y,I,N,P,U,K,M){for(var L=N[0],W=N[1],z=N[2],re=N[3],p=N[4],D=N[5],b=N[6],S=N[7],g=P[0],c=P[1],l=P[2],Y=P[3],h=P[4],_=P[5],w=P[6],C=P[7],E,v,$,H,Z,R,J,te;M>=128;){for(var ae=0;ae<16;ae++){var ie=8*ae+K;y[ae]=t.readUint32BE(U,ie),I[ae]=t.readUint32BE(U,ie+4)}for(var ae=0;ae<80;ae++){var ye=L,fe=W,me=z,Q=re,X=p,B=D,f=b,j=S,he=g,pe=c,Oe=l,He=Y,Ve=h,$e=_,_t=w,yt=C;if(E=S,v=C,Z=v&65535,R=v>>>16,J=E&65535,te=E>>>16,E=(p>>>14|h<<32-14)^(p>>>18|h<<32-18)^(h>>>41-32|p<<32-(41-32)),v=(h>>>14|p<<32-14)^(h>>>18|p<<32-18)^(p>>>41-32|h<<32-(41-32)),Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,E=p&D^~p&b,v=h&_^~h&w,Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,E=o[ae*2],v=o[ae*2+1],Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,E=y[ae%16],v=I[ae%16],Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,R+=Z>>>16,J+=R>>>16,te+=J>>>16,$=J&65535|te<<16,H=Z&65535|R<<16,E=$,v=H,Z=v&65535,R=v>>>16,J=E&65535,te=E>>>16,E=(L>>>28|g<<32-28)^(g>>>34-32|L<<32-(34-32))^(g>>>39-32|L<<32-(39-32)),v=(g>>>28|L<<32-28)^(L>>>34-32|g<<32-(34-32))^(L>>>39-32|g<<32-(39-32)),Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,E=L&W^L&z^W&z,v=g&c^g&l^c&l,Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,R+=Z>>>16,J+=R>>>16,te+=J>>>16,j=J&65535|te<<16,yt=Z&65535|R<<16,E=Q,v=He,Z=v&65535,R=v>>>16,J=E&65535,te=E>>>16,E=$,v=H,Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,R+=Z>>>16,J+=R>>>16,te+=J>>>16,Q=J&65535|te<<16,He=Z&65535|R<<16,W=ye,z=fe,re=me,p=Q,D=X,b=B,S=f,L=j,c=he,l=pe,Y=Oe,h=He,_=Ve,w=$e,C=_t,g=yt,ae%16===15)for(var ie=0;ie<16;ie++)E=y[ie],v=I[ie],Z=v&65535,R=v>>>16,J=E&65535,te=E>>>16,E=y[(ie+9)%16],v=I[(ie+9)%16],Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,$=y[(ie+1)%16],H=I[(ie+1)%16],E=($>>>1|H<<32-1)^($>>>8|H<<32-8)^$>>>7,v=(H>>>1|$<<32-1)^(H>>>8|$<<32-8)^(H>>>7|$<<32-7),Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,$=y[(ie+14)%16],H=I[(ie+14)%16],E=($>>>19|H<<32-19)^(H>>>61-32|$<<32-(61-32))^$>>>6,v=(H>>>19|$<<32-19)^($>>>61-32|H<<32-(61-32))^(H>>>6|$<<32-6),Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,R+=Z>>>16,J+=R>>>16,te+=J>>>16,y[ie]=J&65535|te<<16,I[ie]=Z&65535|R<<16}E=L,v=g,Z=v&65535,R=v>>>16,J=E&65535,te=E>>>16,E=N[0],v=P[0],Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,R+=Z>>>16,J+=R>>>16,te+=J>>>16,N[0]=L=J&65535|te<<16,P[0]=g=Z&65535|R<<16,E=W,v=c,Z=v&65535,R=v>>>16,J=E&65535,te=E>>>16,E=N[1],v=P[1],Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,R+=Z>>>16,J+=R>>>16,te+=J>>>16,N[1]=W=J&65535|te<<16,P[1]=c=Z&65535|R<<16,E=z,v=l,Z=v&65535,R=v>>>16,J=E&65535,te=E>>>16,E=N[2],v=P[2],Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,R+=Z>>>16,J+=R>>>16,te+=J>>>16,N[2]=z=J&65535|te<<16,P[2]=l=Z&65535|R<<16,E=re,v=Y,Z=v&65535,R=v>>>16,J=E&65535,te=E>>>16,E=N[3],v=P[3],Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,R+=Z>>>16,J+=R>>>16,te+=J>>>16,N[3]=re=J&65535|te<<16,P[3]=Y=Z&65535|R<<16,E=p,v=h,Z=v&65535,R=v>>>16,J=E&65535,te=E>>>16,E=N[4],v=P[4],Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,R+=Z>>>16,J+=R>>>16,te+=J>>>16,N[4]=p=J&65535|te<<16,P[4]=h=Z&65535|R<<16,E=D,v=_,Z=v&65535,R=v>>>16,J=E&65535,te=E>>>16,E=N[5],v=P[5],Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,R+=Z>>>16,J+=R>>>16,te+=J>>>16,N[5]=D=J&65535|te<<16,P[5]=_=Z&65535|R<<16,E=b,v=w,Z=v&65535,R=v>>>16,J=E&65535,te=E>>>16,E=N[6],v=P[6],Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,R+=Z>>>16,J+=R>>>16,te+=J>>>16,N[6]=b=J&65535|te<<16,P[6]=w=Z&65535|R<<16,E=S,v=C,Z=v&65535,R=v>>>16,J=E&65535,te=E>>>16,E=N[7],v=P[7],Z+=v&65535,R+=v>>>16,J+=E&65535,te+=E>>>16,R+=Z>>>16,J+=R>>>16,te+=J>>>16,N[7]=S=J&65535|te<<16,P[7]=C=Z&65535|R<<16,K+=128,M-=128}return K}function O(y){var I=new s;I.update(y);var N=I.digest();return I.clean(),N}i.hash=O})(Nd);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.convertSecretKeyToX25519=i.convertPublicKeyToX25519=i.verify=i.sign=i.extractPublicKeyFromSecretKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.SEED_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=i.SIGNATURE_LENGTH=void 0;const t=Ni,r=Nd,s=xr;i.SIGNATURE_LENGTH=64,i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=64,i.SEED_LENGTH=32;function o(Q){const X=new Float64Array(16);if(Q)for(let B=0;B<Q.length;B++)X[B]=Q[B];return X}const d=new Uint8Array(32);d[0]=9;const O=o(),y=o([1]),I=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),N=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),P=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),U=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),K=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function M(Q,X){for(let B=0;B<16;B++)Q[B]=X[B]|0}function L(Q){let X=1;for(let B=0;B<16;B++){let f=Q[B]+X+65535;X=Math.floor(f/65536),Q[B]=f-X*65536}Q[0]+=X-1+37*(X-1)}function W(Q,X,B){const f=~(B-1);for(let j=0;j<16;j++){const he=f&(Q[j]^X[j]);Q[j]^=he,X[j]^=he}}function z(Q,X){const B=o(),f=o();for(let j=0;j<16;j++)f[j]=X[j];L(f),L(f),L(f);for(let j=0;j<2;j++){B[0]=f[0]-65517;for(let pe=1;pe<15;pe++)B[pe]=f[pe]-65535-(B[pe-1]>>16&1),B[pe-1]&=65535;B[15]=f[15]-32767-(B[14]>>16&1);const he=B[15]>>16&1;B[14]&=65535,W(f,B,1-he)}for(let j=0;j<16;j++)Q[2*j]=f[j]&255,Q[2*j+1]=f[j]>>8}function re(Q,X){let B=0;for(let f=0;f<32;f++)B|=Q[f]^X[f];return(1&B-1>>>8)-1}function p(Q,X){const B=new Uint8Array(32),f=new Uint8Array(32);return z(B,Q),z(f,X),re(B,f)}function D(Q){const X=new Uint8Array(32);return z(X,Q),X[0]&1}function b(Q,X){for(let B=0;B<16;B++)Q[B]=X[2*B]+(X[2*B+1]<<8);Q[15]&=32767}function S(Q,X,B){for(let f=0;f<16;f++)Q[f]=X[f]+B[f]}function g(Q,X,B){for(let f=0;f<16;f++)Q[f]=X[f]-B[f]}function c(Q,X,B){let f,j,he=0,pe=0,Oe=0,He=0,Ve=0,$e=0,_t=0,yt=0,Me=0,Ie=0,Re=0,Ue=0,qe=0,Ae=0,Fe=0,De=0,Ce=0,Be=0,xe=0,ke=0,We=0,et=0,tt=0,Je=0,tr=0,lr=0,Gr=0,rr=0,rn=0,_n=0,Rn=0,St=B[0],vt=B[1],Dt=B[2],Ot=B[3],wt=B[4],mt=B[5],Ut=B[6],Ft=B[7],It=B[8],jt=B[9],xt=B[10],Pt=B[11],At=B[12],ht=B[13],$t=B[14],Lt=B[15];f=X[0],he+=f*St,pe+=f*vt,Oe+=f*Dt,He+=f*Ot,Ve+=f*wt,$e+=f*mt,_t+=f*Ut,yt+=f*Ft,Me+=f*It,Ie+=f*jt,Re+=f*xt,Ue+=f*Pt,qe+=f*At,Ae+=f*ht,Fe+=f*$t,De+=f*Lt,f=X[1],pe+=f*St,Oe+=f*vt,He+=f*Dt,Ve+=f*Ot,$e+=f*wt,_t+=f*mt,yt+=f*Ut,Me+=f*Ft,Ie+=f*It,Re+=f*jt,Ue+=f*xt,qe+=f*Pt,Ae+=f*At,Fe+=f*ht,De+=f*$t,Ce+=f*Lt,f=X[2],Oe+=f*St,He+=f*vt,Ve+=f*Dt,$e+=f*Ot,_t+=f*wt,yt+=f*mt,Me+=f*Ut,Ie+=f*Ft,Re+=f*It,Ue+=f*jt,qe+=f*xt,Ae+=f*Pt,Fe+=f*At,De+=f*ht,Ce+=f*$t,Be+=f*Lt,f=X[3],He+=f*St,Ve+=f*vt,$e+=f*Dt,_t+=f*Ot,yt+=f*wt,Me+=f*mt,Ie+=f*Ut,Re+=f*Ft,Ue+=f*It,qe+=f*jt,Ae+=f*xt,Fe+=f*Pt,De+=f*At,Ce+=f*ht,Be+=f*$t,xe+=f*Lt,f=X[4],Ve+=f*St,$e+=f*vt,_t+=f*Dt,yt+=f*Ot,Me+=f*wt,Ie+=f*mt,Re+=f*Ut,Ue+=f*Ft,qe+=f*It,Ae+=f*jt,Fe+=f*xt,De+=f*Pt,Ce+=f*At,Be+=f*ht,xe+=f*$t,ke+=f*Lt,f=X[5],$e+=f*St,_t+=f*vt,yt+=f*Dt,Me+=f*Ot,Ie+=f*wt,Re+=f*mt,Ue+=f*Ut,qe+=f*Ft,Ae+=f*It,Fe+=f*jt,De+=f*xt,Ce+=f*Pt,Be+=f*At,xe+=f*ht,ke+=f*$t,We+=f*Lt,f=X[6],_t+=f*St,yt+=f*vt,Me+=f*Dt,Ie+=f*Ot,Re+=f*wt,Ue+=f*mt,qe+=f*Ut,Ae+=f*Ft,Fe+=f*It,De+=f*jt,Ce+=f*xt,Be+=f*Pt,xe+=f*At,ke+=f*ht,We+=f*$t,et+=f*Lt,f=X[7],yt+=f*St,Me+=f*vt,Ie+=f*Dt,Re+=f*Ot,Ue+=f*wt,qe+=f*mt,Ae+=f*Ut,Fe+=f*Ft,De+=f*It,Ce+=f*jt,Be+=f*xt,xe+=f*Pt,ke+=f*At,We+=f*ht,et+=f*$t,tt+=f*Lt,f=X[8],Me+=f*St,Ie+=f*vt,Re+=f*Dt,Ue+=f*Ot,qe+=f*wt,Ae+=f*mt,Fe+=f*Ut,De+=f*Ft,Ce+=f*It,Be+=f*jt,xe+=f*xt,ke+=f*Pt,We+=f*At,et+=f*ht,tt+=f*$t,Je+=f*Lt,f=X[9],Ie+=f*St,Re+=f*vt,Ue+=f*Dt,qe+=f*Ot,Ae+=f*wt,Fe+=f*mt,De+=f*Ut,Ce+=f*Ft,Be+=f*It,xe+=f*jt,ke+=f*xt,We+=f*Pt,et+=f*At,tt+=f*ht,Je+=f*$t,tr+=f*Lt,f=X[10],Re+=f*St,Ue+=f*vt,qe+=f*Dt,Ae+=f*Ot,Fe+=f*wt,De+=f*mt,Ce+=f*Ut,Be+=f*Ft,xe+=f*It,ke+=f*jt,We+=f*xt,et+=f*Pt,tt+=f*At,Je+=f*ht,tr+=f*$t,lr+=f*Lt,f=X[11],Ue+=f*St,qe+=f*vt,Ae+=f*Dt,Fe+=f*Ot,De+=f*wt,Ce+=f*mt,Be+=f*Ut,xe+=f*Ft,ke+=f*It,We+=f*jt,et+=f*xt,tt+=f*Pt,Je+=f*At,tr+=f*ht,lr+=f*$t,Gr+=f*Lt,f=X[12],qe+=f*St,Ae+=f*vt,Fe+=f*Dt,De+=f*Ot,Ce+=f*wt,Be+=f*mt,xe+=f*Ut,ke+=f*Ft,We+=f*It,et+=f*jt,tt+=f*xt,Je+=f*Pt,tr+=f*At,lr+=f*ht,Gr+=f*$t,rr+=f*Lt,f=X[13],Ae+=f*St,Fe+=f*vt,De+=f*Dt,Ce+=f*Ot,Be+=f*wt,xe+=f*mt,ke+=f*Ut,We+=f*Ft,et+=f*It,tt+=f*jt,Je+=f*xt,tr+=f*Pt,lr+=f*At,Gr+=f*ht,rr+=f*$t,rn+=f*Lt,f=X[14],Fe+=f*St,De+=f*vt,Ce+=f*Dt,Be+=f*Ot,xe+=f*wt,ke+=f*mt,We+=f*Ut,et+=f*Ft,tt+=f*It,Je+=f*jt,tr+=f*xt,lr+=f*Pt,Gr+=f*At,rr+=f*ht,rn+=f*$t,_n+=f*Lt,f=X[15],De+=f*St,Ce+=f*vt,Be+=f*Dt,xe+=f*Ot,ke+=f*wt,We+=f*mt,et+=f*Ut,tt+=f*Ft,Je+=f*It,tr+=f*jt,lr+=f*xt,Gr+=f*Pt,rr+=f*At,rn+=f*ht,_n+=f*$t,Rn+=f*Lt,he+=38*Ce,pe+=38*Be,Oe+=38*xe,He+=38*ke,Ve+=38*We,$e+=38*et,_t+=38*tt,yt+=38*Je,Me+=38*tr,Ie+=38*lr,Re+=38*Gr,Ue+=38*rr,qe+=38*rn,Ae+=38*_n,Fe+=38*Rn,j=1,f=he+j+65535,j=Math.floor(f/65536),he=f-j*65536,f=pe+j+65535,j=Math.floor(f/65536),pe=f-j*65536,f=Oe+j+65535,j=Math.floor(f/65536),Oe=f-j*65536,f=He+j+65535,j=Math.floor(f/65536),He=f-j*65536,f=Ve+j+65535,j=Math.floor(f/65536),Ve=f-j*65536,f=$e+j+65535,j=Math.floor(f/65536),$e=f-j*65536,f=_t+j+65535,j=Math.floor(f/65536),_t=f-j*65536,f=yt+j+65535,j=Math.floor(f/65536),yt=f-j*65536,f=Me+j+65535,j=Math.floor(f/65536),Me=f-j*65536,f=Ie+j+65535,j=Math.floor(f/65536),Ie=f-j*65536,f=Re+j+65535,j=Math.floor(f/65536),Re=f-j*65536,f=Ue+j+65535,j=Math.floor(f/65536),Ue=f-j*65536,f=qe+j+65535,j=Math.floor(f/65536),qe=f-j*65536,f=Ae+j+65535,j=Math.floor(f/65536),Ae=f-j*65536,f=Fe+j+65535,j=Math.floor(f/65536),Fe=f-j*65536,f=De+j+65535,j=Math.floor(f/65536),De=f-j*65536,he+=j-1+37*(j-1),j=1,f=he+j+65535,j=Math.floor(f/65536),he=f-j*65536,f=pe+j+65535,j=Math.floor(f/65536),pe=f-j*65536,f=Oe+j+65535,j=Math.floor(f/65536),Oe=f-j*65536,f=He+j+65535,j=Math.floor(f/65536),He=f-j*65536,f=Ve+j+65535,j=Math.floor(f/65536),Ve=f-j*65536,f=$e+j+65535,j=Math.floor(f/65536),$e=f-j*65536,f=_t+j+65535,j=Math.floor(f/65536),_t=f-j*65536,f=yt+j+65535,j=Math.floor(f/65536),yt=f-j*65536,f=Me+j+65535,j=Math.floor(f/65536),Me=f-j*65536,f=Ie+j+65535,j=Math.floor(f/65536),Ie=f-j*65536,f=Re+j+65535,j=Math.floor(f/65536),Re=f-j*65536,f=Ue+j+65535,j=Math.floor(f/65536),Ue=f-j*65536,f=qe+j+65535,j=Math.floor(f/65536),qe=f-j*65536,f=Ae+j+65535,j=Math.floor(f/65536),Ae=f-j*65536,f=Fe+j+65535,j=Math.floor(f/65536),Fe=f-j*65536,f=De+j+65535,j=Math.floor(f/65536),De=f-j*65536,he+=j-1+37*(j-1),Q[0]=he,Q[1]=pe,Q[2]=Oe,Q[3]=He,Q[4]=Ve,Q[5]=$e,Q[6]=_t,Q[7]=yt,Q[8]=Me,Q[9]=Ie,Q[10]=Re,Q[11]=Ue,Q[12]=qe,Q[13]=Ae,Q[14]=Fe,Q[15]=De}function l(Q,X){c(Q,X,X)}function Y(Q,X){const B=o();let f;for(f=0;f<16;f++)B[f]=X[f];for(f=253;f>=0;f--)l(B,B),f!==2&&f!==4&&c(B,B,X);for(f=0;f<16;f++)Q[f]=B[f]}function h(Q,X){const B=o();let f;for(f=0;f<16;f++)B[f]=X[f];for(f=250;f>=0;f--)l(B,B),f!==1&&c(B,B,X);for(f=0;f<16;f++)Q[f]=B[f]}function _(Q,X){const B=o(),f=o(),j=o(),he=o(),pe=o(),Oe=o(),He=o(),Ve=o(),$e=o();g(B,Q[1],Q[0]),g($e,X[1],X[0]),c(B,B,$e),S(f,Q[0],Q[1]),S($e,X[0],X[1]),c(f,f,$e),c(j,Q[3],X[3]),c(j,j,N),c(he,Q[2],X[2]),S(he,he,he),g(pe,f,B),g(Oe,he,j),S(He,he,j),S(Ve,f,B),c(Q[0],pe,Oe),c(Q[1],Ve,He),c(Q[2],He,Oe),c(Q[3],pe,Ve)}function w(Q,X,B){for(let f=0;f<4;f++)W(Q[f],X[f],B)}function C(Q,X){const B=o(),f=o(),j=o();Y(j,X[2]),c(B,X[0],j),c(f,X[1],j),z(Q,f),Q[31]^=D(B)<<7}function E(Q,X,B){M(Q[0],O),M(Q[1],y),M(Q[2],y),M(Q[3],O);for(let f=255;f>=0;--f){const j=B[f/8|0]>>(f&7)&1;w(Q,X,j),_(X,Q),_(Q,Q),w(Q,X,j)}}function v(Q,X){const B=[o(),o(),o(),o()];M(B[0],P),M(B[1],U),M(B[2],y),c(B[3],P,U),E(Q,B,X)}function $(Q){if(Q.length!==i.SEED_LENGTH)throw new Error(`ed25519: seed must be ${i.SEED_LENGTH} bytes`);const X=(0,r.hash)(Q);X[0]&=248,X[31]&=127,X[31]|=64;const B=new Uint8Array(32),f=[o(),o(),o(),o()];v(f,X),C(B,f);const j=new Uint8Array(64);return j.set(Q),j.set(B,32),{publicKey:B,secretKey:j}}i.generateKeyPairFromSeed=$;function H(Q){const X=(0,t.randomBytes)(32,Q),B=$(X);return(0,s.wipe)(X),B}i.generateKeyPair=H;function Z(Q){if(Q.length!==i.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${i.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(Q.subarray(32))}i.extractPublicKeyFromSecretKey=Z;const R=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function J(Q,X){let B,f,j,he;for(f=63;f>=32;--f){for(B=0,j=f-32,he=f-12;j<he;++j)X[j]+=B-16*X[f]*R[j-(f-32)],B=Math.floor((X[j]+128)/256),X[j]-=B*256;X[j]+=B,X[f]=0}for(B=0,j=0;j<32;j++)X[j]+=B-(X[31]>>4)*R[j],B=X[j]>>8,X[j]&=255;for(j=0;j<32;j++)X[j]-=B*R[j];for(f=0;f<32;f++)X[f+1]+=X[f]>>8,Q[f]=X[f]&255}function te(Q){const X=new Float64Array(64);for(let B=0;B<64;B++)X[B]=Q[B];for(let B=0;B<64;B++)Q[B]=0;J(Q,X)}function ae(Q,X){const B=new Float64Array(64),f=[o(),o(),o(),o()],j=(0,r.hash)(Q.subarray(0,32));j[0]&=248,j[31]&=127,j[31]|=64;const he=new Uint8Array(64);he.set(j.subarray(32),32);const pe=new r.SHA512;pe.update(he.subarray(32)),pe.update(X);const Oe=pe.digest();pe.clean(),te(Oe),v(f,Oe),C(he,f),pe.reset(),pe.update(he.subarray(0,32)),pe.update(Q.subarray(32)),pe.update(X);const He=pe.digest();te(He);for(let Ve=0;Ve<32;Ve++)B[Ve]=Oe[Ve];for(let Ve=0;Ve<32;Ve++)for(let $e=0;$e<32;$e++)B[Ve+$e]+=He[Ve]*j[$e];return J(he.subarray(32),B),he}i.sign=ae;function ie(Q,X){const B=o(),f=o(),j=o(),he=o(),pe=o(),Oe=o(),He=o();return M(Q[2],y),b(Q[1],X),l(j,Q[1]),c(he,j,I),g(j,j,Q[2]),S(he,Q[2],he),l(pe,he),l(Oe,pe),c(He,Oe,pe),c(B,He,j),c(B,B,he),h(B,B),c(B,B,j),c(B,B,he),c(B,B,he),c(Q[0],B,he),l(f,Q[0]),c(f,f,he),p(f,j)&&c(Q[0],Q[0],K),l(f,Q[0]),c(f,f,he),p(f,j)?-1:(D(Q[0])===X[31]>>7&&g(Q[0],O,Q[0]),c(Q[3],Q[0],Q[1]),0)}function ye(Q,X,B){const f=new Uint8Array(32),j=[o(),o(),o(),o()],he=[o(),o(),o(),o()];if(B.length!==i.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${i.SIGNATURE_LENGTH} bytes`);if(ie(he,Q))return!1;const pe=new r.SHA512;pe.update(B.subarray(0,32)),pe.update(Q),pe.update(X);const Oe=pe.digest();return te(Oe),E(j,he,Oe),v(he,B.subarray(32)),_(j,he),C(f,j),!re(B,f)}i.verify=ye;function fe(Q){let X=[o(),o(),o(),o()];if(ie(X,Q))throw new Error("Ed25519: invalid public key");let B=o(),f=o(),j=X[1];S(B,y,j),g(f,y,j),Y(f,f),c(B,B,f);let he=new Uint8Array(32);return z(he,B),he}i.convertPublicKeyToX25519=fe;function me(Q){const X=(0,r.hash)(Q.subarray(0,32));X[0]&=248,X[31]&=127,X[31]|=64;const B=new Uint8Array(X.subarray(0,32));return(0,s.wipe)(X),B}i.convertSecretKeyToX25519=me})(bu);const zw="EdDSA",Hw="JWT",Rd=".",Ud="base64url",Bw="utf8",Kw="utf8",Vw=":",kw="did",Gw="key",fl="base58btc",Ww="z",Yw="K36",Jw=32;function $a(i){return fr(mr(uu(i),Bw),Ud)}function Fd(i){const t=mr(Yw,fl),r=Ww+fr(kc([t,i]),fl);return[kw,Gw,r].join(Vw)}function Xw(i){return fr(i,Ud)}function Qw(i){return mr([$a(i.header),$a(i.payload)].join(Rd),Kw)}function Zw(i){return[$a(i.header),$a(i.payload),Xw(i.signature)].join(Rd)}function ll(i=Ni.randomBytes(Jw)){return bu.generateKeyPairFromSeed(i)}async function eE(i,t,r,s,o=Se.fromMiliseconds(Date.now())){const d={alg:zw,typ:Hw},O=Fd(s.publicKey),y=o+r,I={iss:O,sub:i,aud:t,iat:o,exp:y},N=Qw({header:d,payload:I}),P=bu.sign(s.secretKey,N);return Zw({header:d,payload:I,signature:P})}var dl=globalThis&&globalThis.__spreadArray||function(i,t,r){if(r||arguments.length===2)for(var s=0,o=t.length,d;s<o;s++)(d||!(s in t))&&(d||(d=Array.prototype.slice.call(t,0,s)),d[s]=t[s]);return i.concat(d||Array.prototype.slice.call(t))},tE=function(){function i(t,r,s){this.name=t,this.version=r,this.os=s,this.type="browser"}return i}(),rE=function(){function i(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return i}(),nE=function(){function i(t,r,s,o){this.name=t,this.version=r,this.os=s,this.bot=o,this.type="bot-device"}return i}(),iE=function(){function i(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return i}(),sE=function(){function i(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return i}(),aE=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,oE=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,pl=3,cE=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",aE]],gl=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function uE(i){return i?_l(i):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new sE:typeof navigator<"u"?_l(navigator.userAgent):lE()}function hE(i){return i!==""&&cE.reduce(function(t,r){var s=r[0],o=r[1];if(t)return t;var d=o.exec(i);return!!d&&[s,d]},!1)}function _l(i){var t=hE(i);if(!t)return null;var r=t[0],s=t[1];if(r==="searchbot")return new iE;var o=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);o?o.length<pl&&(o=dl(dl([],o,!0),dE(pl-o.length),!0)):o=[];var d=o.join("."),O=fE(i),y=oE.exec(i);return y&&y[1]?new nE(r,d,O,y[1]):new tE(r,d,O)}function fE(i){for(var t=0,r=gl.length;t<r;t++){var s=gl[t],o=s[0],d=s[1],O=d.exec(i);if(O)return o}return null}function lE(){var i=typeof process<"u"&&process.version;return i?new rE(process.version.slice(1)):null}function dE(i){for(var t=[],r=0;r<i;r++)t.push("0");return t}var lt={};Object.defineProperty(lt,"__esModule",{value:!0});lt.getLocalStorage=lt.getLocalStorageOrThrow=lt.getCrypto=lt.getCryptoOrThrow=$d=lt.getLocation=lt.getLocationOrThrow=wu=lt.getNavigator=lt.getNavigatorOrThrow=jd=lt.getDocument=lt.getDocumentOrThrow=lt.getFromWindowOrThrow=lt.getFromWindow=void 0;function ri(i){let t;return typeof window<"u"&&typeof window[i]<"u"&&(t=window[i]),t}lt.getFromWindow=ri;function Ui(i){const t=ri(i);if(!t)throw new Error(`${i} is not defined in Window`);return t}lt.getFromWindowOrThrow=Ui;function pE(){return Ui("document")}lt.getDocumentOrThrow=pE;function gE(){return ri("document")}var jd=lt.getDocument=gE;function _E(){return Ui("navigator")}lt.getNavigatorOrThrow=_E;function yE(){return ri("navigator")}var wu=lt.getNavigator=yE;function vE(){return Ui("location")}lt.getLocationOrThrow=vE;function mE(){return ri("location")}var $d=lt.getLocation=mE;function bE(){return Ui("crypto")}lt.getCryptoOrThrow=bE;function wE(){return ri("crypto")}lt.getCrypto=wE;function EE(){return Ui("localStorage")}lt.getLocalStorageOrThrow=EE;function SE(){return ri("localStorage")}lt.getLocalStorage=SE;var Eu={};Object.defineProperty(Eu,"__esModule",{value:!0});var Ld=Eu.getWindowMetadata=void 0;const yl=lt;function DE(){let i,t;try{i=yl.getDocumentOrThrow(),t=yl.getLocationOrThrow()}catch{return null}function r(){const U=i.getElementsByTagName("link"),K=[];for(let M=0;M<U.length;M++){const L=U[M],W=L.getAttribute("rel");if(W&&W.toLowerCase().indexOf("icon")>-1){const z=L.getAttribute("href");if(z)if(z.toLowerCase().indexOf("https:")===-1&&z.toLowerCase().indexOf("http:")===-1&&z.indexOf("//")!==0){let re=t.protocol+"//"+t.host;if(z.indexOf("/")===0)re+=z;else{const p=t.pathname.split("/");p.pop();const D=p.join("/");re+=D+"/"+z}K.push(re)}else if(z.indexOf("//")===0){const re=t.protocol+z;K.push(re)}else K.push(z)}}return K}function s(...U){const K=i.getElementsByTagName("meta");for(let M=0;M<K.length;M++){const L=K[M],W=["itemprop","property","name"].map(z=>L.getAttribute(z)).filter(z=>z?U.includes(z):!1);if(W.length&&W){const z=L.getAttribute("content");if(z)return z}}return""}function o(){let U=s("name","og:site_name","og:title","twitter:title");return U||(U=i.title),U}function d(){return s("description","og:description","twitter:description","keywords")}const O=o(),y=d(),I=t.origin,N=r();return{description:y,url:I,icons:N,name:O}}Ld=Eu.getWindowMetadata=DE;var gs={};(function(i){const t=ou,r=cu,s=au,o=mu,d=p=>p==null,O=Symbol("encodeFragmentIdentifier");function y(p){switch(p.arrayFormat){case"index":return D=>(b,S)=>{const g=b.length;return S===void 0||p.skipNull&&S===null||p.skipEmptyString&&S===""?b:S===null?[...b,[P(D,p),"[",g,"]"].join("")]:[...b,[P(D,p),"[",P(g,p),"]=",P(S,p)].join("")]};case"bracket":return D=>(b,S)=>S===void 0||p.skipNull&&S===null||p.skipEmptyString&&S===""?b:S===null?[...b,[P(D,p),"[]"].join("")]:[...b,[P(D,p),"[]=",P(S,p)].join("")];case"colon-list-separator":return D=>(b,S)=>S===void 0||p.skipNull&&S===null||p.skipEmptyString&&S===""?b:S===null?[...b,[P(D,p),":list="].join("")]:[...b,[P(D,p),":list=",P(S,p)].join("")];case"comma":case"separator":case"bracket-separator":{const D=p.arrayFormat==="bracket-separator"?"[]=":"=";return b=>(S,g)=>g===void 0||p.skipNull&&g===null||p.skipEmptyString&&g===""?S:(g=g===null?"":g,S.length===0?[[P(b,p),D,P(g,p)].join("")]:[[S,P(g,p)].join(p.arrayFormatSeparator)])}default:return D=>(b,S)=>S===void 0||p.skipNull&&S===null||p.skipEmptyString&&S===""?b:S===null?[...b,P(D,p)]:[...b,[P(D,p),"=",P(S,p)].join("")]}}function I(p){let D;switch(p.arrayFormat){case"index":return(b,S,g)=>{if(D=/\[(\d*)\]$/.exec(b),b=b.replace(/\[\d*\]$/,""),!D){g[b]=S;return}g[b]===void 0&&(g[b]={}),g[b][D[1]]=S};case"bracket":return(b,S,g)=>{if(D=/(\[\])$/.exec(b),b=b.replace(/\[\]$/,""),!D){g[b]=S;return}if(g[b]===void 0){g[b]=[S];return}g[b]=[].concat(g[b],S)};case"colon-list-separator":return(b,S,g)=>{if(D=/(:list)$/.exec(b),b=b.replace(/:list$/,""),!D){g[b]=S;return}if(g[b]===void 0){g[b]=[S];return}g[b]=[].concat(g[b],S)};case"comma":case"separator":return(b,S,g)=>{const c=typeof S=="string"&&S.includes(p.arrayFormatSeparator),l=typeof S=="string"&&!c&&U(S,p).includes(p.arrayFormatSeparator);S=l?U(S,p):S;const Y=c||l?S.split(p.arrayFormatSeparator).map(h=>U(h,p)):S===null?S:U(S,p);g[b]=Y};case"bracket-separator":return(b,S,g)=>{const c=/(\[\])$/.test(b);if(b=b.replace(/\[\]$/,""),!c){g[b]=S&&U(S,p);return}const l=S===null?[]:S.split(p.arrayFormatSeparator).map(Y=>U(Y,p));if(g[b]===void 0){g[b]=l;return}g[b]=[].concat(g[b],l)};default:return(b,S,g)=>{if(g[b]===void 0){g[b]=S;return}g[b]=[].concat(g[b],S)}}}function N(p){if(typeof p!="string"||p.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function P(p,D){return D.encode?D.strict?t(p):encodeURIComponent(p):p}function U(p,D){return D.decode?r(p):p}function K(p){return Array.isArray(p)?p.sort():typeof p=="object"?K(Object.keys(p)).sort((D,b)=>Number(D)-Number(b)).map(D=>p[D]):p}function M(p){const D=p.indexOf("#");return D!==-1&&(p=p.slice(0,D)),p}function L(p){let D="";const b=p.indexOf("#");return b!==-1&&(D=p.slice(b)),D}function W(p){p=M(p);const D=p.indexOf("?");return D===-1?"":p.slice(D+1)}function z(p,D){return D.parseNumbers&&!Number.isNaN(Number(p))&&typeof p=="string"&&p.trim()!==""?p=Number(p):D.parseBooleans&&p!==null&&(p.toLowerCase()==="true"||p.toLowerCase()==="false")&&(p=p.toLowerCase()==="true"),p}function re(p,D){D=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},D),N(D.arrayFormatSeparator);const b=I(D),S=Object.create(null);if(typeof p!="string"||(p=p.trim().replace(/^[?#&]/,""),!p))return S;for(const g of p.split("&")){if(g==="")continue;let[c,l]=s(D.decode?g.replace(/\+/g," "):g,"=");l=l===void 0?null:["comma","separator","bracket-separator"].includes(D.arrayFormat)?l:U(l,D),b(U(c,D),l,S)}for(const g of Object.keys(S)){const c=S[g];if(typeof c=="object"&&c!==null)for(const l of Object.keys(c))c[l]=z(c[l],D);else S[g]=z(c,D)}return D.sort===!1?S:(D.sort===!0?Object.keys(S).sort():Object.keys(S).sort(D.sort)).reduce((g,c)=>{const l=S[c];return Boolean(l)&&typeof l=="object"&&!Array.isArray(l)?g[c]=K(l):g[c]=l,g},Object.create(null))}i.extract=W,i.parse=re,i.stringify=(p,D)=>{if(!p)return"";D=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},D),N(D.arrayFormatSeparator);const b=l=>D.skipNull&&d(p[l])||D.skipEmptyString&&p[l]==="",S=y(D),g={};for(const l of Object.keys(p))b(l)||(g[l]=p[l]);const c=Object.keys(g);return D.sort!==!1&&c.sort(D.sort),c.map(l=>{const Y=p[l];return Y===void 0?"":Y===null?P(l,D):Array.isArray(Y)?Y.length===0&&D.arrayFormat==="bracket-separator"?P(l,D)+"[]":Y.reduce(S(l),[]).join("&"):P(l,D)+"="+P(Y,D)}).filter(l=>l.length>0).join("&")},i.parseUrl=(p,D)=>{D=Object.assign({decode:!0},D);const[b,S]=s(p,"#");return Object.assign({url:b.split("?")[0]||"",query:re(W(p),D)},D&&D.parseFragmentIdentifier&&S?{fragmentIdentifier:U(S,D)}:{})},i.stringifyUrl=(p,D)=>{D=Object.assign({encode:!0,strict:!0,[O]:!0},D);const b=M(p.url).split("?")[0]||"",S=i.extract(p.url),g=i.parse(S,{sort:!1}),c=Object.assign(g,p.query);let l=i.stringify(c,D);l&&(l=`?${l}`);let Y=L(p.url);return p.fragmentIdentifier&&(Y=`#${D[O]?P(p.fragmentIdentifier,D):p.fragmentIdentifier}`),`${b}${l}${Y}`},i.pick=(p,D,b)=>{b=Object.assign({parseFragmentIdentifier:!0,[O]:!1},b);const{url:S,query:g,fragmentIdentifier:c}=i.parseUrl(p,b);return i.stringifyUrl({url:S,query:o(g,D),fragmentIdentifier:c},b)},i.exclude=(p,D,b)=>{const S=Array.isArray(D)?g=>!D.includes(g):(g,c)=>!D(g,c);return i.pick(p,S,b)}})(gs);function Md(i,t){return i.includes(":")?[i]:t.chains||[]}const qd="base10",hr="base16",Yc="base64pad",Su="utf8",zd=0,ni=1,OE=0,vl=1,Jc=12,Du=32;function IE(){const i=_u.generateKeyPair();return{privateKey:fr(i.secretKey,hr),publicKey:fr(i.publicKey,hr)}}function Xc(){const i=Ni.randomBytes(Du);return fr(i,hr)}function xE(i,t){const r=_u.sharedKey(mr(i,hr),mr(t,hr)),s=new jm(Va.SHA256,r).expand(Du);return fr(s,hr)}function AE(i){const t=Va.hash(mr(i,hr));return fr(t,hr)}function Qn(i){const t=Va.hash(mr(i,Su));return fr(t,hr)}function CE(i){return mr(`${i}`,qd)}function bs(i){return Number(fr(i,qd))}function PE(i){const t=CE(typeof i.type<"u"?i.type:zd);if(bs(t)===ni&&typeof i.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof i.senderPublicKey<"u"?mr(i.senderPublicKey,hr):void 0,s=typeof i.iv<"u"?mr(i.iv,hr):Ni.randomBytes(Jc),o=new pu.ChaCha20Poly1305(mr(i.symKey,hr)).seal(s,mr(i.message,Su));return NE({type:t,sealed:o,iv:s,senderPublicKey:r})}function TE(i){const t=new pu.ChaCha20Poly1305(mr(i.symKey,hr)),{sealed:r,iv:s}=La(i.encoded),o=t.open(s,r);if(o===null)throw new Error("Failed to decrypt");return fr(o,Su)}function NE(i){if(bs(i.type)===ni){if(typeof i.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return fr(kc([i.type,i.senderPublicKey,i.iv,i.sealed]),Yc)}return fr(kc([i.type,i.iv,i.sealed]),Yc)}function La(i){const t=mr(i,Yc),r=t.slice(OE,vl),s=vl;if(bs(r)===ni){const y=s+Du,I=y+Jc,N=t.slice(s,y),P=t.slice(y,I),U=t.slice(I);return{type:r,sealed:U,iv:P,senderPublicKey:N}}const o=s+Jc,d=t.slice(s,o),O=t.slice(o);return{type:r,sealed:O,iv:d}}function RE(i,t){const r=La(i);return Hd({type:bs(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?fr(r.senderPublicKey,hr):void 0,receiverPublicKey:t?.receiverPublicKey})}function Hd(i){const t=i?.type||zd;if(t===ni){if(typeof i?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof i?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:i?.senderPublicKey,receiverPublicKey:i?.receiverPublicKey}}function ml(i){return i.type===ni&&typeof i.senderPublicKey=="string"&&typeof i.receiverPublicKey=="string"}var UE=Object.defineProperty,bl=Object.getOwnPropertySymbols,FE=Object.prototype.hasOwnProperty,jE=Object.prototype.propertyIsEnumerable,wl=(i,t,r)=>t in i?UE(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,El=(i,t)=>{for(var r in t||(t={}))FE.call(t,r)&&wl(i,r,t[r]);if(bl)for(var r of bl(t))jE.call(t,r)&&wl(i,r,t[r]);return i};const $E="ReactNative",ds={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},LE="js";function Ou(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Bd(){return!jd()&&!!wu()&&navigator.product===$E}function Iu(){return!Ou()&&!!wu()}function ME(){return Bd()?ds.reactNative:Ou()?ds.node:Iu()?ds.browser:ds.unknown}function qE(i,t){let r=gs.parse(i);return r=El(El({},r),t),i=gs.stringify(r),i}function zE(){return Ld()||{name:"",description:"",url:"",icons:[""]}}function HE(){const i=uE();if(i===null)return"unknown";const t=i.os?i.os.replace(" ","").toLowerCase():"unknown";return i.type==="browser"?[t,i.name,i.version].join("-"):[t,i.version].join("-")}function BE(){var i;const t=ME();return t===ds.browser?[t,((i=$d())==null?void 0:i.host)||"unknown"].join(":"):t}function KE(i,t,r){const s=HE(),o=BE();return[[i,t].join("-"),[LE,r].join("-"),s,o].join("/")}function VE({protocol:i,version:t,relayUrl:r,sdkVersion:s,auth:o,projectId:d,useOnCloseEvent:O}){const y=r.split("?"),I=KE(i,t,s),N={auth:o,ua:I,projectId:d,useOnCloseEvent:O||void 0},P=qE(y[1]||"",N);return y[0]+"?"+P}function Xn(i,t){return i.filter(r=>t.includes(r)).length===i.length}function Kd(i){return Object.fromEntries(i.entries())}function Vd(i){return new Map(Object.entries(i))}function Ai(i=Se.FIVE_MINUTES,t){const r=Se.toMiliseconds(i||Se.FIVE_MINUTES);let s,o,d;return{resolve:O=>{d&&s&&(clearTimeout(d),s(O))},reject:O=>{d&&o&&(clearTimeout(d),o(O))},done:()=>new Promise((O,y)=>{d=setTimeout(()=>{y(new Error(t))},r),s=O,o=y})}}function Ma(i,t,r){return new Promise(async(s,o)=>{const d=setTimeout(()=>o(new Error(r)),t);try{const O=await i;s(O)}catch(O){o(O)}clearTimeout(d)})}function kd(i,t){if(typeof t=="string"&&t.startsWith(`${i}:`))return t;if(i.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(i.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${i}`)}function kE(i){return kd("topic",i)}function GE(i){return kd("id",i)}function Gd(i){const[t,r]=i.split(":"),s={id:void 0,topic:void 0};if(t==="topic"&&typeof r=="string")s.topic=r;else if(t==="id"&&Number.isInteger(Number(r)))s.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return s}function kr(i,t){return Se.fromMiliseconds((t||Date.now())+Se.toMiliseconds(i))}function An(i){return Date.now()>=Se.toMiliseconds(i)}function zt(i,t){return`${i}${t?`:${t}`:""}`}const WE="irn";function Qc(i){return i?.relay||{protocol:WE}}function Pa(i){const t=aw[i];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${i}`);return t}var YE=Object.defineProperty,Sl=Object.getOwnPropertySymbols,JE=Object.prototype.hasOwnProperty,XE=Object.prototype.propertyIsEnumerable,Dl=(i,t,r)=>t in i?YE(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,QE=(i,t)=>{for(var r in t||(t={}))JE.call(t,r)&&Dl(i,r,t[r]);if(Sl)for(var r of Sl(t))XE.call(t,r)&&Dl(i,r,t[r]);return i};function ZE(i,t="-"){const r={},s="relay"+t;return Object.keys(i).forEach(o=>{if(o.startsWith(s)){const d=o.replace(s,""),O=i[o];r[d]=O}}),r}function e3(i){const t=i.indexOf(":"),r=i.indexOf("?")!==-1?i.indexOf("?"):void 0,s=i.substring(0,t),o=i.substring(t+1,r).split("@"),d=typeof r<"u"?i.substring(r):"",O=gs.parse(d);return{protocol:s,topic:o[0],version:parseInt(o[1],10),symKey:O.symKey,relay:ZE(O)}}function t3(i,t="-"){const r="relay",s={};return Object.keys(i).forEach(o=>{const d=r+t+o;i[o]&&(s[d]=i[o])}),s}function r3(i){return`${i.protocol}:${i.topic}@${i.version}?`+gs.stringify(QE({symKey:i.symKey},t3(i.relay)))}function Fi(i){const t=[];return i.forEach(r=>{const[s,o]=r.split(":");t.push(`${s}:${o}`)}),t}function n3(i){const t=[];return Object.values(i).forEach(r=>{t.push(...Fi(r.accounts))}),t}function i3(i,t){const r=[];return Object.values(i).forEach(s=>{Fi(s.accounts).includes(t)&&r.push(...s.methods)}),r}function s3(i,t){const r=[];return Object.values(i).forEach(s=>{Fi(s.accounts).includes(t)&&r.push(...s.events)}),r}function a3(i,t){const r=Ta(i,t);if(r)throw new Error(r.message);const s={};for(const[o,d]of Object.entries(i))s[o]={methods:d.methods,events:d.events,chains:d.accounts.map(O=>`${O.split(":")[0]}:${O.split(":")[1]}`)};return s}const o3={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},c3={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function de(i,t){const{message:r,code:s}=c3[i];return{message:t?`${r} ${t}`:r,code:s}}function Gt(i,t){const{message:r,code:s}=o3[i];return{message:t?`${r} ${t}`:r,code:s}}function ws(i,t){return Array.isArray(i)?typeof t<"u"&&i.length?i.every(t):!0:!1}function ps(i){return Object.getPrototypeOf(i)===Object.prototype&&Object.keys(i).length}function cr(i){return typeof i>"u"}function Wt(i,t){return t&&cr(i)?!0:typeof i=="string"&&Boolean(i.trim().length)}function xu(i,t){return t&&cr(i)?!0:typeof i=="number"&&!isNaN(i)}function u3(i,t){const{requiredNamespaces:r}=t,s=Object.keys(i.namespaces),o=Object.keys(r);let d=!0;return Xn(o,s)?(s.forEach(O=>{const{accounts:y,methods:I,events:N}=i.namespaces[O],P=Fi(y),U=r[O];(!Xn(Md(O,U),P)||!Xn(U.methods,I)||!Xn(U.events,N))&&(d=!1)}),d):!1}function Au(i){return Wt(i,!1)&&i.includes(":")?i.split(":").length===2:!1}function h3(i){if(Wt(i,!1)&&i.includes(":")){const t=i.split(":");if(t.length===3){const r=t[0]+":"+t[1];return!!t[2]&&Au(r)}}return!1}function f3(i){if(Wt(i,!1))try{return typeof new URL(i)<"u"}catch{return!1}return!1}function l3(i){var t;return(t=i?.proposer)==null?void 0:t.publicKey}function d3(i){return i?.topic}function p3(i,t){let r=null;return Wt(i?.publicKey,!1)||(r=de("MISSING_OR_INVALID",`${t} controller public key should be a string`)),r}function Ol(i){let t=!0;return ws(i)?i.length&&(t=i.every(r=>Wt(r,!1))):t=!1,t}function g3(i,t,r){let s=null;return ws(t)?t.forEach(o=>{s||(!Au(o)||!o.includes(i))&&(s=Gt("UNSUPPORTED_CHAINS",`${r}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):s=Gt("UNSUPPORTED_CHAINS",`${r}, chains ${t} should be an array of strings conforming to "namespace:chainId" format`),s}function _3(i,t){let r=null;return Object.entries(i).forEach(([s,o])=>{if(r)return;const d=g3(s,Md(s,o),`${t} requiredNamespace`);d&&(r=d)}),r}function y3(i,t){let r=null;return ws(i)?i.forEach(s=>{r||h3(s)||(r=Gt("UNSUPPORTED_ACCOUNTS",`${t}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):r=Gt("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function v3(i,t){let r=null;return Object.values(i).forEach(s=>{if(r)return;const o=y3(s?.accounts,`${t} namespace`);o&&(r=o)}),r}function m3(i,t){let r=null;return Ol(i?.methods)?Ol(i?.events)||(r=Gt("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=Gt("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}function Wd(i,t){let r=null;return Object.values(i).forEach(s=>{if(r)return;const o=m3(s,`${t}, namespace`);o&&(r=o)}),r}function b3(i,t,r){let s=null;if(i&&ps(i)){const o=Wd(i,t);o&&(s=o);const d=_3(i,t);d&&(s=d)}else s=de("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return s}function Ta(i,t){let r=null;if(i&&ps(i)){const s=Wd(i,t);s&&(r=s);const o=v3(i,t);o&&(r=o)}else r=de("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function Yd(i){return Wt(i.protocol,!0)}function w3(i,t){let r=!1;return t&&!i?r=!0:i&&ws(i)&&i.length&&i.forEach(s=>{r=Yd(s)}),r}function E3(i){return typeof i=="number"}function vr(i){return typeof i<"u"&&typeof i!==null}function S3(i){return!(!i||typeof i!="object"||!i.code||!xu(i.code,!1)||!i.message||!Wt(i.message,!1))}function D3(i){return!(cr(i)||!Wt(i.method,!1))}function O3(i){return!(cr(i)||cr(i.result)&&cr(i.error)||!xu(i.id,!1)||!Wt(i.jsonrpc,!1))}function I3(i){return!(cr(i)||!Wt(i.name,!1))}function Il(i,t){return!(!Au(t)||!n3(i).includes(t))}function x3(i,t,r){return Wt(r,!1)?i3(i,t).includes(r):!1}function A3(i,t,r){return Wt(r,!1)?s3(i,t).includes(r):!1}function xl(i,t,r){let s=null;const o=C3(i),d=P3(t),O=Object.keys(o),y=Object.keys(d),I=Al(Object.keys(i)),N=Al(Object.keys(t)),P=I.filter(U=>!N.includes(U));return P.length&&(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${P.toString()}
      Received: ${Object.keys(t).toString()}`)),Xn(O,y)||(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${O.toString()}
      Approved: ${y.toString()}`)),Object.keys(t).forEach(U=>{if(!U.includes(":")||s)return;const K=Fi(t[U].accounts);K.includes(U)||(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${U}
        Required: ${U}
        Approved: ${K.toString()}`))}),O.forEach(U=>{s||(Xn(o[U].methods,d[U].methods)?Xn(o[U].events,d[U].events)||(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${U}`)):s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${U}`))}),s}function C3(i){const t={};return Object.keys(i).forEach(r=>{var s;r.includes(":")?t[r]=i[r]:(s=i[r].chains)==null||s.forEach(o=>{t[o]={methods:i[r].methods,events:i[r].events}})}),t}function Al(i){return[...new Set(i.map(t=>t.includes(":")?t.split(":")[0]:t))]}function P3(i){const t={};return Object.keys(i).forEach(r=>{r.includes(":")?t[r]=i[r]:Fi(i[r].accounts)?.forEach(o=>{t[o]={accounts:i[r].accounts.filter(d=>d.includes(`${o}:`)),methods:i[r].methods,events:i[r].events}})}),t}function T3(i,t){return xu(i,!1)&&i<=t.max&&i>=t.min}const Cl=10,N3=()=>typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:require("ws"),R3=()=>typeof window<"u",U3=N3();class F3{constructor(t){if(this.url=t,this.events=new Ir.EventEmitter,this.registering=!1,!Ff(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);this.url=t}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){return new Promise((t,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),t()},this.socket.close()})}async send(t,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(uu(t))}catch(s){this.onError(t.id,s)}}register(t=this.url){if(!Ff(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((s,o)=>{this.events.once("register_error",d=>{this.resetMaxListeners(),o(d)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=t,this.registering=!0,new Promise((r,s)=>{const o=em.isReactNative()?void 0:{rejectUnauthorized:!tm(t)},d=new U3(t,[],o);R3()?d.onerror=O=>{const y=O;s(this.emitError(y.error))}:d.on("error",O=>{s(this.emitError(O))}),d.onopen=()=>{this.onOpen(d),r(d)}})}onOpen(t){t.onmessage=r=>this.onPayload(r),t.onclose=r=>this.onClose(r),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(typeof t.data>"u")return;const r=typeof t.data=="string"?ud(t.data):t.data;this.events.emit("payload",r)}onError(t,r){const s=this.parseError(r),o=s.message||s.toString(),d=hu(t,o);this.events.emit("payload",d)}parseError(t,r=this.url){return rm(t,r,"WS")}resetMaxListeners(){this.events.getMaxListeners()>Cl&&this.events.setMaxListeners(Cl)}emitError(t){const r=this.parseError(new Error(t?.message||`WebSocket connection failed for URL: ${this.url}`));return this.events.emit("register_error",r),r}}var qa={},j3={get exports(){return qa},set exports(i){qa=i}};(function(i,t){var r=200,s="__lodash_hash_undefined__",o=1,d=2,O=9007199254740991,y="[object Arguments]",I="[object Array]",N="[object AsyncFunction]",P="[object Boolean]",U="[object Date]",K="[object Error]",M="[object Function]",L="[object GeneratorFunction]",W="[object Map]",z="[object Number]",re="[object Null]",p="[object Object]",D="[object Promise]",b="[object Proxy]",S="[object RegExp]",g="[object Set]",c="[object String]",l="[object Symbol]",Y="[object Undefined]",h="[object WeakMap]",_="[object ArrayBuffer]",w="[object DataView]",C="[object Float32Array]",E="[object Float64Array]",v="[object Int8Array]",$="[object Int16Array]",H="[object Int32Array]",Z="[object Uint8Array]",R="[object Uint8ClampedArray]",J="[object Uint16Array]",te="[object Uint32Array]",ae=/[\\^$.*+?()[\]{}|]/g,ie=/^\[object .+?Constructor\]$/,ye=/^(?:0|[1-9]\d*)$/,fe={};fe[C]=fe[E]=fe[v]=fe[$]=fe[H]=fe[Z]=fe[R]=fe[J]=fe[te]=!0,fe[y]=fe[I]=fe[_]=fe[P]=fe[w]=fe[U]=fe[K]=fe[M]=fe[W]=fe[z]=fe[p]=fe[S]=fe[g]=fe[c]=fe[h]=!1;var me=typeof ur=="object"&&ur&&ur.Object===Object&&ur,Q=typeof self=="object"&&self&&self.Object===Object&&self,X=me||Q||Function("return this")(),B=t&&!t.nodeType&&t,f=B&&!0&&i&&!i.nodeType&&i,j=f&&f.exports===B,he=j&&me.process,pe=function(){try{return he&&he.binding&&he.binding("util")}catch{}}(),Oe=pe&&pe.isTypedArray;function He(T,V){for(var ce=-1,ge=T==null?0:T.length,ot=0,Te=[];++ce<ge;){var pt=T[ce];V(pt,ce,T)&&(Te[ot++]=pt)}return Te}function Ve(T,V){for(var ce=-1,ge=V.length,ot=T.length;++ce<ge;)T[ot+ce]=V[ce];return T}function $e(T,V){for(var ce=-1,ge=T==null?0:T.length;++ce<ge;)if(V(T[ce],ce,T))return!0;return!1}function _t(T,V){for(var ce=-1,ge=Array(T);++ce<T;)ge[ce]=V(ce);return ge}function yt(T){return function(V){return T(V)}}function Me(T,V){return T.has(V)}function Ie(T,V){return T?.[V]}function Re(T){var V=-1,ce=Array(T.size);return T.forEach(function(ge,ot){ce[++V]=[ot,ge]}),ce}function Ue(T,V){return function(ce){return T(V(ce))}}function qe(T){var V=-1,ce=Array(T.size);return T.forEach(function(ge){ce[++V]=ge}),ce}var Ae=Array.prototype,Fe=Function.prototype,De=Object.prototype,Ce=X["__core-js_shared__"],Be=Fe.toString,xe=De.hasOwnProperty,ke=function(){var T=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||"");return T?"Symbol(src)_1."+T:""}(),We=De.toString,et=RegExp("^"+Be.call(xe).replace(ae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=j?X.Buffer:void 0,Je=X.Symbol,tr=X.Uint8Array,lr=De.propertyIsEnumerable,Gr=Ae.splice,rr=Je?Je.toStringTag:void 0,rn=Object.getOwnPropertySymbols,_n=tt?tt.isBuffer:void 0,Rn=Ue(Object.keys,Object),St=br(X,"DataView"),vt=br(X,"Map"),Dt=br(X,"Promise"),Ot=br(X,"Set"),wt=br(X,"WeakMap"),mt=br(Object,"create"),Ut=sn(St),Ft=sn(vt),It=sn(Dt),jt=sn(Ot),xt=sn(wt),Pt=Je?Je.prototype:void 0,At=Pt?Pt.valueOf:void 0;function ht(T){var V=-1,ce=T==null?0:T.length;for(this.clear();++V<ce;){var ge=T[V];this.set(ge[0],ge[1])}}function $t(){this.__data__=mt?mt(null):{},this.size=0}function Lt(T){var V=this.has(T)&&delete this.__data__[T];return this.size-=V?1:0,V}function Ja(T){var V=this.__data__;if(mt){var ce=V[T];return ce===s?void 0:ce}return xe.call(V,T)?V[T]:void 0}function Xa(T){var V=this.__data__;return mt?V[T]!==void 0:xe.call(V,T)}function Qa(T,V){var ce=this.__data__;return this.size+=this.has(T)?0:1,ce[T]=mt&&V===void 0?s:V,this}ht.prototype.clear=$t,ht.prototype.delete=Lt,ht.prototype.get=Ja,ht.prototype.has=Xa,ht.prototype.set=Qa;function Ar(T){var V=-1,ce=T==null?0:T.length;for(this.clear();++V<ce;){var ge=T[V];this.set(ge[0],ge[1])}}function Za(){this.__data__=[],this.size=0}function eo(T){var V=this.__data__,ce=Un(V,T);if(ce<0)return!1;var ge=V.length-1;return ce==ge?V.pop():Gr.call(V,ce,1),--this.size,!0}function to(T){var V=this.__data__,ce=Un(V,T);return ce<0?void 0:V[ce][1]}function ro(T){return Un(this.__data__,T)>-1}function no(T,V){var ce=this.__data__,ge=Un(ce,T);return ge<0?(++this.size,ce.push([T,V])):ce[ge][1]=V,this}Ar.prototype.clear=Za,Ar.prototype.delete=eo,Ar.prototype.get=to,Ar.prototype.has=ro,Ar.prototype.set=no;function nn(T){var V=-1,ce=T==null?0:T.length;for(this.clear();++V<ce;){var ge=T[V];this.set(ge[0],ge[1])}}function ai(){this.size=0,this.__data__={hash:new ht,map:new(vt||Ar),string:new ht}}function io(T){var V=yn(this,T).delete(T);return this.size-=V?1:0,V}function oi(T){return yn(this,T).get(T)}function so(T){return yn(this,T).has(T)}function ao(T,V){var ce=yn(this,T),ge=ce.size;return ce.set(T,V),this.size+=ce.size==ge?0:1,this}nn.prototype.clear=ai,nn.prototype.delete=io,nn.prototype.get=oi,nn.prototype.has=so,nn.prototype.set=ao;function ci(T){var V=-1,ce=T==null?0:T.length;for(this.__data__=new nn;++V<ce;)this.add(T[V])}function Ss(T){return this.__data__.set(T,s),this}function Ds(T){return this.__data__.has(T)}ci.prototype.add=ci.prototype.push=Ss,ci.prototype.has=Ds;function qr(T){var V=this.__data__=new Ar(T);this.size=V.size}function oo(){this.__data__=new Ar,this.size=0}function co(T){var V=this.__data__,ce=V.delete(T);return this.size=V.size,ce}function uo(T){return this.__data__.get(T)}function ho(T){return this.__data__.has(T)}function Os(T,V){var ce=this.__data__;if(ce instanceof Ar){var ge=ce.__data__;if(!vt||ge.length<r-1)return ge.push([T,V]),this.size=++ce.size,this;ce=this.__data__=new nn(ge)}return ce.set(T,V),this.size=ce.size,this}qr.prototype.clear=oo,qr.prototype.delete=co,qr.prototype.get=uo,qr.prototype.has=ho,qr.prototype.set=Os;function Is(T,V){var ce=fi(T),ge=!ce&&Ls(T),ot=!ce&&!ge&&Mi(T),Te=!ce&&!ge&&!ot&&zs(T),pt=ce||ge||ot||Te,Mt=pt?_t(T.length,String):[],Xe=Mt.length;for(var ct in T)(V||xe.call(T,ct))&&!(pt&&(ct=="length"||ot&&(ct=="offset"||ct=="parent")||Te&&(ct=="buffer"||ct=="byteLength"||ct=="byteOffset")||Rs(ct,Xe)))&&Mt.push(ct);return Mt}function Un(T,V){for(var ce=T.length;ce--;)if($s(T[ce][0],V))return ce;return-1}function $i(T,V,ce){var ge=V(T);return fi(T)?ge:Ve(ge,ce(T))}function Fn(T){return T==null?T===void 0?Y:re:rr&&rr in Object(T)?Ts(T):po(T)}function Li(T){return $n(T)&&Fn(T)==y}function jn(T,V,ce,ge,ot){return T===V?!0:T==null||V==null||!$n(T)&&!$n(V)?T!==T&&V!==V:xs(T,V,ce,ge,jn,ot)}function xs(T,V,ce,ge,ot,Te){var pt=fi(T),Mt=fi(V),Xe=pt?I:Wr(T),ct=Mt?I:Wr(V);Xe=Xe==y?p:Xe,ct=ct==y?p:ct;var Tt=Xe==p,dr=ct==p,qt=Xe==ct;if(qt&&Mi(T)){if(!Mi(V))return!1;pt=!0,Tt=!1}if(qt&&!Tt)return Te||(Te=new qr),pt||zs(T)?ui(T,V,ce,ge,ot,Te):lo(T,V,Xe,ce,ge,ot,Te);if(!(ce&o)){var gt=Tt&&xe.call(T,"__wrapped__"),nr=dr&&xe.call(V,"__wrapped__");if(gt||nr){var zr=gt?T.value():T,Cr=nr?V.value():V;return Te||(Te=new qr),ot(zr,Cr,ce,ge,Te)}}return qt?(Te||(Te=new qr),Ps(T,V,ce,ge,ot,Te)):!1}function fo(T){if(!qs(T)||Fs(T))return!1;var V=li(T)?et:ie;return V.test(sn(T))}function As(T){return $n(T)&&Ms(T.length)&&!!fe[Fn(T)]}function Cs(T){if(!js(T))return Rn(T);var V=[];for(var ce in Object(T))xe.call(T,ce)&&ce!="constructor"&&V.push(ce);return V}function ui(T,V,ce,ge,ot,Te){var pt=ce&o,Mt=T.length,Xe=V.length;if(Mt!=Xe&&!(pt&&Xe>Mt))return!1;var ct=Te.get(T);if(ct&&Te.get(V))return ct==V;var Tt=-1,dr=!0,qt=ce&d?new ci:void 0;for(Te.set(T,V),Te.set(V,T);++Tt<Mt;){var gt=T[Tt],nr=V[Tt];if(ge)var zr=pt?ge(nr,gt,Tt,V,T,Te):ge(gt,nr,Tt,T,V,Te);if(zr!==void 0){if(zr)continue;dr=!1;break}if(qt){if(!$e(V,function(Cr,Yr){if(!Me(qt,Yr)&&(gt===Cr||ot(gt,Cr,ce,ge,Te)))return qt.push(Yr)})){dr=!1;break}}else if(!(gt===nr||ot(gt,nr,ce,ge,Te))){dr=!1;break}}return Te.delete(T),Te.delete(V),dr}function lo(T,V,ce,ge,ot,Te,pt){switch(ce){case w:if(T.byteLength!=V.byteLength||T.byteOffset!=V.byteOffset)return!1;T=T.buffer,V=V.buffer;case _:return!(T.byteLength!=V.byteLength||!Te(new tr(T),new tr(V)));case P:case U:case z:return $s(+T,+V);case K:return T.name==V.name&&T.message==V.message;case S:case c:return T==V+"";case W:var Mt=Re;case g:var Xe=ge&o;if(Mt||(Mt=qe),T.size!=V.size&&!Xe)return!1;var ct=pt.get(T);if(ct)return ct==V;ge|=d,pt.set(T,V);var Tt=ui(Mt(T),Mt(V),ge,ot,Te,pt);return pt.delete(T),Tt;case l:if(At)return At.call(T)==At.call(V)}return!1}function Ps(T,V,ce,ge,ot,Te){var pt=ce&o,Mt=hi(T),Xe=Mt.length,ct=hi(V),Tt=ct.length;if(Xe!=Tt&&!pt)return!1;for(var dr=Xe;dr--;){var qt=Mt[dr];if(!(pt?qt in V:xe.call(V,qt)))return!1}var gt=Te.get(T);if(gt&&Te.get(V))return gt==V;var nr=!0;Te.set(T,V),Te.set(V,T);for(var zr=pt;++dr<Xe;){qt=Mt[dr];var Cr=T[qt],Yr=V[qt];if(ge)var qi=pt?ge(Yr,Cr,qt,V,T,Te):ge(Cr,Yr,qt,T,V,Te);if(!(qi===void 0?Cr===Yr||ot(Cr,Yr,ce,ge,Te):qi)){nr=!1;break}zr||(zr=qt=="constructor")}if(nr&&!zr){var Ln=T.constructor,Kt=V.constructor;Ln!=Kt&&"constructor"in T&&"constructor"in V&&!(typeof Ln=="function"&&Ln instanceof Ln&&typeof Kt=="function"&&Kt instanceof Kt)&&(nr=!1)}return Te.delete(T),Te.delete(V),nr}function hi(T){return $i(T,yo,Ns)}function yn(T,V){var ce=T.__data__;return Us(V)?ce[typeof V=="string"?"string":"hash"]:ce.map}function br(T,V){var ce=Ie(T,V);return fo(ce)?ce:void 0}function Ts(T){var V=xe.call(T,rr),ce=T[rr];try{T[rr]=void 0;var ge=!0}catch{}var ot=We.call(T);return ge&&(V?T[rr]=ce:delete T[rr]),ot}var Ns=rn?function(T){return T==null?[]:(T=Object(T),He(rn(T),function(V){return lr.call(T,V)}))}:at,Wr=Fn;(St&&Wr(new St(new ArrayBuffer(1)))!=w||vt&&Wr(new vt)!=W||Dt&&Wr(Dt.resolve())!=D||Ot&&Wr(new Ot)!=g||wt&&Wr(new wt)!=h)&&(Wr=function(T){var V=Fn(T),ce=V==p?T.constructor:void 0,ge=ce?sn(ce):"";if(ge)switch(ge){case Ut:return w;case Ft:return W;case It:return D;case jt:return g;case xt:return h}return V});function Rs(T,V){return V=V??O,!!V&&(typeof T=="number"||ye.test(T))&&T>-1&&T%1==0&&T<V}function Us(T){var V=typeof T;return V=="string"||V=="number"||V=="symbol"||V=="boolean"?T!=="__proto__":T===null}function Fs(T){return!!ke&&ke in T}function js(T){var V=T&&T.constructor,ce=typeof V=="function"&&V.prototype||De;return T===ce}function po(T){return We.call(T)}function sn(T){if(T!=null){try{return Be.call(T)}catch{}try{return T+""}catch{}}return""}function $s(T,V){return T===V||T!==T&&V!==V}var Ls=Li(function(){return arguments}())?Li:function(T){return $n(T)&&xe.call(T,"callee")&&!lr.call(T,"callee")},fi=Array.isArray;function go(T){return T!=null&&Ms(T.length)&&!li(T)}var Mi=_n||st;function _o(T,V){return jn(T,V)}function li(T){if(!qs(T))return!1;var V=Fn(T);return V==M||V==L||V==N||V==b}function Ms(T){return typeof T=="number"&&T>-1&&T%1==0&&T<=O}function qs(T){var V=typeof T;return T!=null&&(V=="object"||V=="function")}function $n(T){return T!=null&&typeof T=="object"}var zs=Oe?yt(Oe):As;function yo(T){return go(T)?Is(T):Cs(T)}function at(){return[]}function st(){return!1}i.exports=_o})(j3,qa);function $3(i,t){if(i.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var o=0;o<i.length;o++){var d=i.charAt(o),O=d.charCodeAt(0);if(r[O]!==255)throw new TypeError(d+" is ambiguous");r[O]=o}var y=i.length,I=i.charAt(0),N=Math.log(y)/Math.log(256),P=Math.log(256)/Math.log(y);function U(L){if(L instanceof Uint8Array||(ArrayBuffer.isView(L)?L=new Uint8Array(L.buffer,L.byteOffset,L.byteLength):Array.isArray(L)&&(L=Uint8Array.from(L))),!(L instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(L.length===0)return"";for(var W=0,z=0,re=0,p=L.length;re!==p&&L[re]===0;)re++,W++;for(var D=(p-re)*P+1>>>0,b=new Uint8Array(D);re!==p;){for(var S=L[re],g=0,c=D-1;(S!==0||g<z)&&c!==-1;c--,g++)S+=256*b[c]>>>0,b[c]=S%y>>>0,S=S/y>>>0;if(S!==0)throw new Error("Non-zero carry");z=g,re++}for(var l=D-z;l!==D&&b[l]===0;)l++;for(var Y=I.repeat(W);l<D;++l)Y+=i.charAt(b[l]);return Y}function K(L){if(typeof L!="string")throw new TypeError("Expected String");if(L.length===0)return new Uint8Array;var W=0;if(L[W]!==" "){for(var z=0,re=0;L[W]===I;)z++,W++;for(var p=(L.length-W)*N+1>>>0,D=new Uint8Array(p);L[W];){var b=r[L.charCodeAt(W)];if(b===255)return;for(var S=0,g=p-1;(b!==0||S<re)&&g!==-1;g--,S++)b+=y*D[g]>>>0,D[g]=b%256>>>0,b=b/256>>>0;if(b!==0)throw new Error("Non-zero carry");re=S,W++}if(L[W]!==" "){for(var c=p-re;c!==p&&D[c]===0;)c++;for(var l=new Uint8Array(z+(p-c)),Y=z;c!==p;)l[Y++]=D[c++];return l}}}function M(L){var W=K(L);if(W)return W;throw new Error(`Non-${t} character`)}return{encode:U,decodeUnsafe:K,decode:M}}var L3=$3,M3=L3;const Jd=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},q3=i=>new TextEncoder().encode(i),z3=i=>new TextDecoder().decode(i);class H3{constructor(t,r,s){this.name=t,this.prefix=r,this.baseEncode=s}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}let B3=class{constructor(t,r,s){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Xd(this,t)}};class K3{constructor(t){this.decoders=t}or(t){return Xd(this,t)}decode(t){const r=t[0],s=this.decoders[r];if(s)return s.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Xd=(i,t)=>new K3({...i.decoders||{[i.prefix]:i},...t.decoders||{[t.prefix]:t}});class V3{constructor(t,r,s,o){this.name=t,this.prefix=r,this.baseEncode=s,this.baseDecode=o,this.encoder=new H3(t,r,s),this.decoder=new B3(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Wa=({name:i,prefix:t,encode:r,decode:s})=>new V3(i,t,r,s),Es=({prefix:i,name:t,alphabet:r})=>{const{encode:s,decode:o}=M3(r,t);return Wa({prefix:i,name:t,encode:s,decode:d=>Jd(o(d))})},k3=(i,t,r,s)=>{const o={};for(let P=0;P<t.length;++P)o[t[P]]=P;let d=i.length;for(;i[d-1]==="=";)--d;const O=new Uint8Array(d*r/8|0);let y=0,I=0,N=0;for(let P=0;P<d;++P){const U=o[i[P]];if(U===void 0)throw new SyntaxError(`Non-${s} character`);I=I<<r|U,y+=r,y>=8&&(y-=8,O[N++]=255&I>>y)}if(y>=r||255&I<<8-y)throw new SyntaxError("Unexpected end of data");return O},G3=(i,t,r)=>{const s=t[t.length-1]==="=",o=(1<<r)-1;let d="",O=0,y=0;for(let I=0;I<i.length;++I)for(y=y<<8|i[I],O+=8;O>r;)O-=r,d+=t[o&y>>O];if(O&&(d+=t[o&y<<r-O]),s)for(;d.length*r&7;)d+="=";return d},Xt=({name:i,prefix:t,bitsPerChar:r,alphabet:s})=>Wa({prefix:t,name:i,encode(o){return G3(o,s,r)},decode(o){return k3(o,s,r,i)}}),W3=Wa({prefix:"\0",name:"identity",encode:i=>z3(i),decode:i=>q3(i)});var Y3=Object.freeze({__proto__:null,identity:W3});const J3=Xt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var X3=Object.freeze({__proto__:null,base2:J3});const Q3=Xt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Z3=Object.freeze({__proto__:null,base8:Q3});const e6=Es({prefix:"9",name:"base10",alphabet:"0123456789"});var t6=Object.freeze({__proto__:null,base10:e6});const r6=Xt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),n6=Xt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var i6=Object.freeze({__proto__:null,base16:r6,base16upper:n6});const s6=Xt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),a6=Xt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),o6=Xt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),c6=Xt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),u6=Xt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),h6=Xt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),f6=Xt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),l6=Xt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),d6=Xt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var p6=Object.freeze({__proto__:null,base32:s6,base32upper:a6,base32pad:o6,base32padupper:c6,base32hex:u6,base32hexupper:h6,base32hexpad:f6,base32hexpadupper:l6,base32z:d6});const g6=Es({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),_6=Es({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var y6=Object.freeze({__proto__:null,base36:g6,base36upper:_6});const v6=Es({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),m6=Es({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var b6=Object.freeze({__proto__:null,base58btc:v6,base58flickr:m6});const w6=Xt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),E6=Xt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),S6=Xt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),D6=Xt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var O6=Object.freeze({__proto__:null,base64:w6,base64pad:E6,base64url:S6,base64urlpad:D6});const Qd=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),I6=Qd.reduce((i,t,r)=>(i[r]=t,i),[]),x6=Qd.reduce((i,t,r)=>(i[t.codePointAt(0)]=r,i),[]);function A6(i){return i.reduce((t,r)=>(t+=I6[r],t),"")}function C6(i){const t=[];for(const r of i){const s=x6[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(s)}return new Uint8Array(t)}const P6=Wa({prefix:"ðŸš€",name:"base256emoji",encode:A6,decode:C6});var T6=Object.freeze({__proto__:null,base256emoji:P6}),N6=Zd,Pl=128,R6=127,U6=~R6,F6=Math.pow(2,31);function Zd(i,t,r){t=t||[],r=r||0;for(var s=r;i>=F6;)t[r++]=i&255|Pl,i/=128;for(;i&U6;)t[r++]=i&255|Pl,i>>>=7;return t[r]=i|0,Zd.bytes=r-s+1,t}var j6=Zc,$6=128,Tl=127;function Zc(i,s){var r=0,s=s||0,o=0,d=s,O,y=i.length;do{if(d>=y)throw Zc.bytes=0,new RangeError("Could not decode varint");O=i[d++],r+=o<28?(O&Tl)<<o:(O&Tl)*Math.pow(2,o),o+=7}while(O>=$6);return Zc.bytes=d-s,r}var L6=Math.pow(2,7),M6=Math.pow(2,14),q6=Math.pow(2,21),z6=Math.pow(2,28),H6=Math.pow(2,35),B6=Math.pow(2,42),K6=Math.pow(2,49),V6=Math.pow(2,56),k6=Math.pow(2,63),G6=function(i){return i<L6?1:i<M6?2:i<q6?3:i<z6?4:i<H6?5:i<B6?6:i<K6?7:i<V6?8:i<k6?9:10},W6={encode:N6,decode:j6,encodingLength:G6},ep=W6;const Nl=(i,t,r=0)=>(ep.encode(i,t,r),t),Rl=i=>ep.encodingLength(i),eu=(i,t)=>{const r=t.byteLength,s=Rl(i),o=s+Rl(r),d=new Uint8Array(o+r);return Nl(i,d,0),Nl(r,d,s),d.set(t,o),new Y6(i,r,t,d)};class Y6{constructor(t,r,s,o){this.code=t,this.size=r,this.digest=s,this.bytes=o}}const tp=({name:i,code:t,encode:r})=>new J6(i,t,r);class J6{constructor(t,r,s){this.name=t,this.code=r,this.encode=s}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?eu(this.code,r):r.then(s=>eu(this.code,s))}else throw Error("Unknown type, must be binary type")}}const rp=i=>async t=>new Uint8Array(await crypto.subtle.digest(i,t)),X6=tp({name:"sha2-256",code:18,encode:rp("SHA-256")}),Q6=tp({name:"sha2-512",code:19,encode:rp("SHA-512")});var Z6=Object.freeze({__proto__:null,sha256:X6,sha512:Q6});const np=0,eS="identity",ip=Jd,tS=i=>eu(np,ip(i)),rS={code:np,name:eS,encode:ip,digest:tS};var nS=Object.freeze({__proto__:null,identity:rS});new TextEncoder,new TextDecoder;const Ul={...Y3,...X3,...Z3,...t6,...i6,...p6,...y6,...b6,...O6,...T6};({...Z6,...nS});function sp(i){return globalThis.Buffer!=null?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function iS(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?sp(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function ap(i,t,r,s){return{name:i,prefix:t,encoder:{name:i,prefix:t,encode:r},decoder:{decode:s}}}const Fl=ap("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),Nc=ap("ascii","a",i=>{let t="a";for(let r=0;r<i.length;r++)t+=String.fromCharCode(i[r]);return t},i=>{i=i.substring(1);const t=iS(i.length);for(let r=0;r<i.length;r++)t[r]=i.charCodeAt(r);return t}),sS={utf8:Fl,"utf-8":Fl,hex:Ul.base16,latin1:Nc,ascii:Nc,binary:Nc,...Ul};function aS(i,t="utf8"){const r=sS[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?sp(globalThis.Buffer.from(i,"utf-8")):r.decoder.decode(`${r.prefix}${i}`)}const op="wc",oS=2,Cu="core",Cn=`${op}@${2}:${Cu}:`,cS={name:Cu,logger:"error"},uS={database:":memory:"},hS="crypto",jl="client_ed25519_seed",fS=Se.ONE_DAY,lS="keychain",dS="0.3",pS="messages",gS="0.3",_S=Se.SIX_HOURS,yS="publisher",cp="irn",vS="error",up="wss://relay.walletconnect.com",mS="relayer",kt={message:"relayer_message",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},bS="_subscription",cs={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},wS=Se.ONE_SECOND/2,ES="2.7.2",SS="0.3",tn={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},DS="subscription",OS="0.3",IS=Se.FIVE_SECONDS*1e3,xS="pairing",AS="0.3",us={wc_pairingDelete:{req:{ttl:Se.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Se.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Se.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Se.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Se.ONE_DAY,prompt:!1,tag:0},res:{ttl:Se.ONE_DAY,prompt:!1,tag:0}}},en={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},CS="history",PS="0.3",TS="expirer",Lr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},NS="0.3",$l="verify-api",Ll="https://verify.walletconnect.com";class RS{constructor(t,r){this.core=t,this.logger=r,this.keychain=new Map,this.name=lS,this.version=dS,this.initialized=!1,this.storagePrefix=Cn,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,o)=>{this.isInitialized(),this.keychain.set(s,o),await this.persist()},this.get=s=>{this.isInitialized();const o=this.keychain.get(s);if(typeof o>"u"){const{message:d}=de("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(d)}return o},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=t,this.logger=Ze.generateChildLogger(r,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,Kd(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?Vd(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}class US{constructor(t,r,s){this.core=t,this.logger=r,this.name=hS,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=async()=>{this.isInitialized();const o=await this.getClientSeed(),d=ll(o);return Fd(d.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const o=IE();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=async o=>{this.isInitialized();const d=await this.getClientSeed(),O=ll(d),y=Xc();return await eE(y,o,fS,O)},this.generateSharedKey=(o,d,O)=>{this.isInitialized();const y=this.getPrivateKey(o),I=xE(y,d);return this.setSymKey(I,O)},this.setSymKey=async(o,d)=>{this.isInitialized();const O=d||AE(o);return await this.keychain.set(O,o),O},this.deleteKeyPair=async o=>{this.isInitialized(),await this.keychain.del(o)},this.deleteSymKey=async o=>{this.isInitialized(),await this.keychain.del(o)},this.encode=async(o,d,O)=>{this.isInitialized();const y=Hd(O),I=uu(d);if(ml(y)){const K=y.senderPublicKey,M=y.receiverPublicKey;o=await this.generateSharedKey(K,M)}const N=this.getSymKey(o),{type:P,senderPublicKey:U}=y;return PE({type:P,symKey:N,message:I,senderPublicKey:U})},this.decode=async(o,d,O)=>{this.isInitialized();const y=RE(d,O);if(ml(y)){const P=y.receiverPublicKey,U=y.senderPublicKey;o=await this.generateSharedKey(P,U)}const I=this.getSymKey(o),N=TE({symKey:I,encoded:d});return ud(N)},this.getPayloadType=o=>{const d=La(o);return bs(d.type)},this.getPayloadSenderPublicKey=o=>{const d=La(o);return d.senderPublicKey?fr(d.senderPublicKey,hr):void 0},this.core=t,this.logger=Ze.generateChildLogger(r,this.name),this.keychain=s||new RS(this.core,this.logger)}get context(){return Ze.getLoggerContext(this.logger)}async setPrivateKey(t,r){return await this.keychain.set(t,r),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(jl)}catch{t=Xc(),await this.keychain.set(jl,t)}return aS(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}class FS extends Nw{constructor(t,r){super(t,r),this.logger=t,this.core=r,this.messages=new Map,this.name=pS,this.version=gS,this.initialized=!1,this.storagePrefix=Cn,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,o)=>{this.isInitialized();const d=Qn(o);let O=this.messages.get(s);return typeof O>"u"&&(O={}),typeof O[d]<"u"||(O[d]=o,this.messages.set(s,O),await this.persist()),d},this.get=s=>{this.isInitialized();let o=this.messages.get(s);return typeof o>"u"&&(o={}),o},this.has=(s,o)=>{this.isInitialized();const d=this.get(s),O=Qn(o);return typeof d[O]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=Ze.generateChildLogger(t,this.name),this.core=r}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,Kd(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?Vd(t):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}class jS extends Rw{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.events=new Ir.EventEmitter,this.name=yS,this.queue=new Map,this.publishTimeout=1e4,this.publish=async(s,o,d)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:d}});try{const O=d?.ttl||_S,y=Qc(d),I=d?.prompt||!1,N=d?.tag||0,P={topic:s,message:o,opts:{ttl:O,relay:y,prompt:I,tag:N}},U=Qn(o);this.queue.set(U,P);try{await await Ma(this.rpcPublish(s,o,O,y,I,N),this.publishTimeout),this.relayer.events.emit(kt.publish,P)}catch{this.logger.debug("Publishing Payload stalled"),this.relayer.events.emit(kt.connection_stalled);return}this.onPublish(U,P),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:d}})}catch(O){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(O),O}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.relayer=t,this.logger=Ze.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Ze.getLoggerContext(this.logger)}rpcPublish(t,r,s,o,d,O){var y,I,N,P;const U={method:Pa(o.protocol).publish,params:{topic:t,message:r,ttl:s,prompt:d,tag:O}};return cr((y=U.params)==null?void 0:y.prompt)&&((I=U.params)==null||delete I.prompt),cr((N=U.params)==null?void 0:N.tag)&&((P=U.params)==null||delete P.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:U}),this.relayer.request(U)}onPublish(t,r){this.queue.delete(t)}checkQueue(){this.queue.forEach(async t=>{const{topic:r,message:s,opts:o}=t;await this.publish(r,s,o)})}registerEventListeners(){this.relayer.core.heartbeat.on(ms.HEARTBEAT_EVENTS.pulse,()=>{this.checkQueue()})}}let $S=class{constructor(){this.map=new Map,this.set=(t,r)=>{const s=this.get(t);this.exists(t,r)||this.map.set(t,[...s,r])},this.get=t=>this.map.get(t)||[],this.exists=(t,r)=>this.get(t).includes(r),this.delete=(t,r)=>{if(typeof r>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const s=this.get(t);if(!this.exists(t,r))return;const o=s.filter(d=>d!==r);if(!o.length){this.map.delete(t);return}this.map.set(t,o)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}};var LS=Object.defineProperty,MS=Object.defineProperties,qS=Object.getOwnPropertyDescriptors,Ml=Object.getOwnPropertySymbols,zS=Object.prototype.hasOwnProperty,HS=Object.prototype.propertyIsEnumerable,ql=(i,t,r)=>t in i?LS(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,hs=(i,t)=>{for(var r in t||(t={}))zS.call(t,r)&&ql(i,r,t[r]);if(Ml)for(var r of Ml(t))HS.call(t,r)&&ql(i,r,t[r]);return i},Rc=(i,t)=>MS(i,qS(t));class BS extends jw{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.subscriptions=new Map,this.topicMap=new $S,this.events=new Ir.EventEmitter,this.name=DS,this.version=OS,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Cn,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}});try{const d=Qc(o),O={topic:s,relay:d};this.pending.set(s,O);const y=await this.rpcSubscribe(s,d);return this.onSubscribe(y,O),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}}),y}catch(d){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(d),d}},this.unsubscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),typeof o?.id<"u"?await this.unsubscribeById(s,o.id,o):await this.unsubscribeByTopic(s,o)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((o,d)=>{const O=new Se.Watch;O.start(this.pendingSubscriptionWatchLabel);const y=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(y),O.stop(this.pendingSubscriptionWatchLabel),o(!0)),O.elapsed(this.pendingSubscriptionWatchLabel)>=IS&&(clearInterval(y),O.stop(this.pendingSubscriptionWatchLabel),d(!1))},this.pollingInterval)}),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=t,this.logger=Ze.generateChildLogger(r,this.name),this.clientId=""}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(t,r){let s=!1;try{s=this.getSubscription(t).topic===r}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,r){const s=this.topicMap.get(t);await Promise.all(s.map(async o=>await this.unsubscribeById(t,o,r)))}async unsubscribeById(t,r,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:s}});try{const o=Qc(s);await this.rpcUnsubscribe(t,r,o);const d=Gt("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,r,d),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:s}})}catch(o){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(o),o}}async rpcSubscribe(t,r){const s={method:Pa(r.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await Ma(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(kt.connection_stalled)}return Qn(t+this.clientId)}async rpcBatchSubscribe(t){if(!t.length)return;const r=t[0].relay,s={method:Pa(r.protocol).batchSubscribe,params:{topics:t.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await Ma(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(kt.connection_stalled)}}rpcUnsubscribe(t,r,s){const o={method:Pa(s.protocol).unsubscribe,params:{topic:t,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o}),this.relayer.request(o)}onSubscribe(t,r){this.setSubscription(t,Rc(hs({},r),{id:t})),this.pending.delete(r.topic)}onBatchSubscribe(t){t.length&&t.forEach(r=>{this.setSubscription(r.id,hs({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(t,r,s){this.events.removeAllListeners(r),this.hasSubscription(r,t)&&this.deleteSubscription(r,s),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,r){this.subscriptions.has(t)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:r}),this.addSubscription(t,r))}addSubscription(t,r){this.subscriptions.set(t,hs({},r)),this.topicMap.set(r.topic,t),this.events.emit(tn.created,r)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const r=this.subscriptions.get(t);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(s)}return r}deleteSubscription(t,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:r});const s=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(s.topic,t),this.events.emit(tn.deleted,Rc(hs({},s),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(tn.sync)}async reset(){if(this.cached.length){const t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(tn.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){if(!t.length)return;const r=await this.rpcBatchSubscribe(t);ws(r)&&this.onBatchSubscribe(r.map((s,o)=>Rc(hs({},t[o]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const t=[];this.pending.forEach(r=>{t.push(r)}),await this.batchSubscribe(t)}registerEventListeners(){this.relayer.core.heartbeat.on(ms.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(kt.connect,async()=>{await this.onConnect()}),this.relayer.on(kt.disconnect,()=>{this.onDisconnect()}),this.events.on(tn.created,async t=>{const r=tn.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()}),this.events.on(tn.deleted,async t=>{const r=tn.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(){this.restartInProgress&&await new Promise(t=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),t())},this.pollingInterval)})}}var KS=Object.defineProperty,zl=Object.getOwnPropertySymbols,VS=Object.prototype.hasOwnProperty,kS=Object.prototype.propertyIsEnumerable,Hl=(i,t,r)=>t in i?KS(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,GS=(i,t)=>{for(var r in t||(t={}))VS.call(t,r)&&Hl(i,r,t[r]);if(zl)for(var r of zl(t))kS.call(t,r)&&Hl(i,r,t[r]);return i};class WS extends Uw{constructor(t){super(t),this.protocol="wc",this.version=2,this.events=new Ir.EventEmitter,this.name=mS,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.core=t.core,this.logger=typeof t.logger<"u"&&typeof t.logger!="string"?Ze.generateChildLogger(t.logger,this.name):Ze.pino(Ze.getDefaultLoggerOptions({level:t.logger||vS})),this.messages=new FS(this.logger,t.core),this.subscriber=new BS(this,this.logger),this.publisher=new jS(this,this.logger),this.relayUrl=t?.relayUrl||up,this.projectId=t.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.transportOpen(),this.subscriber.init()]),this.registerEventListeners(),this.initialized=!0}get context(){return Ze.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(t,r,s){this.isInitialized(),await this.publisher.publish(t,r,s),await this.recordMessageEvent({topic:t,message:r,publishedAt:Date.now()})}async subscribe(t,r){this.isInitialized();let s="";return await Promise.all([new Promise(o=>{this.subscriber.once(tn.created,d=>{d.topic===t&&o()})}),new Promise(async o=>{s=await this.subscriber.subscribe(t,r),o()})]),s}async unsubscribe(t,r){this.isInitialized(),await this.subscriber.unsubscribe(t,r)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(kt.transport_closed))}async transportOpen(t){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=t||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(r=>{this.initialized||r(),this.subscriber.once(tn.resubscribed,()=>{r()})}),await Promise.race([new Promise(async(r,s)=>{await Ma(this.provider.connect(),5e3,"socket stalled").catch(o=>s(o)).then(()=>r()).finally(()=>this.removeListener(kt.transport_closed,this.rejectTransportOpen))}),new Promise(r=>this.once(kt.transport_closed,this.rejectTransportOpen))])])}catch(r){this.logger.error(r);const s=r;if(!this.isConnectionStalled(s.message))throw r;this.events.emit(kt.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(t){this.transportExplicitlyClosed||(this.relayUrl=t||this.relayUrl,this.connected&&await Promise.all([new Promise(r=>{this.provider.once(cs.disconnect,()=>{r()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(t){return this.staleConnectionErrors.some(r=>t.includes(r))}rejectTransportOpen(){throw new Error("closeTransport called before connection was established")}async createProvider(){const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Pn(new F3(VE({sdkVersion:ES,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(t){const{topic:r,message:s}=t;await this.messages.set(r,s)}async shouldIgnoreMessageEvent(t){const{topic:r,message:s}=t;return await this.subscriber.isSubscribed(r)?this.messages.has(r,s):!0}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),fu(t)){if(!t.method.endsWith(bS))return;const r=t.params,{topic:s,message:o,publishedAt:d}=r.data,O={topic:s,message:o,publishedAt:d};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(GS({type:"event",event:r.id},O)),this.events.emit(r.id,O),await this.acknowledgePayload(t),await this.onMessageEvent(O)}}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(this.events.emit(kt.message,t),await this.recordMessageEvent(t))}async acknowledgePayload(t){const r=lu(t.id,!0);await this.provider.connection.send(r)}registerProviderListeners(){this.provider.on(cs.payload,t=>this.onProviderPayload(t)),this.provider.on(cs.connect,()=>{this.events.emit(kt.connect)}),this.provider.on(cs.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(cs.error,t=>{this.logger.error(t),this.events.emit(kt.error,t)})}registerEventListeners(){this.events.on(kt.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(kt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},Se.toMiliseconds(wS))}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(t=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),t())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var YS=Object.defineProperty,Bl=Object.getOwnPropertySymbols,JS=Object.prototype.hasOwnProperty,XS=Object.prototype.propertyIsEnumerable,Kl=(i,t,r)=>t in i?YS(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Vl=(i,t)=>{for(var r in t||(t={}))JS.call(t,r)&&Kl(i,r,t[r]);if(Bl)for(var r of Bl(t))XS.call(t,r)&&Kl(i,r,t[r]);return i};class Ya extends Fw{constructor(t,r,s,o=Cn,d=void 0){super(t,r,s,o),this.core=t,this.logger=r,this.name=s,this.map=new Map,this.version=SS,this.cached=[],this.initialized=!1,this.storagePrefix=Cn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(O=>{this.getKey&&O!==null&&!cr(O)?this.map.set(this.getKey(O),O):l3(O)?this.map.set(O.id,O):d3(O)&&this.map.set(O.topic,O)}),this.cached=[],this.initialized=!0)},this.set=async(O,y)=>{this.isInitialized(),this.map.has(O)?await this.update(O,y):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:O,value:y}),this.map.set(O,y),await this.persist())},this.get=O=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:O}),this.getData(O)),this.getAll=O=>(this.isInitialized(),O?this.values.filter(y=>Object.keys(O).every(I=>qa(y[I],O[I]))):this.values),this.update=async(O,y)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:O,update:y});const I=Vl(Vl({},this.getData(O)),y);this.map.set(O,I),await this.persist()},this.delete=async(O,y)=>{this.isInitialized(),this.map.has(O)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:O,reason:y}),this.map.delete(O),await this.persist())},this.logger=Ze.generateChildLogger(r,this.name),this.storagePrefix=o,this.getKey=d}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const r=this.map.get(t);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(s),new Error(s)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}class QS{constructor(t,r){this.core=t,this.logger=r,this.name=xS,this.version=AS,this.events=new Ir,this.initialized=!1,this.storagePrefix=Cn,this.ignoredPayloadTypes=[ni],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=Xc(),o=await this.core.crypto.setSymKey(s),d=kr(Se.FIVE_MINUTES),O={protocol:cp},y={topic:o,expiry:d,relay:O,active:!1},I=r3({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:s,relay:O});return await this.pairings.set(o,y),await this.core.relayer.subscribe(o),this.core.expirer.set(o,d),{topic:o,uri:I}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:o,symKey:d,relay:O}=e3(s.uri);if(this.pairings.keys.includes(o))throw new Error(`Pairing already exists: ${o}`);if(this.core.crypto.hasKeys(o))throw new Error(`Keychain already exists: ${o}`);const y=kr(Se.FIVE_MINUTES),I={topic:o,relay:O,expiry:y,active:!1};return await this.pairings.set(o,I),await this.core.crypto.setSymKey(d,o),await this.core.relayer.subscribe(o,{relay:O}),this.core.expirer.set(o,y),s.activatePairing&&await this.activate({topic:o}),I},this.activate=async({topic:s})=>{this.isInitialized();const o=kr(Se.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:o}),this.core.expirer.set(s,o)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:o}=s;if(this.pairings.keys.includes(o)){const d=await this.sendRequest(o,"wc_pairingPing",{}),{done:O,resolve:y,reject:I}=Ai();this.events.once(zt("pairing_ping",d),({error:N})=>{N?I(N):y()}),await O()}},this.updateExpiry=async({topic:s,expiry:o})=>{this.isInitialized(),await this.pairings.update(s,{expiry:o})},this.updateMetadata=async({topic:s,metadata:o})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:o})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:o}=s;this.pairings.keys.includes(o)&&(await this.sendRequest(o,"wc_pairingDelete",Gt("USER_DISCONNECTED")),await this.deletePairing(o))},this.sendRequest=async(s,o,d)=>{const O=du(o,d),y=await this.core.crypto.encode(s,O),I=us[o].req;return this.core.history.set(s,O),await this.core.relayer.publish(s,y,I),O.id},this.sendResult=async(s,o,d)=>{const O=lu(s,d),y=await this.core.crypto.encode(o,O),I=await this.core.history.get(o,s),N=us[I.request.method].res;await this.core.relayer.publish(o,y,N),await this.core.history.resolve(O)},this.sendError=async(s,o,d)=>{const O=hu(s,d),y=await this.core.crypto.encode(o,O),I=await this.core.history.get(o,s),N=us[I.request.method]?us[I.request.method].res:us.unregistered_method.res;await this.core.relayer.publish(o,y,N),await this.core.history.resolve(O)},this.deletePairing=async(s,o)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,Gt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),o?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(o=>An(o.expiry));await Promise.all(s.map(o=>this.deletePairing(o.topic)))},this.onRelayEventRequest=s=>{const{topic:o,payload:d}=s,O=d.method;if(this.pairings.keys.includes(o))switch(O){case"wc_pairingPing":return this.onPairingPingRequest(o,d);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,d);default:return this.onUnknownRpcMethodRequest(o,d)}},this.onRelayEventResponse=async s=>{const{topic:o,payload:d}=s,O=(await this.core.history.get(o,d.id)).request.method;if(this.pairings.keys.includes(o))switch(O){case"wc_pairingPing":return this.onPairingPingResponse(o,d);default:return this.onUnknownRpcMethodResponse(O)}},this.onPairingPingRequest=async(s,o)=>{const{id:d}=o;try{this.isValidPing({topic:s}),await this.sendResult(d,s,!0),this.events.emit("pairing_ping",{id:d,topic:s})}catch(O){await this.sendError(d,s,O),this.logger.error(O)}},this.onPairingPingResponse=(s,o)=>{const{id:d}=o;setTimeout(()=>{xn(o)?this.events.emit(zt("pairing_ping",d),{}):gn(o)&&this.events.emit(zt("pairing_ping",d),{error:o.error})},500)},this.onPairingDeleteRequest=async(s,o)=>{const{id:d}=o;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit("pairing_delete",{id:d,topic:s})}catch(O){await this.sendError(d,s,O),this.logger.error(O)}},this.onUnknownRpcMethodRequest=async(s,o)=>{const{id:d,method:O}=o;try{if(this.registeredMethods.includes(O))return;const y=Gt("WC_METHOD_UNSUPPORTED",O);await this.sendError(d,s,y),this.logger.error(y)}catch(y){await this.sendError(d,s,y),this.logger.error(y)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(Gt("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{if(!vr(s)){const{message:o}=de("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(o)}if(!f3(s.uri)){const{message:o}=de("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(o)}},this.isValidPing=async s=>{if(!vr(s)){const{message:d}=de("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(d)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidDisconnect=async s=>{if(!vr(s)){const{message:d}=de("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(d)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidPairingTopic=async s=>{if(!Wt(s,!1)){const{message:o}=de("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(o)}if(!this.pairings.keys.includes(s)){const{message:o}=de("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(o)}if(An(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:o}=de("EXPIRED",`pairing topic: ${s}`);throw new Error(o)}},this.core=t,this.logger=Ze.generateChildLogger(r,this.name),this.pairings=new Ya(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Ze.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(kt.message,async t=>{const{topic:r,message:s}=t;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const o=await this.core.crypto.decode(r,s);fu(o)?(this.core.history.set(r,o),this.onRelayEventRequest({topic:r,payload:o})):hd(o)&&(await this.core.history.resolve(o),this.onRelayEventResponse({topic:r,payload:o}))})}registerExpirerEvents(){this.core.expirer.on(Lr.expired,async t=>{const{topic:r}=Gd(t.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}}class ZS extends Tw{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.records=new Map,this.events=new Ir.EventEmitter,this.name=CS,this.version=PS,this.cached=[],this.initialized=!1,this.storagePrefix=Cn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,o,d)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:o,chainId:d}),this.records.has(o.id))return;const O={id:o.id,topic:s,request:{method:o.method,params:o.params||null},chainId:d};this.records.set(O.id,O),this.events.emit(en.created,O)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const o=await this.getRecord(s.id);typeof o.response>"u"&&(o.response=gn(s)?{error:s.error}:{result:s.result},this.records.set(o.id,o),this.events.emit(en.updated,o))},this.get=async(s,o)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:o}),await this.getRecord(o)),this.delete=(s,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(d=>{if(d.topic===s){if(typeof o<"u"&&d.id!==o)return;this.records.delete(d.id),this.events.emit(en.deleted,d)}})},this.exists=async(s,o)=>(this.isInitialized(),this.records.has(o)?(await this.getRecord(o)).topic===s:!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Ze.generateChildLogger(r,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const s={topic:r.topic,request:du(r.request.method,r.request.params,r.id),chainId:r.chainId};return t.push(s)}),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const r=this.records.get(t);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(s)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(en.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(en.created,t=>{const r=en.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.events.on(en.updated,t=>{const r=en.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.events.on(en.deleted,t=>{const r=en.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}let eD=class extends $w{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.expirations=new Map,this.events=new Ir.EventEmitter,this.name=TS,this.version=NS,this.cached=[],this.initialized=!1,this.storagePrefix=Cn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const o=this.formatTarget(s);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(s,o)=>{this.isInitialized();const d=this.formatTarget(s),O={target:d,expiry:o};this.expirations.set(d,O),this.checkExpiry(d,O),this.events.emit(Lr.created,{target:d,expiration:O})},this.get=s=>{this.isInitialized();const o=this.formatTarget(s);return this.getExpiration(o)},this.del=s=>{if(this.isInitialized(),this.has(s)){const o=this.formatTarget(s),d=this.getExpiration(o);this.expirations.delete(o),this.events.emit(Lr.deleted,{target:o,expiration:d})}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Ze.generateChildLogger(r,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return kE(t);if(typeof t=="number")return GE(t);const{message:r}=de("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(r)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Lr.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const r=this.expirations.get(t);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(s),new Error(s)}return r}checkExpiry(t,r){const{expiry:s}=r;Se.toMiliseconds(s)-Date.now()<=0&&this.expire(t,r)}expire(t,r){this.expirations.delete(t),this.events.emit(Lr.expired,{target:t,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((t,r)=>this.checkExpiry(r,t))}registerEventListeners(){this.core.heartbeat.on(ms.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Lr.created,t=>{const r=Lr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(Lr.expired,t=>{const r=Lr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(Lr.deleted,t=>{const r=Lr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}};class tD extends Lw{constructor(t,r){super(t,r),this.projectId=t,this.logger=r,this.name=$l,this.initialized=!1,this.init=async s=>{Bd()||!Iu()||(this.verifyUrl=s?.verifyUrl||Ll,await this.createIframe())},this.register=async s=>{var o;this.initialized||await this.init(),this.iframe&&((o=this.iframe.contentWindow)==null||o.postMessage(s.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${s.attestationId} ${this.verifyUrl}`))},this.resolve=async s=>{var o;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${s.attestationId}`);const d=this.startAbortTimer(Se.FIVE_SECONDS),O=await fetch(`${this.verifyUrl}/attestation/${s.attestationId}`,{signal:this.abortController.signal});return clearTimeout(d),O.status===200?(o=await O.json())==null?void 0:o.origin:""},this.createIframe=async()=>{try{const s=this.startAbortTimer(Se.FIVE_SECONDS);await Promise.race([new Promise((o,d)=>{const O=document.createElement("iframe");O.setAttribute("id",$l),O.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),O.style.display="none",O.addEventListener("load",()=>{this.initialized=!0,clearTimeout(s),o()}),O.addEventListener("error",y=>{d(y)}),document.body.append(O),this.iframe=O}),new Promise(o=>{this.abortController.signal.addEventListener("abort",()=>{o("iframe load timeout")})})])}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s)}},this.logger=Ze.generateChildLogger(r,this.name),this.verifyUrl=Ll,this.abortController=new AbortController,this.isDevEnv=Ou()&&{}.IS_VITEST}get context(){return Ze.getLoggerContext(this.logger)}startAbortTimer(t){return setTimeout(()=>this.abortController.abort(),kr(t))}}var rD=Object.defineProperty,kl=Object.getOwnPropertySymbols,nD=Object.prototype.hasOwnProperty,iD=Object.prototype.propertyIsEnumerable,Gl=(i,t,r)=>t in i?rD(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Wl=(i,t)=>{for(var r in t||(t={}))nD.call(t,r)&&Gl(i,r,t[r]);if(kl)for(var r of kl(t))iD.call(t,r)&&Gl(i,r,t[r]);return i};let sD=class hp extends Pw{constructor(t){super(t),this.protocol=op,this.version=oS,this.name=Cu,this.events=new Ir.EventEmitter,this.initialized=!1,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.projectId=t?.projectId,this.relayUrl=t?.relayUrl||up;const r=typeof t?.logger<"u"&&typeof t?.logger!="string"?t.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:t?.logger||cS.logger}));this.logger=Ze.generateChildLogger(r,this.name),this.heartbeat=new ms.HeartBeat,this.crypto=new US(this,this.logger,t?.keychain),this.history=new ZS(this,this.logger),this.expirer=new eD(this,this.logger),this.storage=t!=null&&t.storage?t.storage:new mw(Wl(Wl({},uS),t?.storageOptions)),this.relayer=new WS({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new QS(this,this.logger),this.verify=new tD(this.projectId||"",this.logger)}static async init(t){const r=new hp(t);return await r.initialize(),r}get context(){return Ze.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}};const aD=sD,fp="wc",lp=2,dp="client",Pu=`${fp}@${lp}:${dp}:`,Uc={name:dp,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},oD="proposal",pp="Proposal expired",cD="session",xa=Se.SEVEN_DAYS,uD="engine",fs={wc_sessionPropose:{req:{ttl:Se.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Se.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Se.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Se.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Se.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Se.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Se.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Se.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Se.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Se.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Se.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:Se.THIRTY_SECONDS,prompt:!1,tag:1115}}},Fc={min:Se.FIVE_MINUTES,max:Se.SEVEN_DAYS},hD="request",fD=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var lD=Object.defineProperty,dD=Object.defineProperties,pD=Object.getOwnPropertyDescriptors,Yl=Object.getOwnPropertySymbols,gD=Object.prototype.hasOwnProperty,_D=Object.prototype.propertyIsEnumerable,Jl=(i,t,r)=>t in i?lD(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,$r=(i,t)=>{for(var r in t||(t={}))gD.call(t,r)&&Jl(i,r,t[r]);if(Yl)for(var r of Yl(t))_D.call(t,r)&&Jl(i,r,t[r]);return i},jc=(i,t)=>dD(i,pD(t));class yD extends qw{constructor(t){super(t),this.name=uD,this.events=new Ir,this.initialized=!1,this.ignoredPayloadTypes=[ni],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(fs)}),this.initialized=!0)},this.connect=async r=>{this.isInitialized();const s=jc($r({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:o,requiredNamespaces:d,optionalNamespaces:O,sessionProperties:y,relays:I}=s;let N=o,P,U=!1;if(N&&(U=this.client.core.pairing.pairings.get(N).active),!N||!U){const{topic:D,uri:b}=await this.client.core.pairing.create();N=D,P=b}const K=await this.client.core.crypto.generateKeyPair(),M=$r({requiredNamespaces:d,optionalNamespaces:O,relays:I??[{protocol:cp}],proposer:{publicKey:K,metadata:this.client.metadata}},y&&{sessionProperties:y}),{reject:L,resolve:W,done:z}=Ai(Se.FIVE_MINUTES,pp);if(this.events.once(zt("session_connect"),async({error:D,session:b})=>{if(D)L(D);else if(b){b.self.publicKey=K;const S=jc($r({},b),{requiredNamespaces:b.requiredNamespaces,optionalNamespaces:b.optionalNamespaces});await this.client.session.set(b.topic,S),await this.setExpiry(b.topic,b.expiry),N&&await this.client.core.pairing.updateMetadata({topic:N,metadata:b.peer.metadata}),W(S)}}),!N){const{message:D}=de("NO_MATCHING_KEY",`connect() pairing topic: ${N}`);throw new Error(D)}const re=await this.sendRequest(N,"wc_sessionPropose",M),p=kr(Se.FIVE_MINUTES);return await this.setProposal(re,$r({id:re,expiry:p},M)),{uri:P,approval:z}},this.pair=async r=>(this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{this.isInitialized(),await this.isValidApprove(r);const{id:s,relayProtocol:o,namespaces:d,sessionProperties:O}=r,y=this.client.proposal.get(s);let{pairingTopic:I,proposer:N,requiredNamespaces:P,optionalNamespaces:U}=y;I=I||"",ps(P)||(P=a3(d,"approve()"));const K=await this.client.core.crypto.generateKeyPair(),M=N.publicKey,L=await this.client.core.crypto.generateSharedKey(K,M);I&&s&&(await this.client.core.pairing.updateMetadata({topic:I,metadata:N.metadata}),await this.sendResult(s,I,{relay:{protocol:o??"irn"},responderPublicKey:K}),await this.client.proposal.delete(s,Gt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:I}));const W=$r({relay:{protocol:o??"irn"},namespaces:d,requiredNamespaces:P,optionalNamespaces:U,pairingTopic:I,controller:{publicKey:K,metadata:this.client.metadata},expiry:kr(xa)},O&&{sessionProperties:O});await this.client.core.relayer.subscribe(L),await this.sendRequest(L,"wc_sessionSettle",W);const z=jc($r({},W),{topic:L,pairingTopic:I,acknowledged:!1,self:W.controller,peer:{publicKey:N.publicKey,metadata:N.metadata},controller:K});return await this.client.session.set(L,z),await this.setExpiry(L,kr(xa)),{topic:L,acknowledged:()=>new Promise(re=>re(this.client.session.get(L)))}},this.reject=async r=>{this.isInitialized(),await this.isValidReject(r);const{id:s,reason:o}=r,{pairingTopic:d}=this.client.proposal.get(s);d&&(await this.sendError(s,d,o),await this.client.proposal.delete(s,Gt("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.isValidUpdate(r);const{topic:s,namespaces:o}=r,d=await this.sendRequest(s,"wc_sessionUpdate",{namespaces:o}),{done:O,resolve:y,reject:I}=Ai();return this.events.once(zt("session_update",d),({error:N})=>{N?I(N):y()}),await this.client.session.update(s,{namespaces:o}),{acknowledged:O}},this.extend=async r=>{this.isInitialized(),await this.isValidExtend(r);const{topic:s}=r,o=await this.sendRequest(s,"wc_sessionExtend",{}),{done:d,resolve:O,reject:y}=Ai();return this.events.once(zt("session_extend",o),({error:I})=>{I?y(I):O()}),await this.setExpiry(s,kr(xa)),{acknowledged:d}},this.request=async r=>{this.isInitialized(),await this.isValidRequest(r);const{chainId:s,request:o,topic:d,expiry:O}=r,y=await this.sendRequest(d,"wc_sessionRequest",{request:o,chainId:s},O),{done:I,resolve:N,reject:P}=Ai(O);return this.events.once(zt("session_request",y),({error:U,result:K})=>{U?P(U):N(K)}),this.client.events.emit("session_request_sent",{topic:d,request:o,chainId:s,id:y}),await I()},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:s,response:o}=r,{id:d}=o;xn(o)?await this.sendResult(d,s,o.result):gn(o)&&await this.sendError(d,s,o.error),this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0})},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);const{topic:s}=r;if(this.client.session.keys.includes(s)){const o=await this.sendRequest(s,"wc_sessionPing",{}),{done:d,resolve:O,reject:y}=Ai();this.events.once(zt("session_ping",o),({error:I})=>{I?y(I):O()}),await d()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async r=>{this.isInitialized(),await this.isValidEmit(r);const{topic:s,event:o,chainId:d}=r;await this.sendRequest(s,"wc_sessionEvent",{event:o,chainId:d})},this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.client.session.keys.includes(s)?(await this.sendRequest(s,"wc_sessionDelete",Gt("USER_DISCONNECTED")),await this.deleteSession(s)):await this.client.core.pairing.disconnect({topic:s})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(s=>u3(s,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.deleteSession=async(r,s)=>{const{self:o}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await Promise.all([this.client.session.delete(r,Gt("USER_DISCONNECTED")),this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.deleteSymKey(r),s?Promise.resolve():this.client.core.expirer.del(r)])},this.deleteProposal=async(r,s)=>{await Promise.all([this.client.proposal.delete(r,Gt("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,s,o=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,s),o?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,s)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:s}),this.client.core.expirer.set(r,s)},this.setProposal=async(r,s)=>{await this.client.proposal.set(r,s),this.client.core.expirer.set(r,s.expiry)},this.setPendingSessionRequest=async r=>{const s=fs.wc_sessionRequest.req.ttl,{id:o,topic:d,params:O}=r;await this.client.pendingRequest.set(o,{id:o,topic:d,params:O}),s&&this.client.core.expirer.set(o,kr(s))},this.sendRequest=async(r,s,o,d)=>{const O=du(s,o);if(Iu()&&fD.includes(s)){const N=Qn(JSON.stringify(O));await this.client.core.verify.register({attestationId:N})}const y=await this.client.core.crypto.encode(r,O),I=fs[s].req;return d&&(I.ttl=d),this.client.core.history.set(r,O),this.client.core.relayer.publish(r,y,I),O.id},this.sendResult=async(r,s,o)=>{const d=lu(r,o),O=await this.client.core.crypto.encode(s,d),y=await this.client.core.history.get(s,r),I=fs[y.request.method].res;this.client.core.relayer.publish(s,O,I),await this.client.core.history.resolve(d)},this.sendError=async(r,s,o)=>{const d=hu(r,o),O=await this.client.core.crypto.encode(s,d),y=await this.client.core.history.get(s,r),I=fs[y.request.method].res;this.client.core.relayer.publish(s,O,I),await this.client.core.history.resolve(d)},this.cleanup=async()=>{const r=[],s=[];this.client.session.getAll().forEach(o=>{An(o.expiry)&&r.push(o.topic)}),this.client.proposal.getAll().forEach(o=>{An(o.expiry)&&s.push(o.id)}),await Promise.all([...r.map(o=>this.deleteSession(o)),...s.map(o=>this.deleteProposal(o))])},this.onRelayEventRequest=r=>{const{topic:s,payload:o}=r,d=o.method;switch(d){case"wc_sessionPropose":return this.onSessionProposeRequest(s,o);case"wc_sessionSettle":return this.onSessionSettleRequest(s,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,o);case"wc_sessionExtend":return this.onSessionExtendRequest(s,o);case"wc_sessionPing":return this.onSessionPingRequest(s,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,o);case"wc_sessionRequest":return this.onSessionRequest(s,o);case"wc_sessionEvent":return this.onSessionEventRequest(s,o);default:return this.client.logger.info(`Unsupported request method ${d}`)}},this.onRelayEventResponse=async r=>{const{topic:s,payload:o}=r,d=(await this.client.core.history.get(s,o.id)).request.method;switch(d){case"wc_sessionPropose":return this.onSessionProposeResponse(s,o);case"wc_sessionSettle":return this.onSessionSettleResponse(s,o);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,o);case"wc_sessionExtend":return this.onSessionExtendResponse(s,o);case"wc_sessionPing":return this.onSessionPingResponse(s,o);case"wc_sessionRequest":return this.onSessionRequestResponse(s,o);default:return this.client.logger.info(`Unsupported response method ${d}`)}},this.onSessionProposeRequest=async(r,s)=>{const{params:o,id:d}=s;try{this.isValidConnect($r({},s.params));const O=kr(Se.FIVE_MINUTES),y=$r({id:d,pairingTopic:r,expiry:O},o);await this.setProposal(d,y);const I=Qn(JSON.stringify(s)),N=await this.getVerifyContext(I,y.proposer.metadata);this.client.events.emit("session_proposal",{id:d,params:y,context:N})}catch(O){await this.sendError(d,r,O),this.client.logger.error(O)}},this.onSessionProposeResponse=async(r,s)=>{const{id:o}=s;if(xn(s)){const{result:d}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:d});const O=this.client.proposal.get(o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:O});const y=O.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:y});const I=d.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:I});const N=await this.client.core.crypto.generateSharedKey(y,I);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:N});const P=await this.client.core.relayer.subscribe(N);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:P}),await this.client.core.pairing.activate({topic:r})}else gn(s)&&(await this.client.proposal.delete(o,Gt("USER_DISCONNECTED")),this.events.emit(zt("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(r,s)=>{const{id:o,params:d}=s;try{this.isValidSessionSettleRequest(d);const{relay:O,controller:y,expiry:I,namespaces:N,requiredNamespaces:P,optionalNamespaces:U,sessionProperties:K,pairingTopic:M}=s.params,L=$r({topic:r,relay:O,expiry:I,namespaces:N,acknowledged:!0,pairingTopic:M,requiredNamespaces:P,optionalNamespaces:U,controller:y.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:y.publicKey,metadata:y.metadata}},K&&{sessionProperties:K});await this.sendResult(s.id,r,!0),this.events.emit(zt("session_connect"),{session:L})}catch(O){await this.sendError(o,r,O),this.client.logger.error(O)}},this.onSessionSettleResponse=async(r,s)=>{const{id:o}=s;xn(s)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(zt("session_approve",o),{})):gn(s)&&(await this.client.session.delete(r,Gt("USER_DISCONNECTED")),this.events.emit(zt("session_approve",o),{error:s.error}))},this.onSessionUpdateRequest=async(r,s)=>{const{params:o,id:d}=s;try{this.isValidUpdate($r({topic:r},o)),await this.client.session.update(r,{namespaces:o.namespaces}),await this.sendResult(d,r,!0),this.client.events.emit("session_update",{id:d,topic:r,params:o})}catch(O){await this.sendError(d,r,O),this.client.logger.error(O)}},this.onSessionUpdateResponse=(r,s)=>{const{id:o}=s;xn(s)?this.events.emit(zt("session_update",o),{}):gn(s)&&this.events.emit(zt("session_update",o),{error:s.error})},this.onSessionExtendRequest=async(r,s)=>{const{id:o}=s;try{this.isValidExtend({topic:r}),await this.setExpiry(r,kr(xa)),await this.sendResult(o,r,!0),this.client.events.emit("session_extend",{id:o,topic:r})}catch(d){await this.sendError(o,r,d),this.client.logger.error(d)}},this.onSessionExtendResponse=(r,s)=>{const{id:o}=s;xn(s)?this.events.emit(zt("session_extend",o),{}):gn(s)&&this.events.emit(zt("session_extend",o),{error:s.error})},this.onSessionPingRequest=async(r,s)=>{const{id:o}=s;try{this.isValidPing({topic:r}),await this.sendResult(o,r,!0),this.client.events.emit("session_ping",{id:o,topic:r})}catch(d){await this.sendError(o,r,d),this.client.logger.error(d)}},this.onSessionPingResponse=(r,s)=>{const{id:o}=s;setTimeout(()=>{xn(s)?this.events.emit(zt("session_ping",o),{}):gn(s)&&this.events.emit(zt("session_ping",o),{error:s.error})},500)},this.onSessionDeleteRequest=async(r,s)=>{const{id:o}=s;try{this.isValidDisconnect({topic:r,reason:s.params}),await Promise.all([new Promise(d=>{this.client.core.relayer.once(kt.publish,async()=>{d(await this.deleteSession(r))})}),this.sendResult(o,r,!0)]),this.client.events.emit("session_delete",{id:o,topic:r})}catch(d){await this.sendError(o,r,d),this.client.logger.error(d)}},this.onSessionRequest=async(r,s)=>{const{id:o,params:d}=s;try{this.isValidRequest($r({topic:r},d)),await this.setPendingSessionRequest({id:o,topic:r,params:d});const O=Qn(JSON.stringify(s)),y=this.client.session.get(r),I=await this.getVerifyContext(O,y.peer.metadata);this.client.events.emit("session_request",{id:o,topic:r,params:d,context:I})}catch(O){await this.sendError(o,r,O),this.client.logger.error(O)}},this.onSessionRequestResponse=(r,s)=>{const{id:o}=s;xn(s)?this.events.emit(zt("session_request",o),{result:s.result}):gn(s)&&this.events.emit(zt("session_request",o),{error:s.error})},this.onSessionEventRequest=async(r,s)=>{const{id:o,params:d}=s;try{this.isValidEmit($r({topic:r},d)),this.client.events.emit("session_event",{id:o,topic:r,params:d})}catch(O){await this.sendError(o,r,O),this.client.logger.error(O)}},this.isValidConnect=async r=>{if(!vr(r)){const{message:I}=de("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(I)}const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:d,sessionProperties:O,relays:y}=r;if(cr(s)||await this.isValidPairingTopic(s),!w3(y,!0)){const{message:I}=de("MISSING_OR_INVALID",`connect() relays: ${y}`);throw new Error(I)}!cr(o)&&ps(o)!==0&&this.validateNamespaces(o,"requiredNamespaces"),!cr(d)&&ps(d)!==0&&this.validateNamespaces(d,"optionalNamespaces"),cr(O)||this.validateSessionProps(O,"sessionProperties")},this.validateNamespaces=(r,s)=>{const o=b3(r,"connect()",s);if(o)throw new Error(o.message)},this.isValidApprove=async r=>{if(!vr(r))throw new Error(de("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:s,namespaces:o,relayProtocol:d,sessionProperties:O}=r;await this.isValidProposalId(s);const y=this.client.proposal.get(s),I=Ta(o,"approve()");if(I)throw new Error(I.message);const N=xl(y.requiredNamespaces,o,"approve()");if(N)throw new Error(N.message);if(!Wt(d,!0)){const{message:P}=de("MISSING_OR_INVALID",`approve() relayProtocol: ${d}`);throw new Error(P)}cr(O)||this.validateSessionProps(O,"sessionProperties")},this.isValidReject=async r=>{if(!vr(r)){const{message:d}=de("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(d)}const{id:s,reason:o}=r;if(await this.isValidProposalId(s),!S3(o)){const{message:d}=de("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(o)}`);throw new Error(d)}},this.isValidSessionSettleRequest=r=>{if(!vr(r)){const{message:N}=de("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(N)}const{relay:s,controller:o,namespaces:d,expiry:O}=r;if(!Yd(s)){const{message:N}=de("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(N)}const y=p3(o,"onSessionSettleRequest()");if(y)throw new Error(y.message);const I=Ta(d,"onSessionSettleRequest()");if(I)throw new Error(I.message);if(An(O)){const{message:N}=de("EXPIRED","onSessionSettleRequest()");throw new Error(N)}},this.isValidUpdate=async r=>{if(!vr(r)){const{message:I}=de("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(I)}const{topic:s,namespaces:o}=r;await this.isValidSessionTopic(s);const d=this.client.session.get(s),O=Ta(o,"update()");if(O)throw new Error(O.message);const y=xl(d.requiredNamespaces,o,"update()");if(y)throw new Error(y.message)},this.isValidExtend=async r=>{if(!vr(r)){const{message:o}=de("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(o)}const{topic:s}=r;await this.isValidSessionTopic(s)},this.isValidRequest=async r=>{if(!vr(r)){const{message:I}=de("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(I)}const{topic:s,request:o,chainId:d,expiry:O}=r;await this.isValidSessionTopic(s);const{namespaces:y}=this.client.session.get(s);if(!Il(y,d)){const{message:I}=de("MISSING_OR_INVALID",`request() chainId: ${d}`);throw new Error(I)}if(!D3(o)){const{message:I}=de("MISSING_OR_INVALID",`request() ${JSON.stringify(o)}`);throw new Error(I)}if(!x3(y,d,o.method)){const{message:I}=de("MISSING_OR_INVALID",`request() method: ${o.method}`);throw new Error(I)}if(O&&!T3(O,Fc)){const{message:I}=de("MISSING_OR_INVALID",`request() expiry: ${O}. Expiry must be a number (in seconds) between ${Fc.min} and ${Fc.max}`);throw new Error(I)}},this.isValidRespond=async r=>{if(!vr(r)){const{message:d}=de("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(d)}const{topic:s,response:o}=r;if(await this.isValidSessionTopic(s),!O3(o)){const{message:d}=de("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(o)}`);throw new Error(d)}},this.isValidPing=async r=>{if(!vr(r)){const{message:o}=de("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(o)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async r=>{if(!vr(r)){const{message:y}=de("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(y)}const{topic:s,event:o,chainId:d}=r;await this.isValidSessionTopic(s);const{namespaces:O}=this.client.session.get(s);if(!Il(O,d)){const{message:y}=de("MISSING_OR_INVALID",`emit() chainId: ${d}`);throw new Error(y)}if(!I3(o)){const{message:y}=de("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(y)}if(!A3(O,d,o.name)){const{message:y}=de("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(y)}},this.isValidDisconnect=async r=>{if(!vr(r)){const{message:o}=de("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(o)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(r,s)=>{const o={verified:{verifyUrl:s.verifyUrl||"",validation:"UNKNOWN",origin:s.url||""}};try{const d=await this.client.core.verify.resolve({attestationId:r,verifyUrl:s.verifyUrl});d&&(o.verified.origin=d,o.verified.validation=d===s.url?"VALID":"INVALID")}catch(d){this.client.logger.error(d)}return this.client.logger.info(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(r,s)=>{Object.values(r).forEach(o=>{if(!Wt(o,!1)){const{message:d}=de("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(d)}})}}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.client.core.relayer.on(kt.message,async t=>{const{topic:r,message:s}=t;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const o=await this.client.core.crypto.decode(r,s);fu(o)?(this.client.core.history.set(r,o),this.onRelayEventRequest({topic:r,payload:o})):hd(o)&&(await this.client.core.history.resolve(o),this.onRelayEventResponse({topic:r,payload:o}))})}registerExpirerEvents(){this.client.core.expirer.on(Lr.expired,async t=>{const{topic:r,id:s}=Gd(t.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,de("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}isValidPairingTopic(t){if(!Wt(t,!1)){const{message:r}=de("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:r}=de("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(r)}if(An(this.client.core.pairing.pairings.get(t).expiry)){const{message:r}=de("EXPIRED",`pairing topic: ${t}`);throw new Error(r)}}async isValidSessionTopic(t){if(!Wt(t,!1)){const{message:r}=de("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(r)}if(!this.client.session.keys.includes(t)){const{message:r}=de("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(r)}if(An(this.client.session.get(t).expiry)){await this.deleteSession(t);const{message:r}=de("EXPIRED",`session topic: ${t}`);throw new Error(r)}}async isValidSessionOrPairingTopic(t){if(this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(Wt(t,!1)){const{message:r}=de("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(r)}else{const{message:r}=de("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(r)}}async isValidProposalId(t){if(!E3(t)){const{message:r}=de("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(r)}if(!this.client.proposal.keys.includes(t)){const{message:r}=de("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(r)}if(An(this.client.proposal.get(t).expiry)){await this.deleteProposal(t);const{message:r}=de("EXPIRED",`proposal id: ${t}`);throw new Error(r)}}}class vD extends Ya{constructor(t,r){super(t,r,oD,Pu),this.core=t,this.logger=r}}class mD extends Ya{constructor(t,r){super(t,r,cD,Pu),this.core=t,this.logger=r}}class bD extends Ya{constructor(t,r){super(t,r,hD,Pu,s=>s.id),this.core=t,this.logger=r}}let wD=class gp extends Mw{constructor(t){super(t),this.protocol=fp,this.version=lp,this.name=Uc.name,this.events=new Ir.EventEmitter,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(o){throw this.logger.error(o.message),o}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(o){throw this.logger.error(o.message),o}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(o){throw this.logger.error(o.message),o}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(o){throw this.logger.error(o.message),o}},this.update=async s=>{try{return await this.engine.update(s)}catch(o){throw this.logger.error(o.message),o}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(o){throw this.logger.error(o.message),o}},this.request=async s=>{try{return await this.engine.request(s)}catch(o){throw this.logger.error(o.message),o}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(o){throw this.logger.error(o.message),o}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(o){throw this.logger.error(o.message),o}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(o){throw this.logger.error(o.message),o}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(o){throw this.logger.error(o.message),o}},this.find=s=>{try{return this.engine.find(s)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=t?.name||Uc.name,this.metadata=t?.metadata||zE();const r=typeof t?.logger<"u"&&typeof t?.logger!="string"?t.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:t?.logger||Uc.logger}));this.core=t?.core||new aD(t),this.logger=Ze.generateChildLogger(r,this.name),this.session=new mD(this.core,this.logger),this.proposal=new vD(this.core,this.logger),this.pendingRequest=new bD(this.core,this.logger),this.engine=new yD(this)}static async init(t){const r=new gp(t);return await r.initialize(),r}get context(){return Ze.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}};var dt={};Object.defineProperty(dt,"__esModule",{value:!0});dt.getLocalStorage=dt.getLocalStorageOrThrow=dt.getCrypto=dt.getCryptoOrThrow=dt.getLocation=dt.getLocationOrThrow=Tu=dt.getNavigator=dt.getNavigatorOrThrow=_p=dt.getDocument=dt.getDocumentOrThrow=dt.getFromWindowOrThrow=dt.getFromWindow=void 0;function ii(i){let t;return typeof window<"u"&&typeof window[i]<"u"&&(t=window[i]),t}dt.getFromWindow=ii;function ji(i){const t=ii(i);if(!t)throw new Error(`${i} is not defined in Window`);return t}dt.getFromWindowOrThrow=ji;function ED(){return ji("document")}dt.getDocumentOrThrow=ED;function SD(){return ii("document")}var _p=dt.getDocument=SD;function DD(){return ji("navigator")}dt.getNavigatorOrThrow=DD;function OD(){return ii("navigator")}var Tu=dt.getNavigator=OD;function ID(){return ji("location")}dt.getLocationOrThrow=ID;function xD(){return ii("location")}dt.getLocation=xD;function AD(){return ji("crypto")}dt.getCryptoOrThrow=AD;function CD(){return ii("crypto")}dt.getCrypto=CD;function PD(){return ji("localStorage")}dt.getLocalStorageOrThrow=PD;function TD(){return ii("localStorage")}dt.getLocalStorage=TD;var Nu={};Object.defineProperty(Nu,"__esModule",{value:!0});Nu.getWindowMetadata=void 0;const Xl=dt;function ND(){let i,t;try{i=Xl.getDocumentOrThrow(),t=Xl.getLocationOrThrow()}catch{return null}function r(){const U=i.getElementsByTagName("link"),K=[];for(let M=0;M<U.length;M++){const L=U[M],W=L.getAttribute("rel");if(W&&W.toLowerCase().indexOf("icon")>-1){const z=L.getAttribute("href");if(z)if(z.toLowerCase().indexOf("https:")===-1&&z.toLowerCase().indexOf("http:")===-1&&z.indexOf("//")!==0){let re=t.protocol+"//"+t.host;if(z.indexOf("/")===0)re+=z;else{const p=t.pathname.split("/");p.pop();const D=p.join("/");re+=D+"/"+z}K.push(re)}else if(z.indexOf("//")===0){const re=t.protocol+z;K.push(re)}else K.push(z)}}return K}function s(...U){const K=i.getElementsByTagName("meta");for(let M=0;M<K.length;M++){const L=K[M],W=["itemprop","property","name"].map(z=>L.getAttribute(z)).filter(z=>z?U.includes(z):!1);if(W.length&&W){const z=L.getAttribute("content");if(z)return z}}return""}function o(){let U=s("name","og:site_name","og:title","twitter:title");return U||(U=i.title),U}function d(){return s("description","og:description","twitter:description","keywords")}const O=o(),y=d(),I=t.origin,N=r();return{description:y,url:I,icons:N,name:O}}Nu.getWindowMetadata=ND;var RD={};(function(i){const t=ou,r=cu,s=au,o=mu,d=p=>p==null,O=Symbol("encodeFragmentIdentifier");function y(p){switch(p.arrayFormat){case"index":return D=>(b,S)=>{const g=b.length;return S===void 0||p.skipNull&&S===null||p.skipEmptyString&&S===""?b:S===null?[...b,[P(D,p),"[",g,"]"].join("")]:[...b,[P(D,p),"[",P(g,p),"]=",P(S,p)].join("")]};case"bracket":return D=>(b,S)=>S===void 0||p.skipNull&&S===null||p.skipEmptyString&&S===""?b:S===null?[...b,[P(D,p),"[]"].join("")]:[...b,[P(D,p),"[]=",P(S,p)].join("")];case"colon-list-separator":return D=>(b,S)=>S===void 0||p.skipNull&&S===null||p.skipEmptyString&&S===""?b:S===null?[...b,[P(D,p),":list="].join("")]:[...b,[P(D,p),":list=",P(S,p)].join("")];case"comma":case"separator":case"bracket-separator":{const D=p.arrayFormat==="bracket-separator"?"[]=":"=";return b=>(S,g)=>g===void 0||p.skipNull&&g===null||p.skipEmptyString&&g===""?S:(g=g===null?"":g,S.length===0?[[P(b,p),D,P(g,p)].join("")]:[[S,P(g,p)].join(p.arrayFormatSeparator)])}default:return D=>(b,S)=>S===void 0||p.skipNull&&S===null||p.skipEmptyString&&S===""?b:S===null?[...b,P(D,p)]:[...b,[P(D,p),"=",P(S,p)].join("")]}}function I(p){let D;switch(p.arrayFormat){case"index":return(b,S,g)=>{if(D=/\[(\d*)\]$/.exec(b),b=b.replace(/\[\d*\]$/,""),!D){g[b]=S;return}g[b]===void 0&&(g[b]={}),g[b][D[1]]=S};case"bracket":return(b,S,g)=>{if(D=/(\[\])$/.exec(b),b=b.replace(/\[\]$/,""),!D){g[b]=S;return}if(g[b]===void 0){g[b]=[S];return}g[b]=[].concat(g[b],S)};case"colon-list-separator":return(b,S,g)=>{if(D=/(:list)$/.exec(b),b=b.replace(/:list$/,""),!D){g[b]=S;return}if(g[b]===void 0){g[b]=[S];return}g[b]=[].concat(g[b],S)};case"comma":case"separator":return(b,S,g)=>{const c=typeof S=="string"&&S.includes(p.arrayFormatSeparator),l=typeof S=="string"&&!c&&U(S,p).includes(p.arrayFormatSeparator);S=l?U(S,p):S;const Y=c||l?S.split(p.arrayFormatSeparator).map(h=>U(h,p)):S===null?S:U(S,p);g[b]=Y};case"bracket-separator":return(b,S,g)=>{const c=/(\[\])$/.test(b);if(b=b.replace(/\[\]$/,""),!c){g[b]=S&&U(S,p);return}const l=S===null?[]:S.split(p.arrayFormatSeparator).map(Y=>U(Y,p));if(g[b]===void 0){g[b]=l;return}g[b]=[].concat(g[b],l)};default:return(b,S,g)=>{if(g[b]===void 0){g[b]=S;return}g[b]=[].concat(g[b],S)}}}function N(p){if(typeof p!="string"||p.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function P(p,D){return D.encode?D.strict?t(p):encodeURIComponent(p):p}function U(p,D){return D.decode?r(p):p}function K(p){return Array.isArray(p)?p.sort():typeof p=="object"?K(Object.keys(p)).sort((D,b)=>Number(D)-Number(b)).map(D=>p[D]):p}function M(p){const D=p.indexOf("#");return D!==-1&&(p=p.slice(0,D)),p}function L(p){let D="";const b=p.indexOf("#");return b!==-1&&(D=p.slice(b)),D}function W(p){p=M(p);const D=p.indexOf("?");return D===-1?"":p.slice(D+1)}function z(p,D){return D.parseNumbers&&!Number.isNaN(Number(p))&&typeof p=="string"&&p.trim()!==""?p=Number(p):D.parseBooleans&&p!==null&&(p.toLowerCase()==="true"||p.toLowerCase()==="false")&&(p=p.toLowerCase()==="true"),p}function re(p,D){D=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},D),N(D.arrayFormatSeparator);const b=I(D),S=Object.create(null);if(typeof p!="string"||(p=p.trim().replace(/^[?#&]/,""),!p))return S;for(const g of p.split("&")){if(g==="")continue;let[c,l]=s(D.decode?g.replace(/\+/g," "):g,"=");l=l===void 0?null:["comma","separator","bracket-separator"].includes(D.arrayFormat)?l:U(l,D),b(U(c,D),l,S)}for(const g of Object.keys(S)){const c=S[g];if(typeof c=="object"&&c!==null)for(const l of Object.keys(c))c[l]=z(c[l],D);else S[g]=z(c,D)}return D.sort===!1?S:(D.sort===!0?Object.keys(S).sort():Object.keys(S).sort(D.sort)).reduce((g,c)=>{const l=S[c];return Boolean(l)&&typeof l=="object"&&!Array.isArray(l)?g[c]=K(l):g[c]=l,g},Object.create(null))}i.extract=W,i.parse=re,i.stringify=(p,D)=>{if(!p)return"";D=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},D),N(D.arrayFormatSeparator);const b=l=>D.skipNull&&d(p[l])||D.skipEmptyString&&p[l]==="",S=y(D),g={};for(const l of Object.keys(p))b(l)||(g[l]=p[l]);const c=Object.keys(g);return D.sort!==!1&&c.sort(D.sort),c.map(l=>{const Y=p[l];return Y===void 0?"":Y===null?P(l,D):Array.isArray(Y)?Y.length===0&&D.arrayFormat==="bracket-separator"?P(l,D)+"[]":Y.reduce(S(l),[]).join("&"):P(l,D)+"="+P(Y,D)}).filter(l=>l.length>0).join("&")},i.parseUrl=(p,D)=>{D=Object.assign({decode:!0},D);const[b,S]=s(p,"#");return Object.assign({url:b.split("?")[0]||"",query:re(W(p),D)},D&&D.parseFragmentIdentifier&&S?{fragmentIdentifier:U(S,D)}:{})},i.stringifyUrl=(p,D)=>{D=Object.assign({encode:!0,strict:!0,[O]:!0},D);const b=M(p.url).split("?")[0]||"",S=i.extract(p.url),g=i.parse(S,{sort:!1}),c=Object.assign(g,p.query);let l=i.stringify(c,D);l&&(l=`?${l}`);let Y=L(p.url);return p.fragmentIdentifier&&(Y=`#${D[O]?P(p.fragmentIdentifier,D):p.fragmentIdentifier}`),`${b}${l}${Y}`},i.pick=(p,D,b)=>{b=Object.assign({parseFragmentIdentifier:!0,[O]:!1},b);const{url:S,query:g,fragmentIdentifier:c}=i.parseUrl(p,b);return i.stringifyUrl({url:S,query:o(g,D),fragmentIdentifier:c},b)},i.exclude=(p,D,b)=>{const S=Array.isArray(D)?g=>!D.includes(g):(g,c)=>!D(g,c);return i.pick(p,S,b)}})(RD);const UD="ReactNative",Ci={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"};function yp(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function FD(){return!_p()&&!!Tu()&&navigator.product===UD}function jD(){return!yp()&&!!Tu()}function $D(){return FD()?Ci.reactNative:yp()?Ci.node:jD()?Ci.browser:Ci.unknown}function $c(i=[],t=[]){return[...new Set([...i,...t])]}function vp(i){return i.includes(":")}function Na(i){return vp(i)?i.split(":")[0]:i}const LD={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function Ql(i,t){const{message:r,code:s}=LD[i];return{message:t?`${r} ${t}`:r,code:s}}function MD(i,t){return Array.isArray(i)?typeof t<"u"&&i.length?i.every(t):!0:!1}function qD(i){return Object.getPrototypeOf(i)===Object.prototype&&Object.keys(i).length}const Zl="error",zD="wss://relay.walletconnect.com",HD="wc",BD="universal_provider",ed=`${HD}@${2}:${BD}:`,KD="https://rpc.walletconnect.com/v1",Nn={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var ls=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tu={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(i,t){(function(){var r,s="4.17.21",o=200,d="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",O="Expected a function",y="Invalid `variable` option passed into `_.template`",I="__lodash_hash_undefined__",N=500,P="__lodash_placeholder__",U=1,K=2,M=4,L=1,W=2,z=1,re=2,p=4,D=8,b=16,S=32,g=64,c=128,l=256,Y=512,h=30,_="...",w=800,C=16,E=1,v=2,$=3,H=1/0,Z=9007199254740991,R=17976931348623157e292,J=0/0,te=4294967295,ae=te-1,ie=te>>>1,ye=[["ary",c],["bind",z],["bindKey",re],["curry",D],["curryRight",b],["flip",Y],["partial",S],["partialRight",g],["rearg",l]],fe="[object Arguments]",me="[object Array]",Q="[object AsyncFunction]",X="[object Boolean]",B="[object Date]",f="[object DOMException]",j="[object Error]",he="[object Function]",pe="[object GeneratorFunction]",Oe="[object Map]",He="[object Number]",Ve="[object Null]",$e="[object Object]",_t="[object Promise]",yt="[object Proxy]",Me="[object RegExp]",Ie="[object Set]",Re="[object String]",Ue="[object Symbol]",qe="[object Undefined]",Ae="[object WeakMap]",Fe="[object WeakSet]",De="[object ArrayBuffer]",Ce="[object DataView]",Be="[object Float32Array]",xe="[object Float64Array]",ke="[object Int8Array]",We="[object Int16Array]",et="[object Int32Array]",tt="[object Uint8Array]",Je="[object Uint8ClampedArray]",tr="[object Uint16Array]",lr="[object Uint32Array]",Gr=/\b__p \+= '';/g,rr=/\b(__p \+=) '' \+/g,rn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_n=/&(?:amp|lt|gt|quot|#39);/g,Rn=/[&<>"']/g,St=RegExp(_n.source),vt=RegExp(Rn.source),Dt=/<%-([\s\S]+?)%>/g,Ot=/<%([\s\S]+?)%>/g,wt=/<%=([\s\S]+?)%>/g,mt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ut=/^\w*$/,Ft=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,It=/[\\^$.*+?()[\]{}|]/g,jt=RegExp(It.source),xt=/^\s+/,Pt=/\s/,At=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ht=/\{\n\/\* \[wrapped with (.+)\] \*/,$t=/,? & /,Lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ja=/[()=,{}\[\]\/\s]/,Xa=/\\(\\)?/g,Qa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ar=/\w*$/,Za=/^[-+]0x[0-9a-f]+$/i,eo=/^0b[01]+$/i,to=/^\[object .+?Constructor\]$/,ro=/^0o[0-7]+$/i,no=/^(?:0|[1-9]\d*)$/,nn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ai=/($^)/,io=/['\n\r\u2028\u2029\\]/g,oi="\\ud800-\\udfff",so="\\u0300-\\u036f",ao="\\ufe20-\\ufe2f",ci="\\u20d0-\\u20ff",Ss=so+ao+ci,Ds="\\u2700-\\u27bf",qr="a-z\\xdf-\\xf6\\xf8-\\xff",oo="\\xac\\xb1\\xd7\\xf7",co="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",uo="\\u2000-\\u206f",ho=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Os="A-Z\\xc0-\\xd6\\xd8-\\xde",Is="\\ufe0e\\ufe0f",Un=oo+co+uo+ho,$i="['â€™]",Fn="["+oi+"]",Li="["+Un+"]",jn="["+Ss+"]",xs="\\d+",fo="["+Ds+"]",As="["+qr+"]",Cs="[^"+oi+Un+xs+Ds+qr+Os+"]",ui="\\ud83c[\\udffb-\\udfff]",lo="(?:"+jn+"|"+ui+")",Ps="[^"+oi+"]",hi="(?:\\ud83c[\\udde6-\\uddff]){2}",yn="[\\ud800-\\udbff][\\udc00-\\udfff]",br="["+Os+"]",Ts="\\u200d",Ns="(?:"+As+"|"+Cs+")",Wr="(?:"+br+"|"+Cs+")",Rs="(?:"+$i+"(?:d|ll|m|re|s|t|ve))?",Us="(?:"+$i+"(?:D|LL|M|RE|S|T|VE))?",Fs=lo+"?",js="["+Is+"]?",po="(?:"+Ts+"(?:"+[Ps,hi,yn].join("|")+")"+js+Fs+")*",sn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",$s="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ls=js+Fs+po,fi="(?:"+[fo,hi,yn].join("|")+")"+Ls,go="(?:"+[Ps+jn+"?",jn,hi,yn,Fn].join("|")+")",Mi=RegExp($i,"g"),_o=RegExp(jn,"g"),li=RegExp(ui+"(?="+ui+")|"+go+Ls,"g"),Ms=RegExp([br+"?"+As+"+"+Rs+"(?="+[Li,br,"$"].join("|")+")",Wr+"+"+Us+"(?="+[Li,br+Ns,"$"].join("|")+")",br+"?"+Ns+"+"+Rs,br+"+"+Us,$s,sn,xs,fi].join("|"),"g"),qs=RegExp("["+Ts+oi+Ss+Is+"]"),$n=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,zs=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],yo=-1,at={};at[Be]=at[xe]=at[ke]=at[We]=at[et]=at[tt]=at[Je]=at[tr]=at[lr]=!0,at[fe]=at[me]=at[De]=at[X]=at[Ce]=at[B]=at[j]=at[he]=at[Oe]=at[He]=at[$e]=at[Me]=at[Ie]=at[Re]=at[Ae]=!1;var st={};st[fe]=st[me]=st[De]=st[Ce]=st[X]=st[B]=st[Be]=st[xe]=st[ke]=st[We]=st[et]=st[Oe]=st[He]=st[$e]=st[Me]=st[Ie]=st[Re]=st[Ue]=st[tt]=st[Je]=st[tr]=st[lr]=!0,st[j]=st[he]=st[Ae]=!1;var T={Ã€:"A",Ã:"A",Ã‚:"A",Ãƒ:"A",Ã„:"A",Ã…:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã‡:"C",Ã§:"c",Ã:"D",Ã°:"d",Ãˆ:"E",Ã‰:"E",ÃŠ:"E",Ã‹:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",ÃŒ:"I",Ã:"I",ÃŽ:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã‘:"N",Ã±:"n",Ã’:"O",Ã“:"O",Ã”:"O",Ã•:"O",Ã–:"O",Ã˜:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã™:"U",Ãš:"U",Ã›:"U",Ãœ:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã†:"Ae",Ã¦:"ae",Ãž:"Th",Ã¾:"th",ÃŸ:"ss",Ä€:"A",Ä‚:"A",Ä„:"A",Ä:"a",Äƒ:"a",Ä…:"a",Ä†:"C",Äˆ:"C",ÄŠ:"C",ÄŒ:"C",Ä‡:"c",Ä‰:"c",Ä‹:"c",Ä:"c",ÄŽ:"D",Ä:"D",Ä:"d",Ä‘:"d",Ä’:"E",Ä”:"E",Ä–:"E",Ä˜:"E",Äš:"E",Ä“:"e",Ä•:"e",Ä—:"e",Ä™:"e",Ä›:"e",Äœ:"G",Äž:"G",Ä :"G",Ä¢:"G",Ä:"g",ÄŸ:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å€:"l",Å‚:"l",Åƒ:"N",Å…:"N",Å‡:"N",ÅŠ:"N",Å„:"n",Å†:"n",Åˆ:"n",Å‹:"n",ÅŒ:"O",ÅŽ:"O",Å:"O",Å:"o",Å:"o",Å‘:"o",Å”:"R",Å–:"R",Å˜:"R",Å•:"r",Å—:"r",Å™:"r",Åš:"S",Åœ:"S",Åž:"S",Å :"S",Å›:"s",Å:"s",ÅŸ:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å’:"Oe",Å“:"oe",Å‰:"'n",Å¿:"s"},V={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ce={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ge={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ot=parseFloat,Te=parseInt,pt=typeof ls=="object"&&ls&&ls.Object===Object&&ls,Mt=typeof self=="object"&&self&&self.Object===Object&&self,Xe=pt||Mt||Function("return this")(),ct=t&&!t.nodeType&&t,Tt=ct&&!0&&i&&!i.nodeType&&i,dr=Tt&&Tt.exports===ct,qt=dr&&pt.process,gt=function(){try{var k=Tt&&Tt.require&&Tt.require("util").types;return k||qt&&qt.binding&&qt.binding("util")}catch{}}(),nr=gt&&gt.isArrayBuffer,zr=gt&&gt.isDate,Cr=gt&&gt.isMap,Yr=gt&&gt.isRegExp,qi=gt&&gt.isSet,Ln=gt&&gt.isTypedArray;function Kt(k,ne,ee){switch(ee.length){case 0:return k.call(ne);case 1:return k.call(ne,ee[0]);case 2:return k.call(ne,ee[0],ee[1]);case 3:return k.call(ne,ee[0],ee[1],ee[2])}return k.apply(ne,ee)}function mp(k,ne,ee,_e){for(var Pe=-1,rt=k==null?0:k.length;++Pe<rt;){var Ht=k[Pe];ne(_e,Ht,ee(Ht),k)}return _e}function Pr(k,ne){for(var ee=-1,_e=k==null?0:k.length;++ee<_e&&ne(k[ee],ee,k)!==!1;);return k}function bp(k,ne){for(var ee=k==null?0:k.length;ee--&&ne(k[ee],ee,k)!==!1;);return k}function Fu(k,ne){for(var ee=-1,_e=k==null?0:k.length;++ee<_e;)if(!ne(k[ee],ee,k))return!1;return!0}function vn(k,ne){for(var ee=-1,_e=k==null?0:k.length,Pe=0,rt=[];++ee<_e;){var Ht=k[ee];ne(Ht,ee,k)&&(rt[Pe++]=Ht)}return rt}function Hs(k,ne){var ee=k==null?0:k.length;return!!ee&&di(k,ne,0)>-1}function vo(k,ne,ee){for(var _e=-1,Pe=k==null?0:k.length;++_e<Pe;)if(ee(ne,k[_e]))return!0;return!1}function bt(k,ne){for(var ee=-1,_e=k==null?0:k.length,Pe=Array(_e);++ee<_e;)Pe[ee]=ne(k[ee],ee,k);return Pe}function mn(k,ne){for(var ee=-1,_e=ne.length,Pe=k.length;++ee<_e;)k[Pe+ee]=ne[ee];return k}function mo(k,ne,ee,_e){var Pe=-1,rt=k==null?0:k.length;for(_e&&rt&&(ee=k[++Pe]);++Pe<rt;)ee=ne(ee,k[Pe],Pe,k);return ee}function wp(k,ne,ee,_e){var Pe=k==null?0:k.length;for(_e&&Pe&&(ee=k[--Pe]);Pe--;)ee=ne(ee,k[Pe],Pe,k);return ee}function bo(k,ne){for(var ee=-1,_e=k==null?0:k.length;++ee<_e;)if(ne(k[ee],ee,k))return!0;return!1}var Ep=wo("length");function Sp(k){return k.split("")}function Dp(k){return k.match(Lt)||[]}function ju(k,ne,ee){var _e;return ee(k,function(Pe,rt,Ht){if(ne(Pe,rt,Ht))return _e=rt,!1}),_e}function Bs(k,ne,ee,_e){for(var Pe=k.length,rt=ee+(_e?1:-1);_e?rt--:++rt<Pe;)if(ne(k[rt],rt,k))return rt;return-1}function di(k,ne,ee){return ne===ne?jp(k,ne,ee):Bs(k,$u,ee)}function Op(k,ne,ee,_e){for(var Pe=ee-1,rt=k.length;++Pe<rt;)if(_e(k[Pe],ne))return Pe;return-1}function $u(k){return k!==k}function Lu(k,ne){var ee=k==null?0:k.length;return ee?So(k,ne)/ee:J}function wo(k){return function(ne){return ne==null?r:ne[k]}}function Eo(k){return function(ne){return k==null?r:k[ne]}}function Mu(k,ne,ee,_e,Pe){return Pe(k,function(rt,Ht,ut){ee=_e?(_e=!1,rt):ne(ee,rt,Ht,ut)}),ee}function Ip(k,ne){var ee=k.length;for(k.sort(ne);ee--;)k[ee]=k[ee].value;return k}function So(k,ne){for(var ee,_e=-1,Pe=k.length;++_e<Pe;){var rt=ne(k[_e]);rt!==r&&(ee=ee===r?rt:ee+rt)}return ee}function Do(k,ne){for(var ee=-1,_e=Array(k);++ee<k;)_e[ee]=ne(ee);return _e}function xp(k,ne){return bt(ne,function(ee){return[ee,k[ee]]})}function qu(k){return k&&k.slice(0,Ku(k)+1).replace(xt,"")}function wr(k){return function(ne){return k(ne)}}function Oo(k,ne){return bt(ne,function(ee){return k[ee]})}function zi(k,ne){return k.has(ne)}function zu(k,ne){for(var ee=-1,_e=k.length;++ee<_e&&di(ne,k[ee],0)>-1;);return ee}function Hu(k,ne){for(var ee=k.length;ee--&&di(ne,k[ee],0)>-1;);return ee}function Ap(k,ne){for(var ee=k.length,_e=0;ee--;)k[ee]===ne&&++_e;return _e}var Cp=Eo(T),Pp=Eo(V);function Tp(k){return"\\"+ge[k]}function Np(k,ne){return k==null?r:k[ne]}function pi(k){return qs.test(k)}function Rp(k){return $n.test(k)}function Up(k){for(var ne,ee=[];!(ne=k.next()).done;)ee.push(ne.value);return ee}function Io(k){var ne=-1,ee=Array(k.size);return k.forEach(function(_e,Pe){ee[++ne]=[Pe,_e]}),ee}function Bu(k,ne){return function(ee){return k(ne(ee))}}function bn(k,ne){for(var ee=-1,_e=k.length,Pe=0,rt=[];++ee<_e;){var Ht=k[ee];(Ht===ne||Ht===P)&&(k[ee]=P,rt[Pe++]=ee)}return rt}function Ks(k){var ne=-1,ee=Array(k.size);return k.forEach(function(_e){ee[++ne]=_e}),ee}function Fp(k){var ne=-1,ee=Array(k.size);return k.forEach(function(_e){ee[++ne]=[_e,_e]}),ee}function jp(k,ne,ee){for(var _e=ee-1,Pe=k.length;++_e<Pe;)if(k[_e]===ne)return _e;return-1}function $p(k,ne,ee){for(var _e=ee+1;_e--;)if(k[_e]===ne)return _e;return _e}function gi(k){return pi(k)?Mp(k):Ep(k)}function Hr(k){return pi(k)?qp(k):Sp(k)}function Ku(k){for(var ne=k.length;ne--&&Pt.test(k.charAt(ne)););return ne}var Lp=Eo(ce);function Mp(k){for(var ne=li.lastIndex=0;li.test(k);)++ne;return ne}function qp(k){return k.match(li)||[]}function zp(k){return k.match(Ms)||[]}var Hp=function k(ne){ne=ne==null?Xe:_i.defaults(Xe.Object(),ne,_i.pick(Xe,zs));var ee=ne.Array,_e=ne.Date,Pe=ne.Error,rt=ne.Function,Ht=ne.Math,ut=ne.Object,xo=ne.RegExp,Bp=ne.String,Tr=ne.TypeError,Vs=ee.prototype,Kp=rt.prototype,yi=ut.prototype,ks=ne["__core-js_shared__"],Gs=Kp.toString,it=yi.hasOwnProperty,Vp=0,Vu=function(){var e=/[^.]+$/.exec(ks&&ks.keys&&ks.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ws=yi.toString,kp=Gs.call(ut),Gp=Xe._,Wp=xo("^"+Gs.call(it).replace(It,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ys=dr?ne.Buffer:r,wn=ne.Symbol,Js=ne.Uint8Array,ku=Ys?Ys.allocUnsafe:r,Xs=Bu(ut.getPrototypeOf,ut),Gu=ut.create,Wu=yi.propertyIsEnumerable,Qs=Vs.splice,Yu=wn?wn.isConcatSpreadable:r,Hi=wn?wn.iterator:r,Mn=wn?wn.toStringTag:r,Zs=function(){try{var e=Kn(ut,"defineProperty");return e({},"",{}),e}catch{}}(),Yp=ne.clearTimeout!==Xe.clearTimeout&&ne.clearTimeout,Jp=_e&&_e.now!==Xe.Date.now&&_e.now,Xp=ne.setTimeout!==Xe.setTimeout&&ne.setTimeout,ea=Ht.ceil,ta=Ht.floor,Ao=ut.getOwnPropertySymbols,Qp=Ys?Ys.isBuffer:r,Ju=ne.isFinite,Zp=Vs.join,eg=Bu(ut.keys,ut),Bt=Ht.max,Qt=Ht.min,tg=_e.now,rg=ne.parseInt,Xu=Ht.random,ng=Vs.reverse,Co=Kn(ne,"DataView"),Bi=Kn(ne,"Map"),Po=Kn(ne,"Promise"),vi=Kn(ne,"Set"),Ki=Kn(ne,"WeakMap"),Vi=Kn(ut,"create"),ra=Ki&&new Ki,mi={},ig=Vn(Co),sg=Vn(Bi),ag=Vn(Po),og=Vn(vi),cg=Vn(Ki),na=wn?wn.prototype:r,ki=na?na.valueOf:r,Qu=na?na.toString:r;function x(e){if(Ct(e)&&!Ne(e)&&!(e instanceof Ye)){if(e instanceof Nr)return e;if(it.call(e,"__wrapped__"))return Zh(e)}return new Nr(e)}var bi=function(){function e(){}return function(n){if(!Et(n))return{};if(Gu)return Gu(n);e.prototype=n;var a=new e;return e.prototype=r,a}}();function ia(){}function Nr(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=r}x.templateSettings={escape:Dt,evaluate:Ot,interpolate:wt,variable:"",imports:{_:x}},x.prototype=ia.prototype,x.prototype.constructor=x,Nr.prototype=bi(ia.prototype),Nr.prototype.constructor=Nr;function Ye(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=te,this.__views__=[]}function ug(){var e=new Ye(this.__wrapped__);return e.__actions__=pr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=pr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=pr(this.__views__),e}function hg(){if(this.__filtered__){var e=new Ye(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function fg(){var e=this.__wrapped__.value(),n=this.__dir__,a=Ne(e),u=n<0,m=a?e.length:0,A=S0(0,m,this.__views__),F=A.start,q=A.end,G=q-F,se=u?q:F-1,oe=this.__iteratees__,ue=oe.length,le=0,ve=Qt(G,this.__takeCount__);if(!a||!u&&m==G&&ve==G)return Eh(e,this.__actions__);var we=[];e:for(;G--&&le<ve;){se+=n;for(var ze=-1,Ee=e[se];++ze<ue;){var Ge=oe[ze],Qe=Ge.iteratee,Dr=Ge.type,ar=Qe(Ee);if(Dr==v)Ee=ar;else if(!ar){if(Dr==E)continue e;break e}}we[le++]=Ee}return we}Ye.prototype=bi(ia.prototype),Ye.prototype.constructor=Ye;function qn(e){var n=-1,a=e==null?0:e.length;for(this.clear();++n<a;){var u=e[n];this.set(u[0],u[1])}}function lg(){this.__data__=Vi?Vi(null):{},this.size=0}function dg(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}function pg(e){var n=this.__data__;if(Vi){var a=n[e];return a===I?r:a}return it.call(n,e)?n[e]:r}function gg(e){var n=this.__data__;return Vi?n[e]!==r:it.call(n,e)}function _g(e,n){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=Vi&&n===r?I:n,this}qn.prototype.clear=lg,qn.prototype.delete=dg,qn.prototype.get=pg,qn.prototype.has=gg,qn.prototype.set=_g;function an(e){var n=-1,a=e==null?0:e.length;for(this.clear();++n<a;){var u=e[n];this.set(u[0],u[1])}}function yg(){this.__data__=[],this.size=0}function vg(e){var n=this.__data__,a=sa(n,e);if(a<0)return!1;var u=n.length-1;return a==u?n.pop():Qs.call(n,a,1),--this.size,!0}function mg(e){var n=this.__data__,a=sa(n,e);return a<0?r:n[a][1]}function bg(e){return sa(this.__data__,e)>-1}function wg(e,n){var a=this.__data__,u=sa(a,e);return u<0?(++this.size,a.push([e,n])):a[u][1]=n,this}an.prototype.clear=yg,an.prototype.delete=vg,an.prototype.get=mg,an.prototype.has=bg,an.prototype.set=wg;function on(e){var n=-1,a=e==null?0:e.length;for(this.clear();++n<a;){var u=e[n];this.set(u[0],u[1])}}function Eg(){this.size=0,this.__data__={hash:new qn,map:new(Bi||an),string:new qn}}function Sg(e){var n=ya(this,e).delete(e);return this.size-=n?1:0,n}function Dg(e){return ya(this,e).get(e)}function Og(e){return ya(this,e).has(e)}function Ig(e,n){var a=ya(this,e),u=a.size;return a.set(e,n),this.size+=a.size==u?0:1,this}on.prototype.clear=Eg,on.prototype.delete=Sg,on.prototype.get=Dg,on.prototype.has=Og,on.prototype.set=Ig;function zn(e){var n=-1,a=e==null?0:e.length;for(this.__data__=new on;++n<a;)this.add(e[n])}function xg(e){return this.__data__.set(e,I),this}function Ag(e){return this.__data__.has(e)}zn.prototype.add=zn.prototype.push=xg,zn.prototype.has=Ag;function Br(e){var n=this.__data__=new an(e);this.size=n.size}function Cg(){this.__data__=new an,this.size=0}function Pg(e){var n=this.__data__,a=n.delete(e);return this.size=n.size,a}function Tg(e){return this.__data__.get(e)}function Ng(e){return this.__data__.has(e)}function Rg(e,n){var a=this.__data__;if(a instanceof an){var u=a.__data__;if(!Bi||u.length<o-1)return u.push([e,n]),this.size=++a.size,this;a=this.__data__=new on(u)}return a.set(e,n),this.size=a.size,this}Br.prototype.clear=Cg,Br.prototype.delete=Pg,Br.prototype.get=Tg,Br.prototype.has=Ng,Br.prototype.set=Rg;function Zu(e,n){var a=Ne(e),u=!a&&kn(e),m=!a&&!u&&In(e),A=!a&&!u&&!m&&Di(e),F=a||u||m||A,q=F?Do(e.length,Bp):[],G=q.length;for(var se in e)(n||it.call(e,se))&&!(F&&(se=="length"||m&&(se=="offset"||se=="parent")||A&&(se=="buffer"||se=="byteLength"||se=="byteOffset")||fn(se,G)))&&q.push(se);return q}function eh(e){var n=e.length;return n?e[zo(0,n-1)]:r}function Ug(e,n){return va(pr(e),Hn(n,0,e.length))}function Fg(e){return va(pr(e))}function To(e,n,a){(a!==r&&!Kr(e[n],a)||a===r&&!(n in e))&&cn(e,n,a)}function Gi(e,n,a){var u=e[n];(!(it.call(e,n)&&Kr(u,a))||a===r&&!(n in e))&&cn(e,n,a)}function sa(e,n){for(var a=e.length;a--;)if(Kr(e[a][0],n))return a;return-1}function jg(e,n,a,u){return En(e,function(m,A,F){n(u,m,a(m),F)}),u}function th(e,n){return e&&Xr(n,Vt(n),e)}function $g(e,n){return e&&Xr(n,_r(n),e)}function cn(e,n,a){n=="__proto__"&&Zs?Zs(e,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[n]=a}function No(e,n){for(var a=-1,u=n.length,m=ee(u),A=e==null;++a<u;)m[a]=A?r:lc(e,n[a]);return m}function Hn(e,n,a){return e===e&&(a!==r&&(e=e<=a?e:a),n!==r&&(e=e>=n?e:n)),e}function Rr(e,n,a,u,m,A){var F,q=n&U,G=n&K,se=n&M;if(a&&(F=m?a(e,u,m,A):a(e)),F!==r)return F;if(!Et(e))return e;var oe=Ne(e);if(oe){if(F=O0(e),!q)return pr(e,F)}else{var ue=Zt(e),le=ue==he||ue==pe;if(In(e))return Oh(e,q);if(ue==$e||ue==fe||le&&!m){if(F=G||le?{}:Kh(e),!q)return G?p0(e,$g(F,e)):d0(e,th(F,e))}else{if(!st[ue])return m?e:{};F=I0(e,ue,q)}}A||(A=new Br);var ve=A.get(e);if(ve)return ve;A.set(e,F),bf(e)?e.forEach(function(Ee){F.add(Rr(Ee,n,a,Ee,e,A))}):vf(e)&&e.forEach(function(Ee,Ge){F.set(Ge,Rr(Ee,n,a,Ge,e,A))});var we=se?G?Qo:Xo:G?_r:Vt,ze=oe?r:we(e);return Pr(ze||e,function(Ee,Ge){ze&&(Ge=Ee,Ee=e[Ge]),Gi(F,Ge,Rr(Ee,n,a,Ge,e,A))}),F}function Lg(e){var n=Vt(e);return function(a){return rh(a,e,n)}}function rh(e,n,a){var u=a.length;if(e==null)return!u;for(e=ut(e);u--;){var m=a[u],A=n[m],F=e[m];if(F===r&&!(m in e)||!A(F))return!1}return!0}function nh(e,n,a){if(typeof e!="function")throw new Tr(O);return es(function(){e.apply(r,a)},n)}function Wi(e,n,a,u){var m=-1,A=Hs,F=!0,q=e.length,G=[],se=n.length;if(!q)return G;a&&(n=bt(n,wr(a))),u?(A=vo,F=!1):n.length>=o&&(A=zi,F=!1,n=new zn(n));e:for(;++m<q;){var oe=e[m],ue=a==null?oe:a(oe);if(oe=u||oe!==0?oe:0,F&&ue===ue){for(var le=se;le--;)if(n[le]===ue)continue e;G.push(oe)}else A(n,ue,u)||G.push(oe)}return G}var En=Ph(Jr),ih=Ph(Uo,!0);function Mg(e,n){var a=!0;return En(e,function(u,m,A){return a=!!n(u,m,A),a}),a}function aa(e,n,a){for(var u=-1,m=e.length;++u<m;){var A=e[u],F=n(A);if(F!=null&&(q===r?F===F&&!Sr(F):a(F,q)))var q=F,G=A}return G}function qg(e,n,a,u){var m=e.length;for(a=Le(a),a<0&&(a=-a>m?0:m+a),u=u===r||u>m?m:Le(u),u<0&&(u+=m),u=a>u?0:Ef(u);a<u;)e[a++]=n;return e}function sh(e,n){var a=[];return En(e,function(u,m,A){n(u,m,A)&&a.push(u)}),a}function Yt(e,n,a,u,m){var A=-1,F=e.length;for(a||(a=A0),m||(m=[]);++A<F;){var q=e[A];n>0&&a(q)?n>1?Yt(q,n-1,a,u,m):mn(m,q):u||(m[m.length]=q)}return m}var Ro=Th(),ah=Th(!0);function Jr(e,n){return e&&Ro(e,n,Vt)}function Uo(e,n){return e&&ah(e,n,Vt)}function oa(e,n){return vn(n,function(a){return ln(e[a])})}function Bn(e,n){n=Dn(n,e);for(var a=0,u=n.length;e!=null&&a<u;)e=e[Qr(n[a++])];return a&&a==u?e:r}function oh(e,n,a){var u=n(e);return Ne(e)?u:mn(u,a(e))}function ir(e){return e==null?e===r?qe:Ve:Mn&&Mn in ut(e)?E0(e):F0(e)}function Fo(e,n){return e>n}function zg(e,n){return e!=null&&it.call(e,n)}function Hg(e,n){return e!=null&&n in ut(e)}function Bg(e,n,a){return e>=Qt(n,a)&&e<Bt(n,a)}function jo(e,n,a){for(var u=a?vo:Hs,m=e[0].length,A=e.length,F=A,q=ee(A),G=1/0,se=[];F--;){var oe=e[F];F&&n&&(oe=bt(oe,wr(n))),G=Qt(oe.length,G),q[F]=!a&&(n||m>=120&&oe.length>=120)?new zn(F&&oe):r}oe=e[0];var ue=-1,le=q[0];e:for(;++ue<m&&se.length<G;){var ve=oe[ue],we=n?n(ve):ve;if(ve=a||ve!==0?ve:0,!(le?zi(le,we):u(se,we,a))){for(F=A;--F;){var ze=q[F];if(!(ze?zi(ze,we):u(e[F],we,a)))continue e}le&&le.push(we),se.push(ve)}}return se}function Kg(e,n,a,u){return Jr(e,function(m,A,F){n(u,a(m),A,F)}),u}function Yi(e,n,a){n=Dn(n,e),e=Wh(e,n);var u=e==null?e:e[Qr(Fr(n))];return u==null?r:Kt(u,e,a)}function ch(e){return Ct(e)&&ir(e)==fe}function Vg(e){return Ct(e)&&ir(e)==De}function kg(e){return Ct(e)&&ir(e)==B}function Ji(e,n,a,u,m){return e===n?!0:e==null||n==null||!Ct(e)&&!Ct(n)?e!==e&&n!==n:Gg(e,n,a,u,Ji,m)}function Gg(e,n,a,u,m,A){var F=Ne(e),q=Ne(n),G=F?me:Zt(e),se=q?me:Zt(n);G=G==fe?$e:G,se=se==fe?$e:se;var oe=G==$e,ue=se==$e,le=G==se;if(le&&In(e)){if(!In(n))return!1;F=!0,oe=!1}if(le&&!oe)return A||(A=new Br),F||Di(e)?zh(e,n,a,u,m,A):b0(e,n,G,a,u,m,A);if(!(a&L)){var ve=oe&&it.call(e,"__wrapped__"),we=ue&&it.call(n,"__wrapped__");if(ve||we){var ze=ve?e.value():e,Ee=we?n.value():n;return A||(A=new Br),m(ze,Ee,a,u,A)}}return le?(A||(A=new Br),w0(e,n,a,u,m,A)):!1}function Wg(e){return Ct(e)&&Zt(e)==Oe}function $o(e,n,a,u){var m=a.length,A=m,F=!u;if(e==null)return!A;for(e=ut(e);m--;){var q=a[m];if(F&&q[2]?q[1]!==e[q[0]]:!(q[0]in e))return!1}for(;++m<A;){q=a[m];var G=q[0],se=e[G],oe=q[1];if(F&&q[2]){if(se===r&&!(G in e))return!1}else{var ue=new Br;if(u)var le=u(se,oe,G,e,n,ue);if(!(le===r?Ji(oe,se,L|W,u,ue):le))return!1}}return!0}function uh(e){if(!Et(e)||P0(e))return!1;var n=ln(e)?Wp:to;return n.test(Vn(e))}function Yg(e){return Ct(e)&&ir(e)==Me}function Jg(e){return Ct(e)&&Zt(e)==Ie}function Xg(e){return Ct(e)&&Da(e.length)&&!!at[ir(e)]}function hh(e){return typeof e=="function"?e:e==null?yr:typeof e=="object"?Ne(e)?dh(e[0],e[1]):lh(e):Rf(e)}function Lo(e){if(!Zi(e))return eg(e);var n=[];for(var a in ut(e))it.call(e,a)&&a!="constructor"&&n.push(a);return n}function Qg(e){if(!Et(e))return U0(e);var n=Zi(e),a=[];for(var u in e)u=="constructor"&&(n||!it.call(e,u))||a.push(u);return a}function Mo(e,n){return e<n}function fh(e,n){var a=-1,u=gr(e)?ee(e.length):[];return En(e,function(m,A,F){u[++a]=n(m,A,F)}),u}function lh(e){var n=ec(e);return n.length==1&&n[0][2]?kh(n[0][0],n[0][1]):function(a){return a===e||$o(a,e,n)}}function dh(e,n){return rc(e)&&Vh(n)?kh(Qr(e),n):function(a){var u=lc(a,e);return u===r&&u===n?dc(a,e):Ji(n,u,L|W)}}function ca(e,n,a,u,m){e!==n&&Ro(n,function(A,F){if(m||(m=new Br),Et(A))Zg(e,n,F,a,ca,u,m);else{var q=u?u(ic(e,F),A,F+"",e,n,m):r;q===r&&(q=A),To(e,F,q)}},_r)}function Zg(e,n,a,u,m,A,F){var q=ic(e,a),G=ic(n,a),se=F.get(G);if(se){To(e,a,se);return}var oe=A?A(q,G,a+"",e,n,F):r,ue=oe===r;if(ue){var le=Ne(G),ve=!le&&In(G),we=!le&&!ve&&Di(G);oe=G,le||ve||we?Ne(q)?oe=q:Nt(q)?oe=pr(q):ve?(ue=!1,oe=Oh(G,!0)):we?(ue=!1,oe=Ih(G,!0)):oe=[]:ts(G)||kn(G)?(oe=q,kn(q)?oe=Sf(q):(!Et(q)||ln(q))&&(oe=Kh(G))):ue=!1}ue&&(F.set(G,oe),m(oe,G,u,A,F),F.delete(G)),To(e,a,oe)}function ph(e,n){var a=e.length;if(a)return n+=n<0?a:0,fn(n,a)?e[n]:r}function gh(e,n,a){n.length?n=bt(n,function(A){return Ne(A)?function(F){return Bn(F,A.length===1?A[0]:A)}:A}):n=[yr];var u=-1;n=bt(n,wr(be()));var m=fh(e,function(A,F,q){var G=bt(n,function(se){return se(A)});return{criteria:G,index:++u,value:A}});return Ip(m,function(A,F){return l0(A,F,a)})}function e0(e,n){return _h(e,n,function(a,u){return dc(e,u)})}function _h(e,n,a){for(var u=-1,m=n.length,A={};++u<m;){var F=n[u],q=Bn(e,F);a(q,F)&&Xi(A,Dn(F,e),q)}return A}function t0(e){return function(n){return Bn(n,e)}}function qo(e,n,a,u){var m=u?Op:di,A=-1,F=n.length,q=e;for(e===n&&(n=pr(n)),a&&(q=bt(e,wr(a)));++A<F;)for(var G=0,se=n[A],oe=a?a(se):se;(G=m(q,oe,G,u))>-1;)q!==e&&Qs.call(q,G,1),Qs.call(e,G,1);return e}function yh(e,n){for(var a=e?n.length:0,u=a-1;a--;){var m=n[a];if(a==u||m!==A){var A=m;fn(m)?Qs.call(e,m,1):Ko(e,m)}}return e}function zo(e,n){return e+ta(Xu()*(n-e+1))}function r0(e,n,a,u){for(var m=-1,A=Bt(ea((n-e)/(a||1)),0),F=ee(A);A--;)F[u?A:++m]=e,e+=a;return F}function Ho(e,n){var a="";if(!e||n<1||n>Z)return a;do n%2&&(a+=e),n=ta(n/2),n&&(e+=e);while(n);return a}function Ke(e,n){return sc(Gh(e,n,yr),e+"")}function n0(e){return eh(Oi(e))}function i0(e,n){var a=Oi(e);return va(a,Hn(n,0,a.length))}function Xi(e,n,a,u){if(!Et(e))return e;n=Dn(n,e);for(var m=-1,A=n.length,F=A-1,q=e;q!=null&&++m<A;){var G=Qr(n[m]),se=a;if(G==="__proto__"||G==="constructor"||G==="prototype")return e;if(m!=F){var oe=q[G];se=u?u(oe,G,q):r,se===r&&(se=Et(oe)?oe:fn(n[m+1])?[]:{})}Gi(q,G,se),q=q[G]}return e}var vh=ra?function(e,n){return ra.set(e,n),e}:yr,s0=Zs?function(e,n){return Zs(e,"toString",{configurable:!0,enumerable:!1,value:gc(n),writable:!0})}:yr;function a0(e){return va(Oi(e))}function Ur(e,n,a){var u=-1,m=e.length;n<0&&(n=-n>m?0:m+n),a=a>m?m:a,a<0&&(a+=m),m=n>a?0:a-n>>>0,n>>>=0;for(var A=ee(m);++u<m;)A[u]=e[u+n];return A}function o0(e,n){var a;return En(e,function(u,m,A){return a=n(u,m,A),!a}),!!a}function ua(e,n,a){var u=0,m=e==null?u:e.length;if(typeof n=="number"&&n===n&&m<=ie){for(;u<m;){var A=u+m>>>1,F=e[A];F!==null&&!Sr(F)&&(a?F<=n:F<n)?u=A+1:m=A}return m}return Bo(e,n,yr,a)}function Bo(e,n,a,u){var m=0,A=e==null?0:e.length;if(A===0)return 0;n=a(n);for(var F=n!==n,q=n===null,G=Sr(n),se=n===r;m<A;){var oe=ta((m+A)/2),ue=a(e[oe]),le=ue!==r,ve=ue===null,we=ue===ue,ze=Sr(ue);if(F)var Ee=u||we;else se?Ee=we&&(u||le):q?Ee=we&&le&&(u||!ve):G?Ee=we&&le&&!ve&&(u||!ze):ve||ze?Ee=!1:Ee=u?ue<=n:ue<n;Ee?m=oe+1:A=oe}return Qt(A,ae)}function mh(e,n){for(var a=-1,u=e.length,m=0,A=[];++a<u;){var F=e[a],q=n?n(F):F;if(!a||!Kr(q,G)){var G=q;A[m++]=F===0?0:F}}return A}function bh(e){return typeof e=="number"?e:Sr(e)?J:+e}function Er(e){if(typeof e=="string")return e;if(Ne(e))return bt(e,Er)+"";if(Sr(e))return Qu?Qu.call(e):"";var n=e+"";return n=="0"&&1/e==-H?"-0":n}function Sn(e,n,a){var u=-1,m=Hs,A=e.length,F=!0,q=[],G=q;if(a)F=!1,m=vo;else if(A>=o){var se=n?null:v0(e);if(se)return Ks(se);F=!1,m=zi,G=new zn}else G=n?[]:q;e:for(;++u<A;){var oe=e[u],ue=n?n(oe):oe;if(oe=a||oe!==0?oe:0,F&&ue===ue){for(var le=G.length;le--;)if(G[le]===ue)continue e;n&&G.push(ue),q.push(oe)}else m(G,ue,a)||(G!==q&&G.push(ue),q.push(oe))}return q}function Ko(e,n){return n=Dn(n,e),e=Wh(e,n),e==null||delete e[Qr(Fr(n))]}function wh(e,n,a,u){return Xi(e,n,a(Bn(e,n)),u)}function ha(e,n,a,u){for(var m=e.length,A=u?m:-1;(u?A--:++A<m)&&n(e[A],A,e););return a?Ur(e,u?0:A,u?A+1:m):Ur(e,u?A+1:0,u?m:A)}function Eh(e,n){var a=e;return a instanceof Ye&&(a=a.value()),mo(n,function(u,m){return m.func.apply(m.thisArg,mn([u],m.args))},a)}function Vo(e,n,a){var u=e.length;if(u<2)return u?Sn(e[0]):[];for(var m=-1,A=ee(u);++m<u;)for(var F=e[m],q=-1;++q<u;)q!=m&&(A[m]=Wi(A[m]||F,e[q],n,a));return Sn(Yt(A,1),n,a)}function Sh(e,n,a){for(var u=-1,m=e.length,A=n.length,F={};++u<m;){var q=u<A?n[u]:r;a(F,e[u],q)}return F}function ko(e){return Nt(e)?e:[]}function Go(e){return typeof e=="function"?e:yr}function Dn(e,n){return Ne(e)?e:rc(e,n)?[e]:Qh(nt(e))}var c0=Ke;function On(e,n,a){var u=e.length;return a=a===r?u:a,!n&&a>=u?e:Ur(e,n,a)}var Dh=Yp||function(e){return Xe.clearTimeout(e)};function Oh(e,n){if(n)return e.slice();var a=e.length,u=ku?ku(a):new e.constructor(a);return e.copy(u),u}function Wo(e){var n=new e.constructor(e.byteLength);return new Js(n).set(new Js(e)),n}function u0(e,n){var a=n?Wo(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}function h0(e){var n=new e.constructor(e.source,Ar.exec(e));return n.lastIndex=e.lastIndex,n}function f0(e){return ki?ut(ki.call(e)):{}}function Ih(e,n){var a=n?Wo(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}function xh(e,n){if(e!==n){var a=e!==r,u=e===null,m=e===e,A=Sr(e),F=n!==r,q=n===null,G=n===n,se=Sr(n);if(!q&&!se&&!A&&e>n||A&&F&&G&&!q&&!se||u&&F&&G||!a&&G||!m)return 1;if(!u&&!A&&!se&&e<n||se&&a&&m&&!u&&!A||q&&a&&m||!F&&m||!G)return-1}return 0}function l0(e,n,a){for(var u=-1,m=e.criteria,A=n.criteria,F=m.length,q=a.length;++u<F;){var G=xh(m[u],A[u]);if(G){if(u>=q)return G;var se=a[u];return G*(se=="desc"?-1:1)}}return e.index-n.index}function Ah(e,n,a,u){for(var m=-1,A=e.length,F=a.length,q=-1,G=n.length,se=Bt(A-F,0),oe=ee(G+se),ue=!u;++q<G;)oe[q]=n[q];for(;++m<F;)(ue||m<A)&&(oe[a[m]]=e[m]);for(;se--;)oe[q++]=e[m++];return oe}function Ch(e,n,a,u){for(var m=-1,A=e.length,F=-1,q=a.length,G=-1,se=n.length,oe=Bt(A-q,0),ue=ee(oe+se),le=!u;++m<oe;)ue[m]=e[m];for(var ve=m;++G<se;)ue[ve+G]=n[G];for(;++F<q;)(le||m<A)&&(ue[ve+a[F]]=e[m++]);return ue}function pr(e,n){var a=-1,u=e.length;for(n||(n=ee(u));++a<u;)n[a]=e[a];return n}function Xr(e,n,a,u){var m=!a;a||(a={});for(var A=-1,F=n.length;++A<F;){var q=n[A],G=u?u(a[q],e[q],q,a,e):r;G===r&&(G=e[q]),m?cn(a,q,G):Gi(a,q,G)}return a}function d0(e,n){return Xr(e,tc(e),n)}function p0(e,n){return Xr(e,Hh(e),n)}function fa(e,n){return function(a,u){var m=Ne(a)?mp:jg,A=n?n():{};return m(a,e,be(u,2),A)}}function wi(e){return Ke(function(n,a){var u=-1,m=a.length,A=m>1?a[m-1]:r,F=m>2?a[2]:r;for(A=e.length>3&&typeof A=="function"?(m--,A):r,F&&sr(a[0],a[1],F)&&(A=m<3?r:A,m=1),n=ut(n);++u<m;){var q=a[u];q&&e(n,q,u,A)}return n})}function Ph(e,n){return function(a,u){if(a==null)return a;if(!gr(a))return e(a,u);for(var m=a.length,A=n?m:-1,F=ut(a);(n?A--:++A<m)&&u(F[A],A,F)!==!1;);return a}}function Th(e){return function(n,a,u){for(var m=-1,A=ut(n),F=u(n),q=F.length;q--;){var G=F[e?q:++m];if(a(A[G],G,A)===!1)break}return n}}function g0(e,n,a){var u=n&z,m=Qi(e);function A(){var F=this&&this!==Xe&&this instanceof A?m:e;return F.apply(u?a:this,arguments)}return A}function Nh(e){return function(n){n=nt(n);var a=pi(n)?Hr(n):r,u=a?a[0]:n.charAt(0),m=a?On(a,1).join(""):n.slice(1);return u[e]()+m}}function Ei(e){return function(n){return mo(Tf(Pf(n).replace(Mi,"")),e,"")}}function Qi(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var a=bi(e.prototype),u=e.apply(a,n);return Et(u)?u:a}}function _0(e,n,a){var u=Qi(e);function m(){for(var A=arguments.length,F=ee(A),q=A,G=Si(m);q--;)F[q]=arguments[q];var se=A<3&&F[0]!==G&&F[A-1]!==G?[]:bn(F,G);if(A-=se.length,A<a)return $h(e,n,la,m.placeholder,r,F,se,r,r,a-A);var oe=this&&this!==Xe&&this instanceof m?u:e;return Kt(oe,this,F)}return m}function Rh(e){return function(n,a,u){var m=ut(n);if(!gr(n)){var A=be(a,3);n=Vt(n),a=function(q){return A(m[q],q,m)}}var F=e(n,a,u);return F>-1?m[A?n[F]:F]:r}}function Uh(e){return hn(function(n){var a=n.length,u=a,m=Nr.prototype.thru;for(e&&n.reverse();u--;){var A=n[u];if(typeof A!="function")throw new Tr(O);if(m&&!F&&_a(A)=="wrapper")var F=new Nr([],!0)}for(u=F?u:a;++u<a;){A=n[u];var q=_a(A),G=q=="wrapper"?Zo(A):r;G&&nc(G[0])&&G[1]==(c|D|S|l)&&!G[4].length&&G[9]==1?F=F[_a(G[0])].apply(F,G[3]):F=A.length==1&&nc(A)?F[q]():F.thru(A)}return function(){var se=arguments,oe=se[0];if(F&&se.length==1&&Ne(oe))return F.plant(oe).value();for(var ue=0,le=a?n[ue].apply(this,se):oe;++ue<a;)le=n[ue].call(this,le);return le}})}function la(e,n,a,u,m,A,F,q,G,se){var oe=n&c,ue=n&z,le=n&re,ve=n&(D|b),we=n&Y,ze=le?r:Qi(e);function Ee(){for(var Ge=arguments.length,Qe=ee(Ge),Dr=Ge;Dr--;)Qe[Dr]=arguments[Dr];if(ve)var ar=Si(Ee),Or=Ap(Qe,ar);if(u&&(Qe=Ah(Qe,u,m,ve)),A&&(Qe=Ch(Qe,A,F,ve)),Ge-=Or,ve&&Ge<se){var Rt=bn(Qe,ar);return $h(e,n,la,Ee.placeholder,a,Qe,Rt,q,G,se-Ge)}var Vr=ue?a:this,pn=le?Vr[e]:e;return Ge=Qe.length,q?Qe=j0(Qe,q):we&&Ge>1&&Qe.reverse(),oe&&G<Ge&&(Qe.length=G),this&&this!==Xe&&this instanceof Ee&&(pn=ze||Qi(pn)),pn.apply(Vr,Qe)}return Ee}function Fh(e,n){return function(a,u){return Kg(a,e,n(u),{})}}function da(e,n){return function(a,u){var m;if(a===r&&u===r)return n;if(a!==r&&(m=a),u!==r){if(m===r)return u;typeof a=="string"||typeof u=="string"?(a=Er(a),u=Er(u)):(a=bh(a),u=bh(u)),m=e(a,u)}return m}}function Yo(e){return hn(function(n){return n=bt(n,wr(be())),Ke(function(a){var u=this;return e(n,function(m){return Kt(m,u,a)})})})}function pa(e,n){n=n===r?" ":Er(n);var a=n.length;if(a<2)return a?Ho(n,e):n;var u=Ho(n,ea(e/gi(n)));return pi(n)?On(Hr(u),0,e).join(""):u.slice(0,e)}function y0(e,n,a,u){var m=n&z,A=Qi(e);function F(){for(var q=-1,G=arguments.length,se=-1,oe=u.length,ue=ee(oe+G),le=this&&this!==Xe&&this instanceof F?A:e;++se<oe;)ue[se]=u[se];for(;G--;)ue[se++]=arguments[++q];return Kt(le,m?a:this,ue)}return F}function jh(e){return function(n,a,u){return u&&typeof u!="number"&&sr(n,a,u)&&(a=u=r),n=dn(n),a===r?(a=n,n=0):a=dn(a),u=u===r?n<a?1:-1:dn(u),r0(n,a,u,e)}}function ga(e){return function(n,a){return typeof n=="string"&&typeof a=="string"||(n=jr(n),a=jr(a)),e(n,a)}}function $h(e,n,a,u,m,A,F,q,G,se){var oe=n&D,ue=oe?F:r,le=oe?r:F,ve=oe?A:r,we=oe?r:A;n|=oe?S:g,n&=~(oe?g:S),n&p||(n&=~(z|re));var ze=[e,n,m,ve,ue,we,le,q,G,se],Ee=a.apply(r,ze);return nc(e)&&Yh(Ee,ze),Ee.placeholder=u,Jh(Ee,e,n)}function Jo(e){var n=Ht[e];return function(a,u){if(a=jr(a),u=u==null?0:Qt(Le(u),292),u&&Ju(a)){var m=(nt(a)+"e").split("e"),A=n(m[0]+"e"+(+m[1]+u));return m=(nt(A)+"e").split("e"),+(m[0]+"e"+(+m[1]-u))}return n(a)}}var v0=vi&&1/Ks(new vi([,-0]))[1]==H?function(e){return new vi(e)}:vc;function Lh(e){return function(n){var a=Zt(n);return a==Oe?Io(n):a==Ie?Fp(n):xp(n,e(n))}}function un(e,n,a,u,m,A,F,q){var G=n&re;if(!G&&typeof e!="function")throw new Tr(O);var se=u?u.length:0;if(se||(n&=~(S|g),u=m=r),F=F===r?F:Bt(Le(F),0),q=q===r?q:Le(q),se-=m?m.length:0,n&g){var oe=u,ue=m;u=m=r}var le=G?r:Zo(e),ve=[e,n,a,u,m,oe,ue,A,F,q];if(le&&R0(ve,le),e=ve[0],n=ve[1],a=ve[2],u=ve[3],m=ve[4],q=ve[9]=ve[9]===r?G?0:e.length:Bt(ve[9]-se,0),!q&&n&(D|b)&&(n&=~(D|b)),!n||n==z)var we=g0(e,n,a);else n==D||n==b?we=_0(e,n,q):(n==S||n==(z|S))&&!m.length?we=y0(e,n,a,u):we=la.apply(r,ve);var ze=le?vh:Yh;return Jh(ze(we,ve),e,n)}function Mh(e,n,a,u){return e===r||Kr(e,yi[a])&&!it.call(u,a)?n:e}function qh(e,n,a,u,m,A){return Et(e)&&Et(n)&&(A.set(n,e),ca(e,n,r,qh,A),A.delete(n)),e}function m0(e){return ts(e)?r:e}function zh(e,n,a,u,m,A){var F=a&L,q=e.length,G=n.length;if(q!=G&&!(F&&G>q))return!1;var se=A.get(e),oe=A.get(n);if(se&&oe)return se==n&&oe==e;var ue=-1,le=!0,ve=a&W?new zn:r;for(A.set(e,n),A.set(n,e);++ue<q;){var we=e[ue],ze=n[ue];if(u)var Ee=F?u(ze,we,ue,n,e,A):u(we,ze,ue,e,n,A);if(Ee!==r){if(Ee)continue;le=!1;break}if(ve){if(!bo(n,function(Ge,Qe){if(!zi(ve,Qe)&&(we===Ge||m(we,Ge,a,u,A)))return ve.push(Qe)})){le=!1;break}}else if(!(we===ze||m(we,ze,a,u,A))){le=!1;break}}return A.delete(e),A.delete(n),le}function b0(e,n,a,u,m,A,F){switch(a){case Ce:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case De:return!(e.byteLength!=n.byteLength||!A(new Js(e),new Js(n)));case X:case B:case He:return Kr(+e,+n);case j:return e.name==n.name&&e.message==n.message;case Me:case Re:return e==n+"";case Oe:var q=Io;case Ie:var G=u&L;if(q||(q=Ks),e.size!=n.size&&!G)return!1;var se=F.get(e);if(se)return se==n;u|=W,F.set(e,n);var oe=zh(q(e),q(n),u,m,A,F);return F.delete(e),oe;case Ue:if(ki)return ki.call(e)==ki.call(n)}return!1}function w0(e,n,a,u,m,A){var F=a&L,q=Xo(e),G=q.length,se=Xo(n),oe=se.length;if(G!=oe&&!F)return!1;for(var ue=G;ue--;){var le=q[ue];if(!(F?le in n:it.call(n,le)))return!1}var ve=A.get(e),we=A.get(n);if(ve&&we)return ve==n&&we==e;var ze=!0;A.set(e,n),A.set(n,e);for(var Ee=F;++ue<G;){le=q[ue];var Ge=e[le],Qe=n[le];if(u)var Dr=F?u(Qe,Ge,le,n,e,A):u(Ge,Qe,le,e,n,A);if(!(Dr===r?Ge===Qe||m(Ge,Qe,a,u,A):Dr)){ze=!1;break}Ee||(Ee=le=="constructor")}if(ze&&!Ee){var ar=e.constructor,Or=n.constructor;ar!=Or&&"constructor"in e&&"constructor"in n&&!(typeof ar=="function"&&ar instanceof ar&&typeof Or=="function"&&Or instanceof Or)&&(ze=!1)}return A.delete(e),A.delete(n),ze}function hn(e){return sc(Gh(e,r,rf),e+"")}function Xo(e){return oh(e,Vt,tc)}function Qo(e){return oh(e,_r,Hh)}var Zo=ra?function(e){return ra.get(e)}:vc;function _a(e){for(var n=e.name+"",a=mi[n],u=it.call(mi,n)?a.length:0;u--;){var m=a[u],A=m.func;if(A==null||A==e)return m.name}return n}function Si(e){var n=it.call(x,"placeholder")?x:e;return n.placeholder}function be(){var e=x.iteratee||_c;return e=e===_c?hh:e,arguments.length?e(arguments[0],arguments[1]):e}function ya(e,n){var a=e.__data__;return C0(n)?a[typeof n=="string"?"string":"hash"]:a.map}function ec(e){for(var n=Vt(e),a=n.length;a--;){var u=n[a],m=e[u];n[a]=[u,m,Vh(m)]}return n}function Kn(e,n){var a=Np(e,n);return uh(a)?a:r}function E0(e){var n=it.call(e,Mn),a=e[Mn];try{e[Mn]=r;var u=!0}catch{}var m=Ws.call(e);return u&&(n?e[Mn]=a:delete e[Mn]),m}var tc=Ao?function(e){return e==null?[]:(e=ut(e),vn(Ao(e),function(n){return Wu.call(e,n)}))}:mc,Hh=Ao?function(e){for(var n=[];e;)mn(n,tc(e)),e=Xs(e);return n}:mc,Zt=ir;(Co&&Zt(new Co(new ArrayBuffer(1)))!=Ce||Bi&&Zt(new Bi)!=Oe||Po&&Zt(Po.resolve())!=_t||vi&&Zt(new vi)!=Ie||Ki&&Zt(new Ki)!=Ae)&&(Zt=function(e){var n=ir(e),a=n==$e?e.constructor:r,u=a?Vn(a):"";if(u)switch(u){case ig:return Ce;case sg:return Oe;case ag:return _t;case og:return Ie;case cg:return Ae}return n});function S0(e,n,a){for(var u=-1,m=a.length;++u<m;){var A=a[u],F=A.size;switch(A.type){case"drop":e+=F;break;case"dropRight":n-=F;break;case"take":n=Qt(n,e+F);break;case"takeRight":e=Bt(e,n-F);break}}return{start:e,end:n}}function D0(e){var n=e.match(ht);return n?n[1].split($t):[]}function Bh(e,n,a){n=Dn(n,e);for(var u=-1,m=n.length,A=!1;++u<m;){var F=Qr(n[u]);if(!(A=e!=null&&a(e,F)))break;e=e[F]}return A||++u!=m?A:(m=e==null?0:e.length,!!m&&Da(m)&&fn(F,m)&&(Ne(e)||kn(e)))}function O0(e){var n=e.length,a=new e.constructor(n);return n&&typeof e[0]=="string"&&it.call(e,"index")&&(a.index=e.index,a.input=e.input),a}function Kh(e){return typeof e.constructor=="function"&&!Zi(e)?bi(Xs(e)):{}}function I0(e,n,a){var u=e.constructor;switch(n){case De:return Wo(e);case X:case B:return new u(+e);case Ce:return u0(e,a);case Be:case xe:case ke:case We:case et:case tt:case Je:case tr:case lr:return Ih(e,a);case Oe:return new u;case He:case Re:return new u(e);case Me:return h0(e);case Ie:return new u;case Ue:return f0(e)}}function x0(e,n){var a=n.length;if(!a)return e;var u=a-1;return n[u]=(a>1?"& ":"")+n[u],n=n.join(a>2?", ":" "),e.replace(At,`{
/* [wrapped with `+n+`] */
`)}function A0(e){return Ne(e)||kn(e)||!!(Yu&&e&&e[Yu])}function fn(e,n){var a=typeof e;return n=n??Z,!!n&&(a=="number"||a!="symbol"&&no.test(e))&&e>-1&&e%1==0&&e<n}function sr(e,n,a){if(!Et(a))return!1;var u=typeof n;return(u=="number"?gr(a)&&fn(n,a.length):u=="string"&&n in a)?Kr(a[n],e):!1}function rc(e,n){if(Ne(e))return!1;var a=typeof e;return a=="number"||a=="symbol"||a=="boolean"||e==null||Sr(e)?!0:Ut.test(e)||!mt.test(e)||n!=null&&e in ut(n)}function C0(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}function nc(e){var n=_a(e),a=x[n];if(typeof a!="function"||!(n in Ye.prototype))return!1;if(e===a)return!0;var u=Zo(a);return!!u&&e===u[0]}function P0(e){return!!Vu&&Vu in e}var T0=ks?ln:bc;function Zi(e){var n=e&&e.constructor,a=typeof n=="function"&&n.prototype||yi;return e===a}function Vh(e){return e===e&&!Et(e)}function kh(e,n){return function(a){return a==null?!1:a[e]===n&&(n!==r||e in ut(a))}}function N0(e){var n=Ea(e,function(u){return a.size===N&&a.clear(),u}),a=n.cache;return n}function R0(e,n){var a=e[1],u=n[1],m=a|u,A=m<(z|re|c),F=u==c&&a==D||u==c&&a==l&&e[7].length<=n[8]||u==(c|l)&&n[7].length<=n[8]&&a==D;if(!(A||F))return e;u&z&&(e[2]=n[2],m|=a&z?0:p);var q=n[3];if(q){var G=e[3];e[3]=G?Ah(G,q,n[4]):q,e[4]=G?bn(e[3],P):n[4]}return q=n[5],q&&(G=e[5],e[5]=G?Ch(G,q,n[6]):q,e[6]=G?bn(e[5],P):n[6]),q=n[7],q&&(e[7]=q),u&c&&(e[8]=e[8]==null?n[8]:Qt(e[8],n[8])),e[9]==null&&(e[9]=n[9]),e[0]=n[0],e[1]=m,e}function U0(e){var n=[];if(e!=null)for(var a in ut(e))n.push(a);return n}function F0(e){return Ws.call(e)}function Gh(e,n,a){return n=Bt(n===r?e.length-1:n,0),function(){for(var u=arguments,m=-1,A=Bt(u.length-n,0),F=ee(A);++m<A;)F[m]=u[n+m];m=-1;for(var q=ee(n+1);++m<n;)q[m]=u[m];return q[n]=a(F),Kt(e,this,q)}}function Wh(e,n){return n.length<2?e:Bn(e,Ur(n,0,-1))}function j0(e,n){for(var a=e.length,u=Qt(n.length,a),m=pr(e);u--;){var A=n[u];e[u]=fn(A,a)?m[A]:r}return e}function ic(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}var Yh=Xh(vh),es=Xp||function(e,n){return Xe.setTimeout(e,n)},sc=Xh(s0);function Jh(e,n,a){var u=n+"";return sc(e,x0(u,$0(D0(u),a)))}function Xh(e){var n=0,a=0;return function(){var u=tg(),m=C-(u-a);if(a=u,m>0){if(++n>=w)return arguments[0]}else n=0;return e.apply(r,arguments)}}function va(e,n){var a=-1,u=e.length,m=u-1;for(n=n===r?u:n;++a<n;){var A=zo(a,m),F=e[A];e[A]=e[a],e[a]=F}return e.length=n,e}var Qh=N0(function(e){var n=[];return e.charCodeAt(0)===46&&n.push(""),e.replace(Ft,function(a,u,m,A){n.push(m?A.replace(Xa,"$1"):u||a)}),n});function Qr(e){if(typeof e=="string"||Sr(e))return e;var n=e+"";return n=="0"&&1/e==-H?"-0":n}function Vn(e){if(e!=null){try{return Gs.call(e)}catch{}try{return e+""}catch{}}return""}function $0(e,n){return Pr(ye,function(a){var u="_."+a[0];n&a[1]&&!Hs(e,u)&&e.push(u)}),e.sort()}function Zh(e){if(e instanceof Ye)return e.clone();var n=new Nr(e.__wrapped__,e.__chain__);return n.__actions__=pr(e.__actions__),n.__index__=e.__index__,n.__values__=e.__values__,n}function L0(e,n,a){(a?sr(e,n,a):n===r)?n=1:n=Bt(Le(n),0);var u=e==null?0:e.length;if(!u||n<1)return[];for(var m=0,A=0,F=ee(ea(u/n));m<u;)F[A++]=Ur(e,m,m+=n);return F}function M0(e){for(var n=-1,a=e==null?0:e.length,u=0,m=[];++n<a;){var A=e[n];A&&(m[u++]=A)}return m}function q0(){var e=arguments.length;if(!e)return[];for(var n=ee(e-1),a=arguments[0],u=e;u--;)n[u-1]=arguments[u];return mn(Ne(a)?pr(a):[a],Yt(n,1))}var z0=Ke(function(e,n){return Nt(e)?Wi(e,Yt(n,1,Nt,!0)):[]}),H0=Ke(function(e,n){var a=Fr(n);return Nt(a)&&(a=r),Nt(e)?Wi(e,Yt(n,1,Nt,!0),be(a,2)):[]}),B0=Ke(function(e,n){var a=Fr(n);return Nt(a)&&(a=r),Nt(e)?Wi(e,Yt(n,1,Nt,!0),r,a):[]});function K0(e,n,a){var u=e==null?0:e.length;return u?(n=a||n===r?1:Le(n),Ur(e,n<0?0:n,u)):[]}function V0(e,n,a){var u=e==null?0:e.length;return u?(n=a||n===r?1:Le(n),n=u-n,Ur(e,0,n<0?0:n)):[]}function k0(e,n){return e&&e.length?ha(e,be(n,3),!0,!0):[]}function G0(e,n){return e&&e.length?ha(e,be(n,3),!0):[]}function W0(e,n,a,u){var m=e==null?0:e.length;return m?(a&&typeof a!="number"&&sr(e,n,a)&&(a=0,u=m),qg(e,n,a,u)):[]}function ef(e,n,a){var u=e==null?0:e.length;if(!u)return-1;var m=a==null?0:Le(a);return m<0&&(m=Bt(u+m,0)),Bs(e,be(n,3),m)}function tf(e,n,a){var u=e==null?0:e.length;if(!u)return-1;var m=u-1;return a!==r&&(m=Le(a),m=a<0?Bt(u+m,0):Qt(m,u-1)),Bs(e,be(n,3),m,!0)}function rf(e){var n=e==null?0:e.length;return n?Yt(e,1):[]}function Y0(e){var n=e==null?0:e.length;return n?Yt(e,H):[]}function J0(e,n){var a=e==null?0:e.length;return a?(n=n===r?1:Le(n),Yt(e,n)):[]}function X0(e){for(var n=-1,a=e==null?0:e.length,u={};++n<a;){var m=e[n];u[m[0]]=m[1]}return u}function nf(e){return e&&e.length?e[0]:r}function Q0(e,n,a){var u=e==null?0:e.length;if(!u)return-1;var m=a==null?0:Le(a);return m<0&&(m=Bt(u+m,0)),di(e,n,m)}function Z0(e){var n=e==null?0:e.length;return n?Ur(e,0,-1):[]}var e1=Ke(function(e){var n=bt(e,ko);return n.length&&n[0]===e[0]?jo(n):[]}),t1=Ke(function(e){var n=Fr(e),a=bt(e,ko);return n===Fr(a)?n=r:a.pop(),a.length&&a[0]===e[0]?jo(a,be(n,2)):[]}),r1=Ke(function(e){var n=Fr(e),a=bt(e,ko);return n=typeof n=="function"?n:r,n&&a.pop(),a.length&&a[0]===e[0]?jo(a,r,n):[]});function n1(e,n){return e==null?"":Zp.call(e,n)}function Fr(e){var n=e==null?0:e.length;return n?e[n-1]:r}function i1(e,n,a){var u=e==null?0:e.length;if(!u)return-1;var m=u;return a!==r&&(m=Le(a),m=m<0?Bt(u+m,0):Qt(m,u-1)),n===n?$p(e,n,m):Bs(e,$u,m,!0)}function s1(e,n){return e&&e.length?ph(e,Le(n)):r}var a1=Ke(sf);function sf(e,n){return e&&e.length&&n&&n.length?qo(e,n):e}function o1(e,n,a){return e&&e.length&&n&&n.length?qo(e,n,be(a,2)):e}function c1(e,n,a){return e&&e.length&&n&&n.length?qo(e,n,r,a):e}var u1=hn(function(e,n){var a=e==null?0:e.length,u=No(e,n);return yh(e,bt(n,function(m){return fn(m,a)?+m:m}).sort(xh)),u});function h1(e,n){var a=[];if(!(e&&e.length))return a;var u=-1,m=[],A=e.length;for(n=be(n,3);++u<A;){var F=e[u];n(F,u,e)&&(a.push(F),m.push(u))}return yh(e,m),a}function ac(e){return e==null?e:ng.call(e)}function f1(e,n,a){var u=e==null?0:e.length;return u?(a&&typeof a!="number"&&sr(e,n,a)?(n=0,a=u):(n=n==null?0:Le(n),a=a===r?u:Le(a)),Ur(e,n,a)):[]}function l1(e,n){return ua(e,n)}function d1(e,n,a){return Bo(e,n,be(a,2))}function p1(e,n){var a=e==null?0:e.length;if(a){var u=ua(e,n);if(u<a&&Kr(e[u],n))return u}return-1}function g1(e,n){return ua(e,n,!0)}function _1(e,n,a){return Bo(e,n,be(a,2),!0)}function y1(e,n){var a=e==null?0:e.length;if(a){var u=ua(e,n,!0)-1;if(Kr(e[u],n))return u}return-1}function v1(e){return e&&e.length?mh(e):[]}function m1(e,n){return e&&e.length?mh(e,be(n,2)):[]}function b1(e){var n=e==null?0:e.length;return n?Ur(e,1,n):[]}function w1(e,n,a){return e&&e.length?(n=a||n===r?1:Le(n),Ur(e,0,n<0?0:n)):[]}function E1(e,n,a){var u=e==null?0:e.length;return u?(n=a||n===r?1:Le(n),n=u-n,Ur(e,n<0?0:n,u)):[]}function S1(e,n){return e&&e.length?ha(e,be(n,3),!1,!0):[]}function D1(e,n){return e&&e.length?ha(e,be(n,3)):[]}var O1=Ke(function(e){return Sn(Yt(e,1,Nt,!0))}),I1=Ke(function(e){var n=Fr(e);return Nt(n)&&(n=r),Sn(Yt(e,1,Nt,!0),be(n,2))}),x1=Ke(function(e){var n=Fr(e);return n=typeof n=="function"?n:r,Sn(Yt(e,1,Nt,!0),r,n)});function A1(e){return e&&e.length?Sn(e):[]}function C1(e,n){return e&&e.length?Sn(e,be(n,2)):[]}function P1(e,n){return n=typeof n=="function"?n:r,e&&e.length?Sn(e,r,n):[]}function oc(e){if(!(e&&e.length))return[];var n=0;return e=vn(e,function(a){if(Nt(a))return n=Bt(a.length,n),!0}),Do(n,function(a){return bt(e,wo(a))})}function af(e,n){if(!(e&&e.length))return[];var a=oc(e);return n==null?a:bt(a,function(u){return Kt(n,r,u)})}var T1=Ke(function(e,n){return Nt(e)?Wi(e,n):[]}),N1=Ke(function(e){return Vo(vn(e,Nt))}),R1=Ke(function(e){var n=Fr(e);return Nt(n)&&(n=r),Vo(vn(e,Nt),be(n,2))}),U1=Ke(function(e){var n=Fr(e);return n=typeof n=="function"?n:r,Vo(vn(e,Nt),r,n)}),F1=Ke(oc);function j1(e,n){return Sh(e||[],n||[],Gi)}function $1(e,n){return Sh(e||[],n||[],Xi)}var L1=Ke(function(e){var n=e.length,a=n>1?e[n-1]:r;return a=typeof a=="function"?(e.pop(),a):r,af(e,a)});function of(e){var n=x(e);return n.__chain__=!0,n}function M1(e,n){return n(e),e}function ma(e,n){return n(e)}var q1=hn(function(e){var n=e.length,a=n?e[0]:0,u=this.__wrapped__,m=function(A){return No(A,e)};return n>1||this.__actions__.length||!(u instanceof Ye)||!fn(a)?this.thru(m):(u=u.slice(a,+a+(n?1:0)),u.__actions__.push({func:ma,args:[m],thisArg:r}),new Nr(u,this.__chain__).thru(function(A){return n&&!A.length&&A.push(r),A}))});function z1(){return of(this)}function H1(){return new Nr(this.value(),this.__chain__)}function B1(){this.__values__===r&&(this.__values__=wf(this.value()));var e=this.__index__>=this.__values__.length,n=e?r:this.__values__[this.__index__++];return{done:e,value:n}}function K1(){return this}function V1(e){for(var n,a=this;a instanceof ia;){var u=Zh(a);u.__index__=0,u.__values__=r,n?m.__wrapped__=u:n=u;var m=u;a=a.__wrapped__}return m.__wrapped__=e,n}function k1(){var e=this.__wrapped__;if(e instanceof Ye){var n=e;return this.__actions__.length&&(n=new Ye(this)),n=n.reverse(),n.__actions__.push({func:ma,args:[ac],thisArg:r}),new Nr(n,this.__chain__)}return this.thru(ac)}function G1(){return Eh(this.__wrapped__,this.__actions__)}var W1=fa(function(e,n,a){it.call(e,a)?++e[a]:cn(e,a,1)});function Y1(e,n,a){var u=Ne(e)?Fu:Mg;return a&&sr(e,n,a)&&(n=r),u(e,be(n,3))}function J1(e,n){var a=Ne(e)?vn:sh;return a(e,be(n,3))}var X1=Rh(ef),Q1=Rh(tf);function Z1(e,n){return Yt(ba(e,n),1)}function e_(e,n){return Yt(ba(e,n),H)}function t_(e,n,a){return a=a===r?1:Le(a),Yt(ba(e,n),a)}function cf(e,n){var a=Ne(e)?Pr:En;return a(e,be(n,3))}function uf(e,n){var a=Ne(e)?bp:ih;return a(e,be(n,3))}var r_=fa(function(e,n,a){it.call(e,a)?e[a].push(n):cn(e,a,[n])});function n_(e,n,a,u){e=gr(e)?e:Oi(e),a=a&&!u?Le(a):0;var m=e.length;return a<0&&(a=Bt(m+a,0)),Oa(e)?a<=m&&e.indexOf(n,a)>-1:!!m&&di(e,n,a)>-1}var i_=Ke(function(e,n,a){var u=-1,m=typeof n=="function",A=gr(e)?ee(e.length):[];return En(e,function(F){A[++u]=m?Kt(n,F,a):Yi(F,n,a)}),A}),s_=fa(function(e,n,a){cn(e,a,n)});function ba(e,n){var a=Ne(e)?bt:fh;return a(e,be(n,3))}function a_(e,n,a,u){return e==null?[]:(Ne(n)||(n=n==null?[]:[n]),a=u?r:a,Ne(a)||(a=a==null?[]:[a]),gh(e,n,a))}var o_=fa(function(e,n,a){e[a?0:1].push(n)},function(){return[[],[]]});function c_(e,n,a){var u=Ne(e)?mo:Mu,m=arguments.length<3;return u(e,be(n,4),a,m,En)}function u_(e,n,a){var u=Ne(e)?wp:Mu,m=arguments.length<3;return u(e,be(n,4),a,m,ih)}function h_(e,n){var a=Ne(e)?vn:sh;return a(e,Sa(be(n,3)))}function f_(e){var n=Ne(e)?eh:n0;return n(e)}function l_(e,n,a){(a?sr(e,n,a):n===r)?n=1:n=Le(n);var u=Ne(e)?Ug:i0;return u(e,n)}function d_(e){var n=Ne(e)?Fg:a0;return n(e)}function p_(e){if(e==null)return 0;if(gr(e))return Oa(e)?gi(e):e.length;var n=Zt(e);return n==Oe||n==Ie?e.size:Lo(e).length}function g_(e,n,a){var u=Ne(e)?bo:o0;return a&&sr(e,n,a)&&(n=r),u(e,be(n,3))}var __=Ke(function(e,n){if(e==null)return[];var a=n.length;return a>1&&sr(e,n[0],n[1])?n=[]:a>2&&sr(n[0],n[1],n[2])&&(n=[n[0]]),gh(e,Yt(n,1),[])}),wa=Jp||function(){return Xe.Date.now()};function y_(e,n){if(typeof n!="function")throw new Tr(O);return e=Le(e),function(){if(--e<1)return n.apply(this,arguments)}}function hf(e,n,a){return n=a?r:n,n=e&&n==null?e.length:n,un(e,c,r,r,r,r,n)}function ff(e,n){var a;if(typeof n!="function")throw new Tr(O);return e=Le(e),function(){return--e>0&&(a=n.apply(this,arguments)),e<=1&&(n=r),a}}var cc=Ke(function(e,n,a){var u=z;if(a.length){var m=bn(a,Si(cc));u|=S}return un(e,u,n,a,m)}),lf=Ke(function(e,n,a){var u=z|re;if(a.length){var m=bn(a,Si(lf));u|=S}return un(n,u,e,a,m)});function df(e,n,a){n=a?r:n;var u=un(e,D,r,r,r,r,r,n);return u.placeholder=df.placeholder,u}function pf(e,n,a){n=a?r:n;var u=un(e,b,r,r,r,r,r,n);return u.placeholder=pf.placeholder,u}function gf(e,n,a){var u,m,A,F,q,G,se=0,oe=!1,ue=!1,le=!0;if(typeof e!="function")throw new Tr(O);n=jr(n)||0,Et(a)&&(oe=!!a.leading,ue="maxWait"in a,A=ue?Bt(jr(a.maxWait)||0,n):A,le="trailing"in a?!!a.trailing:le);function ve(Rt){var Vr=u,pn=m;return u=m=r,se=Rt,F=e.apply(pn,Vr),F}function we(Rt){return se=Rt,q=es(Ge,n),oe?ve(Rt):F}function ze(Rt){var Vr=Rt-G,pn=Rt-se,Uf=n-Vr;return ue?Qt(Uf,A-pn):Uf}function Ee(Rt){var Vr=Rt-G,pn=Rt-se;return G===r||Vr>=n||Vr<0||ue&&pn>=A}function Ge(){var Rt=wa();if(Ee(Rt))return Qe(Rt);q=es(Ge,ze(Rt))}function Qe(Rt){return q=r,le&&u?ve(Rt):(u=m=r,F)}function Dr(){q!==r&&Dh(q),se=0,u=G=m=q=r}function ar(){return q===r?F:Qe(wa())}function Or(){var Rt=wa(),Vr=Ee(Rt);if(u=arguments,m=this,G=Rt,Vr){if(q===r)return we(G);if(ue)return Dh(q),q=es(Ge,n),ve(G)}return q===r&&(q=es(Ge,n)),F}return Or.cancel=Dr,Or.flush=ar,Or}var v_=Ke(function(e,n){return nh(e,1,n)}),m_=Ke(function(e,n,a){return nh(e,jr(n)||0,a)});function b_(e){return un(e,Y)}function Ea(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new Tr(O);var a=function(){var u=arguments,m=n?n.apply(this,u):u[0],A=a.cache;if(A.has(m))return A.get(m);var F=e.apply(this,u);return a.cache=A.set(m,F)||A,F};return a.cache=new(Ea.Cache||on),a}Ea.Cache=on;function Sa(e){if(typeof e!="function")throw new Tr(O);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}function w_(e){return ff(2,e)}var E_=c0(function(e,n){n=n.length==1&&Ne(n[0])?bt(n[0],wr(be())):bt(Yt(n,1),wr(be()));var a=n.length;return Ke(function(u){for(var m=-1,A=Qt(u.length,a);++m<A;)u[m]=n[m].call(this,u[m]);return Kt(e,this,u)})}),uc=Ke(function(e,n){var a=bn(n,Si(uc));return un(e,S,r,n,a)}),_f=Ke(function(e,n){var a=bn(n,Si(_f));return un(e,g,r,n,a)}),S_=hn(function(e,n){return un(e,l,r,r,r,n)});function D_(e,n){if(typeof e!="function")throw new Tr(O);return n=n===r?n:Le(n),Ke(e,n)}function O_(e,n){if(typeof e!="function")throw new Tr(O);return n=n==null?0:Bt(Le(n),0),Ke(function(a){var u=a[n],m=On(a,0,n);return u&&mn(m,u),Kt(e,this,m)})}function I_(e,n,a){var u=!0,m=!0;if(typeof e!="function")throw new Tr(O);return Et(a)&&(u="leading"in a?!!a.leading:u,m="trailing"in a?!!a.trailing:m),gf(e,n,{leading:u,maxWait:n,trailing:m})}function x_(e){return hf(e,1)}function A_(e,n){return uc(Go(n),e)}function C_(){if(!arguments.length)return[];var e=arguments[0];return Ne(e)?e:[e]}function P_(e){return Rr(e,M)}function T_(e,n){return n=typeof n=="function"?n:r,Rr(e,M,n)}function N_(e){return Rr(e,U|M)}function R_(e,n){return n=typeof n=="function"?n:r,Rr(e,U|M,n)}function U_(e,n){return n==null||rh(e,n,Vt(n))}function Kr(e,n){return e===n||e!==e&&n!==n}var F_=ga(Fo),j_=ga(function(e,n){return e>=n}),kn=ch(function(){return arguments}())?ch:function(e){return Ct(e)&&it.call(e,"callee")&&!Wu.call(e,"callee")},Ne=ee.isArray,$_=nr?wr(nr):Vg;function gr(e){return e!=null&&Da(e.length)&&!ln(e)}function Nt(e){return Ct(e)&&gr(e)}function L_(e){return e===!0||e===!1||Ct(e)&&ir(e)==X}var In=Qp||bc,M_=zr?wr(zr):kg;function q_(e){return Ct(e)&&e.nodeType===1&&!ts(e)}function z_(e){if(e==null)return!0;if(gr(e)&&(Ne(e)||typeof e=="string"||typeof e.splice=="function"||In(e)||Di(e)||kn(e)))return!e.length;var n=Zt(e);if(n==Oe||n==Ie)return!e.size;if(Zi(e))return!Lo(e).length;for(var a in e)if(it.call(e,a))return!1;return!0}function H_(e,n){return Ji(e,n)}function B_(e,n,a){a=typeof a=="function"?a:r;var u=a?a(e,n):r;return u===r?Ji(e,n,r,a):!!u}function hc(e){if(!Ct(e))return!1;var n=ir(e);return n==j||n==f||typeof e.message=="string"&&typeof e.name=="string"&&!ts(e)}function K_(e){return typeof e=="number"&&Ju(e)}function ln(e){if(!Et(e))return!1;var n=ir(e);return n==he||n==pe||n==Q||n==yt}function yf(e){return typeof e=="number"&&e==Le(e)}function Da(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Z}function Et(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}function Ct(e){return e!=null&&typeof e=="object"}var vf=Cr?wr(Cr):Wg;function V_(e,n){return e===n||$o(e,n,ec(n))}function k_(e,n,a){return a=typeof a=="function"?a:r,$o(e,n,ec(n),a)}function G_(e){return mf(e)&&e!=+e}function W_(e){if(T0(e))throw new Pe(d);return uh(e)}function Y_(e){return e===null}function J_(e){return e==null}function mf(e){return typeof e=="number"||Ct(e)&&ir(e)==He}function ts(e){if(!Ct(e)||ir(e)!=$e)return!1;var n=Xs(e);if(n===null)return!0;var a=it.call(n,"constructor")&&n.constructor;return typeof a=="function"&&a instanceof a&&Gs.call(a)==kp}var fc=Yr?wr(Yr):Yg;function X_(e){return yf(e)&&e>=-Z&&e<=Z}var bf=qi?wr(qi):Jg;function Oa(e){return typeof e=="string"||!Ne(e)&&Ct(e)&&ir(e)==Re}function Sr(e){return typeof e=="symbol"||Ct(e)&&ir(e)==Ue}var Di=Ln?wr(Ln):Xg;function Q_(e){return e===r}function Z_(e){return Ct(e)&&Zt(e)==Ae}function ey(e){return Ct(e)&&ir(e)==Fe}var ty=ga(Mo),ry=ga(function(e,n){return e<=n});function wf(e){if(!e)return[];if(gr(e))return Oa(e)?Hr(e):pr(e);if(Hi&&e[Hi])return Up(e[Hi]());var n=Zt(e),a=n==Oe?Io:n==Ie?Ks:Oi;return a(e)}function dn(e){if(!e)return e===0?e:0;if(e=jr(e),e===H||e===-H){var n=e<0?-1:1;return n*R}return e===e?e:0}function Le(e){var n=dn(e),a=n%1;return n===n?a?n-a:n:0}function Ef(e){return e?Hn(Le(e),0,te):0}function jr(e){if(typeof e=="number")return e;if(Sr(e))return J;if(Et(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=Et(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=qu(e);var a=eo.test(e);return a||ro.test(e)?Te(e.slice(2),a?2:8):Za.test(e)?J:+e}function Sf(e){return Xr(e,_r(e))}function ny(e){return e?Hn(Le(e),-Z,Z):e===0?e:0}function nt(e){return e==null?"":Er(e)}var iy=wi(function(e,n){if(Zi(n)||gr(n)){Xr(n,Vt(n),e);return}for(var a in n)it.call(n,a)&&Gi(e,a,n[a])}),Df=wi(function(e,n){Xr(n,_r(n),e)}),Ia=wi(function(e,n,a,u){Xr(n,_r(n),e,u)}),sy=wi(function(e,n,a,u){Xr(n,Vt(n),e,u)}),ay=hn(No);function oy(e,n){var a=bi(e);return n==null?a:th(a,n)}var cy=Ke(function(e,n){e=ut(e);var a=-1,u=n.length,m=u>2?n[2]:r;for(m&&sr(n[0],n[1],m)&&(u=1);++a<u;)for(var A=n[a],F=_r(A),q=-1,G=F.length;++q<G;){var se=F[q],oe=e[se];(oe===r||Kr(oe,yi[se])&&!it.call(e,se))&&(e[se]=A[se])}return e}),uy=Ke(function(e){return e.push(r,qh),Kt(Of,r,e)});function hy(e,n){return ju(e,be(n,3),Jr)}function fy(e,n){return ju(e,be(n,3),Uo)}function ly(e,n){return e==null?e:Ro(e,be(n,3),_r)}function dy(e,n){return e==null?e:ah(e,be(n,3),_r)}function py(e,n){return e&&Jr(e,be(n,3))}function gy(e,n){return e&&Uo(e,be(n,3))}function _y(e){return e==null?[]:oa(e,Vt(e))}function yy(e){return e==null?[]:oa(e,_r(e))}function lc(e,n,a){var u=e==null?r:Bn(e,n);return u===r?a:u}function vy(e,n){return e!=null&&Bh(e,n,zg)}function dc(e,n){return e!=null&&Bh(e,n,Hg)}var my=Fh(function(e,n,a){n!=null&&typeof n.toString!="function"&&(n=Ws.call(n)),e[n]=a},gc(yr)),by=Fh(function(e,n,a){n!=null&&typeof n.toString!="function"&&(n=Ws.call(n)),it.call(e,n)?e[n].push(a):e[n]=[a]},be),wy=Ke(Yi);function Vt(e){return gr(e)?Zu(e):Lo(e)}function _r(e){return gr(e)?Zu(e,!0):Qg(e)}function Ey(e,n){var a={};return n=be(n,3),Jr(e,function(u,m,A){cn(a,n(u,m,A),u)}),a}function Sy(e,n){var a={};return n=be(n,3),Jr(e,function(u,m,A){cn(a,m,n(u,m,A))}),a}var Dy=wi(function(e,n,a){ca(e,n,a)}),Of=wi(function(e,n,a,u){ca(e,n,a,u)}),Oy=hn(function(e,n){var a={};if(e==null)return a;var u=!1;n=bt(n,function(A){return A=Dn(A,e),u||(u=A.length>1),A}),Xr(e,Qo(e),a),u&&(a=Rr(a,U|K|M,m0));for(var m=n.length;m--;)Ko(a,n[m]);return a});function Iy(e,n){return If(e,Sa(be(n)))}var xy=hn(function(e,n){return e==null?{}:e0(e,n)});function If(e,n){if(e==null)return{};var a=bt(Qo(e),function(u){return[u]});return n=be(n),_h(e,a,function(u,m){return n(u,m[0])})}function Ay(e,n,a){n=Dn(n,e);var u=-1,m=n.length;for(m||(m=1,e=r);++u<m;){var A=e==null?r:e[Qr(n[u])];A===r&&(u=m,A=a),e=ln(A)?A.call(e):A}return e}function Cy(e,n,a){return e==null?e:Xi(e,n,a)}function Py(e,n,a,u){return u=typeof u=="function"?u:r,e==null?e:Xi(e,n,a,u)}var xf=Lh(Vt),Af=Lh(_r);function Ty(e,n,a){var u=Ne(e),m=u||In(e)||Di(e);if(n=be(n,4),a==null){var A=e&&e.constructor;m?a=u?new A:[]:Et(e)?a=ln(A)?bi(Xs(e)):{}:a={}}return(m?Pr:Jr)(e,function(F,q,G){return n(a,F,q,G)}),a}function Ny(e,n){return e==null?!0:Ko(e,n)}function Ry(e,n,a){return e==null?e:wh(e,n,Go(a))}function Uy(e,n,a,u){return u=typeof u=="function"?u:r,e==null?e:wh(e,n,Go(a),u)}function Oi(e){return e==null?[]:Oo(e,Vt(e))}function Fy(e){return e==null?[]:Oo(e,_r(e))}function jy(e,n,a){return a===r&&(a=n,n=r),a!==r&&(a=jr(a),a=a===a?a:0),n!==r&&(n=jr(n),n=n===n?n:0),Hn(jr(e),n,a)}function $y(e,n,a){return n=dn(n),a===r?(a=n,n=0):a=dn(a),e=jr(e),Bg(e,n,a)}function Ly(e,n,a){if(a&&typeof a!="boolean"&&sr(e,n,a)&&(n=a=r),a===r&&(typeof n=="boolean"?(a=n,n=r):typeof e=="boolean"&&(a=e,e=r)),e===r&&n===r?(e=0,n=1):(e=dn(e),n===r?(n=e,e=0):n=dn(n)),e>n){var u=e;e=n,n=u}if(a||e%1||n%1){var m=Xu();return Qt(e+m*(n-e+ot("1e-"+((m+"").length-1))),n)}return zo(e,n)}var My=Ei(function(e,n,a){return n=n.toLowerCase(),e+(a?Cf(n):n)});function Cf(e){return pc(nt(e).toLowerCase())}function Pf(e){return e=nt(e),e&&e.replace(nn,Cp).replace(_o,"")}function qy(e,n,a){e=nt(e),n=Er(n);var u=e.length;a=a===r?u:Hn(Le(a),0,u);var m=a;return a-=n.length,a>=0&&e.slice(a,m)==n}function zy(e){return e=nt(e),e&&vt.test(e)?e.replace(Rn,Pp):e}function Hy(e){return e=nt(e),e&&jt.test(e)?e.replace(It,"\\$&"):e}var By=Ei(function(e,n,a){return e+(a?"-":"")+n.toLowerCase()}),Ky=Ei(function(e,n,a){return e+(a?" ":"")+n.toLowerCase()}),Vy=Nh("toLowerCase");function ky(e,n,a){e=nt(e),n=Le(n);var u=n?gi(e):0;if(!n||u>=n)return e;var m=(n-u)/2;return pa(ta(m),a)+e+pa(ea(m),a)}function Gy(e,n,a){e=nt(e),n=Le(n);var u=n?gi(e):0;return n&&u<n?e+pa(n-u,a):e}function Wy(e,n,a){e=nt(e),n=Le(n);var u=n?gi(e):0;return n&&u<n?pa(n-u,a)+e:e}function Yy(e,n,a){return a||n==null?n=0:n&&(n=+n),rg(nt(e).replace(xt,""),n||0)}function Jy(e,n,a){return(a?sr(e,n,a):n===r)?n=1:n=Le(n),Ho(nt(e),n)}function Xy(){var e=arguments,n=nt(e[0]);return e.length<3?n:n.replace(e[1],e[2])}var Qy=Ei(function(e,n,a){return e+(a?"_":"")+n.toLowerCase()});function Zy(e,n,a){return a&&typeof a!="number"&&sr(e,n,a)&&(n=a=r),a=a===r?te:a>>>0,a?(e=nt(e),e&&(typeof n=="string"||n!=null&&!fc(n))&&(n=Er(n),!n&&pi(e))?On(Hr(e),0,a):e.split(n,a)):[]}var ev=Ei(function(e,n,a){return e+(a?" ":"")+pc(n)});function tv(e,n,a){return e=nt(e),a=a==null?0:Hn(Le(a),0,e.length),n=Er(n),e.slice(a,a+n.length)==n}function rv(e,n,a){var u=x.templateSettings;a&&sr(e,n,a)&&(n=r),e=nt(e),n=Ia({},n,u,Mh);var m=Ia({},n.imports,u.imports,Mh),A=Vt(m),F=Oo(m,A),q,G,se=0,oe=n.interpolate||ai,ue="__p += '",le=xo((n.escape||ai).source+"|"+oe.source+"|"+(oe===wt?Qa:ai).source+"|"+(n.evaluate||ai).source+"|$","g"),ve="//# sourceURL="+(it.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++yo+"]")+`
`;e.replace(le,function(Ee,Ge,Qe,Dr,ar,Or){return Qe||(Qe=Dr),ue+=e.slice(se,Or).replace(io,Tp),Ge&&(q=!0,ue+=`' +
__e(`+Ge+`) +
'`),ar&&(G=!0,ue+=`';
`+ar+`;
__p += '`),Qe&&(ue+=`' +
((__t = (`+Qe+`)) == null ? '' : __t) +
'`),se=Or+Ee.length,Ee}),ue+=`';
`;var we=it.call(n,"variable")&&n.variable;if(!we)ue=`with (obj) {
`+ue+`
}
`;else if(Ja.test(we))throw new Pe(y);ue=(G?ue.replace(Gr,""):ue).replace(rr,"$1").replace(rn,"$1;"),ue="function("+(we||"obj")+`) {
`+(we?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(q?", __e = _.escape":"")+(G?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ue+`return __p
}`;var ze=Nf(function(){return rt(A,ve+"return "+ue).apply(r,F)});if(ze.source=ue,hc(ze))throw ze;return ze}function nv(e){return nt(e).toLowerCase()}function iv(e){return nt(e).toUpperCase()}function sv(e,n,a){if(e=nt(e),e&&(a||n===r))return qu(e);if(!e||!(n=Er(n)))return e;var u=Hr(e),m=Hr(n),A=zu(u,m),F=Hu(u,m)+1;return On(u,A,F).join("")}function av(e,n,a){if(e=nt(e),e&&(a||n===r))return e.slice(0,Ku(e)+1);if(!e||!(n=Er(n)))return e;var u=Hr(e),m=Hu(u,Hr(n))+1;return On(u,0,m).join("")}function ov(e,n,a){if(e=nt(e),e&&(a||n===r))return e.replace(xt,"");if(!e||!(n=Er(n)))return e;var u=Hr(e),m=zu(u,Hr(n));return On(u,m).join("")}function cv(e,n){var a=h,u=_;if(Et(n)){var m="separator"in n?n.separator:m;a="length"in n?Le(n.length):a,u="omission"in n?Er(n.omission):u}e=nt(e);var A=e.length;if(pi(e)){var F=Hr(e);A=F.length}if(a>=A)return e;var q=a-gi(u);if(q<1)return u;var G=F?On(F,0,q).join(""):e.slice(0,q);if(m===r)return G+u;if(F&&(q+=G.length-q),fc(m)){if(e.slice(q).search(m)){var se,oe=G;for(m.global||(m=xo(m.source,nt(Ar.exec(m))+"g")),m.lastIndex=0;se=m.exec(oe);)var ue=se.index;G=G.slice(0,ue===r?q:ue)}}else if(e.indexOf(Er(m),q)!=q){var le=G.lastIndexOf(m);le>-1&&(G=G.slice(0,le))}return G+u}function uv(e){return e=nt(e),e&&St.test(e)?e.replace(_n,Lp):e}var hv=Ei(function(e,n,a){return e+(a?" ":"")+n.toUpperCase()}),pc=Nh("toUpperCase");function Tf(e,n,a){return e=nt(e),n=a?r:n,n===r?Rp(e)?zp(e):Dp(e):e.match(n)||[]}var Nf=Ke(function(e,n){try{return Kt(e,r,n)}catch(a){return hc(a)?a:new Pe(a)}}),fv=hn(function(e,n){return Pr(n,function(a){a=Qr(a),cn(e,a,cc(e[a],e))}),e});function lv(e){var n=e==null?0:e.length,a=be();return e=n?bt(e,function(u){if(typeof u[1]!="function")throw new Tr(O);return[a(u[0]),u[1]]}):[],Ke(function(u){for(var m=-1;++m<n;){var A=e[m];if(Kt(A[0],this,u))return Kt(A[1],this,u)}})}function dv(e){return Lg(Rr(e,U))}function gc(e){return function(){return e}}function pv(e,n){return e==null||e!==e?n:e}var gv=Uh(),_v=Uh(!0);function yr(e){return e}function _c(e){return hh(typeof e=="function"?e:Rr(e,U))}function yv(e){return lh(Rr(e,U))}function vv(e,n){return dh(e,Rr(n,U))}var mv=Ke(function(e,n){return function(a){return Yi(a,e,n)}}),bv=Ke(function(e,n){return function(a){return Yi(e,a,n)}});function yc(e,n,a){var u=Vt(n),m=oa(n,u);a==null&&!(Et(n)&&(m.length||!u.length))&&(a=n,n=e,e=this,m=oa(n,Vt(n)));var A=!(Et(a)&&"chain"in a)||!!a.chain,F=ln(e);return Pr(m,function(q){var G=n[q];e[q]=G,F&&(e.prototype[q]=function(){var se=this.__chain__;if(A||se){var oe=e(this.__wrapped__),ue=oe.__actions__=pr(this.__actions__);return ue.push({func:G,args:arguments,thisArg:e}),oe.__chain__=se,oe}return G.apply(e,mn([this.value()],arguments))})}),e}function wv(){return Xe._===this&&(Xe._=Gp),this}function vc(){}function Ev(e){return e=Le(e),Ke(function(n){return ph(n,e)})}var Sv=Yo(bt),Dv=Yo(Fu),Ov=Yo(bo);function Rf(e){return rc(e)?wo(Qr(e)):t0(e)}function Iv(e){return function(n){return e==null?r:Bn(e,n)}}var xv=jh(),Av=jh(!0);function mc(){return[]}function bc(){return!1}function Cv(){return{}}function Pv(){return""}function Tv(){return!0}function Nv(e,n){if(e=Le(e),e<1||e>Z)return[];var a=te,u=Qt(e,te);n=be(n),e-=te;for(var m=Do(u,n);++a<e;)n(a);return m}function Rv(e){return Ne(e)?bt(e,Qr):Sr(e)?[e]:pr(Qh(nt(e)))}function Uv(e){var n=++Vp;return nt(e)+n}var Fv=da(function(e,n){return e+n},0),jv=Jo("ceil"),$v=da(function(e,n){return e/n},1),Lv=Jo("floor");function Mv(e){return e&&e.length?aa(e,yr,Fo):r}function qv(e,n){return e&&e.length?aa(e,be(n,2),Fo):r}function zv(e){return Lu(e,yr)}function Hv(e,n){return Lu(e,be(n,2))}function Bv(e){return e&&e.length?aa(e,yr,Mo):r}function Kv(e,n){return e&&e.length?aa(e,be(n,2),Mo):r}var Vv=da(function(e,n){return e*n},1),kv=Jo("round"),Gv=da(function(e,n){return e-n},0);function Wv(e){return e&&e.length?So(e,yr):0}function Yv(e,n){return e&&e.length?So(e,be(n,2)):0}return x.after=y_,x.ary=hf,x.assign=iy,x.assignIn=Df,x.assignInWith=Ia,x.assignWith=sy,x.at=ay,x.before=ff,x.bind=cc,x.bindAll=fv,x.bindKey=lf,x.castArray=C_,x.chain=of,x.chunk=L0,x.compact=M0,x.concat=q0,x.cond=lv,x.conforms=dv,x.constant=gc,x.countBy=W1,x.create=oy,x.curry=df,x.curryRight=pf,x.debounce=gf,x.defaults=cy,x.defaultsDeep=uy,x.defer=v_,x.delay=m_,x.difference=z0,x.differenceBy=H0,x.differenceWith=B0,x.drop=K0,x.dropRight=V0,x.dropRightWhile=k0,x.dropWhile=G0,x.fill=W0,x.filter=J1,x.flatMap=Z1,x.flatMapDeep=e_,x.flatMapDepth=t_,x.flatten=rf,x.flattenDeep=Y0,x.flattenDepth=J0,x.flip=b_,x.flow=gv,x.flowRight=_v,x.fromPairs=X0,x.functions=_y,x.functionsIn=yy,x.groupBy=r_,x.initial=Z0,x.intersection=e1,x.intersectionBy=t1,x.intersectionWith=r1,x.invert=my,x.invertBy=by,x.invokeMap=i_,x.iteratee=_c,x.keyBy=s_,x.keys=Vt,x.keysIn=_r,x.map=ba,x.mapKeys=Ey,x.mapValues=Sy,x.matches=yv,x.matchesProperty=vv,x.memoize=Ea,x.merge=Dy,x.mergeWith=Of,x.method=mv,x.methodOf=bv,x.mixin=yc,x.negate=Sa,x.nthArg=Ev,x.omit=Oy,x.omitBy=Iy,x.once=w_,x.orderBy=a_,x.over=Sv,x.overArgs=E_,x.overEvery=Dv,x.overSome=Ov,x.partial=uc,x.partialRight=_f,x.partition=o_,x.pick=xy,x.pickBy=If,x.property=Rf,x.propertyOf=Iv,x.pull=a1,x.pullAll=sf,x.pullAllBy=o1,x.pullAllWith=c1,x.pullAt=u1,x.range=xv,x.rangeRight=Av,x.rearg=S_,x.reject=h_,x.remove=h1,x.rest=D_,x.reverse=ac,x.sampleSize=l_,x.set=Cy,x.setWith=Py,x.shuffle=d_,x.slice=f1,x.sortBy=__,x.sortedUniq=v1,x.sortedUniqBy=m1,x.split=Zy,x.spread=O_,x.tail=b1,x.take=w1,x.takeRight=E1,x.takeRightWhile=S1,x.takeWhile=D1,x.tap=M1,x.throttle=I_,x.thru=ma,x.toArray=wf,x.toPairs=xf,x.toPairsIn=Af,x.toPath=Rv,x.toPlainObject=Sf,x.transform=Ty,x.unary=x_,x.union=O1,x.unionBy=I1,x.unionWith=x1,x.uniq=A1,x.uniqBy=C1,x.uniqWith=P1,x.unset=Ny,x.unzip=oc,x.unzipWith=af,x.update=Ry,x.updateWith=Uy,x.values=Oi,x.valuesIn=Fy,x.without=T1,x.words=Tf,x.wrap=A_,x.xor=N1,x.xorBy=R1,x.xorWith=U1,x.zip=F1,x.zipObject=j1,x.zipObjectDeep=$1,x.zipWith=L1,x.entries=xf,x.entriesIn=Af,x.extend=Df,x.extendWith=Ia,yc(x,x),x.add=Fv,x.attempt=Nf,x.camelCase=My,x.capitalize=Cf,x.ceil=jv,x.clamp=jy,x.clone=P_,x.cloneDeep=N_,x.cloneDeepWith=R_,x.cloneWith=T_,x.conformsTo=U_,x.deburr=Pf,x.defaultTo=pv,x.divide=$v,x.endsWith=qy,x.eq=Kr,x.escape=zy,x.escapeRegExp=Hy,x.every=Y1,x.find=X1,x.findIndex=ef,x.findKey=hy,x.findLast=Q1,x.findLastIndex=tf,x.findLastKey=fy,x.floor=Lv,x.forEach=cf,x.forEachRight=uf,x.forIn=ly,x.forInRight=dy,x.forOwn=py,x.forOwnRight=gy,x.get=lc,x.gt=F_,x.gte=j_,x.has=vy,x.hasIn=dc,x.head=nf,x.identity=yr,x.includes=n_,x.indexOf=Q0,x.inRange=$y,x.invoke=wy,x.isArguments=kn,x.isArray=Ne,x.isArrayBuffer=$_,x.isArrayLike=gr,x.isArrayLikeObject=Nt,x.isBoolean=L_,x.isBuffer=In,x.isDate=M_,x.isElement=q_,x.isEmpty=z_,x.isEqual=H_,x.isEqualWith=B_,x.isError=hc,x.isFinite=K_,x.isFunction=ln,x.isInteger=yf,x.isLength=Da,x.isMap=vf,x.isMatch=V_,x.isMatchWith=k_,x.isNaN=G_,x.isNative=W_,x.isNil=J_,x.isNull=Y_,x.isNumber=mf,x.isObject=Et,x.isObjectLike=Ct,x.isPlainObject=ts,x.isRegExp=fc,x.isSafeInteger=X_,x.isSet=bf,x.isString=Oa,x.isSymbol=Sr,x.isTypedArray=Di,x.isUndefined=Q_,x.isWeakMap=Z_,x.isWeakSet=ey,x.join=n1,x.kebabCase=By,x.last=Fr,x.lastIndexOf=i1,x.lowerCase=Ky,x.lowerFirst=Vy,x.lt=ty,x.lte=ry,x.max=Mv,x.maxBy=qv,x.mean=zv,x.meanBy=Hv,x.min=Bv,x.minBy=Kv,x.stubArray=mc,x.stubFalse=bc,x.stubObject=Cv,x.stubString=Pv,x.stubTrue=Tv,x.multiply=Vv,x.nth=s1,x.noConflict=wv,x.noop=vc,x.now=wa,x.pad=ky,x.padEnd=Gy,x.padStart=Wy,x.parseInt=Yy,x.random=Ly,x.reduce=c_,x.reduceRight=u_,x.repeat=Jy,x.replace=Xy,x.result=Ay,x.round=kv,x.runInContext=k,x.sample=f_,x.size=p_,x.snakeCase=Qy,x.some=g_,x.sortedIndex=l1,x.sortedIndexBy=d1,x.sortedIndexOf=p1,x.sortedLastIndex=g1,x.sortedLastIndexBy=_1,x.sortedLastIndexOf=y1,x.startCase=ev,x.startsWith=tv,x.subtract=Gv,x.sum=Wv,x.sumBy=Yv,x.template=rv,x.times=Nv,x.toFinite=dn,x.toInteger=Le,x.toLength=Ef,x.toLower=nv,x.toNumber=jr,x.toSafeInteger=ny,x.toString=nt,x.toUpper=iv,x.trim=sv,x.trimEnd=av,x.trimStart=ov,x.truncate=cv,x.unescape=uv,x.uniqueId=Uv,x.upperCase=hv,x.upperFirst=pc,x.each=cf,x.eachRight=uf,x.first=nf,yc(x,function(){var e={};return Jr(x,function(n,a){it.call(x.prototype,a)||(e[a]=n)}),e}(),{chain:!1}),x.VERSION=s,Pr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){x[e].placeholder=x}),Pr(["drop","take"],function(e,n){Ye.prototype[e]=function(a){a=a===r?1:Bt(Le(a),0);var u=this.__filtered__&&!n?new Ye(this):this.clone();return u.__filtered__?u.__takeCount__=Qt(a,u.__takeCount__):u.__views__.push({size:Qt(a,te),type:e+(u.__dir__<0?"Right":"")}),u},Ye.prototype[e+"Right"]=function(a){return this.reverse()[e](a).reverse()}}),Pr(["filter","map","takeWhile"],function(e,n){var a=n+1,u=a==E||a==$;Ye.prototype[e]=function(m){var A=this.clone();return A.__iteratees__.push({iteratee:be(m,3),type:a}),A.__filtered__=A.__filtered__||u,A}}),Pr(["head","last"],function(e,n){var a="take"+(n?"Right":"");Ye.prototype[e]=function(){return this[a](1).value()[0]}}),Pr(["initial","tail"],function(e,n){var a="drop"+(n?"":"Right");Ye.prototype[e]=function(){return this.__filtered__?new Ye(this):this[a](1)}}),Ye.prototype.compact=function(){return this.filter(yr)},Ye.prototype.find=function(e){return this.filter(e).head()},Ye.prototype.findLast=function(e){return this.reverse().find(e)},Ye.prototype.invokeMap=Ke(function(e,n){return typeof e=="function"?new Ye(this):this.map(function(a){return Yi(a,e,n)})}),Ye.prototype.reject=function(e){return this.filter(Sa(be(e)))},Ye.prototype.slice=function(e,n){e=Le(e);var a=this;return a.__filtered__&&(e>0||n<0)?new Ye(a):(e<0?a=a.takeRight(-e):e&&(a=a.drop(e)),n!==r&&(n=Le(n),a=n<0?a.dropRight(-n):a.take(n-e)),a)},Ye.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ye.prototype.toArray=function(){return this.take(te)},Jr(Ye.prototype,function(e,n){var a=/^(?:filter|find|map|reject)|While$/.test(n),u=/^(?:head|last)$/.test(n),m=x[u?"take"+(n=="last"?"Right":""):n],A=u||/^find/.test(n);m&&(x.prototype[n]=function(){var F=this.__wrapped__,q=u?[1]:arguments,G=F instanceof Ye,se=q[0],oe=G||Ne(F),ue=function(Ge){var Qe=m.apply(x,mn([Ge],q));return u&&le?Qe[0]:Qe};oe&&a&&typeof se=="function"&&se.length!=1&&(G=oe=!1);var le=this.__chain__,ve=!!this.__actions__.length,we=A&&!le,ze=G&&!ve;if(!A&&oe){F=ze?F:new Ye(this);var Ee=e.apply(F,q);return Ee.__actions__.push({func:ma,args:[ue],thisArg:r}),new Nr(Ee,le)}return we&&ze?e.apply(this,q):(Ee=this.thru(ue),we?u?Ee.value()[0]:Ee.value():Ee)})}),Pr(["pop","push","shift","sort","splice","unshift"],function(e){var n=Vs[e],a=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",u=/^(?:pop|shift)$/.test(e);x.prototype[e]=function(){var m=arguments;if(u&&!this.__chain__){var A=this.value();return n.apply(Ne(A)?A:[],m)}return this[a](function(F){return n.apply(Ne(F)?F:[],m)})}}),Jr(Ye.prototype,function(e,n){var a=x[n];if(a){var u=a.name+"";it.call(mi,u)||(mi[u]=[]),mi[u].push({name:n,func:a})}}),mi[la(r,re).name]=[{name:"wrapper",func:r}],Ye.prototype.clone=ug,Ye.prototype.reverse=hg,Ye.prototype.value=fg,x.prototype.at=q1,x.prototype.chain=z1,x.prototype.commit=H1,x.prototype.next=B1,x.prototype.plant=V1,x.prototype.reverse=k1,x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=G1,x.prototype.first=x.prototype.head,Hi&&(x.prototype[Hi]=K1),x},_i=Hp();Tt?((Tt.exports=_i)._=_i,ct._=_i):Xe._=_i}).call(ls)})(tu,tu.exports);var VD=Object.defineProperty,kD=Object.defineProperties,GD=Object.getOwnPropertyDescriptors,td=Object.getOwnPropertySymbols,WD=Object.prototype.hasOwnProperty,YD=Object.prototype.propertyIsEnumerable,rd=(i,t,r)=>t in i?VD(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Aa=(i,t)=>{for(var r in t||(t={}))WD.call(t,r)&&rd(i,r,t[r]);if(td)for(var r of td(t))YD.call(t,r)&&rd(i,r,t[r]);return i},JD=(i,t)=>kD(i,GD(t));function Mr(i,t,r){let s;const o=ru(i);return t.rpcMap&&(s=t.rpcMap[o]),s||(s=`${KD}?chainId=eip155:${o}&projectId=${r}`),s}function ru(i){return i.includes("eip155")?Number(i.split(":")[1]):Number(i)}function XD(i,t){if(!t.includes(i))throw new Error(`Chain '${i}' not approved. Please use one of the following: ${t.toString()}`)}function QD(i){return i.map(t=>`${t.split(":")[0]}:${t.split(":")[1]}`)}function ZD(i,t){const r=Object.keys(t.namespaces).filter(o=>o.includes(i));if(!r.length)return[];const s=[];return r.forEach(o=>{const d=t.namespaces[o].accounts;s.push(...d)}),s}function e2(i,t={}){const r=nd(i),s=nd(t);return tu.exports.merge(r,s)}function nd(i){var t,r,s,o;const d={};if(!qD(i))return d;for(const[O,y]of Object.entries(i)){const I=vp(O)?[O]:y.chains,N=y.methods||[],P=y.events||[],U=y.rpcMap||{},K=Na(O);d[K]=JD(Aa(Aa({},d[K]),y),{chains:$c(I,(t=d[K])==null?void 0:t.chains),methods:$c(N,(r=d[K])==null?void 0:r.methods),events:$c(P,(s=d[K])==null?void 0:s.events),rpcMap:Aa(Aa({},U),(o=d[K])==null?void 0:o.rpcMap)})}return d}const si=(i,t)=>{const r=s=>{s.request!==t.request||s.topic!==t.topic||(i.events.removeListener("session_request_sent",r),t2(t,i.core.storage))};i.on("session_request_sent",r)};async function t2(i,t){try{const r=await t.getItem("WALLETCONNECT_DEEPLINK_CHOICE");if(!r)return;const s=typeof r=="string"?JSON.parse(r):r,o=s?.href;if(typeof o!="string")return;o.endsWith("/")&&o.slice(0,-1);const d=`${o}/wc?requestId=${i.id}&sessionTopic=${i.topic}`,O=$D();O===Ci.browser?window.open(d,"_self","noreferrer noopener"):O===Ci.reactNative&&await require("react-native").Linking.openURL(d)}catch(r){console.error(r)}}class r2{constructor(t){this.name="polkadot",this.namespace=t.namespace,this.events=t.events,this.client=t.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?(si(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(this.chainId=t,!this.httpProviders[t]){const s=r||Mr(`${this.name}:${t}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.events.emit(Nn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||Mr(t,this.namespace);return typeof s>"u"?void 0:new Pn(new Zn(s))}}class n2{constructor(t){this.name="eip155",this.namespace=t.namespace,this.client=t.client,this.events=t.events,this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(t){var r;switch(t.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return this.handleSwitchChain(t.request.params?(r=t.request.params[0])==null?void 0:r.chainId:"0x0"),null;case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(t.request.method)?(si(this.client,t),await this.client.request(t)):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,r){const s=ru(t);if(!this.httpProviders[s]){const o=r||Mr(`${this.name}:${s}`,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${s}`);this.setHttpProvider(s,o)}this.chainId=s,this.events.emit(Nn.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}createHttpProvider(t,r){const s=r||Mr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Pn(new Zn(s))}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;const o=ru(r);t[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const t=this.chainId,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}handleSwitchChain(t){const r=parseInt(t,16),s=`${this.name}:${r}`;XD(s,this.namespace.chains),this.setDefaultChain(`${r}`)}}class i2{constructor(t){this.name="solana",this.namespace=t.namespace,this.events=t.events,this.client=t.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?(si(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(!this.httpProviders[t]){const s=r||Mr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.chainId=t,this.events.emit(Nn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||Mr(t,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Pn(new Zn(s))}}class s2{constructor(t){this.name="cosmos",this.namespace=t.namespace,this.events=t.events,this.client=t.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?(si(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(this.chainId=t,!this.httpProviders[t]){const s=r||Mr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.events.emit(Nn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||Mr(t,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Pn(new Zn(s))}}class a2{constructor(t){this.name="cip34",this.namespace=t.namespace,this.events=t.events,this.client=t.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?(si(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(this.chainId=t,!this.httpProviders[t]){const s=r||this.getCardanoRPCUrl(t);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.events.emit(Nn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{const s=this.getCardanoRPCUrl(r);t[r]=this.createHttpProvider(r,s)}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}getCardanoRPCUrl(t){const r=this.namespace.rpcMap;if(r)return r[t]}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||this.getCardanoRPCUrl(t);return typeof s>"u"?void 0:new Pn(new Zn(s))}}class o2{constructor(t){this.name="elrond",this.namespace=t.namespace,this.events=t.events,this.client=t.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?(si(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(!this.httpProviders[t]){const s=r||Mr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.chainId=t,this.events.emit(Nn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||Mr(t,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Pn(new Zn(s))}}class c2{constructor(t){this.name="multiversx",this.namespace=t.namespace,this.events=t.events,this.client=t.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?(si(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(!this.httpProviders[t]){const s=r||Mr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.chainId=t,this.events.emit(Nn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||Mr(t,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Pn(new Zn(s))}}var u2=Object.defineProperty,h2=Object.defineProperties,f2=Object.getOwnPropertyDescriptors,id=Object.getOwnPropertySymbols,l2=Object.prototype.hasOwnProperty,d2=Object.prototype.propertyIsEnumerable,sd=(i,t,r)=>t in i?u2(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Ca=(i,t)=>{for(var r in t||(t={}))l2.call(t,r)&&sd(i,r,t[r]);if(id)for(var r of id(t))d2.call(t,r)&&sd(i,r,t[r]);return i},Lc=(i,t)=>h2(i,f2(t));class Ru{constructor(t){this.events=new Ir,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.providerOpts=t,this.logger=typeof t?.logger<"u"&&typeof t?.logger!="string"?t.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:t?.logger||Zl}))}static async init(t){const r=new Ru(t);return await r.initialize(),r}async request(t,r){const[s,o]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Ca({},t),chainId:`${s}:${o}`,topic:this.session.topic})}sendAsync(t,r,s){this.request(t,s).then(o=>r(null,o)).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(t=this.session)==null?void 0:t.topic,reason:Ql("USER_DISCONNECTED")}),await this.cleanup()}async connect(t){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(t),await this.cleanupPendingPairings(),!t.skipPairing)return await this.pair(t.pairingTopic)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}removeListener(t,r){this.events.removeListener(t,r)}off(t,r){this.events.off(t,r)}get isWalletConnect(){return!0}async pair(t){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:o}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await o().then(d=>{this.session=d}).catch(d=>{if(d.message!==pp)throw d;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(t,r){try{const[s,o]=this.validateChain(t);this.getProvider(s).setDefaultChain(o,r)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(t={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(MD(r)){for(const s of r)t.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const t=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[t]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await wD.init({logger:this.providerOpts.logger||Zl,relayUrl:this.providerOpts.relayUrl||zD,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");[...new Set(Object.keys(this.session.namespaces).map(t=>Na(t)))].forEach(t=>{if(!this.session)return;const r=ZD(t,this.session),s=QD(r),o=e2(this.namespaces,this.optionalNamespaces),d=Lc(Ca({},o[t]),{accounts:r,chains:s});switch(t){case"eip155":this.rpcProviders[t]=new n2({client:this.client,namespace:d,events:this.events});break;case"solana":this.rpcProviders[t]=new i2({client:this.client,namespace:d,events:this.events});break;case"cosmos":this.rpcProviders[t]=new s2({client:this.client,namespace:d,events:this.events});break;case"polkadot":this.rpcProviders[t]=new r2({client:this.client,namespace:d,events:this.events});break;case"cip34":this.rpcProviders[t]=new a2({client:this.client,namespace:d,events:this.events});break;case"elrond":this.rpcProviders[t]=new o2({client:this.client,namespace:d,events:this.events});break;case"multiversx":this.rpcProviders[t]=new c2({client:this.client,namespace:d,events:this.events});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",t=>{this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{const{params:r}=t,{event:s}=r;s.name==="accountsChanged"?this.events.emit("accountsChanged",s.data):s.name==="chainChanged"?this.onChainChanged(r.chainId):this.events.emit(s.name,s.data),this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:r})=>{var s;const{namespaces:o}=r,d=(s=this.client)==null?void 0:s.session.get(t);this.session=Lc(Ca({},d),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:r})}),this.client.on("session_delete",async t=>{await this.cleanup(),this.events.emit("session_delete",t),this.events.emit("disconnect",Lc(Ca({},Ql("USER_DISCONNECTED")),{data:t.topic}))}),this.on(Nn.DEFAULT_CHAIN_CHANGED,t=>{this.onChainChanged(t,!0)})}getProvider(t){if(!this.rpcProviders[t])throw new Error(`Provider not found: ${t}`);return this.rpcProviders[t]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(t=>{var r;this.getProvider(t).updateNamespace((r=this.session)==null?void 0:r.namespaces[t])})}setNamespaces(t){const{namespaces:r,optionalNamespaces:s,sessionProperties:o}=t;if(!r||!Object.keys(r).length)throw new Error("Namespaces must be not empty");this.namespaces=r,this.optionalNamespaces=s,this.sessionProperties=o,this.persist("namespaces",r),this.persist("optionalNamespaces",s)}validateChain(t){const[r,s]=t?.split(":")||["",""];if(r&&!Object.keys(this.namespaces).map(O=>Na(O)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&s)return[r,s];const o=Na(Object.keys(this.namespaces)[0]),d=this.rpcProviders[o].getDefaultChain();return[o,d]}async requestAccounts(){const[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}onChainChanged(t,r=!1){var s;const[o,d]=this.validateChain(t);r||this.getProvider(o).setDefaultChain(d),((s=this.namespaces[o])!=null?s:this.namespaces[`${o}:${d}`]).defaultChain=d,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",d)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0})}persist(t,r){this.client.core.storage.setItem(`${ed}/${t}`,r)}async getFromStore(t){return await this.client.core.storage.getItem(`${ed}/${t}`)}}const p2=Ru,g2="wc",_2="ethereum_provider",y2=`${g2}@${2}:${_2}:`,v2="https://rpc.walletconnect.com/v1/",nu=["eth_sendTransaction","personal_sign"],j2=["eth_accounts","eth_requestAccounts","eth_call","eth_getBalance","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],iu=["chainChanged","accountsChanged"],$2=["message","disconnect","connect"];var m2=Object.defineProperty,b2=Object.defineProperties,w2=Object.getOwnPropertyDescriptors,ad=Object.getOwnPropertySymbols,E2=Object.prototype.hasOwnProperty,S2=Object.prototype.propertyIsEnumerable,od=(i,t,r)=>t in i?m2(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Mc=(i,t)=>{for(var r in t||(t={}))E2.call(t,r)&&od(i,r,t[r]);if(ad)for(var r of ad(t))S2.call(t,r)&&od(i,r,t[r]);return i},cd=(i,t)=>b2(i,w2(t));function su(i){return Number(i[0].split(":")[1])}function qc(i){return`0x${i.toString(16)}`}function D2(i){const{chains:t,optionalChains:r,methods:s,optionalMethods:o,events:d,optionalEvents:O,rpcMap:y}=i;if(!Gc(t))throw new Error("Invalid chains");const I=t,N=s||nu,P=d||iu,U={[su(I)]:y[su(I)]},K={chains:I,methods:N,events:P,rpcMap:U},M=d?.filter(re=>!iu.includes(re)),L=s?.filter(re=>!nu.includes(re));if(!r&&!O&&!o&&!(M!=null&&M.length)&&!(L!=null&&L.length))return{required:K};const W=M?.length&&L?.length||!r,z={chains:[...new Set(W?I.concat(r||[]):r)],methods:[...new Set(N.concat(o||[]))],events:[...new Set(P.concat(O||[]))],rpcMap:y};return{required:K,optional:z}}class Uu{constructor(){this.events=new Ir.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=y2,this.on=(t,r)=>(this.events.on(t,r),this),this.once=(t,r)=>(this.events.once(t,r),this),this.removeListener=(t,r)=>(this.events.removeListener(t,r),this),this.off=(t,r)=>(this.events.off(t,r),this),this.parseAccount=t=>this.isCompatibleChainId(t)?this.parseAccountId(t).address:t,this.signer={},this.rpc={}}static async init(t){const r=new Uu;return await r.initialize(t),r}async request(t){return await this.signer.request(t,this.formatChainId(this.chainId))}sendAsync(t,r){this.signer.sendAsync(t,r,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(t);const{required:r,optional:s}=D2(this.rpc);try{const o=await new Promise(async(O,y)=>{var I;this.rpc.showQrModal&&((I=this.modal)==null||I.subscribeModal(N=>{!N.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),y(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(cd(Mc({namespaces:{[this.namespace]:r}},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:t?.pairingTopic})).then(N=>{O(N)}).catch(N=>{y(new Error(N.message))})});if(!o)return;this.setChainIds(this.rpc.chains);const d=ow(o.namespaces,[this.namespace]);this.setAccounts(d),this.events.emit("connect",{chainId:qc(this.chainId)})}catch(o){throw this.signer.logger.error(o),o}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",t=>{const{params:r}=t,{event:s}=r;s.name==="accountsChanged"?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):s.name==="chainChanged"?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",t)}),this.signer.on("chainChanged",t=>{const r=parseInt(t);this.chainId=r,this.events.emit("chainChanged",qc(this.chainId)),this.persist()}),this.signer.on("session_update",t=>{this.events.emit("session_update",t)}),this.signer.on("session_delete",t=>{this.reset(),this.events.emit("session_delete",t),this.events.emit("disconnect",cd(Mc({},uw("USER_DISCONNECTED")),{data:t.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",t=>{var r,s;this.rpc.showQrModal&&((r=this.modal)==null||r.closeModal(),(s=this.modal)==null||s.openModal({uri:t})),this.events.emit("display_uri",t)})}setHttpProvider(t){this.request({method:"wallet_switchEthereumChain",params:[{chainId:t.toString(16)}]})}isCompatibleChainId(t){return typeof t=="string"?t.startsWith(`${this.namespace}:`):!1}formatChainId(t){return`${this.namespace}:${t}`}parseChainId(t){return Number(t.split(":")[1])}setChainIds(t){const r=t.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",qc(this.chainId)),this.persist())}setChainId(t){if(this.isCompatibleChainId(t)){const r=this.parseChainId(t);this.chainId=r,this.setHttpProvider(r)}}parseAccountId(t){const[r,s,o]=t.split(":");return{chainId:`${r}:${s}`,address:o}}setAccounts(t){this.accounts=t.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(t){var r,s;return{chains:((r=t.chains)==null?void 0:r.map(o=>this.formatChainId(o)))||[`${this.namespace}:1`],optionalChains:t.optionalChains?t.optionalChains.map(o=>this.formatChainId(o)):void 0,methods:t?.methods||nu,events:t?.events||iu,optionalMethods:t?.optionalMethods||[],optionalEvents:t?.optionalEvents||[],rpcMap:t?.rpcMap||this.buildRpcMap(t.chains.concat(t.optionalChains||[]),t.projectId),showQrModal:Boolean(t?.showQrModal),qrModalOptions:(s=t?.qrModalOptions)!=null?s:void 0,projectId:t.projectId,metadata:t.metadata}}buildRpcMap(t,r){const s={};return t.forEach(o=>{s[o]=this.getRpcUrl(o,r)}),s}async initialize(t){if(this.rpc=this.getRpcConfig(t),this.chainId=su(this.rpc.chains),this.signer=await p2.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal)try{const{Web3Modal:r}=await Zv(()=>import("./ethereum-provider-b25bb000.js"),[]);this.modal=new r(Mc({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch{throw new Error("To use QR modal, please install @web3modal/standalone package")}}loadConnectOpts(t){if(!t)return;const{chains:r,optionalChains:s,rpcMap:o}=t;r&&Gc(r)&&(this.rpc.chains=r.map(d=>this.formatChainId(d)),r.forEach(d=>{this.rpc.rpcMap[d]=o?.[d]||this.getRpcUrl(d)})),s&&Gc(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s?.map(d=>this.formatChainId(d)),s.forEach(d=>{this.rpc.rpcMap[d]=o?.[d]||this.getRpcUrl(d)}))}getRpcUrl(t,r){var s;return((s=this.rpc.rpcMap)==null?void 0:s[t])||`${v2}?chainId=eip155:${t}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const t=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`);this.setChainIds(t?[this.formatChainId(t)]:this.session.namespaces[this.namespace].accounts),this.setAccounts(this.session.namespaces[this.namespace].accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(t){return typeof t=="string"||t instanceof String?[this.parseAccount(t)]:t.map(r=>this.parseAccount(r))}}const L2=Uu;export{L2 as EthereumProvider,$2 as OPTIONAL_EVENTS,j2 as OPTIONAL_METHODS,iu as REQUIRED_EVENTS,nu as REQUIRED_METHODS,Uu as default};
